function FN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var $i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function gV(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var jN={exports:{}},$g={},VN={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xd=Symbol.for("react.element"),yV=Symbol.for("react.portal"),vV=Symbol.for("react.fragment"),_V=Symbol.for("react.strict_mode"),wV=Symbol.for("react.profiler"),EV=Symbol.for("react.provider"),bV=Symbol.for("react.context"),TV=Symbol.for("react.forward_ref"),SV=Symbol.for("react.suspense"),xV=Symbol.for("react.memo"),IV=Symbol.for("react.lazy"),QI=Symbol.iterator;function RV(t){return t===null||typeof t!="object"?null:(t=QI&&t[QI]||t["@@iterator"],typeof t=="function"?t:null)}var UN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},BN=Object.assign,$N={};function Ac(t,e,n){this.props=t,this.context=e,this.refs=$N,this.updater=n||UN}Ac.prototype.isReactComponent={};Ac.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ac.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zN(){}zN.prototype=Ac.prototype;function iT(t,e,n){this.props=t,this.context=e,this.refs=$N,this.updater=n||UN}var sT=iT.prototype=new zN;sT.constructor=iT;BN(sT,Ac.prototype);sT.isPureReactComponent=!0;var YI=Array.isArray,HN=Object.prototype.hasOwnProperty,oT={current:null},qN={key:!0,ref:!0,__self:!0,__source:!0};function WN(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)HN.call(e,r)&&!qN.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Xd,type:t,key:s,ref:o,props:i,_owner:oT.current}}function CV(t,e){return{$$typeof:Xd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function aT(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xd}function AV(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var XI=/\/+/g;function Mv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?AV(""+t.key):e.toString(36)}function qp(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Xd:case yV:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Mv(o,0):r,YI(i)?(n="",t!=null&&(n=t.replace(XI,"$&/")+"/"),qp(i,e,n,"",function(u){return u})):i!=null&&(aT(i)&&(i=CV(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(XI,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",YI(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Mv(s,a);o+=qp(s,e,n,l,i)}else if(l=RV(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Mv(s,a++),o+=qp(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function dp(t,e,n){if(t==null)return t;var r=[],i=0;return qp(t,r,"","",function(s){return e.call(n,s,i++)}),r}function PV(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ir={current:null},Wp={transition:null},kV={ReactCurrentDispatcher:Ir,ReactCurrentBatchConfig:Wp,ReactCurrentOwner:oT};function KN(){throw Error("act(...) is not supported in production builds of React.")}ut.Children={map:dp,forEach:function(t,e,n){dp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return dp(t,function(){e++}),e},toArray:function(t){return dp(t,function(e){return e})||[]},only:function(t){if(!aT(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ut.Component=Ac;ut.Fragment=vV;ut.Profiler=wV;ut.PureComponent=iT;ut.StrictMode=_V;ut.Suspense=SV;ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kV;ut.act=KN;ut.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=BN({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=oT.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)HN.call(e,l)&&!qN.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Xd,type:t.type,key:i,ref:s,props:r,_owner:o}};ut.createContext=function(t){return t={$$typeof:bV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:EV,_context:t},t.Consumer=t};ut.createElement=WN;ut.createFactory=function(t){var e=WN.bind(null,t);return e.type=t,e};ut.createRef=function(){return{current:null}};ut.forwardRef=function(t){return{$$typeof:TV,render:t}};ut.isValidElement=aT;ut.lazy=function(t){return{$$typeof:IV,_payload:{_status:-1,_result:t},_init:PV}};ut.memo=function(t,e){return{$$typeof:xV,type:t,compare:e===void 0?null:e}};ut.startTransition=function(t){var e=Wp.transition;Wp.transition={};try{t()}finally{Wp.transition=e}};ut.unstable_act=KN;ut.useCallback=function(t,e){return Ir.current.useCallback(t,e)};ut.useContext=function(t){return Ir.current.useContext(t)};ut.useDebugValue=function(){};ut.useDeferredValue=function(t){return Ir.current.useDeferredValue(t)};ut.useEffect=function(t,e){return Ir.current.useEffect(t,e)};ut.useId=function(){return Ir.current.useId()};ut.useImperativeHandle=function(t,e,n){return Ir.current.useImperativeHandle(t,e,n)};ut.useInsertionEffect=function(t,e){return Ir.current.useInsertionEffect(t,e)};ut.useLayoutEffect=function(t,e){return Ir.current.useLayoutEffect(t,e)};ut.useMemo=function(t,e){return Ir.current.useMemo(t,e)};ut.useReducer=function(t,e,n){return Ir.current.useReducer(t,e,n)};ut.useRef=function(t){return Ir.current.useRef(t)};ut.useState=function(t){return Ir.current.useState(t)};ut.useSyncExternalStore=function(t,e,n){return Ir.current.useSyncExternalStore(t,e,n)};ut.useTransition=function(){return Ir.current.useTransition()};ut.version="18.3.1";VN.exports=ut;var O=VN.exports;const Pe=rT(O),Em=FN({__proto__:null,default:Pe},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OV=O,NV=Symbol.for("react.element"),DV=Symbol.for("react.fragment"),LV=Object.prototype.hasOwnProperty,MV=OV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FV={key:!0,ref:!0,__self:!0,__source:!0};function GN(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)LV.call(e,r)&&!FV.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:NV,type:t,key:s,ref:o,props:i,_owner:MV.current}}$g.Fragment=DV;$g.jsx=GN;$g.jsxs=GN;jN.exports=$g;var x=jN.exports,QN={exports:{}},si={},YN={exports:{}},XN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,Y){var ce=G.length;G.push(Y);e:for(;0<ce;){var ee=ce-1>>>1,$=G[ee];if(0<i($,Y))G[ee]=Y,G[ce]=$,ce=ee;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var Y=G[0],ce=G.pop();if(ce!==Y){G[0]=ce;e:for(var ee=0,$=G.length,K=$>>>1;ee<K;){var te=2*(ee+1)-1,Ee=G[te],Te=te+1,W=G[Te];if(0>i(Ee,ce))Te<$&&0>i(W,Ee)?(G[ee]=W,G[Te]=ce,ee=Te):(G[ee]=Ee,G[te]=ce,ee=te);else if(Te<$&&0>i(W,ce))G[ee]=W,G[Te]=ce,ee=Te;else break e}}return Y}function i(G,Y){var ce=G.sortIndex-Y.sortIndex;return ce!==0?ce:G.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],f=1,p=null,y=3,_=!1,E=!1,S=!1,I=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(G){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=G)r(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(u)}}function C(G){if(S=!1,v(G),!E)if(n(l)!==null)E=!0,pe(k);else{var Y=n(u);Y!==null&&X(C,Y.startTime-G)}}function k(G,Y){E=!1,S&&(S=!1,R(T),T=-1),_=!0;var ce=y;try{for(v(Y),p=n(l);p!==null&&(!(p.expirationTime>Y)||G&&!V());){var ee=p.callback;if(typeof ee=="function"){p.callback=null,y=p.priorityLevel;var $=ee(p.expirationTime<=Y);Y=t.unstable_now(),typeof $=="function"?p.callback=$:p===n(l)&&r(l),v(Y)}else r(l);p=n(l)}if(p!==null)var K=!0;else{var te=n(u);te!==null&&X(C,te.startTime-Y),K=!1}return K}finally{p=null,y=ce,_=!1}}var B=!1,D=null,T=-1,N=5,L=-1;function V(){return!(t.unstable_now()-L<N)}function j(){if(D!==null){var G=t.unstable_now();L=G;var Y=!0;try{Y=D(!0,G)}finally{Y?M():(B=!1,D=null)}}else B=!1}var M;if(typeof w=="function")M=function(){w(j)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,me=le.port2;le.port1.onmessage=j,M=function(){me.postMessage(null)}}else M=function(){I(j,0)};function pe(G){D=G,B||(B=!0,M())}function X(G,Y){T=I(function(){G(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){E||_||(E=!0,pe(k))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(G){switch(y){case 1:case 2:case 3:var Y=3;break;default:Y=y}var ce=y;y=Y;try{return G()}finally{y=ce}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,Y){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ce=y;y=G;try{return Y()}finally{y=ce}},t.unstable_scheduleCallback=function(G,Y,ce){var ee=t.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?ee+ce:ee):ce=ee,G){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ce+$,G={id:f++,callback:Y,priorityLevel:G,startTime:ce,expirationTime:$,sortIndex:-1},ce>ee?(G.sortIndex=ce,e(u,G),n(l)===null&&G===n(u)&&(S?(R(T),T=-1):S=!0,X(C,ce-ee))):(G.sortIndex=$,e(l,G),E||_||(E=!0,pe(k))),G},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(G){var Y=y;return function(){var ce=y;y=Y;try{return G.apply(this,arguments)}finally{y=ce}}}})(XN);YN.exports=XN;var jV=YN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VV=O,ii=jV;function ve(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var JN=new Set,pd={};function Vl(t,e){lc(t,e),lc(t+"Capture",e)}function lc(t,e){for(pd[t]=e,t=0;t<e.length;t++)JN.add(e[t])}var so=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nE=Object.prototype.hasOwnProperty,UV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,JI={},ZI={};function BV(t){return nE.call(ZI,t)?!0:nE.call(JI,t)?!1:UV.test(t)?ZI[t]=!0:(JI[t]=!0,!1)}function $V(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function zV(t,e,n,r){if(e===null||typeof e>"u"||$V(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Yn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Yn[t]=new Rr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Yn[e]=new Rr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Yn[t]=new Rr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Yn[t]=new Rr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Yn[t]=new Rr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Yn[t]=new Rr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Yn[t]=new Rr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Yn[t]=new Rr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Yn[t]=new Rr(t,5,!1,t.toLowerCase(),null,!1,!1)});var lT=/[\-:]([a-z])/g;function uT(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(lT,uT);Yn[e]=new Rr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(lT,uT);Yn[e]=new Rr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(lT,uT);Yn[e]=new Rr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Yn[t]=new Rr(t,1,!1,t.toLowerCase(),null,!1,!1)});Yn.xlinkHref=new Rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Yn[t]=new Rr(t,1,!1,t.toLowerCase(),null,!0,!0)});function cT(t,e,n,r){var i=Yn.hasOwnProperty(e)?Yn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(zV(e,n,i,r)&&(n=null),r||i===null?BV(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var _o=VV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hp=Symbol.for("react.element"),Ou=Symbol.for("react.portal"),Nu=Symbol.for("react.fragment"),fT=Symbol.for("react.strict_mode"),rE=Symbol.for("react.profiler"),ZN=Symbol.for("react.provider"),e4=Symbol.for("react.context"),dT=Symbol.for("react.forward_ref"),iE=Symbol.for("react.suspense"),sE=Symbol.for("react.suspense_list"),hT=Symbol.for("react.memo"),jo=Symbol.for("react.lazy"),t4=Symbol.for("react.offscreen"),eR=Symbol.iterator;function cf(t){return t===null||typeof t!="object"?null:(t=eR&&t[eR]||t["@@iterator"],typeof t=="function"?t:null)}var tn=Object.assign,Fv;function Pf(t){if(Fv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fv=e&&e[1]||""}return`
`+Fv+t}var jv=!1;function Vv(t,e){if(!t||jv)return"";jv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{jv=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Pf(t):""}function HV(t){switch(t.tag){case 5:return Pf(t.type);case 16:return Pf("Lazy");case 13:return Pf("Suspense");case 19:return Pf("SuspenseList");case 0:case 2:case 15:return t=Vv(t.type,!1),t;case 11:return t=Vv(t.type.render,!1),t;case 1:return t=Vv(t.type,!0),t;default:return""}}function oE(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Nu:return"Fragment";case Ou:return"Portal";case rE:return"Profiler";case fT:return"StrictMode";case iE:return"Suspense";case sE:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case e4:return(t.displayName||"Context")+".Consumer";case ZN:return(t._context.displayName||"Context")+".Provider";case dT:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case hT:return e=t.displayName||null,e!==null?e:oE(t.type)||"Memo";case jo:e=t._payload,t=t._init;try{return oE(t(e))}catch{}}return null}function qV(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oE(e);case 8:return e===fT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function da(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function n4(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function WV(t){var e=n4(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pp(t){t._valueTracker||(t._valueTracker=WV(t))}function r4(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=n4(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function bm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function aE(t,e){var n=e.checked;return tn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function tR(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=da(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function i4(t,e){e=e.checked,e!=null&&cT(t,"checked",e,!1)}function lE(t,e){i4(t,e);var n=da(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?uE(t,e.type,n):e.hasOwnProperty("defaultValue")&&uE(t,e.type,da(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function nR(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function uE(t,e,n){(e!=="number"||bm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var kf=Array.isArray;function Gu(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+da(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function cE(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ve(91));return tn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rR(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ve(92));if(kf(n)){if(1<n.length)throw Error(ve(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:da(n)}}function s4(t,e){var n=da(e.value),r=da(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function iR(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function o4(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fE(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?o4(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var mp,a4=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(mp=mp||document.createElement("div"),mp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function md(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Hf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KV=["Webkit","ms","Moz","O"];Object.keys(Hf).forEach(function(t){KV.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Hf[e]=Hf[t]})});function l4(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Hf.hasOwnProperty(t)&&Hf[t]?(""+e).trim():e+"px"}function u4(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=l4(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var GV=tn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dE(t,e){if(e){if(GV[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ve(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ve(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ve(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ve(62))}}function hE(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pE=null;function pT(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mE=null,Qu=null,Yu=null;function sR(t){if(t=eh(t)){if(typeof mE!="function")throw Error(ve(280));var e=t.stateNode;e&&(e=Kg(e),mE(t.stateNode,t.type,e))}}function c4(t){Qu?Yu?Yu.push(t):Yu=[t]:Qu=t}function f4(){if(Qu){var t=Qu,e=Yu;if(Yu=Qu=null,sR(t),e)for(t=0;t<e.length;t++)sR(e[t])}}function d4(t,e){return t(e)}function h4(){}var Uv=!1;function p4(t,e,n){if(Uv)return t(e,n);Uv=!0;try{return d4(t,e,n)}finally{Uv=!1,(Qu!==null||Yu!==null)&&(h4(),f4())}}function gd(t,e){var n=t.stateNode;if(n===null)return null;var r=Kg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ve(231,e,typeof n));return n}var gE=!1;if(so)try{var ff={};Object.defineProperty(ff,"passive",{get:function(){gE=!0}}),window.addEventListener("test",ff,ff),window.removeEventListener("test",ff,ff)}catch{gE=!1}function QV(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var qf=!1,Tm=null,Sm=!1,yE=null,YV={onError:function(t){qf=!0,Tm=t}};function XV(t,e,n,r,i,s,o,a,l){qf=!1,Tm=null,QV.apply(YV,arguments)}function JV(t,e,n,r,i,s,o,a,l){if(XV.apply(this,arguments),qf){if(qf){var u=Tm;qf=!1,Tm=null}else throw Error(ve(198));Sm||(Sm=!0,yE=u)}}function Ul(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function m4(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function oR(t){if(Ul(t)!==t)throw Error(ve(188))}function ZV(t){var e=t.alternate;if(!e){if(e=Ul(t),e===null)throw Error(ve(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return oR(i),t;if(s===r)return oR(i),e;s=s.sibling}throw Error(ve(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ve(189))}}if(n.alternate!==r)throw Error(ve(190))}if(n.tag!==3)throw Error(ve(188));return n.stateNode.current===n?t:e}function g4(t){return t=ZV(t),t!==null?y4(t):null}function y4(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=y4(t);if(e!==null)return e;t=t.sibling}return null}var v4=ii.unstable_scheduleCallback,aR=ii.unstable_cancelCallback,e7=ii.unstable_shouldYield,t7=ii.unstable_requestPaint,dn=ii.unstable_now,n7=ii.unstable_getCurrentPriorityLevel,mT=ii.unstable_ImmediatePriority,_4=ii.unstable_UserBlockingPriority,xm=ii.unstable_NormalPriority,r7=ii.unstable_LowPriority,w4=ii.unstable_IdlePriority,zg=null,bs=null;function i7(t){if(bs&&typeof bs.onCommitFiberRoot=="function")try{bs.onCommitFiberRoot(zg,t,void 0,(t.current.flags&128)===128)}catch{}}var qi=Math.clz32?Math.clz32:a7,s7=Math.log,o7=Math.LN2;function a7(t){return t>>>=0,t===0?32:31-(s7(t)/o7|0)|0}var gp=64,yp=4194304;function Of(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Im(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Of(a):(s&=o,s!==0&&(r=Of(s)))}else o=n&~i,o!==0?r=Of(o):s!==0&&(r=Of(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-qi(e),i=1<<n,r|=t[n],e&=~i;return r}function l7(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function u7(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-qi(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=l7(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function vE(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function E4(){var t=gp;return gp<<=1,!(gp&4194240)&&(gp=64),t}function Bv(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qi(e),t[e]=n}function c7(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-qi(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function gT(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-qi(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var At=0;function b4(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var T4,yT,S4,x4,I4,_E=!1,vp=[],Zo=null,ea=null,ta=null,yd=new Map,vd=new Map,Uo=[],f7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lR(t,e){switch(t){case"focusin":case"focusout":Zo=null;break;case"dragenter":case"dragleave":ea=null;break;case"mouseover":case"mouseout":ta=null;break;case"pointerover":case"pointerout":yd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vd.delete(e.pointerId)}}function df(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=eh(e),e!==null&&yT(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function d7(t,e,n,r,i){switch(e){case"focusin":return Zo=df(Zo,t,e,n,r,i),!0;case"dragenter":return ea=df(ea,t,e,n,r,i),!0;case"mouseover":return ta=df(ta,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return yd.set(s,df(yd.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,vd.set(s,df(vd.get(s)||null,t,e,n,r,i)),!0}return!1}function R4(t){var e=rl(t.target);if(e!==null){var n=Ul(e);if(n!==null){if(e=n.tag,e===13){if(e=m4(n),e!==null){t.blockedOn=e,I4(t.priority,function(){S4(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wE(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);pE=r,n.target.dispatchEvent(r),pE=null}else return e=eh(n),e!==null&&yT(e),t.blockedOn=n,!1;e.shift()}return!0}function uR(t,e,n){Kp(t)&&n.delete(e)}function h7(){_E=!1,Zo!==null&&Kp(Zo)&&(Zo=null),ea!==null&&Kp(ea)&&(ea=null),ta!==null&&Kp(ta)&&(ta=null),yd.forEach(uR),vd.forEach(uR)}function hf(t,e){t.blockedOn===e&&(t.blockedOn=null,_E||(_E=!0,ii.unstable_scheduleCallback(ii.unstable_NormalPriority,h7)))}function _d(t){function e(i){return hf(i,t)}if(0<vp.length){hf(vp[0],t);for(var n=1;n<vp.length;n++){var r=vp[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Zo!==null&&hf(Zo,t),ea!==null&&hf(ea,t),ta!==null&&hf(ta,t),yd.forEach(e),vd.forEach(e),n=0;n<Uo.length;n++)r=Uo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Uo.length&&(n=Uo[0],n.blockedOn===null);)R4(n),n.blockedOn===null&&Uo.shift()}var Xu=_o.ReactCurrentBatchConfig,Rm=!0;function p7(t,e,n,r){var i=At,s=Xu.transition;Xu.transition=null;try{At=1,vT(t,e,n,r)}finally{At=i,Xu.transition=s}}function m7(t,e,n,r){var i=At,s=Xu.transition;Xu.transition=null;try{At=4,vT(t,e,n,r)}finally{At=i,Xu.transition=s}}function vT(t,e,n,r){if(Rm){var i=wE(t,e,n,r);if(i===null)Xv(t,e,r,Cm,n),lR(t,r);else if(d7(i,t,e,n,r))r.stopPropagation();else if(lR(t,r),e&4&&-1<f7.indexOf(t)){for(;i!==null;){var s=eh(i);if(s!==null&&T4(s),s=wE(t,e,n,r),s===null&&Xv(t,e,r,Cm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Xv(t,e,r,null,n)}}var Cm=null;function wE(t,e,n,r){if(Cm=null,t=pT(r),t=rl(t),t!==null)if(e=Ul(t),e===null)t=null;else if(n=e.tag,n===13){if(t=m4(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Cm=t,null}function C4(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(n7()){case mT:return 1;case _4:return 4;case xm:case r7:return 16;case w4:return 536870912;default:return 16}default:return 16}}var Ko=null,_T=null,Gp=null;function A4(){if(Gp)return Gp;var t,e=_T,n=e.length,r,i="value"in Ko?Ko.value:Ko.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Gp=i.slice(t,1<r?1-r:void 0)}function Qp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _p(){return!0}function cR(){return!1}function oi(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?_p:cR,this.isPropagationStopped=cR,this}return tn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_p)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_p)},persist:function(){},isPersistent:_p}),e}var Pc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wT=oi(Pc),Zd=tn({},Pc,{view:0,detail:0}),g7=oi(Zd),$v,zv,pf,Hg=tn({},Zd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ET,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pf&&(pf&&t.type==="mousemove"?($v=t.screenX-pf.screenX,zv=t.screenY-pf.screenY):zv=$v=0,pf=t),$v)},movementY:function(t){return"movementY"in t?t.movementY:zv}}),fR=oi(Hg),y7=tn({},Hg,{dataTransfer:0}),v7=oi(y7),_7=tn({},Zd,{relatedTarget:0}),Hv=oi(_7),w7=tn({},Pc,{animationName:0,elapsedTime:0,pseudoElement:0}),E7=oi(w7),b7=tn({},Pc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),T7=oi(b7),S7=tn({},Pc,{data:0}),dR=oi(S7),x7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},I7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},R7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function C7(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=R7[t])?!!e[t]:!1}function ET(){return C7}var A7=tn({},Zd,{key:function(t){if(t.key){var e=x7[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?I7[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ET,charCode:function(t){return t.type==="keypress"?Qp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),P7=oi(A7),k7=tn({},Hg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hR=oi(k7),O7=tn({},Zd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ET}),N7=oi(O7),D7=tn({},Pc,{propertyName:0,elapsedTime:0,pseudoElement:0}),L7=oi(D7),M7=tn({},Hg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),F7=oi(M7),j7=[9,13,27,32],bT=so&&"CompositionEvent"in window,Wf=null;so&&"documentMode"in document&&(Wf=document.documentMode);var V7=so&&"TextEvent"in window&&!Wf,P4=so&&(!bT||Wf&&8<Wf&&11>=Wf),pR=" ",mR=!1;function k4(t,e){switch(t){case"keyup":return j7.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function O4(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Du=!1;function U7(t,e){switch(t){case"compositionend":return O4(e);case"keypress":return e.which!==32?null:(mR=!0,pR);case"textInput":return t=e.data,t===pR&&mR?null:t;default:return null}}function B7(t,e){if(Du)return t==="compositionend"||!bT&&k4(t,e)?(t=A4(),Gp=_T=Ko=null,Du=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return P4&&e.locale!=="ko"?null:e.data;default:return null}}var $7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$7[t.type]:e==="textarea"}function N4(t,e,n,r){c4(r),e=Am(e,"onChange"),0<e.length&&(n=new wT("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Kf=null,wd=null;function z7(t){H4(t,0)}function qg(t){var e=Fu(t);if(r4(e))return t}function H7(t,e){if(t==="change")return e}var D4=!1;if(so){var qv;if(so){var Wv="oninput"in document;if(!Wv){var yR=document.createElement("div");yR.setAttribute("oninput","return;"),Wv=typeof yR.oninput=="function"}qv=Wv}else qv=!1;D4=qv&&(!document.documentMode||9<document.documentMode)}function vR(){Kf&&(Kf.detachEvent("onpropertychange",L4),wd=Kf=null)}function L4(t){if(t.propertyName==="value"&&qg(wd)){var e=[];N4(e,wd,t,pT(t)),p4(z7,e)}}function q7(t,e,n){t==="focusin"?(vR(),Kf=e,wd=n,Kf.attachEvent("onpropertychange",L4)):t==="focusout"&&vR()}function W7(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qg(wd)}function K7(t,e){if(t==="click")return qg(e)}function G7(t,e){if(t==="input"||t==="change")return qg(e)}function Q7(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qi=typeof Object.is=="function"?Object.is:Q7;function Ed(t,e){if(Qi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!nE.call(e,i)||!Qi(t[i],e[i]))return!1}return!0}function _R(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wR(t,e){var n=_R(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_R(n)}}function M4(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?M4(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function F4(){for(var t=window,e=bm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=bm(t.document)}return e}function TT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Y7(t){var e=F4(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&M4(n.ownerDocument.documentElement,n)){if(r!==null&&TT(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=wR(n,s);var o=wR(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var X7=so&&"documentMode"in document&&11>=document.documentMode,Lu=null,EE=null,Gf=null,bE=!1;function ER(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bE||Lu==null||Lu!==bm(r)||(r=Lu,"selectionStart"in r&&TT(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gf&&Ed(Gf,r)||(Gf=r,r=Am(EE,"onSelect"),0<r.length&&(e=new wT("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Lu)))}function wp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Mu={animationend:wp("Animation","AnimationEnd"),animationiteration:wp("Animation","AnimationIteration"),animationstart:wp("Animation","AnimationStart"),transitionend:wp("Transition","TransitionEnd")},Kv={},j4={};so&&(j4=document.createElement("div").style,"AnimationEvent"in window||(delete Mu.animationend.animation,delete Mu.animationiteration.animation,delete Mu.animationstart.animation),"TransitionEvent"in window||delete Mu.transitionend.transition);function Wg(t){if(Kv[t])return Kv[t];if(!Mu[t])return t;var e=Mu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in j4)return Kv[t]=e[n];return t}var V4=Wg("animationend"),U4=Wg("animationiteration"),B4=Wg("animationstart"),$4=Wg("transitionend"),z4=new Map,bR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ba(t,e){z4.set(t,e),Vl(e,[t])}for(var Gv=0;Gv<bR.length;Gv++){var Qv=bR[Gv],J7=Qv.toLowerCase(),Z7=Qv[0].toUpperCase()+Qv.slice(1);ba(J7,"on"+Z7)}ba(V4,"onAnimationEnd");ba(U4,"onAnimationIteration");ba(B4,"onAnimationStart");ba("dblclick","onDoubleClick");ba("focusin","onFocus");ba("focusout","onBlur");ba($4,"onTransitionEnd");lc("onMouseEnter",["mouseout","mouseover"]);lc("onMouseLeave",["mouseout","mouseover"]);lc("onPointerEnter",["pointerout","pointerover"]);lc("onPointerLeave",["pointerout","pointerover"]);Vl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eU=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nf));function TR(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,JV(r,e,void 0,t),t.currentTarget=null}function H4(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;TR(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;TR(i,a,u),s=l}}}if(Sm)throw t=yE,Sm=!1,yE=null,t}function Vt(t,e){var n=e[RE];n===void 0&&(n=e[RE]=new Set);var r=t+"__bubble";n.has(r)||(q4(e,t,2,!1),n.add(r))}function Yv(t,e,n){var r=0;e&&(r|=4),q4(n,t,r,e)}var Ep="_reactListening"+Math.random().toString(36).slice(2);function bd(t){if(!t[Ep]){t[Ep]=!0,JN.forEach(function(n){n!=="selectionchange"&&(eU.has(n)||Yv(n,!1,t),Yv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ep]||(e[Ep]=!0,Yv("selectionchange",!1,e))}}function q4(t,e,n,r){switch(C4(e)){case 1:var i=p7;break;case 4:i=m7;break;default:i=vT}n=i.bind(null,e,n,t),i=void 0,!gE||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Xv(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=rl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}p4(function(){var u=s,f=pT(n),p=[];e:{var y=z4.get(t);if(y!==void 0){var _=wT,E=t;switch(t){case"keypress":if(Qp(n)===0)break e;case"keydown":case"keyup":_=P7;break;case"focusin":E="focus",_=Hv;break;case"focusout":E="blur",_=Hv;break;case"beforeblur":case"afterblur":_=Hv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=fR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=v7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=N7;break;case V4:case U4:case B4:_=E7;break;case $4:_=L7;break;case"scroll":_=g7;break;case"wheel":_=F7;break;case"copy":case"cut":case"paste":_=T7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=hR}var S=(e&4)!==0,I=!S&&t==="scroll",R=S?y!==null?y+"Capture":null:y;S=[];for(var w=u,v;w!==null;){v=w;var C=v.stateNode;if(v.tag===5&&C!==null&&(v=C,R!==null&&(C=gd(w,R),C!=null&&S.push(Td(w,C,v)))),I)break;w=w.return}0<S.length&&(y=new _(y,E,null,n,f),p.push({event:y,listeners:S}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",y&&n!==pE&&(E=n.relatedTarget||n.fromElement)&&(rl(E)||E[oo]))break e;if((_||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,_?(E=n.relatedTarget||n.toElement,_=u,E=E?rl(E):null,E!==null&&(I=Ul(E),E!==I||E.tag!==5&&E.tag!==6)&&(E=null)):(_=null,E=u),_!==E)){if(S=fR,C="onMouseLeave",R="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(S=hR,C="onPointerLeave",R="onPointerEnter",w="pointer"),I=_==null?y:Fu(_),v=E==null?y:Fu(E),y=new S(C,w+"leave",_,n,f),y.target=I,y.relatedTarget=v,C=null,rl(f)===u&&(S=new S(R,w+"enter",E,n,f),S.target=v,S.relatedTarget=I,C=S),I=C,_&&E)t:{for(S=_,R=E,w=0,v=S;v;v=bu(v))w++;for(v=0,C=R;C;C=bu(C))v++;for(;0<w-v;)S=bu(S),w--;for(;0<v-w;)R=bu(R),v--;for(;w--;){if(S===R||R!==null&&S===R.alternate)break t;S=bu(S),R=bu(R)}S=null}else S=null;_!==null&&SR(p,y,_,S,!1),E!==null&&I!==null&&SR(p,I,E,S,!0)}}e:{if(y=u?Fu(u):window,_=y.nodeName&&y.nodeName.toLowerCase(),_==="select"||_==="input"&&y.type==="file")var k=H7;else if(gR(y))if(D4)k=G7;else{k=W7;var B=q7}else(_=y.nodeName)&&_.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(k=K7);if(k&&(k=k(t,u))){N4(p,k,n,f);break e}B&&B(t,y,u),t==="focusout"&&(B=y._wrapperState)&&B.controlled&&y.type==="number"&&uE(y,"number",y.value)}switch(B=u?Fu(u):window,t){case"focusin":(gR(B)||B.contentEditable==="true")&&(Lu=B,EE=u,Gf=null);break;case"focusout":Gf=EE=Lu=null;break;case"mousedown":bE=!0;break;case"contextmenu":case"mouseup":case"dragend":bE=!1,ER(p,n,f);break;case"selectionchange":if(X7)break;case"keydown":case"keyup":ER(p,n,f)}var D;if(bT)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Du?k4(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(P4&&n.locale!=="ko"&&(Du||T!=="onCompositionStart"?T==="onCompositionEnd"&&Du&&(D=A4()):(Ko=f,_T="value"in Ko?Ko.value:Ko.textContent,Du=!0)),B=Am(u,T),0<B.length&&(T=new dR(T,t,null,n,f),p.push({event:T,listeners:B}),D?T.data=D:(D=O4(n),D!==null&&(T.data=D)))),(D=V7?U7(t,n):B7(t,n))&&(u=Am(u,"onBeforeInput"),0<u.length&&(f=new dR("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:u}),f.data=D))}H4(p,e)})}function Td(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Am(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=gd(t,n),s!=null&&r.unshift(Td(t,s,i)),s=gd(t,e),s!=null&&r.push(Td(t,s,i))),t=t.return}return r}function bu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function SR(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=gd(n,s),l!=null&&o.unshift(Td(n,l,a))):i||(l=gd(n,s),l!=null&&o.push(Td(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var tU=/\r\n?/g,nU=/\u0000|\uFFFD/g;function xR(t){return(typeof t=="string"?t:""+t).replace(tU,`
`).replace(nU,"")}function bp(t,e,n){if(e=xR(e),xR(t)!==e&&n)throw Error(ve(425))}function Pm(){}var TE=null,SE=null;function xE(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var IE=typeof setTimeout=="function"?setTimeout:void 0,rU=typeof clearTimeout=="function"?clearTimeout:void 0,IR=typeof Promise=="function"?Promise:void 0,iU=typeof queueMicrotask=="function"?queueMicrotask:typeof IR<"u"?function(t){return IR.resolve(null).then(t).catch(sU)}:IE;function sU(t){setTimeout(function(){throw t})}function Jv(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),_d(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);_d(e)}function na(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function RR(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var kc=Math.random().toString(36).slice(2),ys="__reactFiber$"+kc,Sd="__reactProps$"+kc,oo="__reactContainer$"+kc,RE="__reactEvents$"+kc,oU="__reactListeners$"+kc,aU="__reactHandles$"+kc;function rl(t){var e=t[ys];if(e)return e;for(var n=t.parentNode;n;){if(e=n[oo]||n[ys]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=RR(t);t!==null;){if(n=t[ys])return n;t=RR(t)}return e}t=n,n=t.parentNode}return null}function eh(t){return t=t[ys]||t[oo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ve(33))}function Kg(t){return t[Sd]||null}var CE=[],ju=-1;function Ta(t){return{current:t}}function Ht(t){0>ju||(t.current=CE[ju],CE[ju]=null,ju--)}function Ft(t,e){ju++,CE[ju]=t.current,t.current=e}var ha={},mr=Ta(ha),jr=Ta(!1),wl=ha;function uc(t,e){var n=t.type.contextTypes;if(!n)return ha;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Vr(t){return t=t.childContextTypes,t!=null}function km(){Ht(jr),Ht(mr)}function CR(t,e,n){if(mr.current!==ha)throw Error(ve(168));Ft(mr,e),Ft(jr,n)}function W4(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ve(108,qV(t)||"Unknown",i));return tn({},n,r)}function Om(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ha,wl=mr.current,Ft(mr,t),Ft(jr,jr.current),!0}function AR(t,e,n){var r=t.stateNode;if(!r)throw Error(ve(169));n?(t=W4(t,e,wl),r.__reactInternalMemoizedMergedChildContext=t,Ht(jr),Ht(mr),Ft(mr,t)):Ht(jr),Ft(jr,n)}var qs=null,Gg=!1,Zv=!1;function K4(t){qs===null?qs=[t]:qs.push(t)}function lU(t){Gg=!0,K4(t)}function Sa(){if(!Zv&&qs!==null){Zv=!0;var t=0,e=At;try{var n=qs;for(At=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qs=null,Gg=!1}catch(i){throw qs!==null&&(qs=qs.slice(t+1)),v4(mT,Sa),i}finally{At=e,Zv=!1}}return null}var Vu=[],Uu=0,Nm=null,Dm=0,hi=[],pi=0,El=null,Ws=1,Ks="";function Xa(t,e){Vu[Uu++]=Dm,Vu[Uu++]=Nm,Nm=t,Dm=e}function G4(t,e,n){hi[pi++]=Ws,hi[pi++]=Ks,hi[pi++]=El,El=t;var r=Ws;t=Ks;var i=32-qi(r)-1;r&=~(1<<i),n+=1;var s=32-qi(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ws=1<<32-qi(e)+i|n<<i|r,Ks=s+t}else Ws=1<<s|n<<i|r,Ks=t}function ST(t){t.return!==null&&(Xa(t,1),G4(t,1,0))}function xT(t){for(;t===Nm;)Nm=Vu[--Uu],Vu[Uu]=null,Dm=Vu[--Uu],Vu[Uu]=null;for(;t===El;)El=hi[--pi],hi[pi]=null,Ks=hi[--pi],hi[pi]=null,Ws=hi[--pi],hi[pi]=null}var ei=null,Yr=null,Gt=!1,Fi=null;function Q4(t,e){var n=gi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function PR(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ei=t,Yr=na(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ei=t,Yr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=El!==null?{id:Ws,overflow:Ks}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=gi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ei=t,Yr=null,!0):!1;default:return!1}}function AE(t){return(t.mode&1)!==0&&(t.flags&128)===0}function PE(t){if(Gt){var e=Yr;if(e){var n=e;if(!PR(t,e)){if(AE(t))throw Error(ve(418));e=na(n.nextSibling);var r=ei;e&&PR(t,e)?Q4(r,n):(t.flags=t.flags&-4097|2,Gt=!1,ei=t)}}else{if(AE(t))throw Error(ve(418));t.flags=t.flags&-4097|2,Gt=!1,ei=t}}}function kR(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ei=t}function Tp(t){if(t!==ei)return!1;if(!Gt)return kR(t),Gt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xE(t.type,t.memoizedProps)),e&&(e=Yr)){if(AE(t))throw Y4(),Error(ve(418));for(;e;)Q4(t,e),e=na(e.nextSibling)}if(kR(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ve(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Yr=na(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Yr=null}}else Yr=ei?na(t.stateNode.nextSibling):null;return!0}function Y4(){for(var t=Yr;t;)t=na(t.nextSibling)}function cc(){Yr=ei=null,Gt=!1}function IT(t){Fi===null?Fi=[t]:Fi.push(t)}var uU=_o.ReactCurrentBatchConfig;function mf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ve(309));var r=n.stateNode}if(!r)throw Error(ve(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ve(284));if(!n._owner)throw Error(ve(290,t))}return t}function Sp(t,e){throw t=Object.prototype.toString.call(e),Error(ve(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function OR(t){var e=t._init;return e(t._payload)}function X4(t){function e(R,w){if(t){var v=R.deletions;v===null?(R.deletions=[w],R.flags|=16):v.push(w)}}function n(R,w){if(!t)return null;for(;w!==null;)e(R,w),w=w.sibling;return null}function r(R,w){for(R=new Map;w!==null;)w.key!==null?R.set(w.key,w):R.set(w.index,w),w=w.sibling;return R}function i(R,w){return R=oa(R,w),R.index=0,R.sibling=null,R}function s(R,w,v){return R.index=v,t?(v=R.alternate,v!==null?(v=v.index,v<w?(R.flags|=2,w):v):(R.flags|=2,w)):(R.flags|=1048576,w)}function o(R){return t&&R.alternate===null&&(R.flags|=2),R}function a(R,w,v,C){return w===null||w.tag!==6?(w=o0(v,R.mode,C),w.return=R,w):(w=i(w,v),w.return=R,w)}function l(R,w,v,C){var k=v.type;return k===Nu?f(R,w,v.props.children,C,v.key):w!==null&&(w.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===jo&&OR(k)===w.type)?(C=i(w,v.props),C.ref=mf(R,w,v),C.return=R,C):(C=nm(v.type,v.key,v.props,null,R.mode,C),C.ref=mf(R,w,v),C.return=R,C)}function u(R,w,v,C){return w===null||w.tag!==4||w.stateNode.containerInfo!==v.containerInfo||w.stateNode.implementation!==v.implementation?(w=a0(v,R.mode,C),w.return=R,w):(w=i(w,v.children||[]),w.return=R,w)}function f(R,w,v,C,k){return w===null||w.tag!==7?(w=pl(v,R.mode,C,k),w.return=R,w):(w=i(w,v),w.return=R,w)}function p(R,w,v){if(typeof w=="string"&&w!==""||typeof w=="number")return w=o0(""+w,R.mode,v),w.return=R,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case hp:return v=nm(w.type,w.key,w.props,null,R.mode,v),v.ref=mf(R,null,w),v.return=R,v;case Ou:return w=a0(w,R.mode,v),w.return=R,w;case jo:var C=w._init;return p(R,C(w._payload),v)}if(kf(w)||cf(w))return w=pl(w,R.mode,v,null),w.return=R,w;Sp(R,w)}return null}function y(R,w,v,C){var k=w!==null?w.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return k!==null?null:a(R,w,""+v,C);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case hp:return v.key===k?l(R,w,v,C):null;case Ou:return v.key===k?u(R,w,v,C):null;case jo:return k=v._init,y(R,w,k(v._payload),C)}if(kf(v)||cf(v))return k!==null?null:f(R,w,v,C,null);Sp(R,v)}return null}function _(R,w,v,C,k){if(typeof C=="string"&&C!==""||typeof C=="number")return R=R.get(v)||null,a(w,R,""+C,k);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case hp:return R=R.get(C.key===null?v:C.key)||null,l(w,R,C,k);case Ou:return R=R.get(C.key===null?v:C.key)||null,u(w,R,C,k);case jo:var B=C._init;return _(R,w,v,B(C._payload),k)}if(kf(C)||cf(C))return R=R.get(v)||null,f(w,R,C,k,null);Sp(w,C)}return null}function E(R,w,v,C){for(var k=null,B=null,D=w,T=w=0,N=null;D!==null&&T<v.length;T++){D.index>T?(N=D,D=null):N=D.sibling;var L=y(R,D,v[T],C);if(L===null){D===null&&(D=N);break}t&&D&&L.alternate===null&&e(R,D),w=s(L,w,T),B===null?k=L:B.sibling=L,B=L,D=N}if(T===v.length)return n(R,D),Gt&&Xa(R,T),k;if(D===null){for(;T<v.length;T++)D=p(R,v[T],C),D!==null&&(w=s(D,w,T),B===null?k=D:B.sibling=D,B=D);return Gt&&Xa(R,T),k}for(D=r(R,D);T<v.length;T++)N=_(D,R,T,v[T],C),N!==null&&(t&&N.alternate!==null&&D.delete(N.key===null?T:N.key),w=s(N,w,T),B===null?k=N:B.sibling=N,B=N);return t&&D.forEach(function(V){return e(R,V)}),Gt&&Xa(R,T),k}function S(R,w,v,C){var k=cf(v);if(typeof k!="function")throw Error(ve(150));if(v=k.call(v),v==null)throw Error(ve(151));for(var B=k=null,D=w,T=w=0,N=null,L=v.next();D!==null&&!L.done;T++,L=v.next()){D.index>T?(N=D,D=null):N=D.sibling;var V=y(R,D,L.value,C);if(V===null){D===null&&(D=N);break}t&&D&&V.alternate===null&&e(R,D),w=s(V,w,T),B===null?k=V:B.sibling=V,B=V,D=N}if(L.done)return n(R,D),Gt&&Xa(R,T),k;if(D===null){for(;!L.done;T++,L=v.next())L=p(R,L.value,C),L!==null&&(w=s(L,w,T),B===null?k=L:B.sibling=L,B=L);return Gt&&Xa(R,T),k}for(D=r(R,D);!L.done;T++,L=v.next())L=_(D,R,T,L.value,C),L!==null&&(t&&L.alternate!==null&&D.delete(L.key===null?T:L.key),w=s(L,w,T),B===null?k=L:B.sibling=L,B=L);return t&&D.forEach(function(j){return e(R,j)}),Gt&&Xa(R,T),k}function I(R,w,v,C){if(typeof v=="object"&&v!==null&&v.type===Nu&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case hp:e:{for(var k=v.key,B=w;B!==null;){if(B.key===k){if(k=v.type,k===Nu){if(B.tag===7){n(R,B.sibling),w=i(B,v.props.children),w.return=R,R=w;break e}}else if(B.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===jo&&OR(k)===B.type){n(R,B.sibling),w=i(B,v.props),w.ref=mf(R,B,v),w.return=R,R=w;break e}n(R,B);break}else e(R,B);B=B.sibling}v.type===Nu?(w=pl(v.props.children,R.mode,C,v.key),w.return=R,R=w):(C=nm(v.type,v.key,v.props,null,R.mode,C),C.ref=mf(R,w,v),C.return=R,R=C)}return o(R);case Ou:e:{for(B=v.key;w!==null;){if(w.key===B)if(w.tag===4&&w.stateNode.containerInfo===v.containerInfo&&w.stateNode.implementation===v.implementation){n(R,w.sibling),w=i(w,v.children||[]),w.return=R,R=w;break e}else{n(R,w);break}else e(R,w);w=w.sibling}w=a0(v,R.mode,C),w.return=R,R=w}return o(R);case jo:return B=v._init,I(R,w,B(v._payload),C)}if(kf(v))return E(R,w,v,C);if(cf(v))return S(R,w,v,C);Sp(R,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,w!==null&&w.tag===6?(n(R,w.sibling),w=i(w,v),w.return=R,R=w):(n(R,w),w=o0(v,R.mode,C),w.return=R,R=w),o(R)):n(R,w)}return I}var fc=X4(!0),J4=X4(!1),Lm=Ta(null),Mm=null,Bu=null,RT=null;function CT(){RT=Bu=Mm=null}function AT(t){var e=Lm.current;Ht(Lm),t._currentValue=e}function kE(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ju(t,e){Mm=t,RT=Bu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Mr=!0),t.firstContext=null)}function Ei(t){var e=t._currentValue;if(RT!==t)if(t={context:t,memoizedValue:e,next:null},Bu===null){if(Mm===null)throw Error(ve(308));Bu=t,Mm.dependencies={lanes:0,firstContext:t}}else Bu=Bu.next=t;return e}var il=null;function PT(t){il===null?il=[t]:il.push(t)}function Z4(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,PT(e)):(n.next=i.next,i.next=n),e.interleaved=n,ao(t,r)}function ao(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vo=!1;function kT(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eD(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ra(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,wt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ao(t,n)}return i=r.interleaved,i===null?(e.next=e,PT(r)):(e.next=i.next,i.next=e),r.interleaved=e,ao(t,n)}function Yp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gT(t,n)}}function NR(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fm(t,e,n,r){var i=t.updateQueue;Vo=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=u:a.next=u,f.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;o=0,f=u=l=null,a=s;do{var y=a.lane,_=a.eventTime;if((r&y)===y){f!==null&&(f=f.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,S=a;switch(y=e,_=n,S.tag){case 1:if(E=S.payload,typeof E=="function"){p=E.call(_,p,y);break e}p=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=S.payload,y=typeof E=="function"?E.call(_,p,y):E,y==null)break e;p=tn({},p,y);break e;case 2:Vo=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[a]:y.push(a))}else _={eventTime:_,lane:y,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(u=f=_,l=p):f=f.next=_,o|=y;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;y=a,a=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(f===null&&(l=p),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Tl|=o,t.lanes=o,t.memoizedState=p}}function DR(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ve(191,i));i.call(r)}}}var th={},Ts=Ta(th),xd=Ta(th),Id=Ta(th);function sl(t){if(t===th)throw Error(ve(174));return t}function OT(t,e){switch(Ft(Id,e),Ft(xd,t),Ft(Ts,th),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fE(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fE(e,t)}Ht(Ts),Ft(Ts,e)}function dc(){Ht(Ts),Ht(xd),Ht(Id)}function tD(t){sl(Id.current);var e=sl(Ts.current),n=fE(e,t.type);e!==n&&(Ft(xd,t),Ft(Ts,n))}function NT(t){xd.current===t&&(Ht(Ts),Ht(xd))}var Zt=Ta(0);function jm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var e0=[];function DT(){for(var t=0;t<e0.length;t++)e0[t]._workInProgressVersionPrimary=null;e0.length=0}var Xp=_o.ReactCurrentDispatcher,t0=_o.ReactCurrentBatchConfig,bl=0,en=null,Rn=null,Mn=null,Vm=!1,Qf=!1,Rd=0,cU=0;function ir(){throw Error(ve(321))}function LT(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qi(t[n],e[n]))return!1;return!0}function MT(t,e,n,r,i,s){if(bl=s,en=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xp.current=t===null||t.memoizedState===null?pU:mU,t=n(r,i),Qf){s=0;do{if(Qf=!1,Rd=0,25<=s)throw Error(ve(301));s+=1,Mn=Rn=null,e.updateQueue=null,Xp.current=gU,t=n(r,i)}while(Qf)}if(Xp.current=Um,e=Rn!==null&&Rn.next!==null,bl=0,Mn=Rn=en=null,Vm=!1,e)throw Error(ve(300));return t}function FT(){var t=Rd!==0;return Rd=0,t}function ps(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?en.memoizedState=Mn=t:Mn=Mn.next=t,Mn}function bi(){if(Rn===null){var t=en.alternate;t=t!==null?t.memoizedState:null}else t=Rn.next;var e=Mn===null?en.memoizedState:Mn.next;if(e!==null)Mn=e,Rn=t;else{if(t===null)throw Error(ve(310));Rn=t,t={memoizedState:Rn.memoizedState,baseState:Rn.baseState,baseQueue:Rn.baseQueue,queue:Rn.queue,next:null},Mn===null?en.memoizedState=Mn=t:Mn=Mn.next=t}return Mn}function Cd(t,e){return typeof e=="function"?e(t):e}function n0(t){var e=bi(),n=e.queue;if(n===null)throw Error(ve(311));n.lastRenderedReducer=t;var r=Rn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var f=u.lane;if((bl&f)===f)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,en.lanes|=f,Tl|=f}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Qi(r,e.memoizedState)||(Mr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,en.lanes|=s,Tl|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function r0(t){var e=bi(),n=e.queue;if(n===null)throw Error(ve(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Qi(s,e.memoizedState)||(Mr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function nD(){}function rD(t,e){var n=en,r=bi(),i=e(),s=!Qi(r.memoizedState,i);if(s&&(r.memoizedState=i,Mr=!0),r=r.queue,jT(oD.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Mn!==null&&Mn.memoizedState.tag&1){if(n.flags|=2048,Ad(9,sD.bind(null,n,r,i,e),void 0,null),Bn===null)throw Error(ve(349));bl&30||iD(n,e,i)}return i}function iD(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=en.updateQueue,e===null?(e={lastEffect:null,stores:null},en.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sD(t,e,n,r){e.value=n,e.getSnapshot=r,aD(e)&&lD(t)}function oD(t,e,n){return n(function(){aD(e)&&lD(t)})}function aD(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qi(t,n)}catch{return!0}}function lD(t){var e=ao(t,1);e!==null&&Wi(e,t,1,-1)}function LR(t){var e=ps();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cd,lastRenderedState:t},e.queue=t,t=t.dispatch=hU.bind(null,en,t),[e.memoizedState,t]}function Ad(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=en.updateQueue,e===null?(e={lastEffect:null,stores:null},en.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function uD(){return bi().memoizedState}function Jp(t,e,n,r){var i=ps();en.flags|=t,i.memoizedState=Ad(1|e,n,void 0,r===void 0?null:r)}function Qg(t,e,n,r){var i=bi();r=r===void 0?null:r;var s=void 0;if(Rn!==null){var o=Rn.memoizedState;if(s=o.destroy,r!==null&&LT(r,o.deps)){i.memoizedState=Ad(e,n,s,r);return}}en.flags|=t,i.memoizedState=Ad(1|e,n,s,r)}function MR(t,e){return Jp(8390656,8,t,e)}function jT(t,e){return Qg(2048,8,t,e)}function cD(t,e){return Qg(4,2,t,e)}function fD(t,e){return Qg(4,4,t,e)}function dD(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hD(t,e,n){return n=n!=null?n.concat([t]):null,Qg(4,4,dD.bind(null,e,t),n)}function VT(){}function pD(t,e){var n=bi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&LT(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function mD(t,e){var n=bi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&LT(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function gD(t,e,n){return bl&21?(Qi(n,e)||(n=E4(),en.lanes|=n,Tl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Mr=!0),t.memoizedState=n)}function fU(t,e){var n=At;At=n!==0&&4>n?n:4,t(!0);var r=t0.transition;t0.transition={};try{t(!1),e()}finally{At=n,t0.transition=r}}function yD(){return bi().memoizedState}function dU(t,e,n){var r=sa(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},vD(t))_D(e,n);else if(n=Z4(t,e,n,r),n!==null){var i=xr();Wi(n,t,r,i),wD(n,e,r)}}function hU(t,e,n){var r=sa(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(vD(t))_D(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Qi(a,o)){var l=e.interleaved;l===null?(i.next=i,PT(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Z4(t,e,i,r),n!==null&&(i=xr(),Wi(n,t,r,i),wD(n,e,r))}}function vD(t){var e=t.alternate;return t===en||e!==null&&e===en}function _D(t,e){Qf=Vm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function wD(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gT(t,n)}}var Um={readContext:Ei,useCallback:ir,useContext:ir,useEffect:ir,useImperativeHandle:ir,useInsertionEffect:ir,useLayoutEffect:ir,useMemo:ir,useReducer:ir,useRef:ir,useState:ir,useDebugValue:ir,useDeferredValue:ir,useTransition:ir,useMutableSource:ir,useSyncExternalStore:ir,useId:ir,unstable_isNewReconciler:!1},pU={readContext:Ei,useCallback:function(t,e){return ps().memoizedState=[t,e===void 0?null:e],t},useContext:Ei,useEffect:MR,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Jp(4194308,4,dD.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Jp(4194308,4,t,e)},useInsertionEffect:function(t,e){return Jp(4,2,t,e)},useMemo:function(t,e){var n=ps();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ps();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=dU.bind(null,en,t),[r.memoizedState,t]},useRef:function(t){var e=ps();return t={current:t},e.memoizedState=t},useState:LR,useDebugValue:VT,useDeferredValue:function(t){return ps().memoizedState=t},useTransition:function(){var t=LR(!1),e=t[0];return t=fU.bind(null,t[1]),ps().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=en,i=ps();if(Gt){if(n===void 0)throw Error(ve(407));n=n()}else{if(n=e(),Bn===null)throw Error(ve(349));bl&30||iD(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,MR(oD.bind(null,r,s,t),[t]),r.flags|=2048,Ad(9,sD.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ps(),e=Bn.identifierPrefix;if(Gt){var n=Ks,r=Ws;n=(r&~(1<<32-qi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Rd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cU++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mU={readContext:Ei,useCallback:pD,useContext:Ei,useEffect:jT,useImperativeHandle:hD,useInsertionEffect:cD,useLayoutEffect:fD,useMemo:mD,useReducer:n0,useRef:uD,useState:function(){return n0(Cd)},useDebugValue:VT,useDeferredValue:function(t){var e=bi();return gD(e,Rn.memoizedState,t)},useTransition:function(){var t=n0(Cd)[0],e=bi().memoizedState;return[t,e]},useMutableSource:nD,useSyncExternalStore:rD,useId:yD,unstable_isNewReconciler:!1},gU={readContext:Ei,useCallback:pD,useContext:Ei,useEffect:jT,useImperativeHandle:hD,useInsertionEffect:cD,useLayoutEffect:fD,useMemo:mD,useReducer:r0,useRef:uD,useState:function(){return r0(Cd)},useDebugValue:VT,useDeferredValue:function(t){var e=bi();return Rn===null?e.memoizedState=t:gD(e,Rn.memoizedState,t)},useTransition:function(){var t=r0(Cd)[0],e=bi().memoizedState;return[t,e]},useMutableSource:nD,useSyncExternalStore:rD,useId:yD,unstable_isNewReconciler:!1};function Di(t,e){if(t&&t.defaultProps){e=tn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function OE(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:tn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Yg={isMounted:function(t){return(t=t._reactInternals)?Ul(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xr(),i=sa(t),s=Zs(r,i);s.payload=e,n!=null&&(s.callback=n),e=ra(t,s,i),e!==null&&(Wi(e,t,i,r),Yp(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xr(),i=sa(t),s=Zs(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ra(t,s,i),e!==null&&(Wi(e,t,i,r),Yp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xr(),r=sa(t),i=Zs(n,r);i.tag=2,e!=null&&(i.callback=e),e=ra(t,i,r),e!==null&&(Wi(e,t,r,n),Yp(e,t,r))}};function FR(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ed(n,r)||!Ed(i,s):!0}function ED(t,e,n){var r=!1,i=ha,s=e.contextType;return typeof s=="object"&&s!==null?s=Ei(s):(i=Vr(e)?wl:mr.current,r=e.contextTypes,s=(r=r!=null)?uc(t,i):ha),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function jR(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Yg.enqueueReplaceState(e,e.state,null)}function NE(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},kT(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ei(s):(s=Vr(e)?wl:mr.current,i.context=uc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(OE(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Yg.enqueueReplaceState(i,i.state,null),Fm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function hc(t,e){try{var n="",r=e;do n+=HV(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function i0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function DE(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yU=typeof WeakMap=="function"?WeakMap:Map;function bD(t,e,n){n=Zs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$m||($m=!0,HE=r),DE(t,e)},n}function TD(t,e,n){n=Zs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){DE(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){DE(t,e),typeof r!="function"&&(ia===null?ia=new Set([this]):ia.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function VR(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new yU;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=kU.bind(null,t,e,n),e.then(t,t))}function UR(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function BR(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zs(-1,1),e.tag=2,ra(n,e,1))),n.lanes|=1),t)}var vU=_o.ReactCurrentOwner,Mr=!1;function wr(t,e,n,r){e.child=t===null?J4(e,null,n,r):fc(e,t.child,n,r)}function $R(t,e,n,r,i){n=n.render;var s=e.ref;return Ju(e,i),r=MT(t,e,n,r,s,i),n=FT(),t!==null&&!Mr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,lo(t,e,i)):(Gt&&n&&ST(e),e.flags|=1,wr(t,e,r,i),e.child)}function zR(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!KT(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,SD(t,e,s,r,i)):(t=nm(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ed,n(o,r)&&t.ref===e.ref)return lo(t,e,i)}return e.flags|=1,t=oa(s,r),t.ref=e.ref,t.return=e,e.child=t}function SD(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ed(s,r)&&t.ref===e.ref)if(Mr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Mr=!0);else return e.lanes=t.lanes,lo(t,e,i)}return LE(t,e,n,r,i)}function xD(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ft(zu,Kr),Kr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ft(zu,Kr),Kr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ft(zu,Kr),Kr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ft(zu,Kr),Kr|=r;return wr(t,e,i,n),e.child}function ID(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function LE(t,e,n,r,i){var s=Vr(n)?wl:mr.current;return s=uc(e,s),Ju(e,i),n=MT(t,e,n,r,s,i),r=FT(),t!==null&&!Mr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,lo(t,e,i)):(Gt&&r&&ST(e),e.flags|=1,wr(t,e,n,i),e.child)}function HR(t,e,n,r,i){if(Vr(n)){var s=!0;Om(e)}else s=!1;if(Ju(e,i),e.stateNode===null)Zp(t,e),ED(e,n,r),NE(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ei(u):(u=Vr(n)?wl:mr.current,u=uc(e,u));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&jR(e,o,r,u),Vo=!1;var y=e.memoizedState;o.state=y,Fm(e,r,o,i),l=e.memoizedState,a!==r||y!==l||jr.current||Vo?(typeof f=="function"&&(OE(e,n,f,r),l=e.memoizedState),(a=Vo||FR(e,n,a,r,y,l,u))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,eD(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Di(e.type,a),o.props=u,p=e.pendingProps,y=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ei(l):(l=Vr(n)?wl:mr.current,l=uc(e,l));var _=n.getDerivedStateFromProps;(f=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||y!==l)&&jR(e,o,r,l),Vo=!1,y=e.memoizedState,o.state=y,Fm(e,r,o,i);var E=e.memoizedState;a!==p||y!==E||jr.current||Vo?(typeof _=="function"&&(OE(e,n,_,r),E=e.memoizedState),(u=Vo||FR(e,n,u,r,y,E,l)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return ME(t,e,n,r,s,i)}function ME(t,e,n,r,i,s){ID(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&AR(e,n,!1),lo(t,e,s);r=e.stateNode,vU.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=fc(e,t.child,null,s),e.child=fc(e,null,a,s)):wr(t,e,a,s),e.memoizedState=r.state,i&&AR(e,n,!0),e.child}function RD(t){var e=t.stateNode;e.pendingContext?CR(t,e.pendingContext,e.pendingContext!==e.context):e.context&&CR(t,e.context,!1),OT(t,e.containerInfo)}function qR(t,e,n,r,i){return cc(),IT(i),e.flags|=256,wr(t,e,n,r),e.child}var FE={dehydrated:null,treeContext:null,retryLane:0};function jE(t){return{baseLanes:t,cachePool:null,transitions:null}}function CD(t,e,n){var r=e.pendingProps,i=Zt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ft(Zt,i&1),t===null)return PE(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Zg(o,r,0,null),t=pl(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=jE(n),e.memoizedState=FE,t):UT(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return _U(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=oa(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=oa(a,s):(s=pl(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?jE(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=FE,r}return s=t.child,t=s.sibling,r=oa(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function UT(t,e){return e=Zg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xp(t,e,n,r){return r!==null&&IT(r),fc(e,t.child,null,n),t=UT(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _U(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=i0(Error(ve(422))),xp(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Zg({mode:"visible",children:r.children},i,0,null),s=pl(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&fc(e,t.child,null,o),e.child.memoizedState=jE(o),e.memoizedState=FE,s);if(!(e.mode&1))return xp(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ve(419)),r=i0(s,r,void 0),xp(t,e,o,r)}if(a=(o&t.childLanes)!==0,Mr||a){if(r=Bn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ao(t,i),Wi(r,t,i,-1))}return WT(),r=i0(Error(ve(421))),xp(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=OU.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Yr=na(i.nextSibling),ei=e,Gt=!0,Fi=null,t!==null&&(hi[pi++]=Ws,hi[pi++]=Ks,hi[pi++]=El,Ws=t.id,Ks=t.overflow,El=e),e=UT(e,r.children),e.flags|=4096,e)}function WR(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),kE(t.return,e,n)}function s0(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function AD(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(wr(t,e,r.children,n),r=Zt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&WR(t,n,e);else if(t.tag===19)WR(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ft(Zt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&jm(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),s0(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&jm(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}s0(e,!0,n,null,s);break;case"together":s0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function lo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Tl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ve(153));if(e.child!==null){for(t=e.child,n=oa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=oa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function wU(t,e,n){switch(e.tag){case 3:RD(e),cc();break;case 5:tD(e);break;case 1:Vr(e.type)&&Om(e);break;case 4:OT(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ft(Lm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ft(Zt,Zt.current&1),e.flags|=128,null):n&e.child.childLanes?CD(t,e,n):(Ft(Zt,Zt.current&1),t=lo(t,e,n),t!==null?t.sibling:null);Ft(Zt,Zt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return AD(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ft(Zt,Zt.current),r)break;return null;case 22:case 23:return e.lanes=0,xD(t,e,n)}return lo(t,e,n)}var PD,VE,kD,OD;PD=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};VE=function(){};kD=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,sl(Ts.current);var s=null;switch(n){case"input":i=aE(t,i),r=aE(t,r),s=[];break;case"select":i=tn({},i,{value:void 0}),r=tn({},r,{value:void 0}),s=[];break;case"textarea":i=cE(t,i),r=cE(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pm)}dE(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(pd.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(pd.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Vt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};OD=function(t,e,n,r){n!==r&&(e.flags|=4)};function gf(t,e){if(!Gt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function sr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function EU(t,e,n){var r=e.pendingProps;switch(xT(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sr(e),null;case 1:return Vr(e.type)&&km(),sr(e),null;case 3:return r=e.stateNode,dc(),Ht(jr),Ht(mr),DT(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Tp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fi!==null&&(KE(Fi),Fi=null))),VE(t,e),sr(e),null;case 5:NT(e);var i=sl(Id.current);if(n=e.type,t!==null&&e.stateNode!=null)kD(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ve(166));return sr(e),null}if(t=sl(Ts.current),Tp(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ys]=e,r[Sd]=s,t=(e.mode&1)!==0,n){case"dialog":Vt("cancel",r),Vt("close",r);break;case"iframe":case"object":case"embed":Vt("load",r);break;case"video":case"audio":for(i=0;i<Nf.length;i++)Vt(Nf[i],r);break;case"source":Vt("error",r);break;case"img":case"image":case"link":Vt("error",r),Vt("load",r);break;case"details":Vt("toggle",r);break;case"input":tR(r,s),Vt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Vt("invalid",r);break;case"textarea":rR(r,s),Vt("invalid",r)}dE(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&bp(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&bp(r.textContent,a,t),i=["children",""+a]):pd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Vt("scroll",r)}switch(n){case"input":pp(r),nR(r,s,!0);break;case"textarea":pp(r),iR(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Pm)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=o4(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ys]=e,t[Sd]=r,PD(t,e,!1,!1),e.stateNode=t;e:{switch(o=hE(n,r),n){case"dialog":Vt("cancel",t),Vt("close",t),i=r;break;case"iframe":case"object":case"embed":Vt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Nf.length;i++)Vt(Nf[i],t);i=r;break;case"source":Vt("error",t),i=r;break;case"img":case"image":case"link":Vt("error",t),Vt("load",t),i=r;break;case"details":Vt("toggle",t),i=r;break;case"input":tR(t,r),i=aE(t,r),Vt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=tn({},r,{value:void 0}),Vt("invalid",t);break;case"textarea":rR(t,r),i=cE(t,r),Vt("invalid",t);break;default:i=r}dE(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?u4(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&a4(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&md(t,l):typeof l=="number"&&md(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(pd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Vt("scroll",t):l!=null&&cT(t,s,l,o))}switch(n){case"input":pp(t),nR(t,r,!1);break;case"textarea":pp(t),iR(t);break;case"option":r.value!=null&&t.setAttribute("value",""+da(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Gu(t,!!r.multiple,s,!1):r.defaultValue!=null&&Gu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Pm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return sr(e),null;case 6:if(t&&e.stateNode!=null)OD(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ve(166));if(n=sl(Id.current),sl(Ts.current),Tp(e)){if(r=e.stateNode,n=e.memoizedProps,r[ys]=e,(s=r.nodeValue!==n)&&(t=ei,t!==null))switch(t.tag){case 3:bp(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bp(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ys]=e,e.stateNode=r}return sr(e),null;case 13:if(Ht(Zt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Gt&&Yr!==null&&e.mode&1&&!(e.flags&128))Y4(),cc(),e.flags|=98560,s=!1;else if(s=Tp(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ve(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ve(317));s[ys]=e}else cc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;sr(e),s=!1}else Fi!==null&&(KE(Fi),Fi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Zt.current&1?Cn===0&&(Cn=3):WT())),e.updateQueue!==null&&(e.flags|=4),sr(e),null);case 4:return dc(),VE(t,e),t===null&&bd(e.stateNode.containerInfo),sr(e),null;case 10:return AT(e.type._context),sr(e),null;case 17:return Vr(e.type)&&km(),sr(e),null;case 19:if(Ht(Zt),s=e.memoizedState,s===null)return sr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)gf(s,!1);else{if(Cn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=jm(t),o!==null){for(e.flags|=128,gf(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ft(Zt,Zt.current&1|2),e.child}t=t.sibling}s.tail!==null&&dn()>pc&&(e.flags|=128,r=!0,gf(s,!1),e.lanes=4194304)}else{if(!r)if(t=jm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Gt)return sr(e),null}else 2*dn()-s.renderingStartTime>pc&&n!==1073741824&&(e.flags|=128,r=!0,gf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=dn(),e.sibling=null,n=Zt.current,Ft(Zt,r?n&1|2:n&1),e):(sr(e),null);case 22:case 23:return qT(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Kr&1073741824&&(sr(e),e.subtreeFlags&6&&(e.flags|=8192)):sr(e),null;case 24:return null;case 25:return null}throw Error(ve(156,e.tag))}function bU(t,e){switch(xT(e),e.tag){case 1:return Vr(e.type)&&km(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return dc(),Ht(jr),Ht(mr),DT(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return NT(e),null;case 13:if(Ht(Zt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ve(340));cc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ht(Zt),null;case 4:return dc(),null;case 10:return AT(e.type._context),null;case 22:case 23:return qT(),null;case 24:return null;default:return null}}var Ip=!1,lr=!1,TU=typeof WeakSet=="function"?WeakSet:Set,De=null;function $u(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){an(t,e,r)}else n.current=null}function UE(t,e,n){try{n()}catch(r){an(t,e,r)}}var KR=!1;function SU(t,e){if(TE=Rm,t=F4(),TT(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,f=0,p=t,y=null;t:for(;;){for(var _;p!==n||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(_=p.firstChild)!==null;)y=p,p=_;for(;;){if(p===t)break t;if(y===n&&++u===i&&(a=o),y===s&&++f===r&&(l=o),(_=p.nextSibling)!==null)break;p=y,y=p.parentNode}p=_}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(SE={focusedElem:t,selectionRange:n},Rm=!1,De=e;De!==null;)if(e=De,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,De=t;else for(;De!==null;){e=De;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var S=E.memoizedProps,I=E.memoizedState,R=e.stateNode,w=R.getSnapshotBeforeUpdate(e.elementType===e.type?S:Di(e.type,S),I);R.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ve(163))}}catch(C){an(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,De=t;break}De=e.return}return E=KR,KR=!1,E}function Yf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&UE(e,n,s)}i=i.next}while(i!==r)}}function Xg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function BE(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ND(t){var e=t.alternate;e!==null&&(t.alternate=null,ND(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ys],delete e[Sd],delete e[RE],delete e[oU],delete e[aU])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function DD(t){return t.tag===5||t.tag===3||t.tag===4}function GR(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||DD(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $E(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pm));else if(r!==4&&(t=t.child,t!==null))for($E(t,e,n),t=t.sibling;t!==null;)$E(t,e,n),t=t.sibling}function zE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(zE(t,e,n),t=t.sibling;t!==null;)zE(t,e,n),t=t.sibling}var zn=null,Li=!1;function Do(t,e,n){for(n=n.child;n!==null;)LD(t,e,n),n=n.sibling}function LD(t,e,n){if(bs&&typeof bs.onCommitFiberUnmount=="function")try{bs.onCommitFiberUnmount(zg,n)}catch{}switch(n.tag){case 5:lr||$u(n,e);case 6:var r=zn,i=Li;zn=null,Do(t,e,n),zn=r,Li=i,zn!==null&&(Li?(t=zn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):zn.removeChild(n.stateNode));break;case 18:zn!==null&&(Li?(t=zn,n=n.stateNode,t.nodeType===8?Jv(t.parentNode,n):t.nodeType===1&&Jv(t,n),_d(t)):Jv(zn,n.stateNode));break;case 4:r=zn,i=Li,zn=n.stateNode.containerInfo,Li=!0,Do(t,e,n),zn=r,Li=i;break;case 0:case 11:case 14:case 15:if(!lr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&UE(n,e,o),i=i.next}while(i!==r)}Do(t,e,n);break;case 1:if(!lr&&($u(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){an(n,e,a)}Do(t,e,n);break;case 21:Do(t,e,n);break;case 22:n.mode&1?(lr=(r=lr)||n.memoizedState!==null,Do(t,e,n),lr=r):Do(t,e,n);break;default:Do(t,e,n)}}function QR(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new TU),e.forEach(function(r){var i=NU.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ni(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:zn=a.stateNode,Li=!1;break e;case 3:zn=a.stateNode.containerInfo,Li=!0;break e;case 4:zn=a.stateNode.containerInfo,Li=!0;break e}a=a.return}if(zn===null)throw Error(ve(160));LD(s,o,i),zn=null,Li=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){an(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)MD(e,t),e=e.sibling}function MD(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ni(e,t),hs(t),r&4){try{Yf(3,t,t.return),Xg(3,t)}catch(S){an(t,t.return,S)}try{Yf(5,t,t.return)}catch(S){an(t,t.return,S)}}break;case 1:Ni(e,t),hs(t),r&512&&n!==null&&$u(n,n.return);break;case 5:if(Ni(e,t),hs(t),r&512&&n!==null&&$u(n,n.return),t.flags&32){var i=t.stateNode;try{md(i,"")}catch(S){an(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&i4(i,s),hE(a,o);var u=hE(a,s);for(o=0;o<l.length;o+=2){var f=l[o],p=l[o+1];f==="style"?u4(i,p):f==="dangerouslySetInnerHTML"?a4(i,p):f==="children"?md(i,p):cT(i,f,p,u)}switch(a){case"input":lE(i,s);break;case"textarea":s4(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?Gu(i,!!s.multiple,_,!1):y!==!!s.multiple&&(s.defaultValue!=null?Gu(i,!!s.multiple,s.defaultValue,!0):Gu(i,!!s.multiple,s.multiple?[]:"",!1))}i[Sd]=s}catch(S){an(t,t.return,S)}}break;case 6:if(Ni(e,t),hs(t),r&4){if(t.stateNode===null)throw Error(ve(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){an(t,t.return,S)}}break;case 3:if(Ni(e,t),hs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_d(e.containerInfo)}catch(S){an(t,t.return,S)}break;case 4:Ni(e,t),hs(t);break;case 13:Ni(e,t),hs(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(zT=dn())),r&4&&QR(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(lr=(u=lr)||f,Ni(e,t),lr=u):Ni(e,t),hs(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(De=t,f=t.child;f!==null;){for(p=De=f;De!==null;){switch(y=De,_=y.child,y.tag){case 0:case 11:case 14:case 15:Yf(4,y,y.return);break;case 1:$u(y,y.return);var E=y.stateNode;if(typeof E.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(S){an(r,n,S)}}break;case 5:$u(y,y.return);break;case 22:if(y.memoizedState!==null){XR(p);continue}}_!==null?(_.return=y,De=_):XR(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=l4("display",o))}catch(S){an(t,t.return,S)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(S){an(t,t.return,S)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Ni(e,t),hs(t),r&4&&QR(t);break;case 21:break;default:Ni(e,t),hs(t)}}function hs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(DD(n)){var r=n;break e}n=n.return}throw Error(ve(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(md(i,""),r.flags&=-33);var s=GR(t);zE(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=GR(t);$E(t,a,o);break;default:throw Error(ve(161))}}catch(l){an(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xU(t,e,n){De=t,FD(t)}function FD(t,e,n){for(var r=(t.mode&1)!==0;De!==null;){var i=De,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ip;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||lr;a=Ip;var u=lr;if(Ip=o,(lr=l)&&!u)for(De=i;De!==null;)o=De,l=o.child,o.tag===22&&o.memoizedState!==null?JR(i):l!==null?(l.return=o,De=l):JR(i);for(;s!==null;)De=s,FD(s),s=s.sibling;De=i,Ip=a,lr=u}YR(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,De=s):YR(t)}}function YR(t){for(;De!==null;){var e=De;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:lr||Xg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!lr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Di(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&DR(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}DR(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&_d(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ve(163))}lr||e.flags&512&&BE(e)}catch(y){an(e,e.return,y)}}if(e===t){De=null;break}if(n=e.sibling,n!==null){n.return=e.return,De=n;break}De=e.return}}function XR(t){for(;De!==null;){var e=De;if(e===t){De=null;break}var n=e.sibling;if(n!==null){n.return=e.return,De=n;break}De=e.return}}function JR(t){for(;De!==null;){var e=De;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Xg(4,e)}catch(l){an(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){an(e,i,l)}}var s=e.return;try{BE(e)}catch(l){an(e,s,l)}break;case 5:var o=e.return;try{BE(e)}catch(l){an(e,o,l)}}}catch(l){an(e,e.return,l)}if(e===t){De=null;break}var a=e.sibling;if(a!==null){a.return=e.return,De=a;break}De=e.return}}var IU=Math.ceil,Bm=_o.ReactCurrentDispatcher,BT=_o.ReactCurrentOwner,vi=_o.ReactCurrentBatchConfig,wt=0,Bn=null,vn=null,Gn=0,Kr=0,zu=Ta(0),Cn=0,Pd=null,Tl=0,Jg=0,$T=0,Xf=null,Dr=null,zT=0,pc=1/0,Hs=null,$m=!1,HE=null,ia=null,Rp=!1,Go=null,zm=0,Jf=0,qE=null,em=-1,tm=0;function xr(){return wt&6?dn():em!==-1?em:em=dn()}function sa(t){return t.mode&1?wt&2&&Gn!==0?Gn&-Gn:uU.transition!==null?(tm===0&&(tm=E4()),tm):(t=At,t!==0||(t=window.event,t=t===void 0?16:C4(t.type)),t):1}function Wi(t,e,n,r){if(50<Jf)throw Jf=0,qE=null,Error(ve(185));Jd(t,n,r),(!(wt&2)||t!==Bn)&&(t===Bn&&(!(wt&2)&&(Jg|=n),Cn===4&&Bo(t,Gn)),Ur(t,r),n===1&&wt===0&&!(e.mode&1)&&(pc=dn()+500,Gg&&Sa()))}function Ur(t,e){var n=t.callbackNode;u7(t,e);var r=Im(t,t===Bn?Gn:0);if(r===0)n!==null&&aR(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&aR(n),e===1)t.tag===0?lU(ZR.bind(null,t)):K4(ZR.bind(null,t)),iU(function(){!(wt&6)&&Sa()}),n=null;else{switch(b4(r)){case 1:n=mT;break;case 4:n=_4;break;case 16:n=xm;break;case 536870912:n=w4;break;default:n=xm}n=qD(n,jD.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function jD(t,e){if(em=-1,tm=0,wt&6)throw Error(ve(327));var n=t.callbackNode;if(Zu()&&t.callbackNode!==n)return null;var r=Im(t,t===Bn?Gn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hm(t,r);else{e=r;var i=wt;wt|=2;var s=UD();(Bn!==t||Gn!==e)&&(Hs=null,pc=dn()+500,hl(t,e));do try{AU();break}catch(a){VD(t,a)}while(!0);CT(),Bm.current=s,wt=i,vn!==null?e=0:(Bn=null,Gn=0,e=Cn)}if(e!==0){if(e===2&&(i=vE(t),i!==0&&(r=i,e=WE(t,i))),e===1)throw n=Pd,hl(t,0),Bo(t,r),Ur(t,dn()),n;if(e===6)Bo(t,r);else{if(i=t.current.alternate,!(r&30)&&!RU(i)&&(e=Hm(t,r),e===2&&(s=vE(t),s!==0&&(r=s,e=WE(t,s))),e===1))throw n=Pd,hl(t,0),Bo(t,r),Ur(t,dn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ve(345));case 2:Ja(t,Dr,Hs);break;case 3:if(Bo(t,r),(r&130023424)===r&&(e=zT+500-dn(),10<e)){if(Im(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){xr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=IE(Ja.bind(null,t,Dr,Hs),e);break}Ja(t,Dr,Hs);break;case 4:if(Bo(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-qi(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=dn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*IU(r/1960))-r,10<r){t.timeoutHandle=IE(Ja.bind(null,t,Dr,Hs),r);break}Ja(t,Dr,Hs);break;case 5:Ja(t,Dr,Hs);break;default:throw Error(ve(329))}}}return Ur(t,dn()),t.callbackNode===n?jD.bind(null,t):null}function WE(t,e){var n=Xf;return t.current.memoizedState.isDehydrated&&(hl(t,e).flags|=256),t=Hm(t,e),t!==2&&(e=Dr,Dr=n,e!==null&&KE(e)),t}function KE(t){Dr===null?Dr=t:Dr.push.apply(Dr,t)}function RU(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Qi(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bo(t,e){for(e&=~$T,e&=~Jg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qi(e),r=1<<n;t[n]=-1,e&=~r}}function ZR(t){if(wt&6)throw Error(ve(327));Zu();var e=Im(t,0);if(!(e&1))return Ur(t,dn()),null;var n=Hm(t,e);if(t.tag!==0&&n===2){var r=vE(t);r!==0&&(e=r,n=WE(t,r))}if(n===1)throw n=Pd,hl(t,0),Bo(t,e),Ur(t,dn()),n;if(n===6)throw Error(ve(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ja(t,Dr,Hs),Ur(t,dn()),null}function HT(t,e){var n=wt;wt|=1;try{return t(e)}finally{wt=n,wt===0&&(pc=dn()+500,Gg&&Sa())}}function Sl(t){Go!==null&&Go.tag===0&&!(wt&6)&&Zu();var e=wt;wt|=1;var n=vi.transition,r=At;try{if(vi.transition=null,At=1,t)return t()}finally{At=r,vi.transition=n,wt=e,!(wt&6)&&Sa()}}function qT(){Kr=zu.current,Ht(zu)}function hl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rU(n)),vn!==null)for(n=vn.return;n!==null;){var r=n;switch(xT(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&km();break;case 3:dc(),Ht(jr),Ht(mr),DT();break;case 5:NT(r);break;case 4:dc();break;case 13:Ht(Zt);break;case 19:Ht(Zt);break;case 10:AT(r.type._context);break;case 22:case 23:qT()}n=n.return}if(Bn=t,vn=t=oa(t.current,null),Gn=Kr=e,Cn=0,Pd=null,$T=Jg=Tl=0,Dr=Xf=null,il!==null){for(e=0;e<il.length;e++)if(n=il[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}il=null}return t}function VD(t,e){do{var n=vn;try{if(CT(),Xp.current=Um,Vm){for(var r=en.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Vm=!1}if(bl=0,Mn=Rn=en=null,Qf=!1,Rd=0,BT.current=null,n===null||n.return===null){Cn=1,Pd=e,vn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Gn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,f=a,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var _=UR(o);if(_!==null){_.flags&=-257,BR(_,o,a,s,e),_.mode&1&&VR(s,u,e),e=_,l=u;var E=e.updateQueue;if(E===null){var S=new Set;S.add(l),e.updateQueue=S}else E.add(l);break e}else{if(!(e&1)){VR(s,u,e),WT();break e}l=Error(ve(426))}}else if(Gt&&a.mode&1){var I=UR(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),BR(I,o,a,s,e),IT(hc(l,a));break e}}s=l=hc(l,a),Cn!==4&&(Cn=2),Xf===null?Xf=[s]:Xf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var R=bD(s,l,e);NR(s,R);break e;case 1:a=l;var w=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ia===null||!ia.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=TD(s,a,e);NR(s,C);break e}}s=s.return}while(s!==null)}$D(n)}catch(k){e=k,vn===n&&n!==null&&(vn=n=n.return);continue}break}while(!0)}function UD(){var t=Bm.current;return Bm.current=Um,t===null?Um:t}function WT(){(Cn===0||Cn===3||Cn===2)&&(Cn=4),Bn===null||!(Tl&268435455)&&!(Jg&268435455)||Bo(Bn,Gn)}function Hm(t,e){var n=wt;wt|=2;var r=UD();(Bn!==t||Gn!==e)&&(Hs=null,hl(t,e));do try{CU();break}catch(i){VD(t,i)}while(!0);if(CT(),wt=n,Bm.current=r,vn!==null)throw Error(ve(261));return Bn=null,Gn=0,Cn}function CU(){for(;vn!==null;)BD(vn)}function AU(){for(;vn!==null&&!e7();)BD(vn)}function BD(t){var e=HD(t.alternate,t,Kr);t.memoizedProps=t.pendingProps,e===null?$D(t):vn=e,BT.current=null}function $D(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bU(n,e),n!==null){n.flags&=32767,vn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Cn=6,vn=null;return}}else if(n=EU(n,e,Kr),n!==null){vn=n;return}if(e=e.sibling,e!==null){vn=e;return}vn=e=t}while(e!==null);Cn===0&&(Cn=5)}function Ja(t,e,n){var r=At,i=vi.transition;try{vi.transition=null,At=1,PU(t,e,n,r)}finally{vi.transition=i,At=r}return null}function PU(t,e,n,r){do Zu();while(Go!==null);if(wt&6)throw Error(ve(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ve(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(c7(t,s),t===Bn&&(vn=Bn=null,Gn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Rp||(Rp=!0,qD(xm,function(){return Zu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=vi.transition,vi.transition=null;var o=At;At=1;var a=wt;wt|=4,BT.current=null,SU(t,n),MD(n,t),Y7(SE),Rm=!!TE,SE=TE=null,t.current=n,xU(n),t7(),wt=a,At=o,vi.transition=s}else t.current=n;if(Rp&&(Rp=!1,Go=t,zm=i),s=t.pendingLanes,s===0&&(ia=null),i7(n.stateNode),Ur(t,dn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($m)throw $m=!1,t=HE,HE=null,t;return zm&1&&t.tag!==0&&Zu(),s=t.pendingLanes,s&1?t===qE?Jf++:(Jf=0,qE=t):Jf=0,Sa(),null}function Zu(){if(Go!==null){var t=b4(zm),e=vi.transition,n=At;try{if(vi.transition=null,At=16>t?16:t,Go===null)var r=!1;else{if(t=Go,Go=null,zm=0,wt&6)throw Error(ve(331));var i=wt;for(wt|=4,De=t.current;De!==null;){var s=De,o=s.child;if(De.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(De=u;De!==null;){var f=De;switch(f.tag){case 0:case 11:case 15:Yf(8,f,s)}var p=f.child;if(p!==null)p.return=f,De=p;else for(;De!==null;){f=De;var y=f.sibling,_=f.return;if(ND(f),f===u){De=null;break}if(y!==null){y.return=_,De=y;break}De=_}}}var E=s.alternate;if(E!==null){var S=E.child;if(S!==null){E.child=null;do{var I=S.sibling;S.sibling=null,S=I}while(S!==null)}}De=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,De=o;else e:for(;De!==null;){if(s=De,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Yf(9,s,s.return)}var R=s.sibling;if(R!==null){R.return=s.return,De=R;break e}De=s.return}}var w=t.current;for(De=w;De!==null;){o=De;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,De=v;else e:for(o=w;De!==null;){if(a=De,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Xg(9,a)}}catch(k){an(a,a.return,k)}if(a===o){De=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,De=C;break e}De=a.return}}if(wt=i,Sa(),bs&&typeof bs.onPostCommitFiberRoot=="function")try{bs.onPostCommitFiberRoot(zg,t)}catch{}r=!0}return r}finally{At=n,vi.transition=e}}return!1}function eC(t,e,n){e=hc(n,e),e=bD(t,e,1),t=ra(t,e,1),e=xr(),t!==null&&(Jd(t,1,e),Ur(t,e))}function an(t,e,n){if(t.tag===3)eC(t,t,n);else for(;e!==null;){if(e.tag===3){eC(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ia===null||!ia.has(r))){t=hc(n,t),t=TD(e,t,1),e=ra(e,t,1),t=xr(),e!==null&&(Jd(e,1,t),Ur(e,t));break}}e=e.return}}function kU(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xr(),t.pingedLanes|=t.suspendedLanes&n,Bn===t&&(Gn&n)===n&&(Cn===4||Cn===3&&(Gn&130023424)===Gn&&500>dn()-zT?hl(t,0):$T|=n),Ur(t,e)}function zD(t,e){e===0&&(t.mode&1?(e=yp,yp<<=1,!(yp&130023424)&&(yp=4194304)):e=1);var n=xr();t=ao(t,e),t!==null&&(Jd(t,e,n),Ur(t,n))}function OU(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),zD(t,n)}function NU(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ve(314))}r!==null&&r.delete(e),zD(t,n)}var HD;HD=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jr.current)Mr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Mr=!1,wU(t,e,n);Mr=!!(t.flags&131072)}else Mr=!1,Gt&&e.flags&1048576&&G4(e,Dm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Zp(t,e),t=e.pendingProps;var i=uc(e,mr.current);Ju(e,n),i=MT(null,e,r,t,i,n);var s=FT();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vr(r)?(s=!0,Om(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,kT(e),i.updater=Yg,e.stateNode=i,i._reactInternals=e,NE(e,r,t,n),e=ME(null,e,r,!0,s,n)):(e.tag=0,Gt&&s&&ST(e),wr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Zp(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=LU(r),t=Di(r,t),i){case 0:e=LE(null,e,r,t,n);break e;case 1:e=HR(null,e,r,t,n);break e;case 11:e=$R(null,e,r,t,n);break e;case 14:e=zR(null,e,r,Di(r.type,t),n);break e}throw Error(ve(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Di(r,i),LE(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Di(r,i),HR(t,e,r,i,n);case 3:e:{if(RD(e),t===null)throw Error(ve(387));r=e.pendingProps,s=e.memoizedState,i=s.element,eD(t,e),Fm(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=hc(Error(ve(423)),e),e=qR(t,e,r,n,i);break e}else if(r!==i){i=hc(Error(ve(424)),e),e=qR(t,e,r,n,i);break e}else for(Yr=na(e.stateNode.containerInfo.firstChild),ei=e,Gt=!0,Fi=null,n=J4(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cc(),r===i){e=lo(t,e,n);break e}wr(t,e,r,n)}e=e.child}return e;case 5:return tD(e),t===null&&PE(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,xE(r,i)?o=null:s!==null&&xE(r,s)&&(e.flags|=32),ID(t,e),wr(t,e,o,n),e.child;case 6:return t===null&&PE(e),null;case 13:return CD(t,e,n);case 4:return OT(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=fc(e,null,r,n):wr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Di(r,i),$R(t,e,r,i,n);case 7:return wr(t,e,e.pendingProps,n),e.child;case 8:return wr(t,e,e.pendingProps.children,n),e.child;case 12:return wr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ft(Lm,r._currentValue),r._currentValue=o,s!==null)if(Qi(s.value,o)){if(s.children===i.children&&!jr.current){e=lo(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Zs(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?l.next=l:(l.next=f.next,f.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),kE(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ve(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),kE(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}wr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ju(e,n),i=Ei(i),r=r(i),e.flags|=1,wr(t,e,r,n),e.child;case 14:return r=e.type,i=Di(r,e.pendingProps),i=Di(r.type,i),zR(t,e,r,i,n);case 15:return SD(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Di(r,i),Zp(t,e),e.tag=1,Vr(r)?(t=!0,Om(e)):t=!1,Ju(e,n),ED(e,r,i),NE(e,r,i,n),ME(null,e,r,!0,t,n);case 19:return AD(t,e,n);case 22:return xD(t,e,n)}throw Error(ve(156,e.tag))};function qD(t,e){return v4(t,e)}function DU(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gi(t,e,n,r){return new DU(t,e,n,r)}function KT(t){return t=t.prototype,!(!t||!t.isReactComponent)}function LU(t){if(typeof t=="function")return KT(t)?1:0;if(t!=null){if(t=t.$$typeof,t===dT)return 11;if(t===hT)return 14}return 2}function oa(t,e){var n=t.alternate;return n===null?(n=gi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function nm(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")KT(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Nu:return pl(n.children,i,s,e);case fT:o=8,i|=8;break;case rE:return t=gi(12,n,e,i|2),t.elementType=rE,t.lanes=s,t;case iE:return t=gi(13,n,e,i),t.elementType=iE,t.lanes=s,t;case sE:return t=gi(19,n,e,i),t.elementType=sE,t.lanes=s,t;case t4:return Zg(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ZN:o=10;break e;case e4:o=9;break e;case dT:o=11;break e;case hT:o=14;break e;case jo:o=16,r=null;break e}throw Error(ve(130,t==null?t:typeof t,""))}return e=gi(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function pl(t,e,n,r){return t=gi(7,t,r,e),t.lanes=n,t}function Zg(t,e,n,r){return t=gi(22,t,r,e),t.elementType=t4,t.lanes=n,t.stateNode={isHidden:!1},t}function o0(t,e,n){return t=gi(6,t,null,e),t.lanes=n,t}function a0(t,e,n){return e=gi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function MU(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bv(0),this.expirationTimes=Bv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bv(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function GT(t,e,n,r,i,s,o,a,l){return t=new MU(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=gi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},kT(s),t}function FU(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ou,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function WD(t){if(!t)return ha;t=t._reactInternals;e:{if(Ul(t)!==t||t.tag!==1)throw Error(ve(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ve(171))}if(t.tag===1){var n=t.type;if(Vr(n))return W4(t,n,e)}return e}function KD(t,e,n,r,i,s,o,a,l){return t=GT(n,r,!0,t,i,s,o,a,l),t.context=WD(null),n=t.current,r=xr(),i=sa(n),s=Zs(r,i),s.callback=e??null,ra(n,s,i),t.current.lanes=i,Jd(t,i,r),Ur(t,r),t}function ey(t,e,n,r){var i=e.current,s=xr(),o=sa(i);return n=WD(n),e.context===null?e.context=n:e.pendingContext=n,e=Zs(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ra(i,e,o),t!==null&&(Wi(t,i,o,s),Yp(t,i,o)),o}function qm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function QT(t,e){tC(t,e),(t=t.alternate)&&tC(t,e)}function jU(){return null}var GD=typeof reportError=="function"?reportError:function(t){console.error(t)};function YT(t){this._internalRoot=t}ty.prototype.render=YT.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ve(409));ey(t,e,null,null)};ty.prototype.unmount=YT.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Sl(function(){ey(null,t,null,null)}),e[oo]=null}};function ty(t){this._internalRoot=t}ty.prototype.unstable_scheduleHydration=function(t){if(t){var e=x4();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Uo.length&&e!==0&&e<Uo[n].priority;n++);Uo.splice(n,0,t),n===0&&R4(t)}};function XT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ny(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nC(){}function VU(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=qm(o);s.call(u)}}var o=KD(e,r,t,0,null,!1,!1,"",nC);return t._reactRootContainer=o,t[oo]=o.current,bd(t.nodeType===8?t.parentNode:t),Sl(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=qm(l);a.call(u)}}var l=GT(t,0,!1,null,null,!1,!1,"",nC);return t._reactRootContainer=l,t[oo]=l.current,bd(t.nodeType===8?t.parentNode:t),Sl(function(){ey(e,l,n,r)}),l}function ry(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=qm(o);a.call(l)}}ey(e,o,t,i)}else o=VU(n,e,t,i,r);return qm(o)}T4=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Of(e.pendingLanes);n!==0&&(gT(e,n|1),Ur(e,dn()),!(wt&6)&&(pc=dn()+500,Sa()))}break;case 13:Sl(function(){var r=ao(t,1);if(r!==null){var i=xr();Wi(r,t,1,i)}}),QT(t,1)}};yT=function(t){if(t.tag===13){var e=ao(t,134217728);if(e!==null){var n=xr();Wi(e,t,134217728,n)}QT(t,134217728)}};S4=function(t){if(t.tag===13){var e=sa(t),n=ao(t,e);if(n!==null){var r=xr();Wi(n,t,e,r)}QT(t,e)}};x4=function(){return At};I4=function(t,e){var n=At;try{return At=t,e()}finally{At=n}};mE=function(t,e,n){switch(e){case"input":if(lE(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Kg(r);if(!i)throw Error(ve(90));r4(r),lE(r,i)}}}break;case"textarea":s4(t,n);break;case"select":e=n.value,e!=null&&Gu(t,!!n.multiple,e,!1)}};d4=HT;h4=Sl;var UU={usingClientEntryPoint:!1,Events:[eh,Fu,Kg,c4,f4,HT]},yf={findFiberByHostInstance:rl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BU={bundleType:yf.bundleType,version:yf.version,rendererPackageName:yf.rendererPackageName,rendererConfig:yf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_o.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=g4(t),t===null?null:t.stateNode},findFiberByHostInstance:yf.findFiberByHostInstance||jU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cp.isDisabled&&Cp.supportsFiber)try{zg=Cp.inject(BU),bs=Cp}catch{}}si.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UU;si.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!XT(e))throw Error(ve(200));return FU(t,e,null,n)};si.createRoot=function(t,e){if(!XT(t))throw Error(ve(299));var n=!1,r="",i=GD;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=GT(t,1,!1,null,null,n,!1,r,i),t[oo]=e.current,bd(t.nodeType===8?t.parentNode:t),new YT(e)};si.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ve(188)):(t=Object.keys(t).join(","),Error(ve(268,t)));return t=g4(e),t=t===null?null:t.stateNode,t};si.flushSync=function(t){return Sl(t)};si.hydrate=function(t,e,n){if(!ny(e))throw Error(ve(200));return ry(null,t,e,!0,n)};si.hydrateRoot=function(t,e,n){if(!XT(t))throw Error(ve(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=GD;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=KD(e,null,t,1,n??null,i,!1,s,o),t[oo]=e.current,bd(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ty(e)};si.render=function(t,e,n){if(!ny(e))throw Error(ve(200));return ry(null,t,e,!1,n)};si.unmountComponentAtNode=function(t){if(!ny(t))throw Error(ve(40));return t._reactRootContainer?(Sl(function(){ry(null,null,t,!1,function(){t._reactRootContainer=null,t[oo]=null})}),!0):!1};si.unstable_batchedUpdates=HT;si.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ny(n))throw Error(ve(200));if(t==null||t._reactInternals===void 0)throw Error(ve(38));return ry(t,e,n,!1,r)};si.version="18.3.1-next-f1338f8080-20240426";function QD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QD)}catch(t){console.error(t)}}QD(),QN.exports=si;var Br=QN.exports;const $U=rT(Br),zU=FN({__proto__:null,default:$U},[Br]);var YD,rC=Br;YD=rC.createRoot,rC.hydrateRoot;const HU="modulepreload",qU=function(t){return"/r-social/"+t},iC={},WU=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.all(n.map(a=>{if(a=qU(a),a in iC)return;iC[a]=!0;const l=a.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${u}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":HU,l||(f.as="script"),f.crossOrigin="",f.href=a,o&&f.setAttribute("nonce",o),document.head.appendChild(f),l)return new Promise((p,y)=>{f.addEventListener("load",p),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${a}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var nh=t=>t.type==="checkbox",Hu=t=>t instanceof Date,Er=t=>t==null;const XD=t=>typeof t=="object";var En=t=>!Er(t)&&!Array.isArray(t)&&XD(t)&&!Hu(t),KU=t=>En(t)&&t.target?nh(t.target)?t.target.checked:t.target.value:t,GU=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,QU=(t,e)=>t.has(GU(e)),YU=t=>{const e=t.constructor&&t.constructor.prototype;return En(e)&&e.hasOwnProperty("isPrototypeOf")},JT=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function di(t){let e;const n=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(JT&&(t instanceof Blob||t instanceof FileList))&&(n||En(t)))if(e=n?[]:{},!n&&!YU(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=di(t[r]));else return t;return e}var iy=t=>Array.isArray(t)?t.filter(Boolean):[],cn=t=>t===void 0,Fe=(t,e,n)=>{if(!e||!En(t))return n;const r=iy(e.split(/[,[\].]+?/)).reduce((i,s)=>Er(i)?i:i[s],t);return cn(r)||r===t?cn(t[e])?n:t[e]:r},ms=t=>typeof t=="boolean",ZT=t=>/^\w*$/.test(t),JD=t=>iy(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ut=(t,e,n)=>{let r=-1;const i=ZT(e)?[e]:JD(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let l=n;if(r!==o){const u=t[a];l=En(u)||Array.isArray(u)?u:isNaN(+i[r+1])?{}:[]}if(a==="__proto__")return;t[a]=l,t=t[a]}return t};const sC={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ji={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},$s={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};Pe.createContext(null);var XU=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==ji.all&&(e._proxyFormState[o]=!r||ji.all),t[o]}});return i},Or=t=>En(t)&&!Object.keys(t).length,JU=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return Or(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===ji.all)},rm=t=>Array.isArray(t)?t:[t];function ZU(t){const e=Pe.useRef(t);e.current=t,Pe.useEffect(()=>{const n=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{n&&n.unsubscribe()}},[t.disabled])}var _s=t=>typeof t=="string",eB=(t,e,n,r,i)=>_s(t)?(r&&e.watch.add(t),Fe(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),Fe(n,s))):(r&&(e.watchAll=!0),n),tB=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},oC=t=>({isOnSubmit:!t||t===ji.onSubmit,isOnBlur:t===ji.onBlur,isOnChange:t===ji.onChange,isOnAll:t===ji.all,isOnTouch:t===ji.onTouched}),aC=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Zf=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=Fe(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Zf(a,e))break}else if(En(a)&&Zf(a,e))break}}};var nB=(t,e,n)=>{const r=rm(Fe(t,n));return Ut(r,"root",e[n]),Ut(t,n,r),t},eS=t=>t.type==="file",Gs=t=>typeof t=="function",Wm=t=>{if(!JT)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},im=t=>_s(t),tS=t=>t.type==="radio",Km=t=>t instanceof RegExp;const lC={value:!1,isValid:!1},uC={value:!0,isValid:!0};var ZD=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!cn(t[0].attributes.value)?cn(t[0].value)||t[0].value===""?uC:{value:t[0].value,isValid:!0}:uC:lC}return lC};const cC={isValid:!1,value:null};var eL=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,cC):cC;function fC(t,e,n="validate"){if(im(t)||Array.isArray(t)&&t.every(im)||ms(t)&&!t)return{type:n,message:im(t)?t:"",ref:e}}var Tu=t=>En(t)&&!Km(t)?t:{value:t,message:""},dC=async(t,e,n,r,i)=>{const{ref:s,refs:o,required:a,maxLength:l,minLength:u,min:f,max:p,pattern:y,validate:_,name:E,valueAsNumber:S,mount:I,disabled:R}=t._f,w=Fe(e,E);if(!I||R)return{};const v=o?o[0]:s,C=j=>{r&&v.reportValidity&&(v.setCustomValidity(ms(j)?"":j||""),v.reportValidity())},k={},B=tS(s),D=nh(s),T=B||D,N=(S||eS(s))&&cn(s.value)&&cn(w)||Wm(s)&&s.value===""||w===""||Array.isArray(w)&&!w.length,L=tB.bind(null,E,n,k),V=(j,M,le,me=$s.maxLength,pe=$s.minLength)=>{const X=j?M:le;k[E]={type:j?me:pe,message:X,ref:s,...L(j?me:pe,X)}};if(i?!Array.isArray(w)||!w.length:a&&(!T&&(N||Er(w))||ms(w)&&!w||D&&!ZD(o).isValid||B&&!eL(o).isValid)){const{value:j,message:M}=im(a)?{value:!!a,message:a}:Tu(a);if(j&&(k[E]={type:$s.required,message:M,ref:v,...L($s.required,M)},!n))return C(M),k}if(!N&&(!Er(f)||!Er(p))){let j,M;const le=Tu(p),me=Tu(f);if(!Er(w)&&!isNaN(w)){const pe=s.valueAsNumber||w&&+w;Er(le.value)||(j=pe>le.value),Er(me.value)||(M=pe<me.value)}else{const pe=s.valueAsDate||new Date(w),X=ce=>new Date(new Date().toDateString()+" "+ce),G=s.type=="time",Y=s.type=="week";_s(le.value)&&w&&(j=G?X(w)>X(le.value):Y?w>le.value:pe>new Date(le.value)),_s(me.value)&&w&&(M=G?X(w)<X(me.value):Y?w<me.value:pe<new Date(me.value))}if((j||M)&&(V(!!j,le.message,me.message,$s.max,$s.min),!n))return C(k[E].message),k}if((l||u)&&!N&&(_s(w)||i&&Array.isArray(w))){const j=Tu(l),M=Tu(u),le=!Er(j.value)&&w.length>+j.value,me=!Er(M.value)&&w.length<+M.value;if((le||me)&&(V(le,j.message,M.message),!n))return C(k[E].message),k}if(y&&!N&&_s(w)){const{value:j,message:M}=Tu(y);if(Km(j)&&!w.match(j)&&(k[E]={type:$s.pattern,message:M,ref:s,...L($s.pattern,M)},!n))return C(M),k}if(_){if(Gs(_)){const j=await _(w,e),M=fC(j,v);if(M&&(k[E]={...M,...L($s.validate,M.message)},!n))return C(M.message),k}else if(En(_)){let j={};for(const M in _){if(!Or(j)&&!n)break;const le=fC(await _[M](w,e),v,M);le&&(j={...le,...L(M,le.message)},C(le.message),n&&(k[E]=j))}if(!Or(j)&&(k[E]={ref:v,...j},!n))return k}}return C(!0),k};function rB(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=cn(t)?r++:t[e[r++]];return t}function iB(t){for(const e in t)if(t.hasOwnProperty(e)&&!cn(t[e]))return!1;return!0}function In(t,e){const n=Array.isArray(e)?e:ZT(e)?[e]:JD(e),r=n.length===1?t:rB(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(En(r)&&Or(r)||Array.isArray(r)&&iB(r))&&In(t,n.slice(0,-1)),t}var l0=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}},Gm=t=>Er(t)||!XD(t);function $o(t,e){if(Gm(t)||Gm(e))return t===e;if(Hu(t)&&Hu(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(Hu(s)&&Hu(o)||En(s)&&En(o)||Array.isArray(s)&&Array.isArray(o)?!$o(s,o):s!==o)return!1}}return!0}var tL=t=>t.type==="select-multiple",sB=t=>tS(t)||nh(t),u0=t=>Wm(t)&&t.isConnected,nL=t=>{for(const e in t)if(Gs(t[e]))return!0;return!1};function Qm(t,e={}){const n=Array.isArray(t);if(En(t)||n)for(const r in t)Array.isArray(t[r])||En(t[r])&&!nL(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Qm(t[r],e[r])):Er(t[r])||(e[r]=!0);return e}function rL(t,e,n){const r=Array.isArray(t);if(En(t)||r)for(const i in t)Array.isArray(t[i])||En(t[i])&&!nL(t[i])?cn(e)||Gm(n[i])?n[i]=Array.isArray(t[i])?Qm(t[i],[]):{...Qm(t[i])}:rL(t[i],Er(e)?{}:e[i],n[i]):n[i]=!$o(t[i],e[i]);return n}var Ap=(t,e)=>rL(t,e,Qm(e)),iL=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>cn(t)?t:e?t===""?NaN:t&&+t:n&&_s(t)?new Date(t):r?r(t):t;function c0(t){const e=t.ref;if(!(t.refs?t.refs.every(n=>n.disabled):e.disabled))return eS(e)?e.files:tS(e)?eL(t.refs).value:tL(e)?[...e.selectedOptions].map(({value:n})=>n):nh(e)?ZD(t.refs).value:iL(cn(e.value)?t.ref.value:e.value,t)}var oB=(t,e,n,r)=>{const i={};for(const s of t){const o=Fe(e,s);o&&Ut(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},vf=t=>cn(t)?t:Km(t)?t.source:En(t)?Km(t.value)?t.value.source:t.value:t;const hC="AsyncFunction";var aB=t=>(!t||!t.validate)&&!!(Gs(t.validate)&&t.validate.constructor.name===hC||En(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===hC)),lB=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function pC(t,e,n){const r=Fe(t,n);if(r||ZT(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=Fe(e,s),a=Fe(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};i.pop()}return{name:n}}var uB=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,cB=(t,e)=>!iy(Fe(t,e)).length&&In(t,e);const fB={mode:ji.onSubmit,reValidateMode:ji.onChange,shouldFocusError:!0};function dB(t={}){let e={...fB,...t},n={submitCount:0,isDirty:!1,isLoading:Gs(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=En(e.defaultValues)||En(e.values)?di(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:di(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},p={values:l0(),array:l0(),state:l0()},y=oC(e.mode),_=oC(e.reValidateMode),E=e.criteriaMode===ji.all,S=z=>Z=>{clearTimeout(u),u=setTimeout(z,Z)},I=async z=>{if(f.isValid||z){const Z=e.resolver?Or((await T()).errors):await L(r,!0);Z!==n.isValid&&p.state.next({isValid:Z})}},R=(z,Z)=>{(f.isValidating||f.validatingFields)&&((z||Array.from(a.mount)).forEach(ae=>{ae&&(Z?Ut(n.validatingFields,ae,Z):In(n.validatingFields,ae))}),p.state.next({validatingFields:n.validatingFields,isValidating:!Or(n.validatingFields)}))},w=(z,Z=[],ae,ge,_e=!0,fe=!0)=>{if(ge&&ae){if(o.action=!0,fe&&Array.isArray(Fe(r,z))){const ke=ae(Fe(r,z),ge.argA,ge.argB);_e&&Ut(r,z,ke)}if(fe&&Array.isArray(Fe(n.errors,z))){const ke=ae(Fe(n.errors,z),ge.argA,ge.argB);_e&&Ut(n.errors,z,ke),cB(n.errors,z)}if(f.touchedFields&&fe&&Array.isArray(Fe(n.touchedFields,z))){const ke=ae(Fe(n.touchedFields,z),ge.argA,ge.argB);_e&&Ut(n.touchedFields,z,ke)}f.dirtyFields&&(n.dirtyFields=Ap(i,s)),p.state.next({name:z,isDirty:j(z,Z),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Ut(s,z,Z)},v=(z,Z)=>{Ut(n.errors,z,Z),p.state.next({errors:n.errors})},C=z=>{n.errors=z,p.state.next({errors:n.errors,isValid:!1})},k=(z,Z,ae,ge)=>{const _e=Fe(r,z);if(_e){const fe=Fe(s,z,cn(ae)?Fe(i,z):ae);cn(fe)||ge&&ge.defaultChecked||Z?Ut(s,z,Z?fe:c0(_e._f)):me(z,fe),o.mount&&I()}},B=(z,Z,ae,ge,_e)=>{let fe=!1,ke=!1;const Be={name:z},Qe=!!(Fe(r,z)&&Fe(r,z)._f&&Fe(r,z)._f.disabled);if(!ae||ge){f.isDirty&&(ke=n.isDirty,n.isDirty=Be.isDirty=j(),fe=ke!==Be.isDirty);const qe=Qe||$o(Fe(i,z),Z);ke=!!(!Qe&&Fe(n.dirtyFields,z)),qe||Qe?In(n.dirtyFields,z):Ut(n.dirtyFields,z,!0),Be.dirtyFields=n.dirtyFields,fe=fe||f.dirtyFields&&ke!==!qe}if(ae){const qe=Fe(n.touchedFields,z);qe||(Ut(n.touchedFields,z,ae),Be.touchedFields=n.touchedFields,fe=fe||f.touchedFields&&qe!==ae)}return fe&&_e&&p.state.next(Be),fe?Be:{}},D=(z,Z,ae,ge)=>{const _e=Fe(n.errors,z),fe=f.isValid&&ms(Z)&&n.isValid!==Z;if(t.delayError&&ae?(l=S(()=>v(z,ae)),l(t.delayError)):(clearTimeout(u),l=null,ae?Ut(n.errors,z,ae):In(n.errors,z)),(ae?!$o(_e,ae):_e)||!Or(ge)||fe){const ke={...ge,...fe&&ms(Z)?{isValid:Z}:{},errors:n.errors,name:z};n={...n,...ke},p.state.next(ke)}},T=async z=>{R(z,!0);const Z=await e.resolver(s,e.context,oB(z||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return R(z),Z},N=async z=>{const{errors:Z}=await T(z);if(z)for(const ae of z){const ge=Fe(Z,ae);ge?Ut(n.errors,ae,ge):In(n.errors,ae)}else n.errors=Z;return Z},L=async(z,Z,ae={valid:!0})=>{for(const ge in z){const _e=z[ge];if(_e){const{_f:fe,...ke}=_e;if(fe){const Be=a.array.has(fe.name),Qe=_e._f&&aB(_e._f);Qe&&f.validatingFields&&R([ge],!0);const qe=await dC(_e,s,E,e.shouldUseNativeValidation&&!Z,Be);if(Qe&&f.validatingFields&&R([ge]),qe[fe.name]&&(ae.valid=!1,Z))break;!Z&&(Fe(qe,fe.name)?Be?nB(n.errors,qe,fe.name):Ut(n.errors,fe.name,qe[fe.name]):In(n.errors,fe.name))}!Or(ke)&&await L(ke,Z,ae)}}return ae.valid},V=()=>{for(const z of a.unMount){const Z=Fe(r,z);Z&&(Z._f.refs?Z._f.refs.every(ae=>!u0(ae)):!u0(Z._f.ref))&&Te(z)}a.unMount=new Set},j=(z,Z)=>(z&&Z&&Ut(s,z,Z),!$o(ee(),i)),M=(z,Z,ae)=>eB(z,a,{...o.mount?s:cn(Z)?i:_s(z)?{[z]:Z}:Z},ae,Z),le=z=>iy(Fe(o.mount?s:i,z,t.shouldUnregister?Fe(i,z,[]):[])),me=(z,Z,ae={})=>{const ge=Fe(r,z);let _e=Z;if(ge){const fe=ge._f;fe&&(!fe.disabled&&Ut(s,z,iL(Z,fe)),_e=Wm(fe.ref)&&Er(Z)?"":Z,tL(fe.ref)?[...fe.ref.options].forEach(ke=>ke.selected=_e.includes(ke.value)):fe.refs?nh(fe.ref)?fe.refs.length>1?fe.refs.forEach(ke=>(!ke.defaultChecked||!ke.disabled)&&(ke.checked=Array.isArray(_e)?!!_e.find(Be=>Be===ke.value):_e===ke.value)):fe.refs[0]&&(fe.refs[0].checked=!!_e):fe.refs.forEach(ke=>ke.checked=ke.value===_e):eS(fe.ref)?fe.ref.value="":(fe.ref.value=_e,fe.ref.type||p.values.next({name:z,values:{...s}})))}(ae.shouldDirty||ae.shouldTouch)&&B(z,_e,ae.shouldTouch,ae.shouldDirty,!0),ae.shouldValidate&&ce(z)},pe=(z,Z,ae)=>{for(const ge in Z){const _e=Z[ge],fe=`${z}.${ge}`,ke=Fe(r,fe);(a.array.has(z)||!Gm(_e)||ke&&!ke._f)&&!Hu(_e)?pe(fe,_e,ae):me(fe,_e,ae)}},X=(z,Z,ae={})=>{const ge=Fe(r,z),_e=a.array.has(z),fe=di(Z);Ut(s,z,fe),_e?(p.array.next({name:z,values:{...s}}),(f.isDirty||f.dirtyFields)&&ae.shouldDirty&&p.state.next({name:z,dirtyFields:Ap(i,s),isDirty:j(z,fe)})):ge&&!ge._f&&!Er(fe)?pe(z,fe,ae):me(z,fe,ae),aC(z,a)&&p.state.next({...n}),p.values.next({name:o.mount?z:void 0,values:{...s}})},G=async z=>{o.mount=!0;const Z=z.target;let ae=Z.name,ge=!0;const _e=Fe(r,ae),fe=()=>Z.type?c0(_e._f):KU(z),ke=Be=>{ge=Number.isNaN(Be)||$o(Be,Fe(s,ae,Be))};if(_e){let Be,Qe;const qe=fe(),Kt=z.type===sC.BLUR||z.type===sC.FOCUS_OUT,Zn=!lB(_e._f)&&!e.resolver&&!Fe(n.errors,ae)&&!_e._f.deps||uB(Kt,Fe(n.touchedFields,ae),n.isSubmitted,_,y),pn=aC(ae,a,Kt);Ut(s,ae,qe),Kt?(_e._f.onBlur&&_e._f.onBlur(z),l&&l(0)):_e._f.onChange&&_e._f.onChange(z);const nt=B(ae,qe,Kt,!1),yr=!Or(nt)||pn;if(!Kt&&p.values.next({name:ae,type:z.type,values:{...s}}),Zn)return f.isValid&&(t.mode==="onBlur"?Kt&&I():I()),yr&&p.state.next({name:ae,...pn?{}:nt});if(!Kt&&pn&&p.state.next({...n}),e.resolver){const{errors:rn}=await T([ae]);if(ke(qe),ge){const Tn=pC(n.errors,r,ae),Pn=pC(rn,r,Tn.name||ae);Be=Pn.error,ae=Pn.name,Qe=Or(rn)}}else R([ae],!0),Be=(await dC(_e,s,E,e.shouldUseNativeValidation))[ae],R([ae]),ke(qe),ge&&(Be?Qe=!1:f.isValid&&(Qe=await L(r,!0)));ge&&(_e._f.deps&&ce(_e._f.deps),D(ae,Qe,Be,nt))}},Y=(z,Z)=>{if(Fe(n.errors,Z)&&z.focus)return z.focus(),1},ce=async(z,Z={})=>{let ae,ge;const _e=rm(z);if(e.resolver){const fe=await N(cn(z)?z:_e);ae=Or(fe),ge=z?!_e.some(ke=>Fe(fe,ke)):ae}else z?(ge=(await Promise.all(_e.map(async fe=>{const ke=Fe(r,fe);return await L(ke&&ke._f?{[fe]:ke}:ke)}))).every(Boolean),!(!ge&&!n.isValid)&&I()):ge=ae=await L(r);return p.state.next({...!_s(z)||f.isValid&&ae!==n.isValid?{}:{name:z},...e.resolver||!z?{isValid:ae}:{},errors:n.errors}),Z.shouldFocus&&!ge&&Zf(r,Y,z?_e:a.mount),ge},ee=z=>{const Z={...o.mount?s:i};return cn(z)?Z:_s(z)?Fe(Z,z):z.map(ae=>Fe(Z,ae))},$=(z,Z)=>({invalid:!!Fe((Z||n).errors,z),isDirty:!!Fe((Z||n).dirtyFields,z),error:Fe((Z||n).errors,z),isValidating:!!Fe(n.validatingFields,z),isTouched:!!Fe((Z||n).touchedFields,z)}),K=z=>{z&&rm(z).forEach(Z=>In(n.errors,Z)),p.state.next({errors:z?n.errors:{}})},te=(z,Z,ae)=>{const ge=(Fe(r,z,{_f:{}})._f||{}).ref,_e=Fe(n.errors,z)||{},{ref:fe,message:ke,type:Be,...Qe}=_e;Ut(n.errors,z,{...Qe,...Z,ref:ge}),p.state.next({name:z,errors:n.errors,isValid:!1}),ae&&ae.shouldFocus&&ge&&ge.focus&&ge.focus()},Ee=(z,Z)=>Gs(z)?p.values.subscribe({next:ae=>z(M(void 0,Z),ae)}):M(z,Z,!0),Te=(z,Z={})=>{for(const ae of z?rm(z):a.mount)a.mount.delete(ae),a.array.delete(ae),Z.keepValue||(In(r,ae),In(s,ae)),!Z.keepError&&In(n.errors,ae),!Z.keepDirty&&In(n.dirtyFields,ae),!Z.keepTouched&&In(n.touchedFields,ae),!Z.keepIsValidating&&In(n.validatingFields,ae),!e.shouldUnregister&&!Z.keepDefaultValue&&In(i,ae);p.values.next({values:{...s}}),p.state.next({...n,...Z.keepDirty?{isDirty:j()}:{}}),!Z.keepIsValid&&I()},W=({disabled:z,name:Z,field:ae,fields:ge,value:_e})=>{if(ms(z)&&o.mount||z){const fe=z?void 0:cn(_e)?c0(ae?ae._f:Fe(ge,Z)._f):_e;Ut(s,Z,fe),B(Z,fe,!1,!1,!0)}},ue=(z,Z={})=>{let ae=Fe(r,z);const ge=ms(Z.disabled)||ms(t.disabled);return Ut(r,z,{...ae||{},_f:{...ae&&ae._f?ae._f:{ref:{name:z}},name:z,mount:!0,...Z}}),a.mount.add(z),ae?W({field:ae,disabled:ms(Z.disabled)?Z.disabled:t.disabled,name:z,value:Z.value}):k(z,!0,Z.value),{...ge?{disabled:Z.disabled||t.disabled}:{},...e.progressive?{required:!!Z.required,min:vf(Z.min),max:vf(Z.max),minLength:vf(Z.minLength),maxLength:vf(Z.maxLength),pattern:vf(Z.pattern)}:{},name:z,onChange:G,onBlur:G,ref:_e=>{if(_e){ue(z,Z),ae=Fe(r,z);const fe=cn(_e.value)&&_e.querySelectorAll&&_e.querySelectorAll("input,select,textarea")[0]||_e,ke=sB(fe),Be=ae._f.refs||[];if(ke?Be.find(Qe=>Qe===fe):fe===ae._f.ref)return;Ut(r,z,{_f:{...ae._f,...ke?{refs:[...Be.filter(u0),fe,...Array.isArray(Fe(i,z))?[{}]:[]],ref:{type:fe.type,name:z}}:{ref:fe}}}),k(z,!1,void 0,fe)}else ae=Fe(r,z,{}),ae._f&&(ae._f.mount=!1),(e.shouldUnregister||Z.shouldUnregister)&&!(QU(a.array,z)&&o.action)&&a.unMount.add(z)}}},Se=()=>e.shouldFocusError&&Zf(r,Y,a.mount),be=z=>{ms(z)&&(p.state.next({disabled:z}),Zf(r,(Z,ae)=>{const ge=Fe(r,ae);ge&&(Z.disabled=ge._f.disabled||z,Array.isArray(ge._f.refs)&&ge._f.refs.forEach(_e=>{_e.disabled=ge._f.disabled||z}))},0,!1))},xe=(z,Z)=>async ae=>{let ge;ae&&(ae.preventDefault&&ae.preventDefault(),ae.persist&&ae.persist());let _e=di(s);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:fe,values:ke}=await T();n.errors=fe,_e=ke}else await L(r);if(In(n.errors,"root"),Or(n.errors)){p.state.next({errors:{}});try{await z(_e,ae)}catch(fe){ge=fe}}else Z&&await Z({...n.errors},ae),Se(),setTimeout(Se);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Or(n.errors)&&!ge,submitCount:n.submitCount+1,errors:n.errors}),ge)throw ge},Ke=(z,Z={})=>{Fe(r,z)&&(cn(Z.defaultValue)?X(z,di(Fe(i,z))):(X(z,Z.defaultValue),Ut(i,z,di(Z.defaultValue))),Z.keepTouched||In(n.touchedFields,z),Z.keepDirty||(In(n.dirtyFields,z),n.isDirty=Z.defaultValue?j(z,di(Fe(i,z))):j()),Z.keepError||(In(n.errors,z),f.isValid&&I()),p.state.next({...n}))},Et=(z,Z={})=>{const ae=z?di(z):i,ge=di(ae),_e=Or(z),fe=_e?i:ge;if(Z.keepDefaultValues||(i=ae),!Z.keepValues){if(Z.keepDirtyValues)for(const ke of a.mount)Fe(n.dirtyFields,ke)?Ut(fe,ke,Fe(s,ke)):X(ke,Fe(fe,ke));else{if(JT&&cn(z))for(const ke of a.mount){const Be=Fe(r,ke);if(Be&&Be._f){const Qe=Array.isArray(Be._f.refs)?Be._f.refs[0]:Be._f.ref;if(Wm(Qe)){const qe=Qe.closest("form");if(qe){qe.reset();break}}}}r={}}s=t.shouldUnregister?Z.keepDefaultValues?di(i):{}:di(fe),p.array.next({values:{...fe}}),p.values.next({values:{...fe}})}a={mount:Z.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!f.isValid||!!Z.keepIsValid||!!Z.keepDirtyValues,o.watch=!!t.shouldUnregister,p.state.next({submitCount:Z.keepSubmitCount?n.submitCount:0,isDirty:_e?!1:Z.keepDirty?n.isDirty:!!(Z.keepDefaultValues&&!$o(z,i)),isSubmitted:Z.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:_e?{}:Z.keepDirtyValues?Z.keepDefaultValues&&s?Ap(i,s):n.dirtyFields:Z.keepDefaultValues&&z?Ap(i,z):Z.keepDirty?n.dirtyFields:{},touchedFields:Z.keepTouched?n.touchedFields:{},errors:Z.keepErrors?n.errors:{},isSubmitSuccessful:Z.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},He=(z,Z)=>Et(Gs(z)?z(s):z,Z);return{control:{register:ue,unregister:Te,getFieldState:$,handleSubmit:xe,setError:te,_executeSchema:T,_getWatch:M,_getDirty:j,_updateValid:I,_removeUnmounted:V,_updateFieldArray:w,_updateDisabledField:W,_getFieldArray:le,_reset:Et,_resetDefaultValues:()=>Gs(e.defaultValues)&&e.defaultValues().then(z=>{He(z,e.resetOptions),p.state.next({isLoading:!1})}),_updateFormState:z=>{n={...n,...z}},_disableForm:be,_subjects:p,_proxyFormState:f,_setErrors:C,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(z){o=z},get _defaultValues(){return i},get _names(){return a},set _names(z){a=z},get _formState(){return n},set _formState(z){n=z},get _options(){return e},set _options(z){e={...e,...z}}},trigger:ce,register:ue,handleSubmit:xe,watch:Ee,setValue:X,getValues:ee,reset:He,resetField:Ke,clearErrors:K,unregister:Te,setError:te,setFocus:(z,Z={})=>{const ae=Fe(r,z),ge=ae&&ae._f;if(ge){const _e=ge.refs?ge.refs[0]:ge.ref;_e.focus&&(_e.focus(),Z.shouldSelect&&_e.select())}},getFieldState:$}}function rh(t={}){const e=Pe.useRef(),n=Pe.useRef(),[r,i]=Pe.useState({isDirty:!1,isValidating:!1,isLoading:Gs(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Gs(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...dB(t),formState:r});const s=e.current.control;return s._options=t,ZU({subject:s._subjects.state,next:o=>{JU(o,s._proxyFormState,s._updateFormState)&&i({...s._formState})}}),Pe.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),Pe.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),Pe.useEffect(()=>{t.values&&!$o(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[t.values,s]),Pe.useEffect(()=>{t.errors&&s._setErrors(t.errors)},[t.errors,s]),Pe.useEffect(()=>{s._state.mount||(s._updateValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),Pe.useEffect(()=>{t.shouldUnregister&&s._subjects.values.next({values:s._getWatch()})},[t.shouldUnregister,s]),e.current.formState=XU(r,s),e.current}function sL(t,e){return function(){return t.apply(e,arguments)}}const{toString:hB}=Object.prototype,{getPrototypeOf:nS}=Object,sy=(t=>e=>{const n=hB.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ji=t=>(t=t.toLowerCase(),e=>sy(e)===t),oy=t=>e=>typeof e===t,{isArray:Oc}=Array,kd=oy("undefined");function pB(t){return t!==null&&!kd(t)&&t.constructor!==null&&!kd(t.constructor)&&ti(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const oL=Ji("ArrayBuffer");function mB(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&oL(t.buffer),e}const gB=oy("string"),ti=oy("function"),aL=oy("number"),ay=t=>t!==null&&typeof t=="object",yB=t=>t===!0||t===!1,sm=t=>{if(sy(t)!=="object")return!1;const e=nS(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},vB=Ji("Date"),_B=Ji("File"),wB=Ji("Blob"),EB=Ji("FileList"),bB=t=>ay(t)&&ti(t.pipe),TB=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ti(t.append)&&((e=sy(t))==="formdata"||e==="object"&&ti(t.toString)&&t.toString()==="[object FormData]"))},SB=Ji("URLSearchParams"),[xB,IB,RB,CB]=["ReadableStream","Request","Response","Headers"].map(Ji),AB=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ih(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Oc(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function lL(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const ol=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,uL=t=>!kd(t)&&t!==ol;function GE(){const{caseless:t}=uL(this)&&this||{},e={},n=(r,i)=>{const s=t&&lL(e,i)||i;sm(e[s])&&sm(r)?e[s]=GE(e[s],r):sm(r)?e[s]=GE({},r):Oc(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&ih(arguments[r],n);return e}const PB=(t,e,n,{allOwnKeys:r}={})=>(ih(e,(i,s)=>{n&&ti(i)?t[s]=sL(i,n):t[s]=i},{allOwnKeys:r}),t),kB=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),OB=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},NB=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&nS(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},DB=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},LB=t=>{if(!t)return null;if(Oc(t))return t;let e=t.length;if(!aL(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},MB=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&nS(Uint8Array)),FB=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},jB=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},VB=Ji("HTMLFormElement"),UB=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),mC=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),BB=Ji("RegExp"),cL=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};ih(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},$B=t=>{cL(t,(e,n)=>{if(ti(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(ti(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},zB=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Oc(t)?r(t):r(String(t).split(e)),n},HB=()=>{},qB=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,f0="abcdefghijklmnopqrstuvwxyz",gC="0123456789",fL={DIGIT:gC,ALPHA:f0,ALPHA_DIGIT:f0+f0.toUpperCase()+gC},WB=(t=16,e=fL.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function KB(t){return!!(t&&ti(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const GB=t=>{const e=new Array(10),n=(r,i)=>{if(ay(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Oc(r)?[]:{};return ih(r,(o,a)=>{const l=n(o,i+1);!kd(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},QB=Ji("AsyncFunction"),YB=t=>t&&(ay(t)||ti(t))&&ti(t.then)&&ti(t.catch),dL=((t,e)=>t?setImmediate:e?((n,r)=>(ol.addEventListener("message",({source:i,data:s})=>{i===ol&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),ol.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ti(ol.postMessage)),XB=typeof queueMicrotask<"u"?queueMicrotask.bind(ol):typeof process<"u"&&process.nextTick||dL,oe={isArray:Oc,isArrayBuffer:oL,isBuffer:pB,isFormData:TB,isArrayBufferView:mB,isString:gB,isNumber:aL,isBoolean:yB,isObject:ay,isPlainObject:sm,isReadableStream:xB,isRequest:IB,isResponse:RB,isHeaders:CB,isUndefined:kd,isDate:vB,isFile:_B,isBlob:wB,isRegExp:BB,isFunction:ti,isStream:bB,isURLSearchParams:SB,isTypedArray:MB,isFileList:EB,forEach:ih,merge:GE,extend:PB,trim:AB,stripBOM:kB,inherits:OB,toFlatObject:NB,kindOf:sy,kindOfTest:Ji,endsWith:DB,toArray:LB,forEachEntry:FB,matchAll:jB,isHTMLForm:VB,hasOwnProperty:mC,hasOwnProp:mC,reduceDescriptors:cL,freezeMethods:$B,toObjectSet:zB,toCamelCase:UB,noop:HB,toFiniteNumber:qB,findKey:lL,global:ol,isContextDefined:uL,ALPHABET:fL,generateString:WB,isSpecCompliantForm:KB,toJSONObject:GB,isAsyncFn:QB,isThenable:YB,setImmediate:dL,asap:XB};function rt(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}oe.inherits(rt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:oe.toJSONObject(this.config),code:this.code,status:this.status}}});const hL=rt.prototype,pL={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{pL[t]={value:t}});Object.defineProperties(rt,pL);Object.defineProperty(hL,"isAxiosError",{value:!0});rt.from=(t,e,n,r,i,s)=>{const o=Object.create(hL);return oe.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),rt.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const JB=null;function QE(t){return oe.isPlainObject(t)||oe.isArray(t)}function mL(t){return oe.endsWith(t,"[]")?t.slice(0,-2):t}function yC(t,e,n){return t?t.concat(e).map(function(i,s){return i=mL(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function ZB(t){return oe.isArray(t)&&!t.some(QE)}const e$=oe.toFlatObject(oe,{},null,function(e){return/^is[A-Z]/.test(e)});function ly(t,e,n){if(!oe.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=oe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,I){return!oe.isUndefined(I[S])});const r=n.metaTokens,i=n.visitor||f,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&oe.isSpecCompliantForm(e);if(!oe.isFunction(i))throw new TypeError("visitor must be a function");function u(E){if(E===null)return"";if(oe.isDate(E))return E.toISOString();if(!l&&oe.isBlob(E))throw new rt("Blob is not supported. Use a Buffer instead.");return oe.isArrayBuffer(E)||oe.isTypedArray(E)?l&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function f(E,S,I){let R=E;if(E&&!I&&typeof E=="object"){if(oe.endsWith(S,"{}"))S=r?S:S.slice(0,-2),E=JSON.stringify(E);else if(oe.isArray(E)&&ZB(E)||(oe.isFileList(E)||oe.endsWith(S,"[]"))&&(R=oe.toArray(E)))return S=mL(S),R.forEach(function(v,C){!(oe.isUndefined(v)||v===null)&&e.append(o===!0?yC([S],C,s):o===null?S:S+"[]",u(v))}),!1}return QE(E)?!0:(e.append(yC(I,S,s),u(E)),!1)}const p=[],y=Object.assign(e$,{defaultVisitor:f,convertValue:u,isVisitable:QE});function _(E,S){if(!oe.isUndefined(E)){if(p.indexOf(E)!==-1)throw Error("Circular reference detected in "+S.join("."));p.push(E),oe.forEach(E,function(R,w){(!(oe.isUndefined(R)||R===null)&&i.call(e,R,oe.isString(w)?w.trim():w,S,y))===!0&&_(R,S?S.concat(w):[w])}),p.pop()}}if(!oe.isObject(t))throw new TypeError("data must be an object");return _(t),e}function vC(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function rS(t,e){this._pairs=[],t&&ly(t,this,e)}const gL=rS.prototype;gL.append=function(e,n){this._pairs.push([e,n])};gL.toString=function(e){const n=e?function(r){return e.call(this,r,vC)}:vC;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function t$(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function yL(t,e,n){if(!e)return t;const r=n&&n.encode||t$,i=n&&n.serialize;let s;if(i?s=i(e,n):s=oe.isURLSearchParams(e)?e.toString():new rS(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class _C{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){oe.forEach(this.handlers,function(r){r!==null&&e(r)})}}const vL={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},n$=typeof URLSearchParams<"u"?URLSearchParams:rS,r$=typeof FormData<"u"?FormData:null,i$=typeof Blob<"u"?Blob:null,s$={isBrowser:!0,classes:{URLSearchParams:n$,FormData:r$,Blob:i$},protocols:["http","https","file","blob","url","data"]},iS=typeof window<"u"&&typeof document<"u",YE=typeof navigator=="object"&&navigator||void 0,o$=iS&&(!YE||["ReactNative","NativeScript","NS"].indexOf(YE.product)<0),a$=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",l$=iS&&window.location.href||"http://localhost",u$=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:iS,hasStandardBrowserEnv:o$,hasStandardBrowserWebWorkerEnv:a$,navigator:YE,origin:l$},Symbol.toStringTag,{value:"Module"})),$r={...u$,...s$};function c$(t,e){return ly(t,new $r.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return $r.isNode&&oe.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function f$(t){return oe.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function d$(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function _L(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&oe.isArray(i)?i.length:o,l?(oe.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!oe.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&oe.isArray(i[o])&&(i[o]=d$(i[o])),!a)}if(oe.isFormData(t)&&oe.isFunction(t.entries)){const n={};return oe.forEachEntry(t,(r,i)=>{e(f$(r),i,n,0)}),n}return null}function h$(t,e,n){if(oe.isString(t))try{return(e||JSON.parse)(t),oe.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const sh={transitional:vL,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=oe.isObject(e);if(s&&oe.isHTMLForm(e)&&(e=new FormData(e)),oe.isFormData(e))return i?JSON.stringify(_L(e)):e;if(oe.isArrayBuffer(e)||oe.isBuffer(e)||oe.isStream(e)||oe.isFile(e)||oe.isBlob(e)||oe.isReadableStream(e))return e;if(oe.isArrayBufferView(e))return e.buffer;if(oe.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return c$(e,this.formSerializer).toString();if((a=oe.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return ly(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),h$(e)):e}],transformResponse:[function(e){const n=this.transitional||sh.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(oe.isResponse(e)||oe.isReadableStream(e))return e;if(e&&oe.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?rt.from(a,rt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$r.classes.FormData,Blob:$r.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};oe.forEach(["delete","get","head","post","put","patch"],t=>{sh.headers[t]={}});const p$=oe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),m$=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&p$[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},wC=Symbol("internals");function _f(t){return t&&String(t).trim().toLowerCase()}function om(t){return t===!1||t==null?t:oe.isArray(t)?t.map(om):String(t)}function g$(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const y$=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function d0(t,e,n,r,i){if(oe.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!oe.isString(e)){if(oe.isString(r))return e.indexOf(r)!==-1;if(oe.isRegExp(r))return r.test(e)}}function v$(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function _$(t,e){const n=oe.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class zr{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,u){const f=_f(l);if(!f)throw new Error("header name must be a non-empty string");const p=oe.findKey(i,f);(!p||i[p]===void 0||u===!0||u===void 0&&i[p]!==!1)&&(i[p||l]=om(a))}const o=(a,l)=>oe.forEach(a,(u,f)=>s(u,f,l));if(oe.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(oe.isString(e)&&(e=e.trim())&&!y$(e))o(m$(e),n);else if(oe.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=_f(e),e){const r=oe.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return g$(i);if(oe.isFunction(n))return n.call(this,i,r);if(oe.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=_f(e),e){const r=oe.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||d0(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=_f(o),o){const a=oe.findKey(r,o);a&&(!n||d0(r,r[a],a,n))&&(delete r[a],i=!0)}}return oe.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||d0(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return oe.forEach(this,(i,s)=>{const o=oe.findKey(r,s);if(o){n[o]=om(i),delete n[s];return}const a=e?v$(s):String(s).trim();a!==s&&delete n[s],n[a]=om(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return oe.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&oe.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[wC]=this[wC]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=_f(o);r[a]||(_$(i,o),r[a]=!0)}return oe.isArray(e)?e.forEach(s):s(e),this}}zr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);oe.reduceDescriptors(zr.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});oe.freezeMethods(zr);function h0(t,e){const n=this||sh,r=e||n,i=zr.from(r.headers);let s=r.data;return oe.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function wL(t){return!!(t&&t.__CANCEL__)}function Nc(t,e,n){rt.call(this,t??"canceled",rt.ERR_CANCELED,e,n),this.name="CanceledError"}oe.inherits(Nc,rt,{__CANCEL__:!0});function EL(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new rt("Request failed with status code "+n.status,[rt.ERR_BAD_REQUEST,rt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function w$(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function E$(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),f=r[s];o||(o=u),n[i]=l,r[i]=u;let p=s,y=0;for(;p!==i;)y+=n[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),u-o<e)return;const _=f&&u-f;return _?Math.round(y*1e3/_):void 0}}function b$(t,e){let n=0,r=1e3/e,i,s;const o=(u,f=Date.now())=>{n=f,i=null,s&&(clearTimeout(s),s=null),t.apply(null,u)};return[(...u)=>{const f=Date.now(),p=f-n;p>=r?o(u,f):(i=u,s||(s=setTimeout(()=>{s=null,o(i)},r-p)))},()=>i&&o(i)]}const Ym=(t,e,n=3)=>{let r=0;const i=E$(50,250);return b$(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,u=i(l),f=o<=a;r=o;const p={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&f?(a-o)/u:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(p)},n)},EC=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},bC=t=>(...e)=>oe.asap(()=>t(...e)),T$=$r.hasStandardBrowserEnv?function(){const e=$r.navigator&&/(msie|trident)/i.test($r.navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const a=oe.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}(),S$=$r.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];oe.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),oe.isString(r)&&o.push("path="+r),oe.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function x$(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function I$(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function bL(t,e){return t&&!x$(e)?I$(t,e):e}const TC=t=>t instanceof zr?{...t}:t;function xl(t,e){e=e||{};const n={};function r(u,f,p){return oe.isPlainObject(u)&&oe.isPlainObject(f)?oe.merge.call({caseless:p},u,f):oe.isPlainObject(f)?oe.merge({},f):oe.isArray(f)?f.slice():f}function i(u,f,p){if(oe.isUndefined(f)){if(!oe.isUndefined(u))return r(void 0,u,p)}else return r(u,f,p)}function s(u,f){if(!oe.isUndefined(f))return r(void 0,f)}function o(u,f){if(oe.isUndefined(f)){if(!oe.isUndefined(u))return r(void 0,u)}else return r(void 0,f)}function a(u,f,p){if(p in e)return r(u,f);if(p in t)return r(void 0,u)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,f)=>i(TC(u),TC(f),!0)};return oe.forEach(Object.keys(Object.assign({},t,e)),function(f){const p=l[f]||i,y=p(t[f],e[f],f);oe.isUndefined(y)&&p!==a||(n[f]=y)}),n}const TL=t=>{const e=xl({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=zr.from(o),e.url=yL(bL(e.baseURL,e.url),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(oe.isFormData(n)){if($r.hasStandardBrowserEnv||$r.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[u,...f]=l?l.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...f].join("; "))}}if($r.hasStandardBrowserEnv&&(r&&oe.isFunction(r)&&(r=r(e)),r||r!==!1&&T$(e.url))){const u=i&&s&&S$.read(s);u&&o.set(i,u)}return e},R$=typeof XMLHttpRequest<"u",C$=R$&&function(t){return new Promise(function(n,r){const i=TL(t);let s=i.data;const o=zr.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=i,f,p,y,_,E;function S(){_&&_(),E&&E(),i.cancelToken&&i.cancelToken.unsubscribe(f),i.signal&&i.signal.removeEventListener("abort",f)}let I=new XMLHttpRequest;I.open(i.method.toUpperCase(),i.url,!0),I.timeout=i.timeout;function R(){if(!I)return;const v=zr.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),k={data:!a||a==="text"||a==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:v,config:t,request:I};EL(function(D){n(D),S()},function(D){r(D),S()},k),I=null}"onloadend"in I?I.onloadend=R:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(R)},I.onabort=function(){I&&(r(new rt("Request aborted",rt.ECONNABORTED,t,I)),I=null)},I.onerror=function(){r(new rt("Network Error",rt.ERR_NETWORK,t,I)),I=null},I.ontimeout=function(){let C=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const k=i.transitional||vL;i.timeoutErrorMessage&&(C=i.timeoutErrorMessage),r(new rt(C,k.clarifyTimeoutError?rt.ETIMEDOUT:rt.ECONNABORTED,t,I)),I=null},s===void 0&&o.setContentType(null),"setRequestHeader"in I&&oe.forEach(o.toJSON(),function(C,k){I.setRequestHeader(k,C)}),oe.isUndefined(i.withCredentials)||(I.withCredentials=!!i.withCredentials),a&&a!=="json"&&(I.responseType=i.responseType),u&&([y,E]=Ym(u,!0),I.addEventListener("progress",y)),l&&I.upload&&([p,_]=Ym(l),I.upload.addEventListener("progress",p),I.upload.addEventListener("loadend",_)),(i.cancelToken||i.signal)&&(f=v=>{I&&(r(!v||v.type?new Nc(null,t,I):v),I.abort(),I=null)},i.cancelToken&&i.cancelToken.subscribe(f),i.signal&&(i.signal.aborted?f():i.signal.addEventListener("abort",f)));const w=w$(i.url);if(w&&$r.protocols.indexOf(w)===-1){r(new rt("Unsupported protocol "+w+":",rt.ERR_BAD_REQUEST,t));return}I.send(s||null)})},A$=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(u){if(!i){i=!0,a();const f=u instanceof Error?u:this.reason;r.abort(f instanceof rt?f:new Nc(f instanceof Error?f.message:f))}};let o=e&&setTimeout(()=>{o=null,s(new rt(`timeout ${e} of ms exceeded`,rt.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),t=null)};t.forEach(u=>u.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>oe.asap(a),l}},P$=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},k$=async function*(t,e){for await(const n of O$(t))yield*P$(n,e)},O$=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},SC=(t,e,n,r)=>{const i=k$(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:u,value:f}=await i.next();if(u){a(),l.close();return}let p=f.byteLength;if(n){let y=s+=p;n(y)}l.enqueue(new Uint8Array(f))}catch(u){throw a(u),u}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},uy=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",SL=uy&&typeof ReadableStream=="function",N$=uy&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),xL=(t,...e)=>{try{return!!t(...e)}catch{return!1}},D$=SL&&xL(()=>{let t=!1;const e=new Request($r.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),xC=64*1024,XE=SL&&xL(()=>oe.isReadableStream(new Response("").body)),Xm={stream:XE&&(t=>t.body)};uy&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Xm[e]&&(Xm[e]=oe.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new rt(`Response type '${e}' is not supported`,rt.ERR_NOT_SUPPORT,r)})})})(new Response);const L$=async t=>{if(t==null)return 0;if(oe.isBlob(t))return t.size;if(oe.isSpecCompliantForm(t))return(await new Request($r.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(oe.isArrayBufferView(t)||oe.isArrayBuffer(t))return t.byteLength;if(oe.isURLSearchParams(t)&&(t=t+""),oe.isString(t))return(await N$(t)).byteLength},M$=async(t,e)=>{const n=oe.toFiniteNumber(t.getContentLength());return n??L$(e)},F$=uy&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:f,withCredentials:p="same-origin",fetchOptions:y}=TL(t);u=u?(u+"").toLowerCase():"text";let _=A$([i,s&&s.toAbortSignal()],o),E;const S=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let I;try{if(l&&D$&&n!=="get"&&n!=="head"&&(I=await M$(f,r))!==0){let k=new Request(e,{method:"POST",body:r,duplex:"half"}),B;if(oe.isFormData(r)&&(B=k.headers.get("content-type"))&&f.setContentType(B),k.body){const[D,T]=EC(I,Ym(bC(l)));r=SC(k.body,xC,D,T)}}oe.isString(p)||(p=p?"include":"omit");const R="credentials"in Request.prototype;E=new Request(e,{...y,signal:_,method:n.toUpperCase(),headers:f.normalize().toJSON(),body:r,duplex:"half",credentials:R?p:void 0});let w=await fetch(E);const v=XE&&(u==="stream"||u==="response");if(XE&&(a||v&&S)){const k={};["status","statusText","headers"].forEach(N=>{k[N]=w[N]});const B=oe.toFiniteNumber(w.headers.get("content-length")),[D,T]=a&&EC(B,Ym(bC(a),!0))||[];w=new Response(SC(w.body,xC,D,()=>{T&&T(),S&&S()}),k)}u=u||"text";let C=await Xm[oe.findKey(Xm,u)||"text"](w,t);return!v&&S&&S(),await new Promise((k,B)=>{EL(k,B,{data:C,headers:zr.from(w.headers),status:w.status,statusText:w.statusText,config:t,request:E})})}catch(R){throw S&&S(),R&&R.name==="TypeError"&&/fetch/i.test(R.message)?Object.assign(new rt("Network Error",rt.ERR_NETWORK,t,E),{cause:R.cause||R}):rt.from(R,R&&R.code,t,E)}}),JE={http:JB,xhr:C$,fetch:F$};oe.forEach(JE,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const IC=t=>`- ${t}`,j$=t=>oe.isFunction(t)||t===null||t===!1,IL={getAdapter:t=>{t=oe.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!j$(n)&&(r=JE[(o=String(n)).toLowerCase()],r===void 0))throw new rt(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(IC).join(`
`):" "+IC(s[0]):"as no adapter specified";throw new rt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:JE};function p0(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Nc(null,t)}function RC(t){return p0(t),t.headers=zr.from(t.headers),t.data=h0.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),IL.getAdapter(t.adapter||sh.adapter)(t).then(function(r){return p0(t),r.data=h0.call(t,t.transformResponse,r),r.headers=zr.from(r.headers),r},function(r){return wL(r)||(p0(t),r&&r.response&&(r.response.data=h0.call(t,t.transformResponse,r.response),r.response.headers=zr.from(r.response.headers))),Promise.reject(r)})}const RL="1.7.7",sS={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{sS[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const CC={};sS.transitional=function(e,n,r){function i(s,o){return"[Axios v"+RL+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new rt(i(o," has been removed"+(n?" in "+n:"")),rt.ERR_DEPRECATED);return n&&!CC[o]&&(CC[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function V$(t,e,n){if(typeof t!="object")throw new rt("options must be an object",rt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new rt("option "+s+" must be "+l,rt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new rt("Unknown option "+s,rt.ERR_BAD_OPTION)}}const ZE={assertOptions:V$,validators:sS},Lo=ZE.validators;class ml{constructor(e){this.defaults=e,this.interceptors={request:new _C,response:new _C}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=xl(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&ZE.assertOptions(r,{silentJSONParsing:Lo.transitional(Lo.boolean),forcedJSONParsing:Lo.transitional(Lo.boolean),clarifyTimeoutError:Lo.transitional(Lo.boolean)},!1),i!=null&&(oe.isFunction(i)?n.paramsSerializer={serialize:i}:ZE.assertOptions(i,{encode:Lo.function,serialize:Lo.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&oe.merge(s.common,s[n.method]);s&&oe.forEach(["delete","get","head","post","put","patch","common"],E=>{delete s[E]}),n.headers=zr.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(l=l&&S.synchronous,a.unshift(S.fulfilled,S.rejected))});const u=[];this.interceptors.response.forEach(function(S){u.push(S.fulfilled,S.rejected)});let f,p=0,y;if(!l){const E=[RC.bind(this),void 0];for(E.unshift.apply(E,a),E.push.apply(E,u),y=E.length,f=Promise.resolve(n);p<y;)f=f.then(E[p++],E[p++]);return f}y=a.length;let _=n;for(p=0;p<y;){const E=a[p++],S=a[p++];try{_=E(_)}catch(I){S.call(this,I);break}}try{f=RC.call(this,_)}catch(E){return Promise.reject(E)}for(p=0,y=u.length;p<y;)f=f.then(u[p++],u[p++]);return f}getUri(e){e=xl(this.defaults,e);const n=bL(e.baseURL,e.url);return yL(n,e.params,e.paramsSerializer)}}oe.forEach(["delete","get","head","options"],function(e){ml.prototype[e]=function(n,r){return this.request(xl(r||{},{method:e,url:n,data:(r||{}).data}))}});oe.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(xl(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ml.prototype[e]=n(),ml.prototype[e+"Form"]=n(!0)});class oS{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Nc(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new oS(function(i){e=i}),cancel:e}}}function U$(t){return function(n){return t.apply(null,n)}}function B$(t){return oe.isObject(t)&&t.isAxiosError===!0}const eb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(eb).forEach(([t,e])=>{eb[e]=t});function CL(t){const e=new ml(t),n=sL(ml.prototype.request,e);return oe.extend(n,ml.prototype,e,{allOwnKeys:!0}),oe.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return CL(xl(t,i))},n}const hn=CL(sh);hn.Axios=ml;hn.CanceledError=Nc;hn.CancelToken=oS;hn.isCancel=wL;hn.VERSION=RL;hn.toFormData=ly;hn.AxiosError=rt;hn.Cancel=hn.CanceledError;hn.all=function(e){return Promise.all(e)};hn.spread=U$;hn.isAxiosError=B$;hn.mergeConfig=xl;hn.AxiosHeaders=zr;hn.formToJSON=t=>_L(oe.isHTMLForm(t)?new FormData(t):t);hn.getAdapter=IL.getAdapter;hn.HttpStatusCode=eb;hn.default=hn;/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jt(){return Jt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jt.apply(this,arguments)}var yn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(yn||(yn={}));const AC="popstate";function $$(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Od("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Il(i)}return H$(e,n,null,t)}function lt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function z$(){return Math.random().toString(36).substr(2,8)}function PC(t,e){return{usr:t.state,key:t.key,idx:e}}function Od(t,e,n,r){return n===void 0&&(n=null),Jt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?xa(e):e,{state:n,key:e&&e.key||r||z$()})}function Il(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function xa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function H$(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=yn.Pop,l=null,u=f();u==null&&(u=0,o.replaceState(Jt({},o.state,{idx:u}),""));function f(){return(o.state||{idx:null}).idx}function p(){a=yn.Pop;let I=f(),R=I==null?null:I-u;u=I,l&&l({action:a,location:S.location,delta:R})}function y(I,R){a=yn.Push;let w=Od(S.location,I,R);u=f()+1;let v=PC(w,u),C=S.createHref(w);try{o.pushState(v,"",C)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(C)}s&&l&&l({action:a,location:S.location,delta:1})}function _(I,R){a=yn.Replace;let w=Od(S.location,I,R);u=f();let v=PC(w,u),C=S.createHref(w);o.replaceState(v,"",C),s&&l&&l({action:a,location:S.location,delta:0})}function E(I){let R=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof I=="string"?I:Il(I);return w=w.replace(/ $/,"%20"),lt(R,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,R)}let S={get action(){return a},get location(){return t(i,o)},listen(I){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(AC,p),l=I,()=>{i.removeEventListener(AC,p),l=null}},createHref(I){return e(i,I)},createURL:E,encodeLocation(I){let R=E(I);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:y,replace:_,go(I){return o.go(I)}};return S}var Pt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Pt||(Pt={}));const q$=new Set(["lazy","caseSensitive","path","id","index","children"]);function W$(t){return t.index===!0}function Nd(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],a=typeof i.id=="string"?i.id:o.join("-");if(lt(i.index!==!0||!i.children,"Cannot specify children on an index route"),lt(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),W$(i)){let l=Jt({},i,e(i),{id:a});return r[a]=l,l}else{let l=Jt({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=Nd(i.children,e,o,r)),l}})}function nl(t,e,n){return n===void 0&&(n="/"),am(t,e,n,!1)}function am(t,e,n,r){let i=typeof e=="string"?xa(e):e,s=uo(i.pathname||"/",n);if(s==null)return null;let o=AL(t);G$(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=sz(s);a=rz(o[l],u,r)}return a}function K$(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function AL(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(lt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=eo([r,l.relativePath]),f=n.concat(l);s.children&&s.children.length>0&&(lt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),AL(s.children,e,f,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:tz(u,s.index),routesMeta:f})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of PL(s.path))i(s,o,l)}),e}function PL(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=PL(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function G$(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:nz(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Q$=/^:[\w-]+$/,Y$=3,X$=2,J$=1,Z$=10,ez=-2,kC=t=>t==="*";function tz(t,e){let n=t.split("/"),r=n.length;return n.some(kC)&&(r+=ez),e&&(r+=X$),n.filter(i=>!kC(i)).reduce((i,s)=>i+(Q$.test(s)?Y$:s===""?J$:Z$),r)}function nz(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function rz(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=Jm({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},f),y=l.route;if(!p&&u&&n&&!r[r.length-1].route.index&&(p=Jm({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:eo([s,p.pathname]),pathnameBase:lz(eo([s,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(s=eo([s,p.pathnameBase]))}return o}function Jm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=iz(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,f,p)=>{let{paramName:y,isOptional:_}=f;if(y==="*"){let S=a[p]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const E=a[p];return _&&!E?u[y]=void 0:u[y]=(E||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function iz(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),mc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function sz(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function uo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function oz(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?xa(t):t;return{pathname:n?n.startsWith("/")?n:az(n,e):e,search:uz(r),hash:cz(i)}}function az(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function m0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kL(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function aS(t,e){let n=kL(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function lS(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=xa(t):(i=Jt({},t),lt(!i.pathname||!i.pathname.includes("?"),m0("?","pathname","search",i)),lt(!i.pathname||!i.pathname.includes("#"),m0("#","pathname","hash",i)),lt(!i.search||!i.search.includes("#"),m0("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),p-=1;i.pathname=y.join("/")}a=p>=0?e[p]:"/"}let l=oz(i,a),u=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||f)&&(l.pathname+="/"),l}const eo=t=>t.join("/").replace(/\/\/+/g,"/"),lz=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uz=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,cz=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Zm{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function cy(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const OL=["post","put","patch","delete"],fz=new Set(OL),dz=["get",...OL],hz=new Set(dz),pz=new Set([301,302,303,307,308]),mz=new Set([307,308]),g0={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},gz={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},wf={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},uS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yz=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),NL="remix-router-transitions";function vz(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;lt(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let H=t.detectErrorBoundary;i=Q=>({hasErrorBoundary:H(Q)})}else i=yz;let s={},o=Nd(t.routes,i,void 0,s),a,l=t.basename||"/",u=t.unstable_dataStrategy||Sz,f=t.unstable_patchRoutesOnNavigation,p=Jt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),y=null,_=new Set,E=1e3,S=new Set,I=null,R=null,w=null,v=t.hydrationData!=null,C=nl(o,t.history.location,l),k=null;if(C==null&&!f){let H=_r(404,{pathname:t.history.location.pathname}),{matches:Q,route:re}=UC(o);C=Q,k={[re.id]:H}}C&&!t.hydrationData&&Yt(C,o,t.history.location.pathname).active&&(C=null);let B;if(C)if(C.some(H=>H.route.lazy))B=!1;else if(!C.some(H=>H.route.loader))B=!0;else if(p.v7_partialHydration){let H=t.hydrationData?t.hydrationData.loaderData:null,Q=t.hydrationData?t.hydrationData.errors:null,re=de=>de.route.loader?typeof de.route.loader=="function"&&de.route.loader.hydrate===!0?!1:H&&H[de.route.id]!==void 0||Q&&Q[de.route.id]!==void 0:!0;if(Q){let de=C.findIndex(Ce=>Q[Ce.route.id]!==void 0);B=C.slice(0,de+1).every(re)}else B=C.every(re)}else B=t.hydrationData!=null;else if(B=!1,C=[],p.v7_partialHydration){let H=Yt(null,o,t.history.location.pathname);H.active&&H.matches&&(C=H.matches)}let D,T={historyAction:t.history.action,location:t.history.location,matches:C,initialized:B,navigation:g0,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||k,fetchers:new Map,blockers:new Map},N=yn.Pop,L=!1,V,j=!1,M=new Map,le=null,me=!1,pe=!1,X=[],G=new Set,Y=new Map,ce=0,ee=-1,$=new Map,K=new Set,te=new Map,Ee=new Map,Te=new Set,W=new Map,ue=new Map,Se=new Map,be;function xe(){if(y=t.history.listen(H=>{let{action:Q,location:re,delta:de}=H;if(be){be(),be=void 0;return}mc(ue.size===0||de!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ce=Ns({currentLocation:T.location,nextLocation:re,historyAction:Q});if(Ce&&de!=null){let Oe=new Promise(ze=>{be=ze});t.history.go(de*-1),qr(Ce,{state:"blocked",location:re,proceed(){qr(Ce,{state:"proceeding",proceed:void 0,reset:void 0,location:re}),Oe.then(()=>t.history.go(de))},reset(){let ze=new Map(T.blockers);ze.set(Ce,wf),He({blockers:ze})}});return}return z(Q,re)}),n){Vz(e,M);let H=()=>Uz(e,M);e.addEventListener("pagehide",H),le=()=>e.removeEventListener("pagehide",H)}return T.initialized||z(yn.Pop,T.location,{initialHydration:!0}),D}function Ke(){y&&y(),le&&le(),_.clear(),V&&V.abort(),T.fetchers.forEach((H,Q)=>rn(Q)),T.blockers.forEach((H,Q)=>Io(Q))}function Et(H){return _.add(H),()=>_.delete(H)}function He(H,Q){Q===void 0&&(Q={}),T=Jt({},T,H);let re=[],de=[];p.v7_fetcherPersist&&T.fetchers.forEach((Ce,Oe)=>{Ce.state==="idle"&&(Te.has(Oe)?de.push(Oe):re.push(Oe))}),[..._].forEach(Ce=>Ce(T,{deletedFetchers:de,unstable_viewTransitionOpts:Q.viewTransitionOpts,unstable_flushSync:Q.flushSync===!0})),p.v7_fetcherPersist&&(re.forEach(Ce=>T.fetchers.delete(Ce)),de.forEach(Ce=>rn(Ce)))}function We(H,Q,re){var de,Ce;let{flushSync:Oe}=re===void 0?{}:re,ze=T.actionData!=null&&T.navigation.formMethod!=null&&Mi(T.navigation.formMethod)&&T.navigation.state==="loading"&&((de=H.state)==null?void 0:de._isRedirect)!==!0,Ie;Q.actionData?Object.keys(Q.actionData).length>0?Ie=Q.actionData:Ie=null:ze?Ie=T.actionData:Ie=null;let je=Q.loaderData?jC(T.loaderData,Q.loaderData,Q.matches||[],Q.errors):T.loaderData,Le=T.blockers;Le.size>0&&(Le=new Map(Le),Le.forEach((at,ct)=>Le.set(ct,wf)));let Me=L===!0||T.navigation.formMethod!=null&&Mi(T.navigation.formMethod)&&((Ce=H.state)==null?void 0:Ce._isRedirect)!==!0;a&&(o=a,a=void 0),me||N===yn.Pop||(N===yn.Push?t.history.push(H,H.state):N===yn.Replace&&t.history.replace(H,H.state));let ot;if(N===yn.Pop){let at=M.get(T.location.pathname);at&&at.has(H.pathname)?ot={currentLocation:T.location,nextLocation:H}:M.has(H.pathname)&&(ot={currentLocation:H,nextLocation:T.location})}else if(j){let at=M.get(T.location.pathname);at?at.add(H.pathname):(at=new Set([H.pathname]),M.set(T.location.pathname,at)),ot={currentLocation:T.location,nextLocation:H}}He(Jt({},Q,{actionData:Ie,loaderData:je,historyAction:N,location:H,initialized:!0,navigation:g0,revalidation:"idle",restoreScrollPosition:Fa(H,Q.matches||T.matches),preventScrollReset:Me,blockers:Le}),{viewTransitionOpts:ot,flushSync:Oe===!0}),N=yn.Pop,L=!1,j=!1,me=!1,pe=!1,X=[]}async function Qt(H,Q){if(typeof H=="number"){t.history.go(H);return}let re=tb(T.location,T.matches,l,p.v7_prependBasename,H,p.v7_relativeSplatPath,Q==null?void 0:Q.fromRouteId,Q==null?void 0:Q.relative),{path:de,submission:Ce,error:Oe}=OC(p.v7_normalizeFormMethod,!1,re,Q),ze=T.location,Ie=Od(T.location,de,Q&&Q.state);Ie=Jt({},Ie,t.history.encodeLocation(Ie));let je=Q&&Q.replace!=null?Q.replace:void 0,Le=yn.Push;je===!0?Le=yn.Replace:je===!1||Ce!=null&&Mi(Ce.formMethod)&&Ce.formAction===T.location.pathname+T.location.search&&(Le=yn.Replace);let Me=Q&&"preventScrollReset"in Q?Q.preventScrollReset===!0:void 0,ot=(Q&&Q.unstable_flushSync)===!0,at=Ns({currentLocation:ze,nextLocation:Ie,historyAction:Le});if(at){qr(at,{state:"blocked",location:Ie,proceed(){qr(at,{state:"proceeding",proceed:void 0,reset:void 0,location:Ie}),Qt(H,Q)},reset(){let ct=new Map(T.blockers);ct.set(at,wf),He({blockers:ct})}});return}return await z(Le,Ie,{submission:Ce,pendingError:Oe,preventScrollReset:Me,replace:Q&&Q.replace,enableViewTransition:Q&&Q.unstable_viewTransition,flushSync:ot})}function st(){if(Zn(),He({revalidation:"loading"}),T.navigation.state!=="submitting"){if(T.navigation.state==="idle"){z(T.historyAction,T.location,{startUninterruptedRevalidation:!0});return}z(N||T.historyAction,T.navigation.location,{overrideNavigation:T.navigation,enableViewTransition:j===!0})}}async function z(H,Q,re){V&&V.abort(),V=null,N=H,me=(re&&re.startUninterruptedRevalidation)===!0,ts(T.location,T.matches),L=(re&&re.preventScrollReset)===!0,j=(re&&re.enableViewTransition)===!0;let de=a||o,Ce=re&&re.overrideNavigation,Oe=nl(de,Q,l),ze=(re&&re.flushSync)===!0,Ie=Yt(Oe,de,Q.pathname);if(Ie.active&&Ie.matches&&(Oe=Ie.matches),!Oe){let{error:it,notFoundMatches:Xt,route:Ot}=Zi(Q.pathname);We(Q,{matches:Xt,loaderData:{},errors:{[Ot.id]:it}},{flushSync:ze});return}if(T.initialized&&!pe&&Pz(T.location,Q)&&!(re&&re.submission&&Mi(re.submission.formMethod))){We(Q,{matches:Oe},{flushSync:ze});return}V=new AbortController;let je=Su(t.history,Q,V.signal,re&&re.submission),Le;if(re&&re.pendingError)Le=[qu(Oe).route.id,{type:Pt.error,error:re.pendingError}];else if(re&&re.submission&&Mi(re.submission.formMethod)){let it=await Z(je,Q,re.submission,Oe,Ie.active,{replace:re.replace,flushSync:ze});if(it.shortCircuited)return;if(it.pendingActionResult){let[Xt,Ot]=it.pendingActionResult;if(Gr(Ot)&&cy(Ot.error)&&Ot.error.status===404){V=null,We(Q,{matches:it.matches,loaderData:{},errors:{[Xt]:Ot.error}});return}}Oe=it.matches||Oe,Le=it.pendingActionResult,Ce=y0(Q,re.submission),ze=!1,Ie.active=!1,je=Su(t.history,je.url,je.signal)}let{shortCircuited:Me,matches:ot,loaderData:at,errors:ct}=await ae(je,Q,Oe,Ie.active,Ce,re&&re.submission,re&&re.fetcherSubmission,re&&re.replace,re&&re.initialHydration===!0,ze,Le);Me||(V=null,We(Q,Jt({matches:ot||Oe},VC(Le),{loaderData:at,errors:ct})))}async function Z(H,Q,re,de,Ce,Oe){Oe===void 0&&(Oe={}),Zn();let ze=Fz(Q,re);if(He({navigation:ze},{flushSync:Oe.flushSync===!0}),Ce){let Le=await Ii(de,Q.pathname,H.signal);if(Le.type==="aborted")return{shortCircuited:!0};if(Le.type==="error"){let{boundaryId:Me,error:ot}=er(Q.pathname,Le);return{matches:Le.partialMatches,pendingActionResult:[Me,{type:Pt.error,error:ot}]}}else if(Le.matches)de=Le.matches;else{let{notFoundMatches:Me,error:ot,route:at}=Zi(Q.pathname);return{matches:Me,pendingActionResult:[at.id,{type:Pt.error,error:ot}]}}}let Ie,je=Df(de,Q);if(!je.route.action&&!je.route.lazy)Ie={type:Pt.error,error:_r(405,{method:H.method,pathname:Q.pathname,routeId:je.route.id})};else if(Ie=(await qe("action",T,H,[je],de,null))[je.route.id],H.signal.aborted)return{shortCircuited:!0};if(al(Ie)){let Le;return Oe&&Oe.replace!=null?Le=Oe.replace:Le=LC(Ie.response.headers.get("Location"),new URL(H.url),l)===T.location.pathname+T.location.search,await Qe(H,Ie,!0,{submission:re,replace:Le}),{shortCircuited:!0}}if(Qo(Ie))throw _r(400,{type:"defer-action"});if(Gr(Ie)){let Le=qu(de,je.route.id);return(Oe&&Oe.replace)!==!0&&(N=yn.Push),{matches:de,pendingActionResult:[Le.route.id,Ie]}}return{matches:de,pendingActionResult:[je.route.id,Ie]}}async function ae(H,Q,re,de,Ce,Oe,ze,Ie,je,Le,Me){let ot=Ce||y0(Q,Oe),at=Oe||ze||$C(ot),ct=!me&&(!p.v7_partialHydration||!je);if(de){if(ct){let Rt=ge(Me);He(Jt({navigation:ot},Rt!==void 0?{actionData:Rt}:{}),{flushSync:Le})}let Ye=await Ii(re,Q.pathname,H.signal);if(Ye.type==="aborted")return{shortCircuited:!0};if(Ye.type==="error"){let{boundaryId:Rt,error:xn}=er(Q.pathname,Ye);return{matches:Ye.partialMatches,loaderData:{},errors:{[Rt]:xn}}}else if(Ye.matches)re=Ye.matches;else{let{error:Rt,notFoundMatches:xn,route:mt}=Zi(Q.pathname);return{matches:xn,loaderData:{},errors:{[mt.id]:Rt}}}}let it=a||o,[Xt,Ot]=NC(t.history,T,re,at,Q,p.v7_partialHydration&&je===!0,p.v7_skipActionErrorRevalidation,pe,X,G,Te,te,K,it,l,Me);if(Ds(Ye=>!(re&&re.some(Rt=>Rt.route.id===Ye))||Xt&&Xt.some(Rt=>Rt.route.id===Ye)),ee=++ce,Xt.length===0&&Ot.length===0){let Ye=Gl();return We(Q,Jt({matches:re,loaderData:{},errors:Me&&Gr(Me[1])?{[Me[0]]:Me[1].error}:null},VC(Me),Ye?{fetchers:new Map(T.fetchers)}:{}),{flushSync:Le}),{shortCircuited:!0}}if(ct){let Ye={};if(!de){Ye.navigation=ot;let Rt=ge(Me);Rt!==void 0&&(Ye.actionData=Rt)}Ot.length>0&&(Ye.fetchers=_e(Ot)),He(Ye,{flushSync:Le})}Ot.forEach(Ye=>{Y.has(Ye.key)&&Pn(Ye.key),Ye.controller&&Y.set(Ye.key,Ye.controller)});let Ci=()=>Ot.forEach(Ye=>Pn(Ye.key));V&&V.signal.addEventListener("abort",Ci);let{loaderResults:tr,fetcherResults:nr}=await Kt(T,re,Xt,Ot,H);if(H.signal.aborted)return{shortCircuited:!0};V&&V.signal.removeEventListener("abort",Ci),Ot.forEach(Ye=>Y.delete(Ye.key));let Sn=Pp(tr);if(Sn)return await Qe(H,Sn.result,!0,{replace:Ie}),{shortCircuited:!0};if(Sn=Pp(nr),Sn)return K.add(Sn.key),await Qe(H,Sn.result,!0,{replace:Ie}),{shortCircuited:!0};let{loaderData:Ai,errors:Je}=FC(T,re,Xt,tr,Me,Ot,nr,W);W.forEach((Ye,Rt)=>{Ye.subscribe(xn=>{(xn||Ye.done)&&W.delete(Rt)})}),p.v7_partialHydration&&je&&T.errors&&Object.entries(T.errors).filter(Ye=>{let[Rt]=Ye;return!Xt.some(xn=>xn.route.id===Rt)}).forEach(Ye=>{let[Rt,xn]=Ye;Je=Object.assign(Je||{},{[Rt]:xn})});let li=Gl(),ns=xo(ee),Pi=li||ns||Ot.length>0;return Jt({matches:re,loaderData:Ai,errors:Je},Pi?{fetchers:new Map(T.fetchers)}:{})}function ge(H){if(H&&!Gr(H[1]))return{[H[0]]:H[1].data};if(T.actionData)return Object.keys(T.actionData).length===0?null:T.actionData}function _e(H){return H.forEach(Q=>{let re=T.fetchers.get(Q.key),de=Ef(void 0,re?re.data:void 0);T.fetchers.set(Q.key,de)}),new Map(T.fetchers)}function fe(H,Q,re,de){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Y.has(H)&&Pn(H);let Ce=(de&&de.unstable_flushSync)===!0,Oe=a||o,ze=tb(T.location,T.matches,l,p.v7_prependBasename,re,p.v7_relativeSplatPath,Q,de==null?void 0:de.relative),Ie=nl(Oe,ze,l),je=Yt(Ie,Oe,ze);if(je.active&&je.matches&&(Ie=je.matches),!Ie){nt(H,Q,_r(404,{pathname:ze}),{flushSync:Ce});return}let{path:Le,submission:Me,error:ot}=OC(p.v7_normalizeFormMethod,!0,ze,de);if(ot){nt(H,Q,ot,{flushSync:Ce});return}let at=Df(Ie,Le);if(L=(de&&de.preventScrollReset)===!0,Me&&Mi(Me.formMethod)){ke(H,Q,Le,at,Ie,je.active,Ce,Me);return}te.set(H,{routeId:Q,path:Le}),Be(H,Q,Le,at,Ie,je.active,Ce,Me)}async function ke(H,Q,re,de,Ce,Oe,ze,Ie){Zn(),te.delete(H);function je(mt){if(!mt.route.action&&!mt.route.lazy){let rr=_r(405,{method:Ie.formMethod,pathname:re,routeId:Q});return nt(H,Q,rr,{flushSync:ze}),!0}return!1}if(!Oe&&je(de))return;let Le=T.fetchers.get(H);pn(H,jz(Ie,Le),{flushSync:ze});let Me=new AbortController,ot=Su(t.history,re,Me.signal,Ie);if(Oe){let mt=await Ii(Ce,re,ot.signal);if(mt.type==="aborted")return;if(mt.type==="error"){let{error:rr}=er(re,mt);nt(H,Q,rr,{flushSync:ze});return}else if(mt.matches){if(Ce=mt.matches,de=Df(Ce,re),je(de))return}else{nt(H,Q,_r(404,{pathname:re}),{flushSync:ze});return}}Y.set(H,Me);let at=ce,it=(await qe("action",T,ot,[de],Ce,H))[de.route.id];if(ot.signal.aborted){Y.get(H)===Me&&Y.delete(H);return}if(p.v7_fetcherPersist&&Te.has(H)){if(al(it)||Gr(it)){pn(H,Fo(void 0));return}}else{if(al(it))if(Y.delete(H),ee>at){pn(H,Fo(void 0));return}else return K.add(H),pn(H,Ef(Ie)),Qe(ot,it,!1,{fetcherSubmission:Ie});if(Gr(it)){nt(H,Q,it.error);return}}if(Qo(it))throw _r(400,{type:"defer-action"});let Xt=T.navigation.location||T.location,Ot=Su(t.history,Xt,Me.signal),Ci=a||o,tr=T.navigation.state!=="idle"?nl(Ci,T.navigation.location,l):T.matches;lt(tr,"Didn't find any matches after fetcher action");let nr=++ce;$.set(H,nr);let Sn=Ef(Ie,it.data);T.fetchers.set(H,Sn);let[Ai,Je]=NC(t.history,T,tr,Ie,Xt,!1,p.v7_skipActionErrorRevalidation,pe,X,G,Te,te,K,Ci,l,[de.route.id,it]);Je.filter(mt=>mt.key!==H).forEach(mt=>{let rr=mt.key,Yl=T.fetchers.get(rr),rs=Ef(void 0,Yl?Yl.data:void 0);T.fetchers.set(rr,rs),Y.has(rr)&&Pn(rr),mt.controller&&Y.set(rr,mt.controller)}),He({fetchers:new Map(T.fetchers)});let li=()=>Je.forEach(mt=>Pn(mt.key));Me.signal.addEventListener("abort",li);let{loaderResults:ns,fetcherResults:Pi}=await Kt(T,tr,Ai,Je,Ot);if(Me.signal.aborted)return;Me.signal.removeEventListener("abort",li),$.delete(H),Y.delete(H),Je.forEach(mt=>Y.delete(mt.key));let Ye=Pp(ns);if(Ye)return Qe(Ot,Ye.result,!1);if(Ye=Pp(Pi),Ye)return K.add(Ye.key),Qe(Ot,Ye.result,!1);let{loaderData:Rt,errors:xn}=FC(T,tr,Ai,ns,void 0,Je,Pi,W);if(T.fetchers.has(H)){let mt=Fo(it.data);T.fetchers.set(H,mt)}xo(nr),T.navigation.state==="loading"&&nr>ee?(lt(N,"Expected pending action"),V&&V.abort(),We(T.navigation.location,{matches:tr,loaderData:Rt,errors:xn,fetchers:new Map(T.fetchers)})):(He({errors:xn,loaderData:jC(T.loaderData,Rt,tr,xn),fetchers:new Map(T.fetchers)}),pe=!1)}async function Be(H,Q,re,de,Ce,Oe,ze,Ie){let je=T.fetchers.get(H);pn(H,Ef(Ie,je?je.data:void 0),{flushSync:ze});let Le=new AbortController,Me=Su(t.history,re,Le.signal);if(Oe){let it=await Ii(Ce,re,Me.signal);if(it.type==="aborted")return;if(it.type==="error"){let{error:Xt}=er(re,it);nt(H,Q,Xt,{flushSync:ze});return}else if(it.matches)Ce=it.matches,de=Df(Ce,re);else{nt(H,Q,_r(404,{pathname:re}),{flushSync:ze});return}}Y.set(H,Le);let ot=ce,ct=(await qe("loader",T,Me,[de],Ce,H))[de.route.id];if(Qo(ct)&&(ct=await cS(ct,Me.signal,!0)||ct),Y.get(H)===Le&&Y.delete(H),!Me.signal.aborted){if(Te.has(H)){pn(H,Fo(void 0));return}if(al(ct))if(ee>ot){pn(H,Fo(void 0));return}else{K.add(H),await Qe(Me,ct,!1);return}if(Gr(ct)){nt(H,Q,ct.error);return}lt(!Qo(ct),"Unhandled fetcher deferred data"),pn(H,Fo(ct.data))}}async function Qe(H,Q,re,de){let{submission:Ce,fetcherSubmission:Oe,replace:ze}=de===void 0?{}:de;Q.response.headers.has("X-Remix-Revalidate")&&(pe=!0);let Ie=Q.response.headers.get("Location");lt(Ie,"Expected a Location header on the redirect Response"),Ie=LC(Ie,new URL(H.url),l);let je=Od(T.location,Ie,{_isRedirect:!0});if(n){let it=!1;if(Q.response.headers.has("X-Remix-Reload-Document"))it=!0;else if(uS.test(Ie)){const Xt=t.history.createURL(Ie);it=Xt.origin!==e.location.origin||uo(Xt.pathname,l)==null}if(it){ze?e.location.replace(Ie):e.location.assign(Ie);return}}V=null;let Le=ze===!0||Q.response.headers.has("X-Remix-Replace")?yn.Replace:yn.Push,{formMethod:Me,formAction:ot,formEncType:at}=T.navigation;!Ce&&!Oe&&Me&&ot&&at&&(Ce=$C(T.navigation));let ct=Ce||Oe;if(mz.has(Q.response.status)&&ct&&Mi(ct.formMethod))await z(Le,je,{submission:Jt({},ct,{formAction:Ie}),preventScrollReset:L,enableViewTransition:re?j:void 0});else{let it=y0(je,Ce);await z(Le,je,{overrideNavigation:it,fetcherSubmission:Oe,preventScrollReset:L,enableViewTransition:re?j:void 0})}}async function qe(H,Q,re,de,Ce,Oe){let ze,Ie={};try{ze=await xz(u,H,Q,re,de,Ce,Oe,s,i)}catch(je){return de.forEach(Le=>{Ie[Le.route.id]={type:Pt.error,error:je}}),Ie}for(let[je,Le]of Object.entries(ze))if(Oz(Le)){let Me=Le.result;Ie[je]={type:Pt.redirect,response:Cz(Me,re,je,Ce,l,p.v7_relativeSplatPath)}}else Ie[je]=await Rz(Le);return Ie}async function Kt(H,Q,re,de,Ce){let Oe=H.matches,ze=qe("loader",H,Ce,re,Q,null),Ie=Promise.all(de.map(async Me=>{if(Me.matches&&Me.match&&Me.controller){let at=(await qe("loader",H,Su(t.history,Me.path,Me.controller.signal),[Me.match],Me.matches,Me.key))[Me.match.route.id];return{[Me.key]:at}}else return Promise.resolve({[Me.key]:{type:Pt.error,error:_r(404,{pathname:Me.path})}})})),je=await ze,Le=(await Ie).reduce((Me,ot)=>Object.assign(Me,ot),{});return await Promise.all([Lz(Q,je,Ce.signal,Oe,H.loaderData),Mz(Q,Le,de)]),{loaderResults:je,fetcherResults:Le}}function Zn(){pe=!0,X.push(...Ds()),te.forEach((H,Q)=>{Y.has(Q)&&(G.add(Q),Pn(Q))})}function pn(H,Q,re){re===void 0&&(re={}),T.fetchers.set(H,Q),He({fetchers:new Map(T.fetchers)},{flushSync:(re&&re.flushSync)===!0})}function nt(H,Q,re,de){de===void 0&&(de={});let Ce=qu(T.matches,Q);rn(H),He({errors:{[Ce.route.id]:re},fetchers:new Map(T.fetchers)},{flushSync:(de&&de.flushSync)===!0})}function yr(H){return p.v7_fetcherPersist&&(Ee.set(H,(Ee.get(H)||0)+1),Te.has(H)&&Te.delete(H)),T.fetchers.get(H)||gz}function rn(H){let Q=T.fetchers.get(H);Y.has(H)&&!(Q&&Q.state==="loading"&&$.has(H))&&Pn(H),te.delete(H),$.delete(H),K.delete(H),Te.delete(H),G.delete(H),T.fetchers.delete(H)}function Tn(H){if(p.v7_fetcherPersist){let Q=(Ee.get(H)||0)-1;Q<=0?(Ee.delete(H),Te.add(H)):Ee.set(H,Q)}else rn(H);He({fetchers:new Map(T.fetchers)})}function Pn(H){let Q=Y.get(H);lt(Q,"Expected fetch controller: "+H),Q.abort(),Y.delete(H)}function Ma(H){for(let Q of H){let re=yr(Q),de=Fo(re.data);T.fetchers.set(Q,de)}}function Gl(){let H=[],Q=!1;for(let re of K){let de=T.fetchers.get(re);lt(de,"Expected fetcher: "+re),de.state==="loading"&&(K.delete(re),H.push(re),Q=!0)}return Ma(H),Q}function xo(H){let Q=[];for(let[re,de]of $)if(de<H){let Ce=T.fetchers.get(re);lt(Ce,"Expected fetcher: "+re),Ce.state==="loading"&&(Pn(re),$.delete(re),Q.push(re))}return Ma(Q),Q.length>0}function Ql(H,Q){let re=T.blockers.get(H)||wf;return ue.get(H)!==Q&&ue.set(H,Q),re}function Io(H){T.blockers.delete(H),ue.delete(H)}function qr(H,Q){let re=T.blockers.get(H)||wf;lt(re.state==="unblocked"&&Q.state==="blocked"||re.state==="blocked"&&Q.state==="blocked"||re.state==="blocked"&&Q.state==="proceeding"||re.state==="blocked"&&Q.state==="unblocked"||re.state==="proceeding"&&Q.state==="unblocked","Invalid blocker state transition: "+re.state+" -> "+Q.state);let de=new Map(T.blockers);de.set(H,Q),He({blockers:de})}function Ns(H){let{currentLocation:Q,nextLocation:re,historyAction:de}=H;if(ue.size===0)return;ue.size>1&&mc(!1,"A router only supports one blocker at a time");let Ce=Array.from(ue.entries()),[Oe,ze]=Ce[Ce.length-1],Ie=T.blockers.get(Oe);if(!(Ie&&Ie.state==="proceeding")&&ze({currentLocation:Q,nextLocation:re,historyAction:de}))return Oe}function Zi(H){let Q=_r(404,{pathname:H}),re=a||o,{matches:de,route:Ce}=UC(re);return Ds(),{notFoundMatches:de,route:Ce,error:Q}}function er(H,Q){return{boundaryId:qu(Q.partialMatches).route.id,error:_r(400,{type:"route-discovery",pathname:H,message:Q.error!=null&&"message"in Q.error?Q.error:String(Q.error)})}}function Ds(H){let Q=[];return W.forEach((re,de)=>{(!H||H(de))&&(re.cancel(),Q.push(de),W.delete(de))}),Q}function es(H,Q,re){if(I=H,w=Q,R=re||null,!v&&T.navigation===g0){v=!0;let de=Fa(T.location,T.matches);de!=null&&He({restoreScrollPosition:de})}return()=>{I=null,w=null,R=null}}function Ls(H,Q){return R&&R(H,Q.map(de=>K$(de,T.loaderData)))||H.key}function ts(H,Q){if(I&&w){let re=Ls(H,Q);I[re]=w()}}function Fa(H,Q){if(I){let re=Ls(H,Q),de=I[re];if(typeof de=="number")return de}return null}function Yt(H,Q,re){if(f){if(S.has(re))return{active:!1,matches:H};if(H){if(Object.keys(H[0].params).length>0)return{active:!0,matches:am(Q,re,l,!0)}}else return{active:!0,matches:am(Q,re,l,!0)||[]}}return{active:!1,matches:null}}async function Ii(H,Q,re){let de=H;for(;;){let Ce=a==null,Oe=a||o;try{await bz(f,Q,de,Oe,s,i,Se,re)}catch(je){return{type:"error",error:je,partialMatches:de}}finally{Ce&&(o=[...o])}if(re.aborted)return{type:"aborted"};let ze=nl(Oe,Q,l);if(ze)return ai(Q,S),{type:"success",matches:ze};let Ie=am(Oe,Q,l,!0);if(!Ie||de.length===Ie.length&&de.every((je,Le)=>je.route.id===Ie[Le].route.id))return ai(Q,S),{type:"success",matches:null};de=Ie}}function ai(H,Q){if(Q.size>=E){let re=Q.values().next().value;Q.delete(re)}Q.add(H)}function Ri(H){s={},a=Nd(H,i,void 0,s)}function Ro(H,Q){let re=a==null;LL(H,Q,a||o,s,i),re&&(o=[...o],He({}))}return D={get basename(){return l},get future(){return p},get state(){return T},get routes(){return o},get window(){return e},initialize:xe,subscribe:Et,enableScrollRestoration:es,navigate:Qt,fetch:fe,revalidate:st,createHref:H=>t.history.createHref(H),encodeLocation:H=>t.history.encodeLocation(H),getFetcher:yr,deleteFetcher:Tn,dispose:Ke,getBlocker:Ql,deleteBlocker:Io,patchRoutes:Ro,_internalFetchControllers:Y,_internalActiveDeferreds:W,_internalSetRoutes:Ri},D}function _z(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function tb(t,e,n,r,i,s,o,a){let l,u;if(o){l=[];for(let p of e)if(l.push(p),p.route.id===o){u=p;break}}else l=e,u=e[e.length-1];let f=lS(i||".",aS(l,s),uo(t.pathname,n)||t.pathname,a==="path");return i==null&&(f.search=t.search,f.hash=t.hash),(i==null||i===""||i===".")&&u&&u.route.index&&!fS(f.search)&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(f.pathname=f.pathname==="/"?n:eo([n,f.pathname])),Il(f)}function OC(t,e,n,r){if(!r||!_z(r))return{path:n};if(r.formMethod&&!Dz(r.formMethod))return{path:n,error:_r(405,{method:r.formMethod})};let i=()=>({path:n,error:_r(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=ML(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Mi(o))return i();let y=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((_,E)=>{let[S,I]=E;return""+_+S+"="+I+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:y}}}else if(r.formEncType==="application/json"){if(!Mi(o))return i();try{let y=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:y,text:void 0}}}catch{return i()}}}lt(typeof FormData=="function","FormData is not available in this environment");let l,u;if(r.formData)l=nb(r.formData),u=r.formData;else if(r.body instanceof FormData)l=nb(r.body),u=r.body;else if(r.body instanceof URLSearchParams)l=r.body,u=MC(l);else if(r.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(r.body),u=MC(l)}catch{return i()}let f={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(Mi(f.formMethod))return{path:n,submission:f};let p=xa(n);return e&&p.search&&fS(p.search)&&l.append("index",""),p.search="?"+l,{path:Il(p),submission:f}}function wz(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function NC(t,e,n,r,i,s,o,a,l,u,f,p,y,_,E,S){let I=S?Gr(S[1])?S[1].error:S[1].data:void 0,R=t.createURL(e.location),w=t.createURL(i),v=S&&Gr(S[1])?S[0]:void 0,C=v?wz(n,v):n,k=S?S[1].statusCode:void 0,B=o&&k&&k>=400,D=C.filter((N,L)=>{let{route:V}=N;if(V.lazy)return!0;if(V.loader==null)return!1;if(s)return typeof V.loader!="function"||V.loader.hydrate?!0:e.loaderData[V.id]===void 0&&(!e.errors||e.errors[V.id]===void 0);if(Ez(e.loaderData,e.matches[L],N)||l.some(le=>le===N.route.id))return!0;let j=e.matches[L],M=N;return DC(N,Jt({currentUrl:R,currentParams:j.params,nextUrl:w,nextParams:M.params},r,{actionResult:I,actionStatus:k,defaultShouldRevalidate:B?!1:a||R.pathname+R.search===w.pathname+w.search||R.search!==w.search||DL(j,M)}))}),T=[];return p.forEach((N,L)=>{if(s||!n.some(me=>me.route.id===N.routeId)||f.has(L))return;let V=nl(_,N.path,E);if(!V){T.push({key:L,routeId:N.routeId,path:N.path,matches:null,match:null,controller:null});return}let j=e.fetchers.get(L),M=Df(V,N.path),le=!1;y.has(L)?le=!1:u.has(L)?(u.delete(L),le=!0):j&&j.state!=="idle"&&j.data===void 0?le=a:le=DC(M,Jt({currentUrl:R,currentParams:e.matches[e.matches.length-1].params,nextUrl:w,nextParams:n[n.length-1].params},r,{actionResult:I,actionStatus:k,defaultShouldRevalidate:B?!1:a})),le&&T.push({key:L,routeId:N.routeId,path:N.path,matches:V,match:M,controller:new AbortController})}),[D,T]}function Ez(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function DL(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function DC(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function bz(t,e,n,r,i,s,o,a){let l=[e,...n.map(u=>u.route.id)].join("-");try{let u=o.get(l);u||(u=t({path:e,matches:n,patch:(f,p)=>{a.aborted||LL(f,p,r,i,s)}}),o.set(l,u)),u&&kz(u)&&await u}finally{o.delete(l)}}function LL(t,e,n,r,i){if(t){var s;let o=r[t];lt(o,"No route found to patch children into: routeId = "+t);let a=Nd(e,i,[t,"patch",String(((s=o.children)==null?void 0:s.length)||"0")],r);o.children?o.children.push(...a):o.children=a}else{let o=Nd(e,i,["patch",String(n.length||"0")],r);n.push(...o)}}async function Tz(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];lt(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";mc(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!q$.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,Jt({},e(i),{lazy:void 0}))}async function Sz(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,s,o)=>Object.assign(i,{[n[o].route.id]:s}),{})}async function xz(t,e,n,r,i,s,o,a,l,u){let f=s.map(_=>_.route.lazy?Tz(_.route,l,a):void 0),p=s.map((_,E)=>{let S=f[E],I=i.some(w=>w.route.id===_.route.id);return Jt({},_,{shouldLoad:I,resolve:async w=>(w&&r.method==="GET"&&(_.route.lazy||_.route.loader)&&(I=!0),I?Iz(e,r,_,S,w,u):Promise.resolve({type:Pt.data,result:void 0}))})}),y=await t({matches:p,request:r,params:s[0].params,fetcherKey:o,context:u});try{await Promise.all(f)}catch{}return y}async function Iz(t,e,n,r,i,s){let o,a,l=u=>{let f,p=new Promise((E,S)=>f=S);a=()=>f(),e.signal.addEventListener("abort",a);let y=E=>typeof u!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):u({request:e,params:n.params,context:s},...E!==void 0?[E]:[]),_=(async()=>{try{return{type:"data",result:await(i?i(S=>y(S)):y())}}catch(E){return{type:"error",result:E}}})();return Promise.race([_,p])};try{let u=n.route[t];if(r)if(u){let f,[p]=await Promise.all([l(u).catch(y=>{f=y}),r]);if(f!==void 0)throw f;o=p}else if(await r,u=n.route[t],u)o=await l(u);else if(t==="action"){let f=new URL(e.url),p=f.pathname+f.search;throw _r(405,{method:e.method,pathname:p,routeId:n.route.id})}else return{type:Pt.data,result:void 0};else if(u)o=await l(u);else{let f=new URL(e.url),p=f.pathname+f.search;throw _r(404,{pathname:p})}lt(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(u){return{type:Pt.error,result:u}}finally{a&&e.signal.removeEventListener("abort",a)}return o}async function Rz(t){let{result:e,type:n}=t;if(FL(e)){let u;try{let f=e.headers.get("Content-Type");f&&/\bapplication\/json\b/.test(f)?e.body==null?u=null:u=await e.json():u=await e.text()}catch(f){return{type:Pt.error,error:f}}return n===Pt.error?{type:Pt.error,error:new Zm(e.status,e.statusText,u),statusCode:e.status,headers:e.headers}:{type:Pt.data,data:u,statusCode:e.status,headers:e.headers}}if(n===Pt.error){if(BC(e)){var r;if(e.data instanceof Error){var i;return{type:Pt.error,error:e.data,statusCode:(i=e.init)==null?void 0:i.status}}e=new Zm(((r=e.init)==null?void 0:r.status)||500,void 0,e.data)}return{type:Pt.error,error:e,statusCode:cy(e)?e.status:void 0}}if(Nz(e)){var s,o;return{type:Pt.deferred,deferredData:e,statusCode:(s=e.init)==null?void 0:s.status,headers:((o=e.init)==null?void 0:o.headers)&&new Headers(e.init.headers)}}if(BC(e)){var a,l;return{type:Pt.data,data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}}return{type:Pt.data,data:e}}function Cz(t,e,n,r,i,s){let o=t.headers.get("Location");if(lt(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!uS.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=tb(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function LC(t,e,n){if(uS.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=uo(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function Su(t,e,n,r){let i=t.createURL(ML(e)).toString(),s={signal:n};if(r&&Mi(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=nb(r.formData):s.body=r.formData}return new Request(i,s)}function nb(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function MC(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function Az(t,e,n,r,i){let s={},o=null,a,l=!1,u={},f=n&&Gr(n[1])?n[1].error:void 0;return t.forEach(p=>{if(!(p.route.id in e))return;let y=p.route.id,_=e[y];if(lt(!al(_),"Cannot handle redirect results in processLoaderData"),Gr(_)){let E=_.error;f!==void 0&&(E=f,f=void 0),o=o||{};{let S=qu(t,y);o[S.route.id]==null&&(o[S.route.id]=E)}s[y]=void 0,l||(l=!0,a=cy(_.error)?_.error.status:500),_.headers&&(u[y]=_.headers)}else Qo(_)?(r.set(y,_.deferredData),s[y]=_.deferredData.data,_.statusCode!=null&&_.statusCode!==200&&!l&&(a=_.statusCode),_.headers&&(u[y]=_.headers)):(s[y]=_.data,_.statusCode&&_.statusCode!==200&&!l&&(a=_.statusCode),_.headers&&(u[y]=_.headers))}),f!==void 0&&n&&(o={[n[0]]:f},s[n[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:u}}function FC(t,e,n,r,i,s,o,a){let{loaderData:l,errors:u}=Az(e,r,i,a);return s.forEach(f=>{let{key:p,match:y,controller:_}=f,E=o[p];if(lt(E,"Did not find corresponding fetcher result"),!(_&&_.signal.aborted))if(Gr(E)){let S=qu(t.matches,y==null?void 0:y.route.id);u&&u[S.route.id]||(u=Jt({},u,{[S.route.id]:E.error})),t.fetchers.delete(p)}else if(al(E))lt(!1,"Unhandled fetcher revalidation redirect");else if(Qo(E))lt(!1,"Unhandled fetcher deferred data");else{let S=Fo(E.data);t.fetchers.set(p,S)}}),{loaderData:l,errors:u}}function jC(t,e,n,r){let i=Jt({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function VC(t){return t?Gr(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function qu(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function UC(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function _r(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",s==="route-discovery"?l='Unable to match URL "'+n+'" - the `unstable_patchRoutesOnNavigation()` '+(`function threw the following error:
`+o):i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new Zm(t||500,a,new Error(l),!0)}function Pp(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(al(i))return{key:r,result:i}}}function ML(t){let e=typeof t=="string"?xa(t):t;return Il(Jt({},e,{hash:""}))}function Pz(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function kz(t){return typeof t=="object"&&t!=null&&"then"in t}function Oz(t){return FL(t.result)&&pz.has(t.result.status)}function Qo(t){return t.type===Pt.deferred}function Gr(t){return t.type===Pt.error}function al(t){return(t&&t.type)===Pt.redirect}function BC(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function Nz(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function FL(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function Dz(t){return hz.has(t.toLowerCase())}function Mi(t){return fz.has(t.toLowerCase())}async function Lz(t,e,n,r,i){let s=Object.entries(e);for(let o=0;o<s.length;o++){let[a,l]=s[o],u=t.find(y=>(y==null?void 0:y.route.id)===a);if(!u)continue;let f=r.find(y=>y.route.id===u.route.id),p=f!=null&&!DL(f,u)&&(i&&i[u.route.id])!==void 0;Qo(l)&&p&&await cS(l,n,!1).then(y=>{y&&(e[a]=y)})}}async function Mz(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:s,controller:o}=n[r],a=e[i];t.find(u=>(u==null?void 0:u.route.id)===s)&&Qo(a)&&(lt(o,"Expected an AbortController for revalidating fetcher deferred result"),await cS(a,o.signal,!0).then(u=>{u&&(e[i]=u)}))}}async function cS(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Pt.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Pt.error,error:i}}return{type:Pt.data,data:t.deferredData.data}}}function fS(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Df(t,e){let n=typeof e=="string"?xa(e).search:e.search;if(t[t.length-1].route.index&&fS(n||""))return t[t.length-1];let r=kL(t);return r[r.length-1]}function $C(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function y0(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Fz(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Ef(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function jz(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Fo(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Vz(t,e){try{let n=t.sessionStorage.getItem(NL);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function Uz(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(NL,JSON.stringify(n))}catch(r){mc(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eg(){return eg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eg.apply(this,arguments)}const oh=O.createContext(null),dS=O.createContext(null),Ia=O.createContext(null),hS=O.createContext(null),Ra=O.createContext({outlet:null,matches:[],isDataRoute:!1}),jL=O.createContext(null);function Bz(t,e){let{relative:n}=e===void 0?{}:e;ah()||lt(!1);let{basename:r,navigator:i}=O.useContext(Ia),{hash:s,pathname:o,search:a}=fy(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:eo([r,o])),i.createHref({pathname:l,search:a,hash:s})}function ah(){return O.useContext(hS)!=null}function Ca(){return ah()||lt(!1),O.useContext(hS).location}function VL(t){O.useContext(Ia).static||O.useLayoutEffect(t)}function Aa(){let{isDataRoute:t}=O.useContext(Ra);return t?Zz():$z()}function $z(){ah()||lt(!1);let t=O.useContext(oh),{basename:e,future:n,navigator:r}=O.useContext(Ia),{matches:i}=O.useContext(Ra),{pathname:s}=Ca(),o=JSON.stringify(aS(i,n.v7_relativeSplatPath)),a=O.useRef(!1);return VL(()=>{a.current=!0}),O.useCallback(function(u,f){if(f===void 0&&(f={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let p=lS(u,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:eo([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,s,t])}function pS(){let{matches:t}=O.useContext(Ra),e=t[t.length-1];return e?e.params:{}}function fy(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(Ia),{matches:i}=O.useContext(Ra),{pathname:s}=Ca(),o=JSON.stringify(aS(i,r.v7_relativeSplatPath));return O.useMemo(()=>lS(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function zz(t,e,n,r){ah()||lt(!1);let{navigator:i}=O.useContext(Ia),{matches:s}=O.useContext(Ra),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Ca(),f;f=u;let p=f.pathname||"/",y=p;if(l!=="/"){let S=l.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(S.length).join("/")}let _=nl(t,{pathname:y});return Gz(_&&_.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:eo([l,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?l:eo([l,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),s,n,r)}function Hz(){let t=Jz(),e=cy(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:i},n):null,null)}const qz=O.createElement(Hz,null);class Wz extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(Ra.Provider,{value:this.props.routeContext},O.createElement(jL.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Kz(t){let{routeContext:e,match:n,children:r}=t,i=O.useContext(oh);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(Ra.Provider,{value:e},r)}function Gz(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let f=o.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);f>=0||lt(!1),o=o.slice(0,Math.min(o.length,f+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=f),p.route.id){let{loaderData:y,errors:_}=n,E=p.route.loader&&y[p.route.id]===void 0&&(!_||_[p.route.id]===void 0);if(p.route.lazy||E){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((f,p,y)=>{let _,E=!1,S=null,I=null;n&&(_=a&&p.route.id?a[p.route.id]:void 0,S=p.route.errorElement||qz,l&&(u<0&&y===0?(eH("route-fallback"),E=!0,I=null):u===y&&(E=!0,I=p.route.hydrateFallbackElement||null)));let R=e.concat(o.slice(0,y+1)),w=()=>{let v;return _?v=S:E?v=I:p.route.Component?v=O.createElement(p.route.Component,null):p.route.element?v=p.route.element:v=f,O.createElement(Kz,{match:p,routeContext:{outlet:f,matches:R,isDataRoute:n!=null},children:v})};return n&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?O.createElement(Wz,{location:n.location,revalidation:n.revalidation,component:S,error:_,children:w(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):w()},null)}var UL=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(UL||{}),tg=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(tg||{});function Qz(t){let e=O.useContext(oh);return e||lt(!1),e}function Yz(t){let e=O.useContext(dS);return e||lt(!1),e}function Xz(t){let e=O.useContext(Ra);return e||lt(!1),e}function BL(t){let e=Xz(),n=e.matches[e.matches.length-1];return n.route.id||lt(!1),n.route.id}function Jz(){var t;let e=O.useContext(jL),n=Yz(tg.UseRouteError),r=BL(tg.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Zz(){let{router:t}=Qz(UL.UseNavigateStable),e=BL(tg.UseNavigateStable),n=O.useRef(!1);return VL(()=>{n.current=!0}),O.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,eg({fromRouteId:e},s)))},[t,e])}const zC={};function eH(t,e,n){zC[t]||(zC[t]=!0)}function tH(t){let{basename:e="/",children:n=null,location:r,navigationType:i=yn.Pop,navigator:s,static:o=!1,future:a}=t;ah()&&lt(!1);let l=e.replace(/^\/*/,"/"),u=O.useMemo(()=>({basename:l,navigator:s,static:o,future:eg({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=xa(r));let{pathname:f="/",search:p="",hash:y="",state:_=null,key:E="default"}=r,S=O.useMemo(()=>{let I=uo(f,l);return I==null?null:{location:{pathname:I,search:p,hash:y,state:_,key:E},navigationType:i}},[l,f,p,y,_,E,i]);return S==null?null:O.createElement(Ia.Provider,{value:u},O.createElement(hS.Provider,{children:n,value:S}))}new Promise(()=>{});function nH(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:O.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:O.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:O.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gc(){return gc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gc.apply(this,arguments)}function $L(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function rH(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function iH(t,e){return t.button===0&&(!e||e==="_self")&&!rH(t)}const sH=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],oH=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],aH="6";try{window.__reactRouterVersion=aH}catch{}function lH(t,e){return vz({basename:void 0,future:gc({},void 0,{v7_prependBasename:!0}),history:$$({window:void 0}),hydrationData:uH(),routes:t,mapRouteProperties:nH,unstable_dataStrategy:void 0,unstable_patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function uH(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=gc({},e,{errors:cH(e.errors)})),e}function cH(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Zm(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const zL=O.createContext({isTransitioning:!1}),fH=O.createContext(new Map),dH="startTransition",HC=Em[dH],hH="flushSync",qC=zU[hH];function pH(t){HC?HC(t):t()}function bf(t){qC?qC(t):t()}let mH=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function gH(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=O.useState(n.state),[o,a]=O.useState(),[l,u]=O.useState({isTransitioning:!1}),[f,p]=O.useState(),[y,_]=O.useState(),[E,S]=O.useState(),I=O.useRef(new Map),{v7_startTransition:R}=r||{},w=O.useCallback(T=>{R?pH(T):T()},[R]),v=O.useCallback((T,N)=>{let{deletedFetchers:L,unstable_flushSync:V,unstable_viewTransitionOpts:j}=N;L.forEach(le=>I.current.delete(le)),T.fetchers.forEach((le,me)=>{le.data!==void 0&&I.current.set(me,le.data)});let M=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!j||M){V?bf(()=>s(T)):w(()=>s(T));return}if(V){bf(()=>{y&&(f&&f.resolve(),y.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:j.currentLocation,nextLocation:j.nextLocation})});let le=n.window.document.startViewTransition(()=>{bf(()=>s(T))});le.finished.finally(()=>{bf(()=>{p(void 0),_(void 0),a(void 0),u({isTransitioning:!1})})}),bf(()=>_(le));return}y?(f&&f.resolve(),y.skipTransition(),S({state:T,currentLocation:j.currentLocation,nextLocation:j.nextLocation})):(a(T),u({isTransitioning:!0,flushSync:!1,currentLocation:j.currentLocation,nextLocation:j.nextLocation}))},[n.window,y,f,I,w]);O.useLayoutEffect(()=>n.subscribe(v),[n,v]),O.useEffect(()=>{l.isTransitioning&&!l.flushSync&&p(new mH)},[l]),O.useEffect(()=>{if(f&&o&&n.window){let T=o,N=f.promise,L=n.window.document.startViewTransition(async()=>{w(()=>s(T)),await N});L.finished.finally(()=>{p(void 0),_(void 0),a(void 0),u({isTransitioning:!1})}),_(L)}},[w,o,f,n.window]),O.useEffect(()=>{f&&o&&i.location.key===o.location.key&&f.resolve()},[f,y,i.location,o]),O.useEffect(()=>{!l.isTransitioning&&E&&(a(E.state),u({isTransitioning:!0,flushSync:!1,currentLocation:E.currentLocation,nextLocation:E.nextLocation}),S(void 0))},[l.isTransitioning,E]),O.useEffect(()=>{},[]);let C=O.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:T=>n.navigate(T),push:(T,N,L)=>n.navigate(T,{state:N,preventScrollReset:L==null?void 0:L.preventScrollReset}),replace:(T,N,L)=>n.navigate(T,{replace:!0,state:N,preventScrollReset:L==null?void 0:L.preventScrollReset})}),[n]),k=n.basename||"/",B=O.useMemo(()=>({router:n,navigator:C,static:!1,basename:k}),[n,C,k]),D=O.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return O.createElement(O.Fragment,null,O.createElement(oh.Provider,{value:B},O.createElement(dS.Provider,{value:i},O.createElement(fH.Provider,{value:I.current},O.createElement(zL.Provider,{value:l},O.createElement(tH,{basename:k,location:i.location,navigationType:i.historyAction,navigator:C,future:D},i.initialized||n.future.v7_partialHydration?O.createElement(yH,{routes:n.routes,future:n.future,state:i}):e))))),null)}const yH=O.memo(vH);function vH(t){let{routes:e,future:n,state:r}=t;return zz(e,void 0,r,n)}const _H=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,HL=O.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:f,unstable_viewTransition:p}=e,y=$L(e,sH),{basename:_}=O.useContext(Ia),E,S=!1;if(typeof u=="string"&&wH.test(u)&&(E=u,_H))try{let v=new URL(window.location.href),C=u.startsWith("//")?new URL(v.protocol+u):new URL(u),k=uo(C.pathname,_);C.origin===v.origin&&k!=null?u=k+C.search+C.hash:S=!0}catch{}let I=Bz(u,{relative:i}),R=bH(u,{replace:o,state:a,target:l,preventScrollReset:f,relative:i,unstable_viewTransition:p});function w(v){r&&r(v),v.defaultPrevented||R(v)}return O.createElement("a",gc({},y,{href:E||I,onClick:S||s?r:w,ref:n,target:l}))}),qn=O.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,unstable_viewTransition:u,children:f}=e,p=$L(e,oH),y=fy(l,{relative:p.relative}),_=Ca(),E=O.useContext(dS),{navigator:S,basename:I}=O.useContext(Ia),R=E!=null&&TH(y)&&u===!0,w=S.encodeLocation?S.encodeLocation(y).pathname:y.pathname,v=_.pathname,C=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;i||(v=v.toLowerCase(),C=C?C.toLowerCase():null,w=w.toLowerCase()),C&&I&&(C=uo(C,I)||C);const k=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let B=v===w||!o&&v.startsWith(w)&&v.charAt(k)==="/",D=C!=null&&(C===w||!o&&C.startsWith(w)&&C.charAt(w.length)==="/"),T={isActive:B,isPending:D,isTransitioning:R},N=B?r:void 0,L;typeof s=="function"?L=s(T):L=[s,B?"active":null,D?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let V=typeof a=="function"?a(T):a;return O.createElement(HL,gc({},p,{"aria-current":N,className:L,ref:n,style:V,to:l,unstable_viewTransition:u}),typeof f=="function"?f(T):f)});var rb;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(rb||(rb={}));var WC;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(WC||(WC={}));function EH(t){let e=O.useContext(oh);return e||lt(!1),e}function bH(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=Aa(),u=Ca(),f=fy(t,{relative:o});return O.useCallback(p=>{if(iH(p,n)){p.preventDefault();let y=r!==void 0?r:Il(u)===Il(f);l(t,{replace:y,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,f,r,i,n,t,s,o,a])}function TH(t,e){e===void 0&&(e={});let n=O.useContext(zL);n==null&&lt(!1);let{basename:r}=EH(rb.useViewTransitionState),i=fy(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=uo(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=uo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Jm(i.pathname,o)!=null||Jm(i.pathname,s)!=null}var KC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ae=function(t,e){if(!t)throw Dc(e)},Dc=function(t){return new Error("Firebase Database ("+qL.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},SH=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},mS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,f=s>>2,p=(s&3)<<4|a>>4;let y=(a&15)<<2|u>>6,_=u&63;l||(_=64,o||(y=64)),r.push(n[f],n[p],n[y],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(WL(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):SH(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||p==null)throw new xH;const y=s<<2|a>>4;if(r.push(y),u!==64){const _=a<<4&240|u>>2;if(r.push(_),p!==64){const E=u<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KL=function(t){const e=WL(t);return mS.encodeByteArray(e,!0)},ng=function(t){return KL(t).replace(/\./g,"")},rg=function(t){try{return mS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IH(t){return GL(void 0,t)}function GL(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!RH(n)||(t[n]=GL(t[n],e[n]));return t}function RH(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CH(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AH=()=>CH().__FIREBASE_DEFAULTS__,PH=()=>{if(typeof process>"u"||typeof KC>"u")return;const t=KC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kH=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&rg(t[1]);return e&&JSON.parse(e)},dy=()=>{try{return AH()||PH()||kH()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},QL=t=>{var e,n;return(n=(e=dy())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},gS=t=>{const e=QL(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},YL=()=>{var t;return(t=dy())===null||t===void 0?void 0:t.config},XL=t=>{var e;return(e=dy())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ng(JSON.stringify(n)),ng(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _S(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gr())}function OH(){var t;const e=(t=dy())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NH(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function JL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DH(){const t=gr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ZL(){return qL.NODE_ADMIN===!0}function LH(){return!OH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MH(){try{return typeof indexedDB=="object"}catch{return!1}}function FH(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jH="FirebaseError";class As extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=jH,Object.setPrototypeOf(this,As.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lh.prototype.create)}}class lh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?VH(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new As(i,a,r)}}function VH(t,e){return t.replace(UH,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const UH=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(t){return JSON.parse(t)}function Wn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Dd(rg(s[0])||""),n=Dd(rg(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},BH=function(t){const e=e3(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},$H=function(t){const e=e3(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function yc(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function ib(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ig(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function sg(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(GC(s)&&GC(o)){if(!sg(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function GC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Lf(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Mf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zH{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){const y=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(y<<1|y>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,f;for(let p=0;p<80;p++){p<40?p<20?(u=a^s&(o^a),f=1518500249):(u=s^o^a,f=1859775393):p<60?(u=s&o|a&(s|o),f=2400959708):(u=s^o^a,f=3395469782);const y=(i<<5|i>>>27)+u+l+f+r[p]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=y}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function HH(t,e){const n=new qH(t,e);return n.subscribe.bind(n)}class qH{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");WH(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=v0),i.error===void 0&&(i.error=v0),i.complete===void 0&&(i.complete=v0);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WH(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function v0(){}function KH(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GH=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,Ae(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},hy=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t){return t&&t._delegate?t._delegate:t}class co{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QH{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XH(e))try{this.getOrInitializeService({instanceIdentifier:Za})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Za){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Za){return this.instances.has(e)}getOptions(e=Za){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:YH(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Za){return this.component?this.component.multipleInstances?e:Za:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YH(t){return t===Za?void 0:t}function XH(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JH{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new QH(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(dt||(dt={}));const ZH={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},eq=dt.INFO,tq={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},nq=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=tq[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class py{constructor(e){this.name=e,this._logLevel=eq,this._logHandler=nq,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...e),this._logHandler(this,dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...e),this._logHandler(this,dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...e),this._logHandler(this,dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...e),this._logHandler(this,dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...e),this._logHandler(this,dt.ERROR,...e)}}const rq=(t,e)=>e.some(n=>t instanceof n);let QC,YC;function iq(){return QC||(QC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sq(){return YC||(YC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const t3=new WeakMap,sb=new WeakMap,n3=new WeakMap,_0=new WeakMap,wS=new WeakMap;function oq(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(aa(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&t3.set(n,t)}).catch(()=>{}),wS.set(e,t),e}function aq(t){if(sb.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});sb.set(t,e)}let ob={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||n3.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return aa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lq(t){ob=t(ob)}function uq(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(w0(this),e,...n);return n3.set(r,e.sort?e.sort():[e]),aa(r)}:sq().includes(t)?function(...e){return t.apply(w0(this),e),aa(t3.get(this))}:function(...e){return aa(t.apply(w0(this),e))}}function cq(t){return typeof t=="function"?uq(t):(t instanceof IDBTransaction&&aq(t),rq(t,iq())?new Proxy(t,ob):t)}function aa(t){if(t instanceof IDBRequest)return oq(t);if(_0.has(t))return _0.get(t);const e=cq(t);return e!==t&&(_0.set(t,e),wS.set(e,t)),e}const w0=t=>wS.get(t);function fq(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=aa(o);return r&&o.addEventListener("upgradeneeded",l=>{r(aa(o.result),l.oldVersion,l.newVersion,aa(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const dq=["get","getKey","getAll","getAllKeys","count"],hq=["put","add","delete","clear"],E0=new Map;function XC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(E0.get(e))return E0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=hq.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||dq.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return E0.set(e,s),s}lq(t=>({...t,get:(e,n,r)=>XC(e,n)||t.get(e,n,r),has:(e,n)=>!!XC(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pq{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mq(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mq(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ab="@firebase/app",JC="0.10.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=new py("@firebase/app"),gq="@firebase/app-compat",yq="@firebase/analytics-compat",vq="@firebase/analytics",_q="@firebase/app-check-compat",wq="@firebase/app-check",Eq="@firebase/auth",bq="@firebase/auth-compat",Tq="@firebase/database",Sq="@firebase/database-compat",xq="@firebase/functions",Iq="@firebase/functions-compat",Rq="@firebase/installations",Cq="@firebase/installations-compat",Aq="@firebase/messaging",Pq="@firebase/messaging-compat",kq="@firebase/performance",Oq="@firebase/performance-compat",Nq="@firebase/remote-config",Dq="@firebase/remote-config-compat",Lq="@firebase/storage",Mq="@firebase/storage-compat",Fq="@firebase/firestore",jq="@firebase/vertexai-preview",Vq="@firebase/firestore-compat",Uq="firebase",Bq="10.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb="[DEFAULT]",$q={[ab]:"fire-core",[gq]:"fire-core-compat",[vq]:"fire-analytics",[yq]:"fire-analytics-compat",[wq]:"fire-app-check",[_q]:"fire-app-check-compat",[Eq]:"fire-auth",[bq]:"fire-auth-compat",[Tq]:"fire-rtdb",[Sq]:"fire-rtdb-compat",[xq]:"fire-fn",[Iq]:"fire-fn-compat",[Rq]:"fire-iid",[Cq]:"fire-iid-compat",[Aq]:"fire-fcm",[Pq]:"fire-fcm-compat",[kq]:"fire-perf",[Oq]:"fire-perf-compat",[Nq]:"fire-rc",[Dq]:"fire-rc-compat",[Lq]:"fire-gcs",[Mq]:"fire-gcs-compat",[Fq]:"fire-fst",[Vq]:"fire-fst-compat",[jq]:"fire-vertex","fire-js":"fire-js",[Uq]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og=new Map,zq=new Map,ub=new Map;function ZC(t,e){try{t.container.addComponent(e)}catch(n){fo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function pa(t){const e=t.name;if(ub.has(e))return fo.debug(`There were multiple attempts to register component ${e}.`),!1;ub.set(e,t);for(const n of og.values())ZC(n,t);for(const n of zq.values())ZC(n,t);return!0}function uh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hq={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},la=new lh("app","Firebase",Hq);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qq{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw la.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=Bq;function r3(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:lb,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw la.create("bad-app-name",{appName:String(i)});if(n||(n=YL()),!n)throw la.create("no-options");const s=og.get(i);if(s){if(sg(n,s.options)&&sg(r,s.config))return s;throw la.create("duplicate-app",{appName:i})}const o=new JH(i);for(const l of ub.values())o.addComponent(l);const a=new qq(n,r,o);return og.set(i,a),a}function my(t=lb){const e=og.get(t);if(!e&&t===lb&&YL())return r3();if(!e)throw la.create("no-app",{appName:t});return e}function _i(t,e,n){var r;let i=(r=$q[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fo.warn(a.join(" "));return}pa(new co(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wq="firebase-heartbeat-database",Kq=1,Ld="firebase-heartbeat-store";let b0=null;function i3(){return b0||(b0=fq(Wq,Kq,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ld)}catch(n){console.warn(n)}}}}).catch(t=>{throw la.create("idb-open",{originalErrorMessage:t.message})})),b0}async function Gq(t){try{const n=(await i3()).transaction(Ld),r=await n.objectStore(Ld).get(s3(t));return await n.done,r}catch(e){if(e instanceof As)fo.warn(e.message);else{const n=la.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fo.warn(n.message)}}}async function e2(t,e){try{const r=(await i3()).transaction(Ld,"readwrite");await r.objectStore(Ld).put(e,s3(t)),await r.done}catch(n){if(n instanceof As)fo.warn(n.message);else{const r=la.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fo.warn(r.message)}}}function s3(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qq=1024,Yq=30*24*60*60*1e3;class Xq{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Zq(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=t2();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Yq}),this._storage.overwrite(this._heartbeatsCache))}catch(r){fo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=t2(),{heartbeatsToSend:r,unsentEntries:i}=Jq(this._heartbeatsCache.heartbeats),s=ng(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return fo.warn(n),""}}}function t2(){return new Date().toISOString().substring(0,10)}function Jq(t,e=Qq){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),n2(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),n2(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Zq{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MH()?FH().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Gq(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return e2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return e2(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function n2(t){return ng(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eW(t){pa(new co("platform-logger",e=>new pq(e),"PRIVATE")),pa(new co("heartbeat",e=>new Xq(e),"PRIVATE")),_i(ab,JC,t),_i(ab,JC,"esm2017"),_i("fire-js","")}eW("");function ES(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function o3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tW=o3,a3=new lh("auth","Firebase",o3());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag=new py("@firebase/auth");function nW(t,...e){ag.logLevel<=dt.WARN&&ag.warn(`Auth (${Pa}): ${t}`,...e)}function lm(t,...e){ag.logLevel<=dt.ERROR&&ag.error(`Auth (${Pa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(t,...e){throw TS(t,...e)}function Ki(t,...e){return TS(t,...e)}function bS(t,e,n){const r=Object.assign(Object.assign({},tW()),{[e]:n});return new lh("auth","Firebase",r).create(e,{appName:t.name})}function to(t){return bS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rW(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ti(t,"argument-error"),bS(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function TS(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return a3.create(t,...e)}function Ge(t,e,...n){if(!t)throw TS(e,...n)}function Qs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw lm(e),new Error(e)}function ho(t,e){t||Qs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function iW(){return r2()==="http:"||r2()==="https:"}function r2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iW()||NH()||"connection"in navigator)?navigator.onLine:!0}function oW(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n){this.shortDelay=e,this.longDelay=n,ho(n>e,"Short delay should be less than long delay!"),this.isMobile=_S()||JL()}get(){return sW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t,e){ho(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aW={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lW=new ch(3e4,6e4);function ka(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Eo(t,e,n,r,i={}){return u3(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Lc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),l3.fetch()(c3(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function u3(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},aW),e);try{const i=new cW(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw kp(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw kp(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw kp(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw kp(t,"user-disabled",o);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw bS(t,f,u);Ti(t,f)}}catch(i){if(i instanceof As)throw i;Ti(t,"network-request-failed",{message:String(i)})}}async function fh(t,e,n,r,i={}){const s=await Eo(t,e,n,r,i);return"mfaPendingCredential"in s&&Ti(t,"multi-factor-auth-required",{_serverResponse:s}),s}function c3(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?SS(t.config,i):`${t.config.apiScheme}://${i}`}function uW(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cW{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ki(this.auth,"network-request-failed")),lW.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ki(t,e,r);return i.customData._tokenResponse=n,i}function i2(t){return t!==void 0&&t.enterprise!==void 0}class fW{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return uW(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function dW(t,e){return Eo(t,"GET","/v2/recaptchaConfig",ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hW(t,e){return Eo(t,"POST","/v1/accounts:delete",e)}async function f3(t,e){return Eo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pW(t,e=!1){const n=Lt(t),r=await n.getIdToken(e),i=xS(r);Ge(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ed(T0(i.auth_time)),issuedAtTime:ed(T0(i.iat)),expirationTime:ed(T0(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function T0(t){return Number(t)*1e3}function xS(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return lm("JWT malformed, contained fewer than 3 sections"),null;try{const i=rg(n);return i?JSON.parse(i):(lm("Failed to decode base64 JWT payload"),null)}catch(i){return lm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function s2(t){const e=xS(t);return Ge(e,"internal-error"),Ge(typeof e.exp<"u","internal-error"),Ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof As&&mW(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function mW({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gW{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ed(this.lastLoginAt),this.creationTime=ed(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lg(t){var e;const n=t.auth,r=await t.getIdToken(),i=await vc(t,f3(n,{idToken:r}));Ge(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?d3(s.providerUserInfo):[],a=vW(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),f=l?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new fb(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function yW(t){const e=Lt(t);await lg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vW(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function d3(t){return t.map(e=>{var{providerId:n}=e,r=ES(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _W(t,e){const n=await u3(t,{},async()=>{const r=Lc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=c3(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",l3.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function wW(t,e){return Eo(t,"POST","/v2/accounts:revokeToken",ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ge(e.idToken,"internal-error"),Ge(typeof e.idToken<"u","internal-error"),Ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):s2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ge(e.length!==0,"internal-error");const n=s2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await _W(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ec;return r&&(Ge(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ge(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ge(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ec,this.toJSON())}_performRefresh(){return Qs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(t,e){Ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ys{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ES(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gW(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new fb(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await vc(this,this.stsTokenManager.getToken(this.auth,e));return Ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return pW(this,e)}reload(){return yW(this)}_assign(e){this!==e&&(Ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ys(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await lg(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zi(this.auth.app))return Promise.reject(to(this.auth));const e=await this.getIdToken();return await vc(this,hW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(a=n.tenantId)!==null&&a!==void 0?a:void 0,I=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,R=(u=n.createdAt)!==null&&u!==void 0?u:void 0,w=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:v,emailVerified:C,isAnonymous:k,providerData:B,stsTokenManager:D}=n;Ge(v&&D,e,"internal-error");const T=ec.fromJSON(this.name,D);Ge(typeof v=="string",e,"internal-error"),Mo(p,e.name),Mo(y,e.name),Ge(typeof C=="boolean",e,"internal-error"),Ge(typeof k=="boolean",e,"internal-error"),Mo(_,e.name),Mo(E,e.name),Mo(S,e.name),Mo(I,e.name),Mo(R,e.name),Mo(w,e.name);const N=new Ys({uid:v,auth:e,email:y,emailVerified:C,displayName:p,isAnonymous:k,photoURL:E,phoneNumber:_,tenantId:S,stsTokenManager:T,createdAt:R,lastLoginAt:w});return B&&Array.isArray(B)&&(N.providerData=B.map(L=>Object.assign({},L))),I&&(N._redirectEventId=I),N}static async _fromIdTokenResponse(e,n,r=!1){const i=new ec;i.updateFromServerResponse(n);const s=new Ys({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await lg(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ge(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?d3(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new ec;a.updateFromIdToken(r);const l=new Ys({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new fb(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=new Map;function Xs(t){ho(t instanceof Function,"Expected a class definition");let e=o2.get(t);return e?(ho(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,o2.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}h3.type="NONE";const a2=h3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(t,e,n){return`firebase:${t}:${e}:${n}`}class tc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=um(this.userKey,i.apiKey,s),this.fullPersistenceKey=um("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ys._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new tc(Xs(a2),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Xs(a2);const o=um(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const f=await u._get(o);if(f){const p=Ys._fromJSON(e,f);u!==s&&(a=p),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new tc(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new tc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(y3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(p3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_3(e))return"Blackberry";if(w3(e))return"Webos";if(m3(e))return"Safari";if((e.includes("chrome/")||g3(e))&&!e.includes("edge/"))return"Chrome";if(v3(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function p3(t=gr()){return/firefox\//i.test(t)}function m3(t=gr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function g3(t=gr()){return/crios\//i.test(t)}function y3(t=gr()){return/iemobile/i.test(t)}function v3(t=gr()){return/android/i.test(t)}function _3(t=gr()){return/blackberry/i.test(t)}function w3(t=gr()){return/webos/i.test(t)}function IS(t=gr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function EW(t=gr()){var e;return IS(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bW(){return DH()&&document.documentMode===10}function E3(t=gr()){return IS(t)||v3(t)||w3(t)||_3(t)||/windows phone/i.test(t)||y3(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(t,e=[]){let n;switch(t){case"Browser":n=l2(gr());break;case"Worker":n=`${l2(gr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Pa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TW{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SW(t,e={}){return Eo(t,"GET","/v2/passwordPolicy",ka(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xW=6;class IW{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:xW,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RW{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new u2(this),this.idTokenSubscription=new u2(this),this.beforeStateQueue=new TW(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=a3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xs(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await tc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await f3(this,{idToken:e}),r=await Ys._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(zi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await lg(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oW()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zi(this.app))return Promise.reject(to(this));const n=e?Lt(e):null;return n&&Ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zi(this.app)?Promise.reject(to(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zi(this.app)?Promise.reject(to(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SW(this),n=new IW(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new lh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await wW(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xs(e)||this._popupRedirectResolver;Ge(n,this,"argument-error"),this.redirectPersistenceManager=await tc.create(this,[Xs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ge(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=b3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&nW(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Oa(t){return Lt(t)}class u2{constructor(e){this.auth=e,this.observer=null,this.addObserver=HH(n=>this.observer=n)}get next(){return Ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gy={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CW(t){gy=t}function T3(t){return gy.loadJS(t)}function AW(){return gy.recaptchaEnterpriseScript}function PW(){return gy.gapiScript}function kW(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const OW="recaptcha-enterprise",NW="NO_RECAPTCHA";class DW{constructor(e){this.type=OW,this.auth=Oa(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{dW(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new fW(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;i2(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(NW)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&i2(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=AW();l.length!==0&&(l+=a),T3(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function c2(t,e,n,r=!1){const i=new DW(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function db(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await c2(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await c2(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LW(t,e){const n=uh(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(sg(s,e??{}))return i;Ti(i,"already-initialized")}return n.initialize({options:e})}function MW(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function FW(t,e,n){const r=Oa(t);Ge(r._canInitEmulator,r,"emulator-config-failed"),Ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=S3(e),{host:o,port:a}=jW(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),VW()}function S3(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function jW(t){const e=S3(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:f2(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:f2(o)}}}function f2(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function VW(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qs("not implemented")}_getIdTokenResponse(e){return Qs("not implemented")}_linkToIdToken(e,n){return Qs("not implemented")}_getReauthenticationResolver(e){return Qs("not implemented")}}async function UW(t,e){return Eo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BW(t,e){return fh(t,"POST","/v1/accounts:signInWithPassword",ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $W(t,e){return fh(t,"POST","/v1/accounts:signInWithEmailLink",ka(t,e))}async function zW(t,e){return fh(t,"POST","/v1/accounts:signInWithEmailLink",ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md extends RS{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Md(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Md(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return db(e,n,"signInWithPassword",BW);case"emailLink":return $W(e,{email:this._email,oobCode:this._password});default:Ti(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return db(e,r,"signUpPassword",UW);case"emailLink":return zW(e,{idToken:n,email:this._email,oobCode:this._password});default:Ti(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nc(t,e){return fh(t,"POST","/v1/accounts:signInWithIdp",ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HW="http://localhost";class Rl extends RS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Rl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ti("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=ES(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Rl(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return nc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,nc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,nc(e,n)}buildRequest(){const e={requestUri:HW,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Lc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qW(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WW(t){const e=Lf(Mf(t)).link,n=e?Lf(Mf(e)).deep_link_id:null,r=Lf(Mf(t)).deep_link_id;return(r?Lf(Mf(r)).link:null)||r||n||e||t}class CS{constructor(e){var n,r,i,s,o,a;const l=Lf(Mf(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,f=(r=l.oobCode)!==null&&r!==void 0?r:null,p=qW((i=l.mode)!==null&&i!==void 0?i:null);Ge(u&&f&&p,"argument-error"),this.apiKey=u,this.operation=p,this.code=f,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=WW(e);try{return new CS(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(){this.providerId=Mc.PROVIDER_ID}static credential(e,n){return Md._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=CS.parseLink(n);return Ge(r,"argument-error"),Md._fromEmailAndCode(e,r.code,r.tenantId)}}Mc.PROVIDER_ID="password";Mc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh extends AS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo extends dh{constructor(){super("facebook.com")}static credential(e){return Rl._fromParams({providerId:zo.PROVIDER_ID,signInMethod:zo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zo.credentialFromTaggedObject(e)}static credentialFromError(e){return zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zo.credential(e.oauthAccessToken)}catch{return null}}}zo.FACEBOOK_SIGN_IN_METHOD="facebook.com";zo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends dh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Rl._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Vi.credential(n,r)}catch{return null}}}Vi.GOOGLE_SIGN_IN_METHOD="google.com";Vi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho extends dh{constructor(){super("github.com")}static credential(e){return Rl._fromParams({providerId:Ho.PROVIDER_ID,signInMethod:Ho.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ho.credentialFromTaggedObject(e)}static credentialFromError(e){return Ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ho.credential(e.oauthAccessToken)}catch{return null}}}Ho.GITHUB_SIGN_IN_METHOD="github.com";Ho.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo extends dh{constructor(){super("twitter.com")}static credential(e,n){return Rl._fromParams({providerId:qo.PROVIDER_ID,signInMethod:qo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return qo.credentialFromTaggedObject(e)}static credentialFromError(e){return qo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return qo.credential(n,r)}catch{return null}}}qo.TWITTER_SIGN_IN_METHOD="twitter.com";qo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KW(t,e){return fh(t,"POST","/v1/accounts:signUp",ka(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ys._fromIdTokenResponse(e,r,i),o=d2(r);return new Cl({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=d2(r);return new Cl({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function d2(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug extends As{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ug.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ug(e,n,r,i)}}function x3(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ug._fromErrorAndOperation(t,s,e,r):s})}async function GW(t,e,n=!1){const r=await vc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Cl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QW(t,e,n=!1){const{auth:r}=t;if(zi(r.app))return Promise.reject(to(r));const i="reauthenticate";try{const s=await vc(t,x3(r,i,e,t),n);Ge(s.idToken,r,"internal-error");const o=xS(s.idToken);Ge(o,r,"internal-error");const{sub:a}=o;return Ge(t.uid===a,r,"user-mismatch"),Cl._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ti(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I3(t,e,n=!1){if(zi(t.app))return Promise.reject(to(t));const r="signIn",i=await x3(t,r,e),s=await Cl._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function YW(t,e){return I3(Oa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R3(t){const e=Oa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XW(t,e,n){if(zi(t.app))return Promise.reject(to(t));const r=Oa(t),o=await db(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",KW).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&R3(t),l}),a=await Cl._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function JW(t,e,n){return zi(t.app)?Promise.reject(to(t)):YW(Lt(t),Mc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&R3(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZW(t,e){return Eo(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eK(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Lt(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await vc(r,ZW(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tK(t,e){return Lt(t).setPersistence(e)}function nK(t,e,n,r){return Lt(t).onIdTokenChanged(e,n,r)}function rK(t,e,n){return Lt(t).beforeAuthStateChanged(e,n)}function iK(t,e,n,r){return Lt(t).onAuthStateChanged(e,n,r)}function sK(t){return Lt(t).signOut()}const cg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(cg,"1"),this.storage.removeItem(cg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oK=1e3,aK=10;class A3 extends C3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=E3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);bW()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,aK):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},oK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}A3.type="LOCAL";const P3=A3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3 extends C3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}k3.type="SESSION";const O3=k3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lK(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new yy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await lK(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uK{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=PS("",20);i.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const y=p;if(y.data.eventId===u)switch(y.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(y.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(){return window}function cK(t){Ss().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(){return typeof Ss().WorkerGlobalScope<"u"&&typeof Ss().importScripts=="function"}async function fK(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dK(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function hK(){return N3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3="firebaseLocalStorageDb",pK=1,fg="firebaseLocalStorage",L3="fbase_key";class hh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vy(t,e){return t.transaction([fg],e?"readwrite":"readonly").objectStore(fg)}function mK(){const t=indexedDB.deleteDatabase(D3);return new hh(t).toPromise()}function hb(){const t=indexedDB.open(D3,pK);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(fg,{keyPath:L3})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(fg)?e(r):(r.close(),await mK(),e(await hb()))})})}async function h2(t,e,n){const r=vy(t,!0).put({[L3]:e,value:n});return new hh(r).toPromise()}async function gK(t,e){const n=vy(t,!1).get(e),r=await new hh(n).toPromise();return r===void 0?null:r.value}function p2(t,e){const n=vy(t,!0).delete(e);return new hh(n).toPromise()}const yK=800,vK=3;class M3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hb(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>vK)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return N3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yy._getInstance(hK()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await fK(),!this.activeServiceWorker)return;this.sender=new uK(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dK()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hb();return await h2(e,cg,"1"),await p2(e,cg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>h2(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>gK(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>p2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=vy(i,!1).getAll();return new hh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}M3.type="LOCAL";const _K=M3;new ch(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F3(t,e){return e?Xs(e):(Ge(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS extends RS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return nc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return nc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function wK(t){return I3(t.auth,new kS(t),t.bypassAuthState)}function EK(t){const{auth:e,user:n}=t;return Ge(n,e,"internal-error"),QW(n,new kS(t),t.bypassAuthState)}async function bK(t){const{auth:e,user:n}=t;return Ge(n,e,"internal-error"),GW(n,new kS(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wK;case"linkViaPopup":case"linkViaRedirect":return bK;case"reauthViaPopup":case"reauthViaRedirect":return EK;default:Ti(this.auth,"internal-error")}}resolve(e){ho(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ho(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TK=new ch(2e3,1e4);async function SK(t,e,n){if(zi(t.app))return Promise.reject(Ki(t,"operation-not-supported-in-this-environment"));const r=Oa(t);rW(t,e,AS);const i=F3(r,n);return new ll(r,"signInViaPopup",e,i).executeNotNull()}class ll extends j3{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ll.currentPopupAction&&ll.currentPopupAction.cancel(),ll.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ge(e,this.auth,"internal-error"),e}async onExecution(){ho(this.filter.length===1,"Popup operations only handle one event");const e=PS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ki(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ki(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ll.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ki(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,TK.get())};e()}}ll.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xK="pendingRedirect",cm=new Map;class IK extends j3{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=cm.get(this.auth._key());if(!e){try{const r=await RK(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}cm.set(this.auth._key(),e)}return this.bypassAuthState||cm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RK(t,e){const n=PK(e),r=AK(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function CK(t,e){cm.set(t._key(),e)}function AK(t){return Xs(t._redirectPersistence)}function PK(t){return um(xK,t.config.apiKey,t.name)}async function kK(t,e,n=!1){if(zi(t.app))return Promise.reject(to(t));const r=Oa(t),i=F3(r,e),o=await new IK(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OK=10*60*1e3;class NK{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DK(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!V3(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ki(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OK&&this.cachedEventUids.clear(),this.cachedEventUids.has(m2(e))}saveEventToCache(e){this.cachedEventUids.add(m2(e)),this.lastProcessedEventTime=Date.now()}}function m2(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function V3({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function DK(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return V3(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LK(t,e={}){return Eo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FK=/^https?/;async function jK(t){if(t.config.emulator)return;const{authorizedDomains:e}=await LK(t);for(const n of e)try{if(VK(n))return}catch{}Ti(t,"unauthorized-domain")}function VK(t){const e=cb(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!FK.test(n))return!1;if(MK.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UK=new ch(3e4,6e4);function g2(){const t=Ss().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function BK(t){return new Promise((e,n)=>{var r,i,s;function o(){g2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{g2(),n(Ki(t,"network-request-failed"))},timeout:UK.get()})}if(!((i=(r=Ss().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ss().gapi)===null||s===void 0)&&s.load)o();else{const a=kW("iframefcb");return Ss()[a]=()=>{gapi.load?o():n(Ki(t,"network-request-failed"))},T3(`${PW()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw fm=null,e})}let fm=null;function $K(t){return fm=fm||BK(t),fm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zK=new ch(5e3,15e3),HK="__/auth/iframe",qK="emulator/auth/iframe",WK={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KK=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GK(t){const e=t.config;Ge(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?SS(e,qK):`https://${t.config.authDomain}/${HK}`,r={apiKey:e.apiKey,appName:t.name,v:Pa},i=KK.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Lc(r).slice(1)}`}async function QK(t){const e=await $K(t),n=Ss().gapi;return Ge(n,t,"internal-error"),e.open({where:document.body,url:GK(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WK,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Ki(t,"network-request-failed"),a=Ss().setTimeout(()=>{s(o)},zK.get());function l(){Ss().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YK={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XK=500,JK=600,ZK="_blank",eG="http://localhost";class y2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tG(t,e,n,r=XK,i=JK){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},YK),{width:r.toString(),height:i.toString(),top:s,left:o}),u=gr().toLowerCase();n&&(a=g3(u)?ZK:n),p3(u)&&(e=e||eG,l.scrollbars="yes");const f=Object.entries(l).reduce((y,[_,E])=>`${y}${_}=${E},`,"");if(EW(u)&&a!=="_self")return nG(e||"",a),new y2(null);const p=window.open(e||"",a,f);Ge(p,t,"popup-blocked");try{p.focus()}catch{}return new y2(p)}function nG(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rG="__/auth/handler",iG="emulator/auth/handler",sG=encodeURIComponent("fac");async function v2(t,e,n,r,i,s){Ge(t.config.authDomain,t,"auth-domain-config-required"),Ge(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Pa,eventId:i};if(e instanceof AS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ib(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof dh){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const l=await t._getAppCheckToken(),u=l?`#${sG}=${encodeURIComponent(l)}`:"";return`${oG(t)}?${Lc(a).slice(1)}${u}`}function oG({config:t}){return t.emulator?SS(t,iG):`https://${t.authDomain}/${rG}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="webStorageSupport";class aG{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=O3,this._completeRedirectFn=kK,this._overrideRedirectResult=CK}async _openPopup(e,n,r,i){var s;ho((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await v2(e,n,r,cb(),i);return tG(e,o,PS())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await v2(e,n,r,cb(),i);return cK(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ho(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await QK(e),r=new NK(e);return n.register("authEvent",i=>(Ge(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(S0,{type:S0},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[S0];o!==void 0&&n(!!o),Ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=jK(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return E3()||m3()||IS()}}const lG=aG;var _2="@firebase/auth",w2="1.7.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uG{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cG(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fG(t){pa(new co("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ge(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:b3(t)},u=new RW(r,i,s,l);return MW(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),pa(new co("auth-internal",e=>{const n=Oa(e.getProvider("auth").getImmediate());return(r=>new uG(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_i(_2,w2,cG(t)),_i(_2,w2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dG=5*60,hG=XL("authIdTokenMaxAge")||dG;let E2=null;const pG=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>hG)return;const i=n==null?void 0:n.token;E2!==i&&(E2=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function mG(t=my()){const e=uh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=LW(t,{popupRedirectResolver:lG,persistence:[_K,P3,O3]}),r=XL("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=pG(s.toString());rK(n,o,()=>o(n.currentUser)),nK(n,a=>o(a))}}const i=QL("auth");return i&&FW(n,`http://${i}`),n}function gG(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}CW({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Ki("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",gG().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fG("Browser");function U3(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=U3(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Yo(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=U3(t))&&(r&&(r+=" "),r+=e);return r}const Fd=t=>typeof t=="number"&&!isNaN(t),gl=t=>typeof t=="string",Xr=t=>typeof t=="function",dm=t=>gl(t)||Xr(t)?t:null,pb=t=>O.isValidElement(t)||gl(t)||Xr(t)||Fd(t);function yG(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,n)})})}function _y(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:i=!0,collapseDuration:s=300}=t;return function(o){let{children:a,position:l,preventExitTransition:u,done:f,nodeRef:p,isIn:y,playToast:_}=o;const E=r?`${e}--${l}`:e,S=r?`${n}--${l}`:n,I=O.useRef(0);return O.useLayoutEffect(()=>{const R=p.current,w=E.split(" "),v=C=>{C.target===p.current&&(_(),R.removeEventListener("animationend",v),R.removeEventListener("animationcancel",v),I.current===0&&C.type!=="animationcancel"&&R.classList.remove(...w))};R.classList.add(...w),R.addEventListener("animationend",v),R.addEventListener("animationcancel",v)},[]),O.useEffect(()=>{const R=p.current,w=()=>{R.removeEventListener("animationend",w),i?yG(R,f,s):f()};y||(u?w():(I.current=1,R.className+=` ${S}`,R.addEventListener("animationend",w)))},[y]),Pe.createElement(Pe.Fragment,null,a)}}function b2(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const Tr=new Map;let jd=[];const mb=new Set,vG=t=>mb.forEach(e=>e(t)),B3=()=>Tr.size>0;function $3(t,e){var n;if(e)return!((n=Tr.get(e))==null||!n.isToastActive(t));let r=!1;return Tr.forEach(i=>{i.isToastActive(t)&&(r=!0)}),r}function z3(t,e){pb(t)&&(B3()||jd.push({content:t,options:e}),Tr.forEach(n=>{n.buildToast(t,e)}))}function T2(t,e){Tr.forEach(n=>{e!=null&&e!=null&&e.containerId?(e==null?void 0:e.containerId)===n.id&&n.toggle(t,e==null?void 0:e.id):n.toggle(t,e==null?void 0:e.id)})}function _G(t){const{subscribe:e,getSnapshot:n,setProps:r}=O.useRef(function(s){const o=s.containerId||1;return{subscribe(a){const l=function(f,p,y){let _=1,E=0,S=[],I=[],R=[],w=p;const v=new Map,C=new Set,k=()=>{R=Array.from(v.values()),C.forEach(T=>T())},B=T=>{I=T==null?[]:I.filter(N=>N!==T),k()},D=T=>{const{toastId:N,onOpen:L,updateId:V,children:j}=T.props,M=V==null;T.staleId&&v.delete(T.staleId),v.set(N,T),I=[...I,T.props.toastId].filter(le=>le!==T.staleId),k(),y(b2(T,M?"added":"updated")),M&&Xr(L)&&L(O.isValidElement(j)&&j.props)};return{id:f,props:w,observe:T=>(C.add(T),()=>C.delete(T)),toggle:(T,N)=>{v.forEach(L=>{N!=null&&N!==L.props.toastId||Xr(L.toggle)&&L.toggle(T)})},removeToast:B,toasts:v,clearQueue:()=>{E-=S.length,S=[]},buildToast:(T,N)=>{if(($=>{let{containerId:K,toastId:te,updateId:Ee}=$;const Te=K?K!==f:f!==1,W=v.has(te)&&Ee==null;return Te||W})(N))return;const{toastId:L,updateId:V,data:j,staleId:M,delay:le}=N,me=()=>{B(L)},pe=V==null;pe&&E++;const X={...w,style:w.toastStyle,key:_++,...Object.fromEntries(Object.entries(N).filter($=>{let[K,te]=$;return te!=null})),toastId:L,updateId:V,data:j,closeToast:me,isIn:!1,className:dm(N.className||w.toastClassName),bodyClassName:dm(N.bodyClassName||w.bodyClassName),progressClassName:dm(N.progressClassName||w.progressClassName),autoClose:!N.isLoading&&(G=N.autoClose,Y=w.autoClose,G===!1||Fd(G)&&G>0?G:Y),deleteToast(){const $=v.get(L),{onClose:K,children:te}=$.props;Xr(K)&&K(O.isValidElement(te)&&te.props),y(b2($,"removed")),v.delete(L),E--,E<0&&(E=0),S.length>0?D(S.shift()):k()}};var G,Y;X.closeButton=w.closeButton,N.closeButton===!1||pb(N.closeButton)?X.closeButton=N.closeButton:N.closeButton===!0&&(X.closeButton=!pb(w.closeButton)||w.closeButton);let ce=T;O.isValidElement(T)&&!gl(T.type)?ce=O.cloneElement(T,{closeToast:me,toastProps:X,data:j}):Xr(T)&&(ce=T({closeToast:me,toastProps:X,data:j}));const ee={content:ce,props:X,staleId:M};w.limit&&w.limit>0&&E>w.limit&&pe?S.push(ee):Fd(le)?setTimeout(()=>{D(ee)},le):D(ee)},setProps(T){w=T},setToggle:(T,N)=>{v.get(T).toggle=N},isToastActive:T=>I.some(N=>N===T),getSnapshot:()=>w.newestOnTop?R.reverse():R}}(o,s,vG);Tr.set(o,l);const u=l.observe(a);return jd.forEach(f=>z3(f.content,f.options)),jd=[],()=>{u(),Tr.delete(o)}},setProps(a){var l;(l=Tr.get(o))==null||l.setProps(a)},getSnapshot(){var a;return(a=Tr.get(o))==null?void 0:a.getSnapshot()}}}(t)).current;r(t);const i=O.useSyncExternalStore(e,n,n);return{getToastToRender:function(s){if(!i)return[];const o=new Map;return i.forEach(a=>{const{position:l}=a.props;o.has(l)||o.set(l,[]),o.get(l).push(a)}),Array.from(o,a=>s(a[0],a[1]))},isToastActive:$3,count:i==null?void 0:i.length}}function wG(t){const[e,n]=O.useState(!1),[r,i]=O.useState(!1),s=O.useRef(null),o=O.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:l,closeToast:u,onClick:f,closeOnClick:p}=t;var y,_;function E(){n(!0)}function S(){n(!1)}function I(v){const C=s.current;o.canDrag&&C&&(o.didMove=!0,e&&S(),o.delta=t.draggableDirection==="x"?v.clientX-o.start:v.clientY-o.start,o.start!==v.clientX&&(o.canCloseOnClick=!1),C.style.transform=`translate3d(${t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`},0)`,C.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function R(){document.removeEventListener("pointermove",I),document.removeEventListener("pointerup",R);const v=s.current;if(o.canDrag&&o.didMove&&v){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return i(!0),t.closeToast(),void t.collapseAll();v.style.transition="transform 0.2s, opacity 0.2s",v.style.removeProperty("transform"),v.style.removeProperty("opacity")}}(_=Tr.get((y={id:t.toastId,containerId:t.containerId,fn:n}).containerId||1))==null||_.setToggle(y.id,y.fn),O.useEffect(()=>{if(t.pauseOnFocusLoss)return document.hasFocus()||S(),window.addEventListener("focus",E),window.addEventListener("blur",S),()=>{window.removeEventListener("focus",E),window.removeEventListener("blur",S)}},[t.pauseOnFocusLoss]);const w={onPointerDown:function(v){if(t.draggable===!0||t.draggable===v.pointerType){o.didMove=!1,document.addEventListener("pointermove",I),document.addEventListener("pointerup",R);const C=s.current;o.canCloseOnClick=!0,o.canDrag=!0,C.style.transition="none",t.draggableDirection==="x"?(o.start=v.clientX,o.removalDistance=C.offsetWidth*(t.draggablePercent/100)):(o.start=v.clientY,o.removalDistance=C.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent)/100)}},onPointerUp:function(v){const{top:C,bottom:k,left:B,right:D}=s.current.getBoundingClientRect();v.nativeEvent.type!=="touchend"&&t.pauseOnHover&&v.clientX>=B&&v.clientX<=D&&v.clientY>=C&&v.clientY<=k?S():E()}};return a&&l&&(w.onMouseEnter=S,t.stacked||(w.onMouseLeave=E)),p&&(w.onClick=v=>{f&&f(v),o.canCloseOnClick&&u()}),{playToast:E,pauseToast:S,isRunning:e,preventExitTransition:r,toastRef:s,eventHandlers:w}}function EG(t){let{delay:e,isRunning:n,closeToast:r,type:i="default",hide:s,className:o,style:a,controlledProgress:l,progress:u,rtl:f,isIn:p,theme:y}=t;const _=s||l&&u===0,E={...a,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused"};l&&(E.transform=`scaleX(${u})`);const S=Yo("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${y}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":f}),I=Xr(o)?o({rtl:f,type:i,defaultClassName:S}):Yo(S,o),R={[l&&u>=1?"onTransitionEnd":"onAnimationEnd"]:l&&u<1?null:()=>{p&&r()}};return Pe.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":_},Pe.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${y} Toastify__progress-bar--${i}`}),Pe.createElement("div",{role:"progressbar","aria-hidden":_?"true":"false","aria-label":"notification timer",className:I,style:E,...R}))}let bG=1;const H3=()=>""+bG++;function TG(t){return t&&(gl(t.toastId)||Fd(t.toastId))?t.toastId:H3()}function td(t,e){return z3(t,e),e.toastId}function dg(t,e){return{...e,type:e&&e.type||t,toastId:TG(e)}}function Op(t){return(e,n)=>td(e,dg(t,n))}function Mt(t,e){return td(t,dg("default",e))}Mt.loading=(t,e)=>td(t,dg("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),Mt.promise=function(t,e,n){let r,{pending:i,error:s,success:o}=e;i&&(r=gl(i)?Mt.loading(i,n):Mt.loading(i.render,{...n,...i}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(f,p,y)=>{if(p==null)return void Mt.dismiss(r);const _={type:f,...a,...n,data:y},E=gl(p)?{render:p}:p;return r?Mt.update(r,{..._,...E}):Mt(E.render,{..._,...E}),y},u=Xr(t)?t():t;return u.then(f=>l("success",o,f)).catch(f=>l("error",s,f)),u},Mt.success=Op("success"),Mt.info=Op("info"),Mt.error=Op("error"),Mt.warning=Op("warning"),Mt.warn=Mt.warning,Mt.dark=(t,e)=>td(t,dg("default",{theme:"dark",...e})),Mt.dismiss=function(t){(function(e){var n;if(B3()){if(e==null||gl(n=e)||Fd(n))Tr.forEach(r=>{r.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const r=Tr.get(e.containerId);r?r.removeToast(e.id):Tr.forEach(i=>{i.removeToast(e.id)})}}else jd=jd.filter(r=>e!=null&&r.options.toastId!==e)})(t)},Mt.clearWaitingQueue=function(t){t===void 0&&(t={}),Tr.forEach(e=>{!e.props.limit||t.containerId&&e.id!==t.containerId||e.clearQueue()})},Mt.isActive=$3,Mt.update=function(t,e){e===void 0&&(e={});const n=((r,i)=>{var s;let{containerId:o}=i;return(s=Tr.get(o||1))==null?void 0:s.toasts.get(r)})(t,e);if(n){const{props:r,content:i}=n,s={delay:100,...r,...e,toastId:e.toastId||t,updateId:H3()};s.toastId!==t&&(s.staleId=t);const o=s.render||i;delete s.render,td(o,s)}},Mt.done=t=>{Mt.update(t,{progress:1})},Mt.onChange=function(t){return mb.add(t),()=>{mb.delete(t)}},Mt.play=t=>T2(!0,t),Mt.pause=t=>T2(!1,t);const SG=typeof window<"u"?O.useLayoutEffect:O.useEffect,Np=t=>{let{theme:e,type:n,isLoading:r,...i}=t;return Pe.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...i})},x0={info:function(t){return Pe.createElement(Np,{...t},Pe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return Pe.createElement(Np,{...t},Pe.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return Pe.createElement(Np,{...t},Pe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return Pe.createElement(Np,{...t},Pe.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return Pe.createElement("div",{className:"Toastify__spinner"})}},xG=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:i,playToast:s}=wG(t),{closeButton:o,children:a,autoClose:l,onClick:u,type:f,hideProgressBar:p,closeToast:y,transition:_,position:E,className:S,style:I,bodyClassName:R,bodyStyle:w,progressClassName:v,progressStyle:C,updateId:k,role:B,progress:D,rtl:T,toastId:N,deleteToast:L,isIn:V,isLoading:j,closeOnClick:M,theme:le}=t,me=Yo("Toastify__toast",`Toastify__toast-theme--${le}`,`Toastify__toast--${f}`,{"Toastify__toast--rtl":T},{"Toastify__toast--close-on-click":M}),pe=Xr(S)?S({rtl:T,position:E,type:f,defaultClassName:me}):Yo(me,S),X=function(ee){let{theme:$,type:K,isLoading:te,icon:Ee}=ee,Te=null;const W={theme:$,type:K};return Ee===!1||(Xr(Ee)?Te=Ee({...W,isLoading:te}):O.isValidElement(Ee)?Te=O.cloneElement(Ee,W):te?Te=x0.spinner():(ue=>ue in x0)(K)&&(Te=x0[K](W))),Te}(t),G=!!D||!l,Y={closeToast:y,type:f,theme:le};let ce=null;return o===!1||(ce=Xr(o)?o(Y):O.isValidElement(o)?O.cloneElement(o,Y):function(ee){let{closeToast:$,theme:K,ariaLabel:te="close"}=ee;return Pe.createElement("button",{className:`Toastify__close-button Toastify__close-button--${K}`,type:"button",onClick:Ee=>{Ee.stopPropagation(),$(Ee)},"aria-label":te},Pe.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Pe.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(Y)),Pe.createElement(_,{isIn:V,done:L,position:E,preventExitTransition:n,nodeRef:r,playToast:s},Pe.createElement("div",{id:N,onClick:u,"data-in":V,className:pe,...i,style:I,ref:r},Pe.createElement("div",{...V&&{role:B},className:Xr(R)?R({type:f}):Yo("Toastify__toast-body",R),style:w},X!=null&&Pe.createElement("div",{className:Yo("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!j})},X),Pe.createElement("div",null,a)),ce,Pe.createElement(EG,{...k&&!G?{key:`pb-${k}`}:{},rtl:T,theme:le,delay:l,isRunning:e,isIn:V,closeToast:y,hide:p,type:f,style:C,className:v,controlledProgress:G,progress:D||0})))},wy=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},IG=_y(wy("bounce",!0)),RG=_y(wy("slide",!0));_y(wy("zoom"));_y(wy("flip"));const CG={position:"top-right",transition:IG,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function AG(t){let e={...CG,...t};const n=t.stacked,[r,i]=O.useState(!0),s=O.useRef(null),{getToastToRender:o,isToastActive:a,count:l}=_G(e),{className:u,style:f,rtl:p,containerId:y}=e;function _(S){const I=Yo("Toastify__toast-container",`Toastify__toast-container--${S}`,{"Toastify__toast-container--rtl":p});return Xr(u)?u({position:S,rtl:p,defaultClassName:I}):Yo(I,dm(u))}function E(){n&&(i(!0),Mt.play())}return SG(()=>{if(n){var S;const I=s.current.querySelectorAll('[data-in="true"]'),R=12,w=(S=e.position)==null?void 0:S.includes("top");let v=0,C=0;Array.from(I).reverse().forEach((k,B)=>{const D=k;D.classList.add("Toastify__toast--stacked"),B>0&&(D.dataset.collapsed=`${r}`),D.dataset.pos||(D.dataset.pos=w?"top":"bot");const T=v*(r?.2:1)+(r?0:R*B);D.style.setProperty("--y",`${w?T:-1*T}px`),D.style.setProperty("--g",`${R}`),D.style.setProperty("--s",""+(1-(r?C:0))),v+=D.offsetHeight,C+=.025})}},[r,l,n]),Pe.createElement("div",{ref:s,className:"Toastify",id:y,onMouseEnter:()=>{n&&(i(!1),Mt.pause())},onMouseLeave:E},o((S,I)=>{const R=I.length?{...f}:{...f,pointerEvents:"none"};return Pe.createElement("div",{className:_(S),style:R,key:`container-${S}`},I.map(w=>{let{content:v,props:C}=w;return Pe.createElement(xG,{...C,stacked:n,collapseAll:E,isIn:a(C.toastId,C.containerId),style:C.style,key:`toast-${C.key}`},v)}))}))}var PG="firebase",kG="10.13.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_i(PG,kG,"app");var S2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yl,q3;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,T){function N(){}N.prototype=T.prototype,D.D=T.prototype,D.prototype=new N,D.prototype.constructor=D,D.C=function(L,V,j){for(var M=Array(arguments.length-2),le=2;le<arguments.length;le++)M[le-2]=arguments[le];return T.prototype[V].apply(L,M)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,T,N){N||(N=0);var L=Array(16);if(typeof T=="string")for(var V=0;16>V;++V)L[V]=T.charCodeAt(N++)|T.charCodeAt(N++)<<8|T.charCodeAt(N++)<<16|T.charCodeAt(N++)<<24;else for(V=0;16>V;++V)L[V]=T[N++]|T[N++]<<8|T[N++]<<16|T[N++]<<24;T=D.g[0],N=D.g[1],V=D.g[2];var j=D.g[3],M=T+(j^N&(V^j))+L[0]+3614090360&4294967295;T=N+(M<<7&4294967295|M>>>25),M=j+(V^T&(N^V))+L[1]+3905402710&4294967295,j=T+(M<<12&4294967295|M>>>20),M=V+(N^j&(T^N))+L[2]+606105819&4294967295,V=j+(M<<17&4294967295|M>>>15),M=N+(T^V&(j^T))+L[3]+3250441966&4294967295,N=V+(M<<22&4294967295|M>>>10),M=T+(j^N&(V^j))+L[4]+4118548399&4294967295,T=N+(M<<7&4294967295|M>>>25),M=j+(V^T&(N^V))+L[5]+1200080426&4294967295,j=T+(M<<12&4294967295|M>>>20),M=V+(N^j&(T^N))+L[6]+2821735955&4294967295,V=j+(M<<17&4294967295|M>>>15),M=N+(T^V&(j^T))+L[7]+4249261313&4294967295,N=V+(M<<22&4294967295|M>>>10),M=T+(j^N&(V^j))+L[8]+1770035416&4294967295,T=N+(M<<7&4294967295|M>>>25),M=j+(V^T&(N^V))+L[9]+2336552879&4294967295,j=T+(M<<12&4294967295|M>>>20),M=V+(N^j&(T^N))+L[10]+4294925233&4294967295,V=j+(M<<17&4294967295|M>>>15),M=N+(T^V&(j^T))+L[11]+2304563134&4294967295,N=V+(M<<22&4294967295|M>>>10),M=T+(j^N&(V^j))+L[12]+1804603682&4294967295,T=N+(M<<7&4294967295|M>>>25),M=j+(V^T&(N^V))+L[13]+4254626195&4294967295,j=T+(M<<12&4294967295|M>>>20),M=V+(N^j&(T^N))+L[14]+2792965006&4294967295,V=j+(M<<17&4294967295|M>>>15),M=N+(T^V&(j^T))+L[15]+1236535329&4294967295,N=V+(M<<22&4294967295|M>>>10),M=T+(V^j&(N^V))+L[1]+4129170786&4294967295,T=N+(M<<5&4294967295|M>>>27),M=j+(N^V&(T^N))+L[6]+3225465664&4294967295,j=T+(M<<9&4294967295|M>>>23),M=V+(T^N&(j^T))+L[11]+643717713&4294967295,V=j+(M<<14&4294967295|M>>>18),M=N+(j^T&(V^j))+L[0]+3921069994&4294967295,N=V+(M<<20&4294967295|M>>>12),M=T+(V^j&(N^V))+L[5]+3593408605&4294967295,T=N+(M<<5&4294967295|M>>>27),M=j+(N^V&(T^N))+L[10]+38016083&4294967295,j=T+(M<<9&4294967295|M>>>23),M=V+(T^N&(j^T))+L[15]+3634488961&4294967295,V=j+(M<<14&4294967295|M>>>18),M=N+(j^T&(V^j))+L[4]+3889429448&4294967295,N=V+(M<<20&4294967295|M>>>12),M=T+(V^j&(N^V))+L[9]+568446438&4294967295,T=N+(M<<5&4294967295|M>>>27),M=j+(N^V&(T^N))+L[14]+3275163606&4294967295,j=T+(M<<9&4294967295|M>>>23),M=V+(T^N&(j^T))+L[3]+4107603335&4294967295,V=j+(M<<14&4294967295|M>>>18),M=N+(j^T&(V^j))+L[8]+1163531501&4294967295,N=V+(M<<20&4294967295|M>>>12),M=T+(V^j&(N^V))+L[13]+2850285829&4294967295,T=N+(M<<5&4294967295|M>>>27),M=j+(N^V&(T^N))+L[2]+4243563512&4294967295,j=T+(M<<9&4294967295|M>>>23),M=V+(T^N&(j^T))+L[7]+1735328473&4294967295,V=j+(M<<14&4294967295|M>>>18),M=N+(j^T&(V^j))+L[12]+2368359562&4294967295,N=V+(M<<20&4294967295|M>>>12),M=T+(N^V^j)+L[5]+4294588738&4294967295,T=N+(M<<4&4294967295|M>>>28),M=j+(T^N^V)+L[8]+2272392833&4294967295,j=T+(M<<11&4294967295|M>>>21),M=V+(j^T^N)+L[11]+1839030562&4294967295,V=j+(M<<16&4294967295|M>>>16),M=N+(V^j^T)+L[14]+4259657740&4294967295,N=V+(M<<23&4294967295|M>>>9),M=T+(N^V^j)+L[1]+2763975236&4294967295,T=N+(M<<4&4294967295|M>>>28),M=j+(T^N^V)+L[4]+1272893353&4294967295,j=T+(M<<11&4294967295|M>>>21),M=V+(j^T^N)+L[7]+4139469664&4294967295,V=j+(M<<16&4294967295|M>>>16),M=N+(V^j^T)+L[10]+3200236656&4294967295,N=V+(M<<23&4294967295|M>>>9),M=T+(N^V^j)+L[13]+681279174&4294967295,T=N+(M<<4&4294967295|M>>>28),M=j+(T^N^V)+L[0]+3936430074&4294967295,j=T+(M<<11&4294967295|M>>>21),M=V+(j^T^N)+L[3]+3572445317&4294967295,V=j+(M<<16&4294967295|M>>>16),M=N+(V^j^T)+L[6]+76029189&4294967295,N=V+(M<<23&4294967295|M>>>9),M=T+(N^V^j)+L[9]+3654602809&4294967295,T=N+(M<<4&4294967295|M>>>28),M=j+(T^N^V)+L[12]+3873151461&4294967295,j=T+(M<<11&4294967295|M>>>21),M=V+(j^T^N)+L[15]+530742520&4294967295,V=j+(M<<16&4294967295|M>>>16),M=N+(V^j^T)+L[2]+3299628645&4294967295,N=V+(M<<23&4294967295|M>>>9),M=T+(V^(N|~j))+L[0]+4096336452&4294967295,T=N+(M<<6&4294967295|M>>>26),M=j+(N^(T|~V))+L[7]+1126891415&4294967295,j=T+(M<<10&4294967295|M>>>22),M=V+(T^(j|~N))+L[14]+2878612391&4294967295,V=j+(M<<15&4294967295|M>>>17),M=N+(j^(V|~T))+L[5]+4237533241&4294967295,N=V+(M<<21&4294967295|M>>>11),M=T+(V^(N|~j))+L[12]+1700485571&4294967295,T=N+(M<<6&4294967295|M>>>26),M=j+(N^(T|~V))+L[3]+2399980690&4294967295,j=T+(M<<10&4294967295|M>>>22),M=V+(T^(j|~N))+L[10]+4293915773&4294967295,V=j+(M<<15&4294967295|M>>>17),M=N+(j^(V|~T))+L[1]+2240044497&4294967295,N=V+(M<<21&4294967295|M>>>11),M=T+(V^(N|~j))+L[8]+1873313359&4294967295,T=N+(M<<6&4294967295|M>>>26),M=j+(N^(T|~V))+L[15]+4264355552&4294967295,j=T+(M<<10&4294967295|M>>>22),M=V+(T^(j|~N))+L[6]+2734768916&4294967295,V=j+(M<<15&4294967295|M>>>17),M=N+(j^(V|~T))+L[13]+1309151649&4294967295,N=V+(M<<21&4294967295|M>>>11),M=T+(V^(N|~j))+L[4]+4149444226&4294967295,T=N+(M<<6&4294967295|M>>>26),M=j+(N^(T|~V))+L[11]+3174756917&4294967295,j=T+(M<<10&4294967295|M>>>22),M=V+(T^(j|~N))+L[2]+718787259&4294967295,V=j+(M<<15&4294967295|M>>>17),M=N+(j^(V|~T))+L[9]+3951481745&4294967295,D.g[0]=D.g[0]+T&4294967295,D.g[1]=D.g[1]+(V+(M<<21&4294967295|M>>>11))&4294967295,D.g[2]=D.g[2]+V&4294967295,D.g[3]=D.g[3]+j&4294967295}r.prototype.u=function(D,T){T===void 0&&(T=D.length);for(var N=T-this.blockSize,L=this.B,V=this.h,j=0;j<T;){if(V==0)for(;j<=N;)i(this,D,j),j+=this.blockSize;if(typeof D=="string"){for(;j<T;)if(L[V++]=D.charCodeAt(j++),V==this.blockSize){i(this,L),V=0;break}}else for(;j<T;)if(L[V++]=D[j++],V==this.blockSize){i(this,L),V=0;break}}this.h=V,this.o+=T},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var T=1;T<D.length-8;++T)D[T]=0;var N=8*this.o;for(T=D.length-8;T<D.length;++T)D[T]=N&255,N/=256;for(this.u(D),D=Array(16),T=N=0;4>T;++T)for(var L=0;32>L;L+=8)D[N++]=this.g[T]>>>L&255;return D};function s(D,T){var N=a;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=T(D)}function o(D,T){this.h=T;for(var N=[],L=!0,V=D.length-1;0<=V;V--){var j=D[V]|0;L&&j==T||(N[V]=j,L=!1)}this.g=N}var a={};function l(D){return-128<=D&&128>D?s(D,function(T){return new o([T|0],0>T?-1:0)}):new o([D|0],0>D?-1:0)}function u(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return I(u(-D));for(var T=[],N=1,L=0;D>=N;L++)T[L]=D/N|0,N*=4294967296;return new o(T,0)}function f(D,T){if(D.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(D.charAt(0)=="-")return I(f(D.substring(1),T));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=u(Math.pow(T,8)),L=p,V=0;V<D.length;V+=8){var j=Math.min(8,D.length-V),M=parseInt(D.substring(V,V+j),T);8>j?(j=u(Math.pow(T,j)),L=L.j(j).add(u(M))):(L=L.j(N),L=L.add(u(M)))}return L}var p=l(0),y=l(1),_=l(16777216);t=o.prototype,t.m=function(){if(S(this))return-I(this).m();for(var D=0,T=1,N=0;N<this.g.length;N++){var L=this.i(N);D+=(0<=L?L:4294967296+L)*T,T*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(E(this))return"0";if(S(this))return"-"+I(this).toString(D);for(var T=u(Math.pow(D,6)),N=this,L="";;){var V=C(N,T).g;N=R(N,V.j(T));var j=((0<N.g.length?N.g[0]:N.h)>>>0).toString(D);if(N=V,E(N))return j+L;for(;6>j.length;)j="0"+j;L=j+L}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function E(D){if(D.h!=0)return!1;for(var T=0;T<D.g.length;T++)if(D.g[T]!=0)return!1;return!0}function S(D){return D.h==-1}t.l=function(D){return D=R(this,D),S(D)?-1:E(D)?0:1};function I(D){for(var T=D.g.length,N=[],L=0;L<T;L++)N[L]=~D.g[L];return new o(N,~D.h).add(y)}t.abs=function(){return S(this)?I(this):this},t.add=function(D){for(var T=Math.max(this.g.length,D.g.length),N=[],L=0,V=0;V<=T;V++){var j=L+(this.i(V)&65535)+(D.i(V)&65535),M=(j>>>16)+(this.i(V)>>>16)+(D.i(V)>>>16);L=M>>>16,j&=65535,M&=65535,N[V]=M<<16|j}return new o(N,N[N.length-1]&-2147483648?-1:0)};function R(D,T){return D.add(I(T))}t.j=function(D){if(E(this)||E(D))return p;if(S(this))return S(D)?I(this).j(I(D)):I(I(this).j(D));if(S(D))return I(this.j(I(D)));if(0>this.l(_)&&0>D.l(_))return u(this.m()*D.m());for(var T=this.g.length+D.g.length,N=[],L=0;L<2*T;L++)N[L]=0;for(L=0;L<this.g.length;L++)for(var V=0;V<D.g.length;V++){var j=this.i(L)>>>16,M=this.i(L)&65535,le=D.i(V)>>>16,me=D.i(V)&65535;N[2*L+2*V]+=M*me,w(N,2*L+2*V),N[2*L+2*V+1]+=j*me,w(N,2*L+2*V+1),N[2*L+2*V+1]+=M*le,w(N,2*L+2*V+1),N[2*L+2*V+2]+=j*le,w(N,2*L+2*V+2)}for(L=0;L<T;L++)N[L]=N[2*L+1]<<16|N[2*L];for(L=T;L<2*T;L++)N[L]=0;return new o(N,0)};function w(D,T){for(;(D[T]&65535)!=D[T];)D[T+1]+=D[T]>>>16,D[T]&=65535,T++}function v(D,T){this.g=D,this.h=T}function C(D,T){if(E(T))throw Error("division by zero");if(E(D))return new v(p,p);if(S(D))return T=C(I(D),T),new v(I(T.g),I(T.h));if(S(T))return T=C(D,I(T)),new v(I(T.g),T.h);if(30<D.g.length){if(S(D)||S(T))throw Error("slowDivide_ only works with positive integers.");for(var N=y,L=T;0>=L.l(D);)N=k(N),L=k(L);var V=B(N,1),j=B(L,1);for(L=B(L,2),N=B(N,2);!E(L);){var M=j.add(L);0>=M.l(D)&&(V=V.add(N),j=M),L=B(L,1),N=B(N,1)}return T=R(D,V.j(T)),new v(V,T)}for(V=p;0<=D.l(T);){for(N=Math.max(1,Math.floor(D.m()/T.m())),L=Math.ceil(Math.log(N)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),j=u(N),M=j.j(T);S(M)||0<M.l(D);)N-=L,j=u(N),M=j.j(T);E(j)&&(j=y),V=V.add(j),D=R(D,M)}return new v(V,D)}t.A=function(D){return C(this,D).h},t.and=function(D){for(var T=Math.max(this.g.length,D.g.length),N=[],L=0;L<T;L++)N[L]=this.i(L)&D.i(L);return new o(N,this.h&D.h)},t.or=function(D){for(var T=Math.max(this.g.length,D.g.length),N=[],L=0;L<T;L++)N[L]=this.i(L)|D.i(L);return new o(N,this.h|D.h)},t.xor=function(D){for(var T=Math.max(this.g.length,D.g.length),N=[],L=0;L<T;L++)N[L]=this.i(L)^D.i(L);return new o(N,this.h^D.h)};function k(D){for(var T=D.g.length+1,N=[],L=0;L<T;L++)N[L]=D.i(L)<<1|D.i(L-1)>>>31;return new o(N,D.h)}function B(D,T){var N=T>>5;T%=32;for(var L=D.g.length-N,V=[],j=0;j<L;j++)V[j]=0<T?D.i(j+N)>>>T|D.i(j+N+1)<<32-T:D.i(j+N);return new o(V,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,q3=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,yl=o}).apply(typeof S2<"u"?S2:typeof self<"u"?self:typeof window<"u"?window:{});var Dp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var W3,K3,Ff,G3,hm,gb,Q3,Y3,X3;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,b,A){return d==Array.prototype||d==Object.prototype||(d[b]=A.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dp=="object"&&Dp];for(var b=0;b<d.length;++b){var A=d[b];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var r=n(this);function i(d,b){if(b)e:{var A=r;d=d.split(".");for(var U=0;U<d.length-1;U++){var J=d[U];if(!(J in A))break e;A=A[J]}d=d[d.length-1],U=A[d],b=b(U),b!=U&&b!=null&&e(A,d,{configurable:!0,writable:!0,value:b})}}function s(d,b){d instanceof String&&(d+="");var A=0,U=!1,J={next:function(){if(!U&&A<d.length){var ie=A++;return{value:b(ie,d[ie]),done:!1}}return U=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}i("Array.prototype.values",function(d){return d||function(){return s(this,function(b,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var b=typeof d;return b=b!="object"?b:d?Array.isArray(d)?"array":b:"null",b=="array"||b=="object"&&typeof d.length=="number"}function u(d){var b=typeof d;return b=="object"&&d!=null||b=="function"}function f(d,b,A){return d.call.apply(d.bind,arguments)}function p(d,b,A){if(!d)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,U),d.apply(b,J)}}return function(){return d.apply(b,arguments)}}function y(d,b,A){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,y.apply(null,arguments)}function _(d,b){var A=Array.prototype.slice.call(arguments,1);return function(){var U=A.slice();return U.push.apply(U,arguments),d.apply(this,U)}}function E(d,b){function A(){}A.prototype=b.prototype,d.aa=b.prototype,d.prototype=new A,d.prototype.constructor=d,d.Qb=function(U,J,ie){for(var Re=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)Re[Tt-2]=arguments[Tt];return b.prototype[J].apply(U,Re)}}function S(d){const b=d.length;if(0<b){const A=Array(b);for(let U=0;U<b;U++)A[U]=d[U];return A}return[]}function I(d,b){for(let A=1;A<arguments.length;A++){const U=arguments[A];if(l(U)){const J=d.length||0,ie=U.length||0;d.length=J+ie;for(let Re=0;Re<ie;Re++)d[J+Re]=U[Re]}else d.push(U)}}class R{constructor(b,A){this.i=b,this.j=A,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function w(d){return/^[\s\xa0]*$/.test(d)}function v(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function C(d){return C[" "](d),d}C[" "]=function(){};var k=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function B(d,b,A){for(const U in d)b.call(A,d[U],U,d)}function D(d,b){for(const A in d)b.call(void 0,d[A],A,d)}function T(d){const b={};for(const A in d)b[A]=d[A];return b}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(d,b){let A,U;for(let J=1;J<arguments.length;J++){U=arguments[J];for(A in U)d[A]=U[A];for(let ie=0;ie<N.length;ie++)A=N[ie],Object.prototype.hasOwnProperty.call(U,A)&&(d[A]=U[A])}}function V(d){var b=1;d=d.split(":");const A=[];for(;0<b&&d.length;)A.push(d.shift()),b--;return d.length&&A.push(d.join(":")),A}function j(d){a.setTimeout(()=>{throw d},0)}function M(){var d=Y;let b=null;return d.g&&(b=d.g,d.g=d.g.next,d.g||(d.h=null),b.next=null),b}class le{constructor(){this.h=this.g=null}add(b,A){const U=me.get();U.set(b,A),this.h?this.h.next=U:this.g=U,this.h=U}}var me=new R(()=>new pe,d=>d.reset());class pe{constructor(){this.next=this.g=this.h=null}set(b,A){this.h=b,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let X,G=!1,Y=new le,ce=()=>{const d=a.Promise.resolve(void 0);X=()=>{d.then(ee)}};var ee=()=>{for(var d;d=M();){try{d.h.call(d.g)}catch(A){j(A)}var b=me;b.j(d),100>b.h&&(b.h++,d.next=b.g,b.g=d)}G=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(d,b){this.type=d,this.g=this.target=b,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var te=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,b=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const A=()=>{};a.addEventListener("test",A,b),a.removeEventListener("test",A,b)}catch{}return d}();function Ee(d,b){if(K.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var A=this.type=d.type,U=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=b,b=d.relatedTarget){if(k){e:{try{C(b.nodeName);var J=!0;break e}catch{}J=!1}J||(b=null)}}else A=="mouseover"?b=d.fromElement:A=="mouseout"&&(b=d.toElement);this.relatedTarget=b,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Te[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ee.aa.h.call(this)}}E(Ee,K);var Te={2:"touch",3:"pen",4:"mouse"};Ee.prototype.h=function(){Ee.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var W="closure_listenable_"+(1e6*Math.random()|0),ue=0;function Se(d,b,A,U,J){this.listener=d,this.proxy=null,this.src=b,this.type=A,this.capture=!!U,this.ha=J,this.key=++ue,this.da=this.fa=!1}function be(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function xe(d){this.src=d,this.g={},this.h=0}xe.prototype.add=function(d,b,A,U,J){var ie=d.toString();d=this.g[ie],d||(d=this.g[ie]=[],this.h++);var Re=Et(d,b,U,J);return-1<Re?(b=d[Re],A||(b.fa=!1)):(b=new Se(b,this.src,ie,!!U,J),b.fa=A,d.push(b)),b};function Ke(d,b){var A=b.type;if(A in d.g){var U=d.g[A],J=Array.prototype.indexOf.call(U,b,void 0),ie;(ie=0<=J)&&Array.prototype.splice.call(U,J,1),ie&&(be(b),d.g[A].length==0&&(delete d.g[A],d.h--))}}function Et(d,b,A,U){for(var J=0;J<d.length;++J){var ie=d[J];if(!ie.da&&ie.listener==b&&ie.capture==!!A&&ie.ha==U)return J}return-1}var He="closure_lm_"+(1e6*Math.random()|0),We={};function Qt(d,b,A,U,J){if(Array.isArray(b)){for(var ie=0;ie<b.length;ie++)Qt(d,b[ie],A,U,J);return null}return A=Be(A),d&&d[W]?d.K(b,A,u(U)?!!U.capture:!!U,J):st(d,b,A,!1,U,J)}function st(d,b,A,U,J,ie){if(!b)throw Error("Invalid event type");var Re=u(J)?!!J.capture:!!J,Tt=fe(d);if(Tt||(d[He]=Tt=new xe(d)),A=Tt.add(b,A,U,Re,ie),A.proxy)return A;if(U=z(),A.proxy=U,U.src=d,U.listener=A,d.addEventListener)te||(J=Re),J===void 0&&(J=!1),d.addEventListener(b.toString(),U,J);else if(d.attachEvent)d.attachEvent(ge(b.toString()),U);else if(d.addListener&&d.removeListener)d.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return A}function z(){function d(A){return b.call(d.src,d.listener,A)}const b=_e;return d}function Z(d,b,A,U,J){if(Array.isArray(b))for(var ie=0;ie<b.length;ie++)Z(d,b[ie],A,U,J);else U=u(U)?!!U.capture:!!U,A=Be(A),d&&d[W]?(d=d.i,b=String(b).toString(),b in d.g&&(ie=d.g[b],A=Et(ie,A,U,J),-1<A&&(be(ie[A]),Array.prototype.splice.call(ie,A,1),ie.length==0&&(delete d.g[b],d.h--)))):d&&(d=fe(d))&&(b=d.g[b.toString()],d=-1,b&&(d=Et(b,A,U,J)),(A=-1<d?b[d]:null)&&ae(A))}function ae(d){if(typeof d!="number"&&d&&!d.da){var b=d.src;if(b&&b[W])Ke(b.i,d);else{var A=d.type,U=d.proxy;b.removeEventListener?b.removeEventListener(A,U,d.capture):b.detachEvent?b.detachEvent(ge(A),U):b.addListener&&b.removeListener&&b.removeListener(U),(A=fe(b))?(Ke(A,d),A.h==0&&(A.src=null,b[He]=null)):be(d)}}}function ge(d){return d in We?We[d]:We[d]="on"+d}function _e(d,b){if(d.da)d=!0;else{b=new Ee(b,this);var A=d.listener,U=d.ha||d.src;d.fa&&ae(d),d=A.call(U,b)}return d}function fe(d){return d=d[He],d instanceof xe?d:null}var ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function Be(d){return typeof d=="function"?d:(d[ke]||(d[ke]=function(b){return d.handleEvent(b)}),d[ke])}function Qe(){$.call(this),this.i=new xe(this),this.M=this,this.F=null}E(Qe,$),Qe.prototype[W]=!0,Qe.prototype.removeEventListener=function(d,b,A,U){Z(this,d,b,A,U)};function qe(d,b){var A,U=d.F;if(U)for(A=[];U;U=U.F)A.push(U);if(d=d.M,U=b.type||b,typeof b=="string")b=new K(b,d);else if(b instanceof K)b.target=b.target||d;else{var J=b;b=new K(U,d),L(b,J)}if(J=!0,A)for(var ie=A.length-1;0<=ie;ie--){var Re=b.g=A[ie];J=Kt(Re,U,!0,b)&&J}if(Re=b.g=d,J=Kt(Re,U,!0,b)&&J,J=Kt(Re,U,!1,b)&&J,A)for(ie=0;ie<A.length;ie++)Re=b.g=A[ie],J=Kt(Re,U,!1,b)&&J}Qe.prototype.N=function(){if(Qe.aa.N.call(this),this.i){var d=this.i,b;for(b in d.g){for(var A=d.g[b],U=0;U<A.length;U++)be(A[U]);delete d.g[b],d.h--}}this.F=null},Qe.prototype.K=function(d,b,A,U){return this.i.add(String(d),b,!1,A,U)},Qe.prototype.L=function(d,b,A,U){return this.i.add(String(d),b,!0,A,U)};function Kt(d,b,A,U){if(b=d.i.g[String(b)],!b)return!0;b=b.concat();for(var J=!0,ie=0;ie<b.length;++ie){var Re=b[ie];if(Re&&!Re.da&&Re.capture==A){var Tt=Re.listener,sn=Re.ha||Re.src;Re.fa&&Ke(d.i,Re),J=Tt.call(sn,U)!==!1&&J}}return J&&!U.defaultPrevented}function Zn(d,b,A){if(typeof d=="function")A&&(d=y(d,A));else if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:a.setTimeout(d,b||0)}function pn(d){d.g=Zn(()=>{d.g=null,d.i&&(d.i=!1,pn(d))},d.l);const b=d.h;d.h=null,d.m.apply(null,b)}class nt extends ${constructor(b,A){super(),this.m=b,this.l=A,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:pn(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yr(d){$.call(this),this.h=d,this.g={}}E(yr,$);var rn=[];function Tn(d){B(d.g,function(b,A){this.g.hasOwnProperty(A)&&ae(b)},d),d.g={}}yr.prototype.N=function(){yr.aa.N.call(this),Tn(this)},yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pn=a.JSON.stringify,Ma=a.JSON.parse,Gl=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function xo(){}xo.prototype.h=null;function Ql(d){return d.h||(d.h=d.i())}function Io(){}var qr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ns(){K.call(this,"d")}E(Ns,K);function Zi(){K.call(this,"c")}E(Zi,K);var er={},Ds=null;function es(){return Ds=Ds||new Qe}er.La="serverreachability";function Ls(d){K.call(this,er.La,d)}E(Ls,K);function ts(d){const b=es();qe(b,new Ls(b))}er.STAT_EVENT="statevent";function Fa(d,b){K.call(this,er.STAT_EVENT,d),this.stat=b}E(Fa,K);function Yt(d){const b=es();qe(b,new Fa(b,d))}er.Ma="timingevent";function Ii(d,b){K.call(this,er.Ma,d),this.size=b}E(Ii,K);function ai(d,b){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},b)}function Ri(){this.g=!0}Ri.prototype.xa=function(){this.g=!1};function Ro(d,b,A,U,J,ie){d.info(function(){if(d.g)if(ie)for(var Re="",Tt=ie.split("&"),sn=0;sn<Tt.length;sn++){var gt=Tt[sn].split("=");if(1<gt.length){var mn=gt[0];gt=gt[1];var On=mn.split("_");Re=2<=On.length&&On[1]=="type"?Re+(mn+"="+gt+"&"):Re+(mn+"=redacted&")}}else Re=null;else Re=ie;return"XMLHTTP REQ ("+U+") [attempt "+J+"]: "+b+`
`+A+`
`+Re})}function H(d,b,A,U,J,ie,Re){d.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+J+"]: "+b+`
`+A+`
`+ie+" "+Re})}function Q(d,b,A,U){d.info(function(){return"XMLHTTP TEXT ("+b+"): "+de(d,A)+(U?" "+U:"")})}function re(d,b){d.info(function(){return"TIMEOUT: "+b})}Ri.prototype.info=function(){};function de(d,b){if(!d.g)return b;if(!b)return null;try{var A=JSON.parse(b);if(A){for(d=0;d<A.length;d++)if(Array.isArray(A[d])){var U=A[d];if(!(2>U.length)){var J=U[1];if(Array.isArray(J)&&!(1>J.length)){var ie=J[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(var Re=1;Re<J.length;Re++)J[Re]=""}}}}return Pn(A)}catch{return b}}var Ce={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ze;function Ie(){}E(Ie,xo),Ie.prototype.g=function(){return new XMLHttpRequest},Ie.prototype.i=function(){return{}},ze=new Ie;function je(d,b,A,U){this.j=d,this.i=b,this.l=A,this.R=U||1,this.U=new yr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}var Me={},ot={};function at(d,b,A){d.L=1,d.v=ci(ui(b)),d.m=A,d.P=!0,ct(d,null)}function ct(d,b){d.F=Date.now(),Ot(d),d.A=ui(d.v);var A=d.A,U=d.R;Array.isArray(U)||(U=[String(U)]),ln(A.i,"t",U),d.C=0,A=d.j.J,d.h=new Le,d.g=Jh(d.j,A?b:null,!d.m),0<d.O&&(d.M=new nt(y(d.Y,d,d.g),d.O)),b=d.U,A=d.g,U=d.ca;var J="readystatechange";Array.isArray(J)||(J&&(rn[0]=J.toString()),J=rn);for(var ie=0;ie<J.length;ie++){var Re=Qt(A,J[ie],U||b.handleEvent,!1,b.h||b);if(!Re)break;b.g[Re.key]=Re}b=d.H?T(d.H):{},d.m?(d.u||(d.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,b)):(d.u="GET",d.g.ea(d.A,d.u,null,b)),ts(),Ro(d.i,d.u,d.A,d.l,d.R,d.m)}je.prototype.ca=function(d){d=d.target;const b=this.M;b&&ki(d)==3?b.j():this.Y(d)},je.prototype.Y=function(d){try{if(d==this.g)e:{const On=ki(this.g);var b=this.g.Ba();const cs=this.g.Z();if(!(3>On)&&(On!=3||this.g&&(this.h.h||this.g.oa()||zh(this.g)))){this.J||On!=4||b==7||(b==8||0>=cs?ts(3):ts(2)),tr(this);var A=this.g.Z();this.X=A;t:if(it(this)){var U=zh(this.g);d="";var J=U.length,ie=ki(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sn(this),nr(this);var Re="";break t}this.h.i=new a.TextDecoder}for(b=0;b<J;b++)this.h.h=!0,d+=this.h.i.decode(U[b],{stream:!(ie&&b==J-1)});U.length=0,this.h.g+=d,this.C=0,Re=this.h.g}else Re=this.g.oa();if(this.o=A==200,H(this.i,this.u,this.A,this.l,this.R,On,A),this.o){if(this.T&&!this.K){t:{if(this.g){var Tt,sn=this.g;if((Tt=sn.g?sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Tt)){var gt=Tt;break t}}gt=null}if(A=gt)Q(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ai(this,A);else{this.o=!1,this.s=3,Yt(12),Sn(this),nr(this);break e}}if(this.P){A=!0;let Nn;for(;!this.J&&this.C<Re.length;)if(Nn=Xt(this,Re),Nn==ot){On==4&&(this.s=4,Yt(14),A=!1),Q(this.i,this.l,null,"[Incomplete Response]");break}else if(Nn==Me){this.s=4,Yt(15),Q(this.i,this.l,Re,"[Invalid Chunk]"),A=!1;break}else Q(this.i,this.l,Nn,null),Ai(this,Nn);if(it(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),On!=4||Re.length!=0||this.h.h||(this.s=1,Yt(16),A=!1),this.o=this.o&&A,!A)Q(this.i,this.l,Re,"[Invalid Chunked Response]"),Sn(this),nr(this);else if(0<Re.length&&!this.W){this.W=!0;var mn=this.j;mn.g==this&&mn.ba&&!mn.M&&(mn.j.info("Great, no buffering proxy detected. Bytes received: "+Re.length),us(mn),mn.M=!0,Yt(11))}}else Q(this.i,this.l,Re,null),Ai(this,Re);On==4&&Sn(this),this.o&&!this.J&&(On==4?Gh(this.j,this):(this.o=!1,Ot(this)))}else yv(this.g),A==400&&0<Re.indexOf("Unknown SID")?(this.s=3,Yt(12)):(this.s=0,Yt(13)),Sn(this),nr(this)}}}catch{}finally{}};function it(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Xt(d,b){var A=d.C,U=b.indexOf(`
`,A);return U==-1?ot:(A=Number(b.substring(A,U)),isNaN(A)?Me:(U+=1,U+A>b.length?ot:(b=b.slice(U,U+A),d.C=U+A,b)))}je.prototype.cancel=function(){this.J=!0,Sn(this)};function Ot(d){d.S=Date.now()+d.I,Ci(d,d.I)}function Ci(d,b){if(d.B!=null)throw Error("WatchDog timer not null");d.B=ai(y(d.ba,d),b)}function tr(d){d.B&&(a.clearTimeout(d.B),d.B=null)}je.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(re(this.i,this.A),this.L!=2&&(ts(),Yt(17)),Sn(this),this.s=2,nr(this)):Ci(this,this.S-d)};function nr(d){d.j.G==0||d.J||Gh(d.j,d)}function Sn(d){tr(d);var b=d.M;b&&typeof b.ma=="function"&&b.ma(),d.M=null,Tn(d.U),d.g&&(b=d.g,d.g=null,b.abort(),b.ma())}function Ai(d,b){try{var A=d.j;if(A.G!=0&&(A.g==d||Ye(A.h,d))){if(!d.K&&Ye(A.h,d)&&A.G==3){try{var U=A.Da.g.parse(b)}catch{U=null}if(Array.isArray(U)&&U.length==3){var J=U;if(J[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<d.F)ru(A),nu(A);else break e;rf(A),Yt(18)}}else A.za=J[1],0<A.za-A.T&&37500>J[2]&&A.F&&A.v==0&&!A.C&&(A.C=ai(y(A.Za,A),6e3));if(1>=Pi(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Fs(A,11)}else if((d.K||A.g==d)&&ru(A),!w(b))for(J=A.Da.g.parse(b),b=0;b<J.length;b++){let gt=J[b];if(A.T=gt[0],gt=gt[1],A.G==2)if(gt[0]=="c"){A.K=gt[1],A.ia=gt[2];const mn=gt[3];mn!=null&&(A.la=mn,A.j.info("VER="+A.la));const On=gt[4];On!=null&&(A.Aa=On,A.j.info("SVER="+A.Aa));const cs=gt[5];cs!=null&&typeof cs=="number"&&0<cs&&(U=1.5*cs,A.L=U,A.j.info("backChannelRequestTimeoutMs_="+U)),U=A;const Nn=d.g;if(Nn){const su=Nn.g?Nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(su){var ie=U.h;ie.g||su.indexOf("spdy")==-1&&su.indexOf("quic")==-1&&su.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(Rt(ie,ie.h),ie.h=null))}if(U.D){const sf=Nn.g?Nn.g.getResponseHeader("X-HTTP-Session-Id"):null;sf&&(U.ya=sf,Ct(U.I,U.D,sf))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-d.F,A.j.info("Handshake RTT: "+A.R+"ms")),U=A;var Re=d;if(U.qa=Xh(U,U.J?U.ia:null,U.W),Re.K){xn(U.h,Re);var Tt=Re,sn=U.L;sn&&(Tt.I=sn),Tt.B&&(tr(Tt),Ot(Tt)),U.g=Re}else Kh(U);0<A.i.length&&ls(A)}else gt[0]!="stop"&&gt[0]!="close"||Fs(A,7);else A.G==3&&(gt[0]=="stop"||gt[0]=="close"?gt[0]=="stop"?Fs(A,7):tu(A):gt[0]!="noop"&&A.l&&A.l.ta(gt),A.v=0)}}ts(4)}catch{}}var Je=class{constructor(d,b){this.g=d,this.map=b}};function li(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ns(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Pi(d){return d.h?1:d.g?d.g.size:0}function Ye(d,b){return d.h?d.h==b:d.g?d.g.has(b):!1}function Rt(d,b){d.g?d.g.add(b):d.h=b}function xn(d,b){d.h&&d.h==b?d.h=null:d.g&&d.g.has(b)&&d.g.delete(b)}li.prototype.cancel=function(){if(this.i=mt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function mt(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let b=d.i;for(const A of d.g.values())b=b.concat(A.D);return b}return S(d.i)}function rr(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var b=[],A=d.length,U=0;U<A;U++)b.push(d[U]);return b}b=[],A=0;for(U in d)b[A++]=d[U];return b}function Yl(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var b=[];d=d.length;for(var A=0;A<d;A++)b.push(A);return b}b=[],A=0;for(const U in d)b[A++]=U;return b}}}function rs(d,b){if(d.forEach&&typeof d.forEach=="function")d.forEach(b,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,b,void 0);else for(var A=Yl(d),U=rr(d),J=U.length,ie=0;ie<J;ie++)b.call(void 0,U[ie],A&&A[ie],d)}var ja=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uv(d,b){if(d){d=d.split("&");for(var A=0;A<d.length;A++){var U=d[A].indexOf("="),J=null;if(0<=U){var ie=d[A].substring(0,U);J=d[A].substring(U+1)}else ie=d[A];b(ie,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function is(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof is){this.h=d.h,Co(this,d.j),this.o=d.o,this.g=d.g,Xl(this,d.s),this.l=d.l;var b=d.i,A=new Ba;A.i=b.i,b.g&&(A.g=new Map(b.g),A.h=b.h),Jc(this,A),this.m=d.m}else d&&(b=String(d).match(ja))?(this.h=!1,Co(this,b[1]||"",!0),this.o=Ao(b[2]||""),this.g=Ao(b[3]||"",!0),Xl(this,b[4]),this.l=Ao(b[5]||"",!0),Jc(this,b[6]||"",!0),this.m=Ao(b[7]||"")):(this.h=!1,this.i=new Ba(null,this.h))}is.prototype.toString=function(){var d=[],b=this.j;b&&d.push(Va(b,Zc,!0),":");var A=this.g;return(A||b=="file")&&(d.push("//"),(b=this.o)&&d.push(Va(b,Zc,!0),"@"),d.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&d.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&d.push("/"),d.push(Va(A,A.charAt(0)=="/"?Ua:Fh,!0))),(A=this.i.toString())&&d.push("?",A),(A=this.m)&&d.push("#",Va(A,jh)),d.join("")};function ui(d){return new is(d)}function Co(d,b,A){d.j=A?Ao(b,!0):b,d.j&&(d.j=d.j.replace(/:$/,""))}function Xl(d,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);d.s=b}else d.s=null}function Jc(d,b,A){b instanceof Ba?(d.i=b,fv(d.i,d.h)):(A||(b=Va(b,cv)),d.i=new Ba(b,d.h))}function Ct(d,b,A){d.i.set(b,A)}function ci(d){return Ct(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Ao(d,b){return d?b?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Va(d,b,A){return typeof d=="string"?(d=encodeURI(d).replace(b,Mh),A&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Mh(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Zc=/[#\/\?@]/g,Fh=/[#\?:]/g,Ua=/[#\?]/g,cv=/[#\?@]/g,jh=/#/g;function Ba(d,b){this.h=this.g=null,this.i=d||null,this.j=!!b}function ss(d){d.g||(d.g=new Map,d.h=0,d.i&&uv(d.i,function(b,A){d.add(decodeURIComponent(b.replace(/\+/g," ")),A)}))}t=Ba.prototype,t.add=function(d,b){ss(this),this.i=null,d=Wr(this,d);var A=this.g.get(d);return A||this.g.set(d,A=[]),A.push(b),this.h+=1,this};function Vh(d,b){ss(d),b=Wr(d,b),d.g.has(b)&&(d.i=null,d.h-=d.g.get(b).length,d.g.delete(b))}function $a(d,b){return ss(d),b=Wr(d,b),d.g.has(b)}t.forEach=function(d,b){ss(this),this.g.forEach(function(A,U){A.forEach(function(J){d.call(b,J,U,this)},this)},this)},t.na=function(){ss(this);const d=Array.from(this.g.values()),b=Array.from(this.g.keys()),A=[];for(let U=0;U<b.length;U++){const J=d[U];for(let ie=0;ie<J.length;ie++)A.push(b[U])}return A},t.V=function(d){ss(this);let b=[];if(typeof d=="string")$a(this,d)&&(b=b.concat(this.g.get(Wr(this,d))));else{d=Array.from(this.g.values());for(let A=0;A<d.length;A++)b=b.concat(d[A])}return b},t.set=function(d,b){return ss(this),this.i=null,d=Wr(this,d),$a(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[b]),this.h+=1,this},t.get=function(d,b){return d?(d=this.V(d),0<d.length?String(d[0]):b):b};function ln(d,b,A){Vh(d,b),0<A.length&&(d.i=null,d.g.set(Wr(d,b),S(A)),d.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],b=Array.from(this.g.keys());for(var A=0;A<b.length;A++){var U=b[A];const ie=encodeURIComponent(String(U)),Re=this.V(U);for(U=0;U<Re.length;U++){var J=ie;Re[U]!==""&&(J+="="+encodeURIComponent(String(Re[U]))),d.push(J)}}return this.i=d.join("&")};function Wr(d,b){return b=String(b),d.j&&(b=b.toLowerCase()),b}function fv(d,b){b&&!d.j&&(ss(d),d.i=null,d.g.forEach(function(A,U){var J=U.toLowerCase();U!=J&&(Vh(this,U),ln(this,J,A))},d)),d.j=b}function dv(d,b){const A=new Ri;if(a.Image){const U=new Image;U.onload=_(os,A,"TestLoadImage: loaded",!0,b,U),U.onerror=_(os,A,"TestLoadImage: error",!1,b,U),U.onabort=_(os,A,"TestLoadImage: abort",!1,b,U),U.ontimeout=_(os,A,"TestLoadImage: timeout",!1,b,U),a.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=d}else b(!1)}function hv(d,b){const A=new Ri,U=new AbortController,J=setTimeout(()=>{U.abort(),os(A,"TestPingServer: timeout",!1,b)},1e4);fetch(d,{signal:U.signal}).then(ie=>{clearTimeout(J),ie.ok?os(A,"TestPingServer: ok",!0,b):os(A,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(J),os(A,"TestPingServer: error",!1,b)})}function os(d,b,A,U,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),U(A)}catch{}}function pv(){this.g=new Gl}function mv(d,b,A){const U=A||"";try{rs(d,function(J,ie){let Re=J;u(J)&&(Re=Pn(J)),b.push(U+ie+"="+encodeURIComponent(Re))})}catch(J){throw b.push(U+"type="+encodeURIComponent("_badmap")),J}}function za(d){this.l=d.Ub||null,this.j=d.eb||!1}E(za,xo),za.prototype.g=function(){return new Jl(this.l,this.j)},za.prototype.i=function(d){return function(){return d}}({});function Jl(d,b){Qe.call(this),this.D=d,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Jl,Qe),t=Jl.prototype,t.open=function(d,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=b,this.readyState=1,Ha(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(b.body=d),(this.D||a).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,as(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ha(this)),this.g&&(this.readyState=3,Ha(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ef(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function ef(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var b=d.value?d.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!d.done}))&&(this.response=this.responseText+=b)}d.done?as(this):Ha(this),this.readyState==3&&ef(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,as(this))},t.Qa=function(d){this.g&&(this.response=d,as(this))},t.ga=function(){this.g&&as(this)};function as(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Ha(d)}t.setRequestHeader=function(d,b){this.u.append(d,b)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],b=this.h.entries();for(var A=b.next();!A.done;)A=A.value,d.push(A[0]+": "+A[1]),A=b.next();return d.join(`\r
`)};function Ha(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Jl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Zl(d){let b="";return B(d,function(A,U){b+=U,b+=":",b+=A,b+=`\r
`}),b}function tf(d,b,A){e:{for(U in A){var U=!1;break e}U=!0}U||(A=Zl(A),typeof d=="string"?A!=null&&encodeURIComponent(String(A)):Ct(d,b,A))}function Nt(d){Qe.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Nt,Qe);var qa=/^https?$/i,gv=["POST","PUT"];t=Nt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,b,A,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);b=b?b.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ze.g(),this.v=this.o?Ql(this.o):Ql(ze),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(b,String(d),!0),this.B=!1}catch(ie){Uh(this,ie);return}if(d=A||"",A=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var J in U)A.set(J,U[J]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const ie of U.keys())A.set(ie,U.get(ie));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(A.keys()).find(ie=>ie.toLowerCase()=="content-type"),J=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(gv,b,void 0))||U||J||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,Re]of A)this.g.setRequestHeader(ie,Re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$h(this),this.u=!0,this.g.send(d),this.u=!1}catch(ie){Uh(this,ie)}};function Uh(d,b){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=b,d.m=5,Bh(d),eu(d)}function Bh(d){d.A||(d.A=!0,qe(d,"complete"),qe(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,qe(this,"complete"),qe(this,"abort"),eu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),eu(this,!0)),Nt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?nf(this):this.bb())},t.bb=function(){nf(this)};function nf(d){if(d.h&&typeof o<"u"&&(!d.v[1]||ki(d)!=4||d.Z()!=2)){if(d.u&&ki(d)==4)Zn(d.Ea,0,d);else if(qe(d,"readystatechange"),ki(d)==4){d.h=!1;try{const Re=d.Z();e:switch(Re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var A;if(!(A=b)){var U;if(U=Re===0){var J=String(d.D).match(ja)[1]||null;!J&&a.self&&a.self.location&&(J=a.self.location.protocol.slice(0,-1)),U=!qa.test(J?J.toLowerCase():"")}A=U}if(A)qe(d,"complete"),qe(d,"success");else{d.m=6;try{var ie=2<ki(d)?d.g.statusText:""}catch{ie=""}d.l=ie+" ["+d.Z()+"]",Bh(d)}}finally{eu(d)}}}}function eu(d,b){if(d.g){$h(d);const A=d.g,U=d.v[0]?()=>{}:null;d.g=null,d.v=null,b||qe(d,"ready");try{A.onreadystatechange=U}catch{}}}function $h(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function ki(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<ki(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var b=this.g.responseText;return d&&b.indexOf(d)==0&&(b=b.substring(d.length)),Ma(b)}};function zh(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function yv(d){const b={};d=(d.g&&2<=ki(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<d.length;U++){if(w(d[U]))continue;var A=V(d[U]);const J=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const ie=b[J]||[];b[J]=ie,ie.push(A)}D(b,function(U){return U.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wa(d,b,A){return A&&A.internalChannelParams&&A.internalChannelParams[d]||b}function Hh(d){this.Aa=0,this.i=[],this.j=new Ri,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wa("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wa("baseRetryDelayMs",5e3,d),this.cb=Wa("retryDelaySeedMs",1e4,d),this.Wa=Wa("forwardChannelMaxRetries",2,d),this.wa=Wa("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new li(d&&d.concurrentRequestLimit),this.Da=new pv,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Hh.prototype,t.la=8,t.G=1,t.connect=function(d,b,A,U){Yt(0),this.W=d,this.H=b||{},A&&U!==void 0&&(this.H.OSID=A,this.H.OAID=U),this.F=this.X,this.I=Xh(this,null,this.W),ls(this)};function tu(d){if(Ka(d),d.G==3){var b=d.U++,A=ui(d.I);if(Ct(A,"SID",d.K),Ct(A,"RID",b),Ct(A,"TYPE","terminate"),Ga(d,A),b=new je(d,d.j,b),b.L=2,b.v=ci(ui(A)),A=!1,a.navigator&&a.navigator.sendBeacon)try{A=a.navigator.sendBeacon(b.v.toString(),"")}catch{}!A&&a.Image&&(new Image().src=b.v,A=!0),A||(b.g=Jh(b.j,null),b.g.ea(b.v)),b.F=Date.now(),Ot(b)}Yh(d)}function nu(d){d.g&&(us(d),d.g.cancel(),d.g=null)}function Ka(d){nu(d),d.u&&(a.clearTimeout(d.u),d.u=null),ru(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function ls(d){if(!ns(d.h)&&!d.s){d.s=!0;var b=d.Ga;X||ce(),G||(X(),G=!0),Y.add(b,d),d.B=0}}function vv(d,b){return Pi(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=b.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=ai(y(d.Ga,d,b),Qh(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const J=new je(this,this.j,d);let ie=this.o;if(this.S&&(ie?(ie=T(ie),L(ie,this.S)):ie=this.S),this.m!==null||this.O||(J.H=ie,ie=null),this.P)e:{for(var b=0,A=0;A<this.i.length;A++){t:{var U=this.i[A];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(b+=U,4096<b){b=A;break e}if(b===4096||A===this.i.length-1){b=A+1;break e}}b=1e3}else b=1e3;b=Wh(this,J,b),A=ui(this.I),Ct(A,"RID",d),Ct(A,"CVER",22),this.D&&Ct(A,"X-HTTP-Session-Id",this.D),Ga(this,A),ie&&(this.O?b="headers="+encodeURIComponent(String(Zl(ie)))+"&"+b:this.m&&tf(A,this.m,ie)),Rt(this.h,J),this.Ua&&Ct(A,"TYPE","init"),this.P?(Ct(A,"$req",b),Ct(A,"SID","null"),J.T=!0,at(J,A,null)):at(J,A,b),this.G=2}}else this.G==3&&(d?qh(this,d):this.i.length==0||ns(this.h)||qh(this))};function qh(d,b){var A;b?A=b.l:A=d.U++;const U=ui(d.I);Ct(U,"SID",d.K),Ct(U,"RID",A),Ct(U,"AID",d.T),Ga(d,U),d.m&&d.o&&tf(U,d.m,d.o),A=new je(d,d.j,A,d.B+1),d.m===null&&(A.H=d.o),b&&(d.i=b.D.concat(d.i)),b=Wh(d,A,1e3),A.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Rt(d.h,A),at(A,U,b)}function Ga(d,b){d.H&&B(d.H,function(A,U){Ct(b,U,A)}),d.l&&rs({},function(A,U){Ct(b,U,A)})}function Wh(d,b,A){A=Math.min(d.i.length,A);var U=d.l?y(d.l.Na,d.l,d):null;e:{var J=d.i;let ie=-1;for(;;){const Re=["count="+A];ie==-1?0<A?(ie=J[0].g,Re.push("ofs="+ie)):ie=0:Re.push("ofs="+ie);let Tt=!0;for(let sn=0;sn<A;sn++){let gt=J[sn].g;const mn=J[sn].map;if(gt-=ie,0>gt)ie=Math.max(0,J[sn].g-100),Tt=!1;else try{mv(mn,Re,"req"+gt+"_")}catch{U&&U(mn)}}if(Tt){U=Re.join("&");break e}}}return d=d.i.splice(0,A),b.D=d,U}function Kh(d){if(!d.g&&!d.u){d.Y=1;var b=d.Fa;X||ce(),G||(X(),G=!0),Y.add(b,d),d.v=0}}function rf(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=ai(y(d.Fa,d),Qh(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,Ms(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=ai(y(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Yt(10),nu(this),Ms(this))};function us(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function Ms(d){d.g=new je(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var b=ui(d.qa);Ct(b,"RID","rpc"),Ct(b,"SID",d.K),Ct(b,"AID",d.T),Ct(b,"CI",d.F?"0":"1"),!d.F&&d.ja&&Ct(b,"TO",d.ja),Ct(b,"TYPE","xmlhttp"),Ga(d,b),d.m&&d.o&&tf(b,d.m,d.o),d.L&&(d.g.I=d.L);var A=d.g;d=d.ia,A.L=1,A.v=ci(ui(b)),A.m=null,A.P=!0,ct(A,d)}t.Za=function(){this.C!=null&&(this.C=null,nu(this),rf(this),Yt(19))};function ru(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function Gh(d,b){var A=null;if(d.g==b){ru(d),us(d),d.g=null;var U=2}else if(Ye(d.h,b))A=b.D,xn(d.h,b),U=1;else return;if(d.G!=0){if(b.o)if(U==1){A=b.m?b.m.length:0,b=Date.now()-b.F;var J=d.B;U=es(),qe(U,new Ii(U,A)),ls(d)}else Kh(d);else if(J=b.s,J==3||J==0&&0<b.X||!(U==1&&vv(d,b)||U==2&&rf(d)))switch(A&&0<A.length&&(b=d.h,b.i=b.i.concat(A)),J){case 1:Fs(d,5);break;case 4:Fs(d,10);break;case 3:Fs(d,6);break;default:Fs(d,2)}}}function Qh(d,b){let A=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(A*=2),A*b}function Fs(d,b){if(d.j.info("Error code "+b),b==2){var A=y(d.fb,d),U=d.Xa;const J=!U;U=new is(U||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Co(U,"https"),ci(U),J?dv(U.toString(),A):hv(U.toString(),A)}else Yt(2);d.G=0,d.l&&d.l.sa(b),Yh(d),Ka(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function Yh(d){if(d.G=0,d.ka=[],d.l){const b=mt(d.h);(b.length!=0||d.i.length!=0)&&(I(d.ka,b),I(d.ka,d.i),d.h.i.length=0,S(d.i),d.i.length=0),d.l.ra()}}function Xh(d,b,A){var U=A instanceof is?ui(A):new is(A);if(U.g!="")b&&(U.g=b+"."+U.g),Xl(U,U.s);else{var J=a.location;U=J.protocol,b=b?b+"."+J.hostname:J.hostname,J=+J.port;var ie=new is(null);U&&Co(ie,U),b&&(ie.g=b),J&&Xl(ie,J),A&&(ie.l=A),U=ie}return A=d.D,b=d.ya,A&&b&&Ct(U,A,b),Ct(U,"VER",d.la),Ga(d,U),U}function Jh(d,b,A){if(b&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return b=d.Ca&&!d.pa?new Nt(new za({eb:A})):new Nt(d.pa),b.Ha(d.J),b}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zh(){}t=Zh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Qa(){}Qa.prototype.g=function(d,b){return new kn(d,b)};function kn(d,b){Qe.call(this),this.g=new Hh(b),this.l=d,this.h=b&&b.messageUrlParams||null,d=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(d?d["X-WebChannel-Content-Type"]=b.messageContentType:d={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(d?d["X-WebChannel-Client-Profile"]=b.va:d={"X-WebChannel-Client-Profile":b.va}),this.g.S=d,(d=b&&b.Sb)&&!w(d)&&(this.g.m=d),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!w(b)&&(this.g.D=b,d=this.h,d!==null&&b in d&&(d=this.h,b in d&&delete d[b])),this.j=new Po(this)}E(kn,Qe),kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){tu(this.g)},kn.prototype.o=function(d){var b=this.g;if(typeof d=="string"){var A={};A.__data__=d,d=A}else this.u&&(A={},A.__data__=Pn(d),d=A);b.i.push(new Je(b.Ya++,d)),b.G==3&&ls(b)},kn.prototype.N=function(){this.g.l=null,delete this.j,tu(this.g),delete this.g,kn.aa.N.call(this)};function ep(d){Ns.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var b=d.__sm__;if(b){e:{for(const A in b){d=A;break e}d=void 0}(this.i=d)&&(d=this.i,b=b!==null&&d in b?b[d]:void 0),this.data=b}else this.data=d}E(ep,Ns);function iu(){Zi.call(this),this.status=1}E(iu,Zi);function Po(d){this.g=d}E(Po,Zh),Po.prototype.ua=function(){qe(this.g,"a")},Po.prototype.ta=function(d){qe(this.g,new ep(d))},Po.prototype.sa=function(d){qe(this.g,new iu)},Po.prototype.ra=function(){qe(this.g,"b")},Qa.prototype.createWebChannel=Qa.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,X3=function(){return new Qa},Y3=function(){return es()},Q3=er,gb={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ce.NO_ERROR=0,Ce.TIMEOUT=8,Ce.HTTP_ERROR=6,hm=Ce,Oe.COMPLETE="complete",G3=Oe,Io.EventType=qr,qr.OPEN="a",qr.CLOSE="b",qr.ERROR="c",qr.MESSAGE="d",Qe.prototype.listen=Qe.prototype.K,Ff=Io,K3=za,Nt.prototype.listenOnce=Nt.prototype.L,Nt.prototype.getLastError=Nt.prototype.Ka,Nt.prototype.getLastErrorCode=Nt.prototype.Ba,Nt.prototype.getStatus=Nt.prototype.Z,Nt.prototype.getResponseJson=Nt.prototype.Oa,Nt.prototype.getResponseText=Nt.prototype.oa,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Ha,W3=Nt}).apply(typeof Dp<"u"?Dp:typeof self<"u"?self:typeof window<"u"?window:{});const x2="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ar.UNAUTHENTICATED=new ar(null),ar.GOOGLE_CREDENTIALS=new ar("google-credentials-uid"),ar.FIRST_PARTY=new ar("first-party-uid"),ar.MOCK_USER=new ar("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fc="10.13.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=new py("@firebase/firestore");function Tf(){return Al.logLevel}function Ve(t,...e){if(Al.logLevel<=dt.DEBUG){const n=e.map(OS);Al.debug(`Firestore (${Fc}): ${t}`,...n)}}function po(t,...e){if(Al.logLevel<=dt.ERROR){const n=e.map(OS);Al.error(`Firestore (${Fc}): ${t}`,...n)}}function _c(t,...e){if(Al.logLevel<=dt.WARN){const n=e.map(OS);Al.warn(`Firestore (${Fc}): ${t}`,...n)}}function OS(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t="Unexpected state"){const e=`FIRESTORE (${Fc}) INTERNAL ASSERTION FAILED: `+t;throw po(e),new Error(e)}function Dt(t,e){t||Xe()}function tt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends As{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OG{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ar.UNAUTHENTICATED))}shutdown(){}}class NG{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class DG{constructor(e){this.t=e,this.currentUser=ar.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new no;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new no,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new no)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Dt(typeof r.accessToken=="string"),new J3(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dt(e===null||typeof e=="string"),new ar(e)}}class LG{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ar.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class MG{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new LG(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ar.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class FG{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jG{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ve("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Dt(typeof n.token=="string"),this.R=n.token,new FG(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VG(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=VG(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function bt(t,e){return t<e?-1:t>e?1:0}function wc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ne(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ne(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ne(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return An.fromMillis(Date.now())}static fromDate(e){return An.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new An(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?bt(this.nanoseconds,e.nanoseconds):bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new et(e)}static min(){return new et(new An(0,0))}static max(){return new et(new An(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n,r){n===void 0?n=0:n>e.length&&Xe(),r===void 0?r=e.length-n:r>e.length-n&&Xe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Vd.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vd?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class zt extends Vd{construct(e,n,r){return new zt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new zt(n)}static emptyPath(){return new zt([])}}const UG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kn extends Vd{construct(e,n,r){return new Kn(e,n,r)}static isValidIdentifier(e){return UG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Kn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ne(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Ne(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ne(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ne(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kn(n)}static emptyPath(){return new Kn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.path=e}static fromPath(e){return new $e(zt.fromString(e))}static fromName(e){return new $e(zt.fromString(e).popFirst(5))}static empty(){return new $e(zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&zt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return zt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new zt(e.slice()))}}function BG(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=et.fromTimestamp(r===1e9?new An(n+1,0):new An(n,r));return new ma(i,$e.empty(),e)}function $G(t){return new ma(t.readTime,t.key,-1)}class ma{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ma(et.min(),$e.empty(),-1)}static max(){return new ma(et.max(),$e.empty(),-1)}}function zG(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$e.comparator(t.documentKey,e.documentKey),n!==0?n:bt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qG{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ph(t){if(t.code!==he.FAILED_PRECONDITION||t.message!==HG)throw t;Ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ye((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ye?n:ye.resolve(n)}catch(n){return ye.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ye.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ye.reject(n)}static resolve(e){return new ye((n,r)=>{n(e)})}static reject(e){return new ye((n,r)=>{r(e)})}static waitFor(e){return new ye((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=ye.resolve(!1);for(const r of e)n=n.next(i=>i?ye.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new ye((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(f=>{o[u]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new ye((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function WG(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function mh(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}NS.oe=-1;function Ey(t){return t==null}function hg(t){return t===0&&1/t==-1/0}function KG(t){return typeof t=="number"&&Number.isInteger(t)&&!hg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Bl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function e6(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bn=class yb{constructor(e,n){this.comparator=e,this.root=n||ua.EMPTY}insert(e,n){return new yb(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ua.BLACK,null,null))}remove(e){return new yb(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ua.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lp(this.root,e,this.comparator,!0)}},Lp=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ua=class zs{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??zs.RED,this.left=i??zs.EMPTY,this.right=s??zs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new zs(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return zs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return zs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xe();const e=this.left.check();if(e!==this.right.check())throw Xe();return e+(this.isRed()?0:1)}};ua.EMPTY=null,ua.RED=!0,ua.BLACK=!1;ua.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe()}get value(){throw Xe()}get color(){throw Xe()}get left(){throw Xe()}get right(){throw Xe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ua(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.comparator=e,this.data=new bn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new R2(this.data.getIterator())}getIteratorFrom(e){return new R2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Qn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qn(this.comparator);return n.data=e,n}}class R2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this.fields=e,e.sort(Kn.comparator)}static empty(){return new Jr([])}unionWith(e){let n=new Qn(Kn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return wc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new t6("Invalid base64 string: "+s):s}}(e);return new Xn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Xn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xn.EMPTY_BYTE_STRING=new Xn("");const GG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ga(t){if(Dt(!!t),typeof t=="string"){let e=0;const n=GG.exec(t);if(Dt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fn(t.seconds),nanos:fn(t.nanos)}}function fn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Pl(t){return typeof t=="string"?Xn.fromBase64String(t):Xn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function LS(t){const e=t.mapValue.fields.__previous_value__;return DS(e)?LS(e):e}function Ud(t){const e=ga(t.mapValue.fields.__local_write_time__.timestampValue);return new An(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QG{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Bd{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Bd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Bd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function kl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?DS(t)?4:XG(t)?9007199254740991:YG(t)?10:11:Xe()}function Rs(t,e){if(t===e)return!0;const n=kl(t);if(n!==kl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ud(t).isEqual(Ud(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ga(i.timestampValue),a=ga(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Pl(i.bytesValue).isEqual(Pl(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return fn(i.geoPointValue.latitude)===fn(s.geoPointValue.latitude)&&fn(i.geoPointValue.longitude)===fn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return fn(i.integerValue)===fn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=fn(i.doubleValue),a=fn(s.doubleValue);return o===a?hg(o)===hg(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return wc(t.arrayValue.values||[],e.arrayValue.values||[],Rs);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(I2(o)!==I2(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Rs(o[l],a[l])))return!1;return!0}(t,e);default:return Xe()}}function $d(t,e){return(t.values||[]).find(n=>Rs(n,e))!==void 0}function Ec(t,e){if(t===e)return 0;const n=kl(t),r=kl(e);if(n!==r)return bt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return bt(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=fn(s.integerValue||s.doubleValue),l=fn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return C2(t.timestampValue,e.timestampValue);case 4:return C2(Ud(t),Ud(e));case 5:return bt(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Pl(s),l=Pl(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const f=bt(a[u],l[u]);if(f!==0)return f}return bt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=bt(fn(s.latitude),fn(o.latitude));return a!==0?a:bt(fn(s.longitude),fn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return A2(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,f;const p=s.fields||{},y=o.fields||{},_=(a=p.value)===null||a===void 0?void 0:a.arrayValue,E=(l=y.value)===null||l===void 0?void 0:l.arrayValue,S=bt(((u=_==null?void 0:_.values)===null||u===void 0?void 0:u.length)||0,((f=E==null?void 0:E.values)===null||f===void 0?void 0:f.length)||0);return S!==0?S:A2(_,E)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Mp.mapValue&&o===Mp.mapValue)return 0;if(s===Mp.mapValue)return 1;if(o===Mp.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){const y=bt(l[p],f[p]);if(y!==0)return y;const _=Ec(a[l[p]],u[f[p]]);if(_!==0)return _}return bt(l.length,f.length)}(t.mapValue,e.mapValue);default:throw Xe()}}function C2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return bt(t,e);const n=ga(t),r=ga(e),i=bt(n.seconds,r.seconds);return i!==0?i:bt(n.nanos,r.nanos)}function A2(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ec(n[i],r[i]);if(s)return s}return bt(n.length,r.length)}function bc(t){return vb(t)}function vb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ga(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Pl(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return $e.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=vb(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${vb(n.fields[o])}`;return i+"}"}(t.mapValue):Xe()}function P2(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _b(t){return!!t&&"integerValue"in t}function MS(t){return!!t&&"arrayValue"in t}function k2(t){return!!t&&"nullValue"in t}function O2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pm(t){return!!t&&"mapValue"in t}function YG(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function nd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Bl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=nd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function XG(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this.value=e}static empty(){return new Lr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!pm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nd(n)}setAll(e){let n=Kn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=nd(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());pm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Rs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];pm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Bl(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Lr(nd(this.value))}}function n6(t){const e=[];return Bl(t.fields,(n,r)=>{const i=new Kn([n]);if(pm(r)){const s=n6(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Jr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ur(e,0,et.min(),et.min(),et.min(),Lr.empty(),0)}static newFoundDocument(e,n,r,i){return new ur(e,1,n,et.min(),r,i,0)}static newNoDocument(e,n){return new ur(e,2,n,et.min(),et.min(),Lr.empty(),0)}static newUnknownDocument(e,n){return new ur(e,3,n,et.min(),et.min(),Lr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ur&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ur(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,n){this.position=e,this.inclusive=n}}function N2(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=$e.comparator($e.fromName(o.referenceValue),n.key):r=Ec(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function D2(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Rs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,n="asc"){this.field=e,this.dir=n}}function JG(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{}class _n extends r6{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new eQ(e,n,r):n==="array-contains"?new rQ(e,r):n==="in"?new iQ(e,r):n==="not-in"?new sQ(e,r):n==="array-contains-any"?new oQ(e,r):new _n(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new tQ(e,r):new nQ(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ec(n,this.value)):n!==null&&kl(this.value)===kl(n)&&this.matchesComparison(Ec(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yi extends r6{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Yi(e,n)}matches(e){return i6(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function i6(t){return t.op==="and"}function s6(t){return ZG(t)&&i6(t)}function ZG(t){for(const e of t.filters)if(e instanceof Yi)return!1;return!0}function wb(t){if(t instanceof _n)return t.field.canonicalString()+t.op.toString()+bc(t.value);if(s6(t))return t.filters.map(e=>wb(e)).join(",");{const e=t.filters.map(n=>wb(n)).join(",");return`${t.op}(${e})`}}function o6(t,e){return t instanceof _n?function(r,i){return i instanceof _n&&r.op===i.op&&r.field.isEqual(i.field)&&Rs(r.value,i.value)}(t,e):t instanceof Yi?function(r,i){return i instanceof Yi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&o6(o,i.filters[a]),!0):!1}(t,e):void Xe()}function a6(t){return t instanceof _n?function(n){return`${n.field.canonicalString()} ${n.op} ${bc(n.value)}`}(t):t instanceof Yi?function(n){return n.op.toString()+" {"+n.getFilters().map(a6).join(" ,")+"}"}(t):"Filter"}class eQ extends _n{constructor(e,n,r){super(e,n,r),this.key=$e.fromName(r.referenceValue)}matches(e){const n=$e.comparator(e.key,this.key);return this.matchesComparison(n)}}class tQ extends _n{constructor(e,n){super(e,"in",n),this.keys=l6("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class nQ extends _n{constructor(e,n){super(e,"not-in",n),this.keys=l6("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function l6(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>$e.fromName(r.referenceValue))}class rQ extends _n{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return MS(n)&&$d(n.arrayValue,this.value)}}class iQ extends _n{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$d(this.value.arrayValue,n)}}class sQ extends _n{constructor(e,n){super(e,"not-in",n)}matches(e){if($d(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!$d(this.value.arrayValue,n)}}class oQ extends _n{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!MS(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>$d(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aQ{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function L2(t,e=null,n=[],r=[],i=null,s=null,o=null){return new aQ(t,e,n,r,i,s,o)}function FS(t){const e=tt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>wb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ey(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bc(r)).join(",")),e.ue=n}return e.ue}function jS(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!JG(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!o6(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!D2(t.startAt,e.startAt)&&D2(t.endAt,e.endAt)}function Eb(t){return $e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function lQ(t,e,n,r,i,s,o,a){return new jc(t,e,n,r,i,s,o,a)}function by(t){return new jc(t)}function M2(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function u6(t){return t.collectionGroup!==null}function rd(t){const e=tt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Qn(Kn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new zd(s,r))}),n.has(Kn.keyField().canonicalString())||e.ce.push(new zd(Kn.keyField(),r))}return e.ce}function xs(t){const e=tt(t);return e.le||(e.le=uQ(e,rd(t))),e.le}function uQ(t,e){if(t.limitType==="F")return L2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new zd(i.field,s)});const n=t.endAt?new pg(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new pg(t.startAt.position,t.startAt.inclusive):null;return L2(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function bb(t,e){const n=t.filters.concat([e]);return new jc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function mg(t,e,n){return new jc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ty(t,e){return jS(xs(t),xs(e))&&t.limitType===e.limitType}function c6(t){return`${FS(xs(t))}|lt:${t.limitType}`}function Cu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>a6(i)).join(", ")}]`),Ey(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>bc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>bc(i)).join(",")),`Target(${r})`}(xs(t))}; limitType=${t.limitType})`}function Sy(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):$e.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of rd(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=N2(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,rd(r),i)||r.endAt&&!function(o,a,l){const u=N2(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,rd(r),i))}(t,e)}function cQ(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function f6(t){return(e,n)=>{let r=!1;for(const i of rd(t)){const s=fQ(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function fQ(t,e,n){const r=t.field.isKeyField()?$e.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Ec(l,u):Xe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Xe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Bl(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return e6(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dQ=new bn($e.comparator);function mo(){return dQ}const d6=new bn($e.comparator);function jf(...t){let e=d6;for(const n of t)e=e.insert(n.key,n);return e}function h6(t){let e=d6;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ul(){return id()}function p6(){return id()}function id(){return new Vc(t=>t.toString(),(t,e)=>t.isEqual(e))}const hQ=new bn($e.comparator),pQ=new Qn($e.comparator);function ht(...t){let e=pQ;for(const n of t)e=e.add(n);return e}const mQ=new Qn(bt);function gQ(){return mQ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hg(e)?"-0":e}}function m6(t){return{integerValue:""+t}}function yQ(t,e){return KG(e)?m6(e):VS(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(){this._=void 0}}function vQ(t,e,n){return t instanceof gg?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&DS(s)&&(s=LS(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Hd?y6(t,e):t instanceof qd?v6(t,e):function(i,s){const o=g6(i,s),a=F2(o)+F2(i.Pe);return _b(o)&&_b(i.Pe)?m6(a):VS(i.serializer,a)}(t,e)}function _Q(t,e,n){return t instanceof Hd?y6(t,e):t instanceof qd?v6(t,e):n}function g6(t,e){return t instanceof yg?function(r){return _b(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class gg extends xy{}class Hd extends xy{constructor(e){super(),this.elements=e}}function y6(t,e){const n=_6(e);for(const r of t.elements)n.some(i=>Rs(i,r))||n.push(r);return{arrayValue:{values:n}}}class qd extends xy{constructor(e){super(),this.elements=e}}function v6(t,e){let n=_6(e);for(const r of t.elements)n=n.filter(i=>!Rs(i,r));return{arrayValue:{values:n}}}class yg extends xy{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function F2(t){return fn(t.integerValue||t.doubleValue)}function _6(t){return MS(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function wQ(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Hd&&i instanceof Hd||r instanceof qd&&i instanceof qd?wc(r.elements,i.elements,Rs):r instanceof yg&&i instanceof yg?Rs(r.Pe,i.Pe):r instanceof gg&&i instanceof gg}(t.transform,e.transform)}class EQ{constructor(e,n){this.version=e,this.transformResults=n}}class wi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wi}static exists(e){return new wi(void 0,e)}static updateTime(e){return new wi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Iy{}function w6(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new US(t.key,wi.none()):new gh(t.key,t.data,wi.none());{const n=t.data,r=Lr.empty();let i=new Qn(Kn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Na(t.key,r,new Jr(i.toArray()),wi.none())}}function bQ(t,e,n){t instanceof gh?function(i,s,o){const a=i.value.clone(),l=V2(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Na?function(i,s,o){if(!mm(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=V2(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(E6(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function sd(t,e,n,r){return t instanceof gh?function(s,o,a,l){if(!mm(s.precondition,o))return a;const u=s.value.clone(),f=U2(s.fieldTransforms,l,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Na?function(s,o,a,l){if(!mm(s.precondition,o))return a;const u=U2(s.fieldTransforms,l,o),f=o.data;return f.setAll(E6(s)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return mm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function TQ(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=g6(r.transform,i||null);s!=null&&(n===null&&(n=Lr.empty()),n.set(r.field,s))}return n||null}function j2(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&wc(r,i,(s,o)=>wQ(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gh extends Iy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Na extends Iy{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function E6(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function V2(t,e,n){const r=new Map;Dt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,_Q(o,a,n[i]))}return r}function U2(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,vQ(s,o,e))}return r}class US extends Iy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SQ extends Iy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xQ{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&bQ(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=sd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=sd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=p6();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=w6(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(et.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ht())}isEqual(e){return this.batchId===e.batchId&&wc(this.mutations,e.mutations,(n,r)=>j2(n,r))&&wc(this.baseMutations,e.baseMutations,(n,r)=>j2(n,r))}}class BS{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Dt(e.mutations.length===r.length);let i=function(){return hQ}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new BS(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IQ{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RQ{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn,yt;function CQ(t){switch(t){default:return Xe();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function b6(t){if(t===void 0)return po("GRPC error has no .code"),he.UNKNOWN;switch(t){case gn.OK:return he.OK;case gn.CANCELLED:return he.CANCELLED;case gn.UNKNOWN:return he.UNKNOWN;case gn.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case gn.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case gn.INTERNAL:return he.INTERNAL;case gn.UNAVAILABLE:return he.UNAVAILABLE;case gn.UNAUTHENTICATED:return he.UNAUTHENTICATED;case gn.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case gn.NOT_FOUND:return he.NOT_FOUND;case gn.ALREADY_EXISTS:return he.ALREADY_EXISTS;case gn.PERMISSION_DENIED:return he.PERMISSION_DENIED;case gn.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case gn.ABORTED:return he.ABORTED;case gn.OUT_OF_RANGE:return he.OUT_OF_RANGE;case gn.UNIMPLEMENTED:return he.UNIMPLEMENTED;case gn.DATA_LOSS:return he.DATA_LOSS;default:return Xe()}}(yt=gn||(gn={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AQ(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PQ=new yl([4294967295,4294967295],0);function B2(t){const e=AQ().encode(t),n=new q3;return n.update(e),new Uint8Array(n.digest())}function $2(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new yl([n,r],0),new yl([i,s],0)]}class $S{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Vf(`Invalid padding: ${n}`);if(r<0)throw new Vf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vf(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Vf(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=yl.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(yl.fromNumber(r)));return i.compare(PQ)===1&&(i=new yl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=B2(e),[r,i]=$2(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new $S(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=B2(e),[r,i]=$2(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Vf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,yh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ry(et.min(),i,new bn(bt),mo(),ht())}}class yh{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new yh(r,n,ht(),ht(),ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class T6{constructor(e,n){this.targetId=e,this.me=n}}class S6{constructor(e,n,r=Xn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class z2{constructor(){this.fe=0,this.ge=q2(),this.pe=Xn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ht(),n=ht(),r=ht();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Xe()}}),new yh(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=q2()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Dt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class kQ{constructor(e){this.Le=e,this.Be=new Map,this.ke=mo(),this.qe=H2(),this.Qe=new bn(bt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Xe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Eb(s))if(r===0){const o=new $e(s.path);this.Ue(n,o,ur.newNoDocument(o,et.min()))}else Dt(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Pl(r).toUint8Array()}catch(l){if(l instanceof t6)return _c("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new $S(o,i,s)}catch(l){return _c(l instanceof Vf?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Eb(a.target)){const l=new $e(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,ur.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ht();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Ry(e,n,this.Qe,this.ke,r);return this.ke=mo(),this.qe=H2(),this.Qe=new bn(bt),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new z2,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Qn(bt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Ve("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new z2),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function H2(){return new bn($e.comparator)}function q2(){return new bn($e.comparator)}const OQ={asc:"ASCENDING",desc:"DESCENDING"},NQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DQ={and:"AND",or:"OR"};class LQ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Tb(t,e){return t.useProto3Json||Ey(e)?e:{value:e}}function vg(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function x6(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function MQ(t,e){return vg(t,e.toTimestamp())}function Is(t){return Dt(!!t),et.fromTimestamp(function(n){const r=ga(n);return new An(r.seconds,r.nanos)}(t))}function zS(t,e){return Sb(t,e).canonicalString()}function Sb(t,e){const n=function(i){return new zt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function I6(t){const e=zt.fromString(t);return Dt(k6(e)),e}function xb(t,e){return zS(t.databaseId,e.path)}function I0(t,e){const n=I6(e);if(n.get(1)!==t.databaseId.projectId)throw new Ne(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ne(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $e(C6(n))}function R6(t,e){return zS(t.databaseId,e)}function FQ(t){const e=I6(t);return e.length===4?zt.emptyPath():C6(e)}function Ib(t){return new zt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function C6(t){return Dt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function W2(t,e,n){return{name:xb(t,e),fields:n.value.mapValue.fields}}function jQ(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Xe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,f){return u.useProto3Json?(Dt(f===void 0||typeof f=="string"),Xn.fromBase64String(f||"")):(Dt(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Xn.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const f=u.code===void 0?he.UNKNOWN:b6(u.code);return new Ne(f,u.message||"")}(o);n=new S6(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=I0(t,r.document.name),s=Is(r.document.updateTime),o=r.document.createTime?Is(r.document.createTime):et.min(),a=new Lr({mapValue:{fields:r.document.fields}}),l=ur.newFoundDocument(i,s,o,a),u=r.targetIds||[],f=r.removedTargetIds||[];n=new gm(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=I0(t,r.document),s=r.readTime?Is(r.readTime):et.min(),o=ur.newNoDocument(i,s),a=r.removedTargetIds||[];n=new gm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=I0(t,r.document),s=r.removedTargetIds||[];n=new gm([],s,i,null)}else{if(!("filter"in e))return Xe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new RQ(i,s),a=r.targetId;n=new T6(a,o)}}return n}function VQ(t,e){let n;if(e instanceof gh)n={update:W2(t,e.key,e.value)};else if(e instanceof US)n={delete:xb(t,e.key)};else if(e instanceof Na)n={update:W2(t,e.key,e.data),updateMask:GQ(e.fieldMask)};else{if(!(e instanceof SQ))return Xe();n={verify:xb(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof gg)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Hd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof yg)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Xe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:MQ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Xe()}(t,e.precondition)),n}function UQ(t,e){return t&&t.length>0?(Dt(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Is(i.updateTime):Is(s);return o.isEqual(et.min())&&(o=Is(s)),new EQ(o,i.transformResults||[])}(n,e))):[]}function BQ(t,e){return{documents:[R6(t,e.path)]}}function $Q(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=R6(t,i);const s=function(u){if(u.length!==0)return P6(Yi.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(f=>function(y){return{field:Au(y.field),direction:qQ(y.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Tb(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function zQ(t){let e=FQ(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Dt(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(p){const y=A6(p);return y instanceof Yi&&s6(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(y=>function(E){return new zd(Pu(E.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(y))}(n.orderBy));let a=null;n.limit&&(a=function(p){let y;return y=typeof p=="object"?p.value:p,Ey(y)?null:y}(n.limit));let l=null;n.startAt&&(l=function(p){const y=!!p.before,_=p.values||[];return new pg(_,y)}(n.startAt));let u=null;return n.endAt&&(u=function(p){const y=!p.before,_=p.values||[];return new pg(_,y)}(n.endAt)),lQ(e,i,o,s,a,"F",l,u)}function HQ(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function A6(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Pu(n.unaryFilter.field);return _n.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Pu(n.unaryFilter.field);return _n.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Pu(n.unaryFilter.field);return _n.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Pu(n.unaryFilter.field);return _n.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Xe()}}(t):t.fieldFilter!==void 0?function(n){return _n.create(Pu(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Yi.create(n.compositeFilter.filters.map(r=>A6(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Xe()}}(n.compositeFilter.op))}(t):Xe()}function qQ(t){return OQ[t]}function WQ(t){return NQ[t]}function KQ(t){return DQ[t]}function Au(t){return{fieldPath:t.canonicalString()}}function Pu(t){return Kn.fromServerFormat(t.fieldPath)}function P6(t){return t instanceof _n?function(n){if(n.op==="=="){if(O2(n.value))return{unaryFilter:{field:Au(n.field),op:"IS_NAN"}};if(k2(n.value))return{unaryFilter:{field:Au(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(O2(n.value))return{unaryFilter:{field:Au(n.field),op:"IS_NOT_NAN"}};if(k2(n.value))return{unaryFilter:{field:Au(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Au(n.field),op:WQ(n.op),value:n.value}}}(t):t instanceof Yi?function(n){const r=n.getFilters().map(i=>P6(i));return r.length===1?r[0]:{compositeFilter:{op:KQ(n.op),filters:r}}}(t):Xe()}function GQ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function k6(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n,r,i,s=et.min(),o=et.min(),a=Xn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Xo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QQ{constructor(e){this.ct=e}}function YQ(t){const e=zQ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?mg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XQ{constructor(){this.un=new JQ}addToCollectionParentIndex(e,n){return this.un.add(n),ye.resolve()}getCollectionParents(e,n){return ye.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ye.resolve()}deleteFieldIndex(e,n){return ye.resolve()}deleteAllFieldIndexes(e){return ye.resolve()}createTargetIndexes(e,n){return ye.resolve()}getDocumentsMatchingTarget(e,n){return ye.resolve(null)}getIndexType(e,n){return ye.resolve(0)}getFieldIndexes(e,n){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,n){return ye.resolve(ma.min())}getMinOffsetFromCollectionGroup(e,n){return ye.resolve(ma.min())}updateCollectionGroup(e,n,r){return ye.resolve()}updateIndexEntries(e,n){return ye.resolve()}}class JQ{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Qn(zt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Qn(zt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Tc(0)}static kn(){return new Tc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZQ{constructor(){this.changes=new Vc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ur.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ye.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eY{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tY{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&sd(r.mutation,i,Jr.empty(),An.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ht()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ht()){const i=ul();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=jf();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ul();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ht()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=mo();const o=id(),a=function(){return id()}();return n.forEach((l,u)=>{const f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof Na)?s=s.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),sd(f.mutation,u,f.mutation.getFieldMask(),An.now())):o.set(u.key,Jr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,f)=>o.set(u,f)),n.forEach((u,f)=>{var p;return a.set(u,new eY(f,(p=o.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=id();let i=new bn((o,a)=>o-a),s=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let f=r.get(l)||Jr.empty();f=a.applyToLocalView(u,f),r.set(l,f);const p=(i.get(a.batchId)||ht()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,f=l.value,p=p6();f.forEach(y=>{if(!s.has(y)){const _=w6(n.get(y),r.get(y));_!==null&&p.set(y,_),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return ye.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return $e.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):u6(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):ye.resolve(ul());let a=-1,l=s;return o.next(u=>ye.forEach(u,(f,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(f)?ye.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{l=l.insert(f,y)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,ht())).next(f=>({batchId:a,changes:h6(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $e(n)).next(r=>{let i=jf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=jf();return this.indexManager.getCollectionParents(e,s).next(a=>ye.forEach(a,l=>{const u=function(p,y){return new jc(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(f=>{f.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const f=u.getKey();o.get(f)===null&&(o=o.insert(f,ur.newInvalidDocument(f)))});let a=jf();return o.forEach((l,u)=>{const f=s.get(l);f!==void 0&&sd(f.mutation,u,Jr.empty(),An.now()),Sy(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nY{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ye.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Is(i.createTime)}}(n)),ye.resolve()}getNamedQuery(e,n){return ye.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:YQ(i.bundledQuery),readTime:Is(i.readTime)}}(n)),ye.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rY{constructor(){this.overlays=new bn($e.comparator),this.Ir=new Map}getOverlay(e,n){return ye.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ul();return ye.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),ye.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),ye.resolve()}getOverlaysForCollection(e,n,r){const i=ul(),s=n.length+1,o=new $e(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return ye.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new bn((u,f)=>u-f);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=s.get(u.largestBatchId);f===null&&(f=ul(),s=s.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const a=ul(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,f)=>a.set(u,f)),!(a.size()>=i)););return ye.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new IQ(n,r));let s=this.Ir.get(n);s===void 0&&(s=ht(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iY{constructor(){this.sessionToken=Xn.EMPTY_BYTE_STRING}getSessionToken(e){return ye.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ye.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(){this.Tr=new Qn(Ln.Er),this.dr=new Qn(Ln.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ln(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ln(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new $e(new zt([])),r=new Ln(n,e),i=new Ln(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new $e(new zt([])),r=new Ln(n,e),i=new Ln(n,e+1);let s=ht();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ln(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ln{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return $e.comparator(e.key,n.key)||bt(e.wr,n.wr)}static Ar(e,n){return bt(e.wr,n.wr)||$e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sY{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Qn(Ln.Er)}checkEmpty(e){return ye.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new xQ(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Ln(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ye.resolve(o)}lookupMutationBatch(e,n){return ye.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return ye.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ln(n,0),i=new Ln(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),ye.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qn(bt);return n.forEach(i=>{const s=new Ln(i,0),o=new Ln(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),ye.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;$e.isDocumentKey(s)||(s=s.child(""));const o=new Ln(new $e(s),0);let a=new Qn(bt);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),ye.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Dt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ye.forEach(n.mutations,i=>{const s=new Ln(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ln(n,0),i=this.br.firstAfterOrEqual(r);return ye.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ye.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oY{constructor(e){this.Mr=e,this.docs=function(){return new bn($e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ye.resolve(r?r.document.mutableCopy():ur.newInvalidDocument(n))}getEntries(e,n){let r=mo();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ur.newInvalidDocument(i))}),ye.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=mo();const o=n.path,a=new $e(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||zG($G(f),r)<=0||(i.has(f.key)||Sy(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return ye.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Xe()}Or(e,n){return ye.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new aY(this)}getSize(e){return ye.resolve(this.size)}}class aY extends ZQ{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),ye.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lY{constructor(e){this.persistence=e,this.Nr=new Vc(n=>FS(n),jS),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.Lr=0,this.Br=new HS,this.targetCount=0,this.kr=Tc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),ye.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Tc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ye.resolve()}updateTargetData(e,n){return this.Kn(n),ye.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ye.waitFor(s).next(()=>i)}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return ye.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),ye.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),ye.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ye.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return ye.resolve(r)}containsKey(e,n){return ye.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uY{constructor(e,n){this.qr={},this.overlays={},this.Qr=new NS(0),this.Kr=!1,this.Kr=!0,this.$r=new iY,this.referenceDelegate=e(this),this.Ur=new lY(this),this.indexManager=new XQ,this.remoteDocumentCache=function(i){return new oY(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new QQ(n),this.Gr=new nY(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rY,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new sY(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Ve("MemoryPersistence","Starting transaction:",e);const i=new cY(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return ye.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class cY extends qG{constructor(e){super(),this.currentSequenceNumber=e}}class qS{constructor(e){this.persistence=e,this.Jr=new HS,this.Yr=null}static Zr(e){return new qS(e)}get Xr(){if(this.Yr)return this.Yr;throw Xe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),ye.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),ye.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ye.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.Xr,r=>{const i=$e.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,et.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ye.or([()=>ye.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ht(),i=ht();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new WS(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fY{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dY{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return LH()?8:WG(gr())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new fY;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Tf()<=dt.DEBUG&&Ve("QueryEngine","SDK will not create cache indexes for query:",Cu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ye.resolve()):(Tf()<=dt.DEBUG&&Ve("QueryEngine","Query:",Cu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Tf()<=dt.DEBUG&&Ve("QueryEngine","The SDK decides to create cache indexes for query:",Cu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xs(n))):ye.resolve())}Yi(e,n){if(M2(n))return ye.resolve(null);let r=xs(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=mg(n,null,"F"),r=xs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ht(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,mg(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return M2(n)||i.isEqual(et.min())?ye.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?ye.resolve(null):(Tf()<=dt.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Cu(n)),this.rs(e,o,n,BG(i,-1)).next(a=>a))})}ts(e,n){let r=new Qn(f6(e));return n.forEach((i,s)=>{Sy(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Tf()<=dt.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",Cu(n)),this.Ji.getDocumentsMatchingQuery(e,n,ma.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hY{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new bn(bt),this._s=new Vc(s=>FS(s),jS),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tY(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function pY(t,e,n,r){return new hY(t,e,n,r)}async function O6(t,e){const n=tt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ht();for(const u of i){o.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of s){a.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function mY(t,e){const n=tt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,f){const p=u.batch,y=p.keys();let _=ye.resolve();return y.forEach(E=>{_=_.next(()=>f.getEntry(l,E)).next(S=>{const I=u.docVersions.get(E);Dt(I!==null),S.version.compareTo(I)<0&&(p.applyToRemoteDocument(S,u),S.isValidDocument()&&(S.setReadTime(u.commitVersion),f.addEntry(S)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ht();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function N6(t){const e=tt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function gY(t,e){const n=tt(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((f,p)=>{const y=i.get(p);if(!y)return;a.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,p)));let _=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(Xn.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),i=i.insert(p,_),function(S,I,R){return S.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(y,_,f)&&a.push(n.Ur.updateTargetData(s,_))});let l=mo(),u=ht();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(yY(s,o,e.documentUpdates).next(f=>{l=f.Ps,u=f.Is})),!r.isEqual(et.min())){const f=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return ye.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function yY(t,e,n){let r=ht(),i=ht();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=mo();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(et.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ve("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function vY(t,e){const n=tt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _Y(t,e){const n=tt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,ye.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Xo(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Rb(t,e,n){const r=tt(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!mh(o))throw o;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function K2(t,e,n){const r=tt(t);let i=et.min(),s=ht();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,f){const p=tt(l),y=p._s.get(f);return y!==void 0?ye.resolve(p.os.get(y)):p.Ur.getTargetData(u,f)}(r,o,xs(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:et.min(),n?s:ht())).next(a=>(wY(r,cQ(e),a),{documents:a,Ts:s})))}function wY(t,e,n){let r=t.us.get(e)||et.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class G2{constructor(){this.activeTargetIds=gQ()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class EY{constructor(){this.so=new G2,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new G2,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bY{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fp=null;function R0(){return Fp===null?Fp=function(){return 268435456+Math.round(2147483648*Math.random())}():Fp++,"0x"+Fp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SY{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or="WebChannelConnection";class xY extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=R0(),l=this.xo(n,r.toUriEncodedString());Ve("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(f=>(Ve("RestConnection",`Received RPC '${n}' ${a}: `,f),f),f=>{throw _c("RestConnection",`RPC '${n}' ${a} failed with error: `,f,"url: ",l,"request:",i),f})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=TY[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=R0();return new Promise((o,a)=>{const l=new W3;l.setWithCredentials(!0),l.listenOnce(G3.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case hm.NO_ERROR:const f=l.getResponseJson();Ve(or,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case hm.TIMEOUT:Ve(or,`RPC '${e}' ${s} timed out`),a(new Ne(he.DEADLINE_EXCEEDED,"Request time out"));break;case hm.HTTP_ERROR:const p=l.getStatus();if(Ve(or,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);const _=y==null?void 0:y.error;if(_&&_.status&&_.message){const E=function(I){const R=I.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(R)>=0?R:he.UNKNOWN}(_.status);a(new Ne(E,_.message))}else a(new Ne(he.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Ne(he.UNAVAILABLE,"Connection failed."));break;default:Xe()}}finally{Ve(or,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Ve(or,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=R0(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=X3(),a=Y3(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new K3({})),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const f=s.join("");Ve(or,`Creating RPC '${e}' stream ${i}: ${f}`,l);const p=o.createWebChannel(f,l);let y=!1,_=!1;const E=new SY({Io:I=>{_?Ve(or,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(y||(Ve(or,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),Ve(or,`RPC '${e}' stream ${i} sending:`,I),p.send(I))},To:()=>p.close()}),S=(I,R,w)=>{I.listen(R,v=>{try{w(v)}catch(C){setTimeout(()=>{throw C},0)}})};return S(p,Ff.EventType.OPEN,()=>{_||(Ve(or,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),S(p,Ff.EventType.CLOSE,()=>{_||(_=!0,Ve(or,`RPC '${e}' stream ${i} transport closed`),E.So())}),S(p,Ff.EventType.ERROR,I=>{_||(_=!0,_c(or,`RPC '${e}' stream ${i} transport errored:`,I),E.So(new Ne(he.UNAVAILABLE,"The operation could not be completed")))}),S(p,Ff.EventType.MESSAGE,I=>{var R;if(!_){const w=I.data[0];Dt(!!w);const v=w,C=v.error||((R=v[0])===null||R===void 0?void 0:R.error);if(C){Ve(or,`RPC '${e}' stream ${i} received error:`,C);const k=C.status;let B=function(N){const L=gn[N];if(L!==void 0)return b6(L)}(k),D=C.message;B===void 0&&(B=he.INTERNAL,D="Unknown error status: "+k+" with message "+C.message),_=!0,E.So(new Ne(B,D)),p.close()}else Ve(or,`RPC '${e}' stream ${i} received:`,w),E.bo(w)}}),S(a,Q3.STAT_EVENT,I=>{I.stat===gb.PROXY?Ve(or,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===gb.NOPROXY&&Ve(or,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}function C0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(t){return new LQ(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new D6(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===he.RESOURCE_EXHAUSTED?(po(n.toString()),po("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===he.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Ne(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class IY extends L6{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=jQ(this.serializer,e),r=function(s){if(!("targetChange"in s))return et.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?et.min():o.readTime?Is(o.readTime):et.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Ib(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Eb(l)?{documents:BQ(s,l)}:{query:$Q(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=x6(s,o.resumeToken);const u=Tb(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(et.min())>0){a.readTime=vg(s,o.snapshotVersion.toTimestamp());const u=Tb(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=HQ(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Ib(this.serializer),n.removeTarget=e,this.a_(n)}}class RY extends L6{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,Dt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=UQ(e.writeResults,e.commitTime),r=Is(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Ib(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>VQ(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CY extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Ne(he.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Sb(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ne(he.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Sb(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ne(he.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class AY{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(po(n),this.D_=!1):Ve("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PY{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{$l(this)&&(Ve("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=tt(l);u.L_.add(4),await vh(u),u.q_.set("Unknown"),u.L_.delete(4),await Ay(u)}(this))})}),this.q_=new AY(r,i)}}async function Ay(t){if($l(t))for(const e of t.B_)await e(!0)}async function vh(t){for(const e of t.B_)await e(!1)}function M6(t,e){const n=tt(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),YS(n)?QS(n):Uc(n).r_()&&GS(n,e))}function KS(t,e){const n=tt(t),r=Uc(n);n.N_.delete(e),r.r_()&&F6(n,e),n.N_.size===0&&(r.r_()?r.o_():$l(n)&&n.q_.set("Unknown"))}function GS(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(et.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Uc(t).A_(e)}function F6(t,e){t.Q_.xe(e),Uc(t).R_(e)}function QS(t){t.Q_=new kQ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Uc(t).start(),t.q_.v_()}function YS(t){return $l(t)&&!Uc(t).n_()&&t.N_.size>0}function $l(t){return tt(t).L_.size===0}function j6(t){t.Q_=void 0}async function kY(t){t.q_.set("Online")}async function OY(t){t.N_.forEach((e,n)=>{GS(t,e)})}async function NY(t,e){j6(t),YS(t)?(t.q_.M_(e),QS(t)):t.q_.set("Unknown")}async function DY(t,e,n){if(t.q_.set("Online"),e instanceof S6&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _g(t,r)}else if(e instanceof gm?t.Q_.Ke(e):e instanceof T6?t.Q_.He(e):t.Q_.We(e),!n.isEqual(et.min()))try{const r=await N6(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=s.N_.get(u);f&&s.N_.set(u,f.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const f=s.N_.get(l);if(!f)return;s.N_.set(l,f.withResumeToken(Xn.EMPTY_BYTE_STRING,f.snapshotVersion)),F6(s,l);const p=new Xo(f.target,l,u,f.sequenceNumber);GS(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),await _g(t,r)}}async function _g(t,e,n){if(!mh(e))throw e;t.L_.add(1),await vh(t),t.q_.set("Offline"),n||(n=()=>N6(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ve("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ay(t)})}function V6(t,e){return e().catch(n=>_g(t,n,e))}async function Py(t){const e=tt(t),n=ya(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;LY(e);)try{const i=await vY(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,MY(e,i)}catch(i){await _g(e,i)}U6(e)&&B6(e)}function LY(t){return $l(t)&&t.O_.length<10}function MY(t,e){t.O_.push(e);const n=ya(t);n.r_()&&n.V_&&n.m_(e.mutations)}function U6(t){return $l(t)&&!ya(t).n_()&&t.O_.length>0}function B6(t){ya(t).start()}async function FY(t){ya(t).p_()}async function jY(t){const e=ya(t);for(const n of t.O_)e.m_(n.mutations)}async function VY(t,e,n){const r=t.O_.shift(),i=BS.from(r,e,n);await V6(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Py(t)}async function UY(t,e){e&&ya(t).V_&&await async function(r,i){if(function(o){return CQ(o)&&o!==he.ABORTED}(i.code)){const s=r.O_.shift();ya(r).s_(),await V6(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Py(r)}}(t,e),U6(t)&&B6(t)}async function Y2(t,e){const n=tt(t);n.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=$l(n);n.L_.add(3),await vh(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ay(n)}async function BY(t,e){const n=tt(t);e?(n.L_.delete(2),await Ay(n)):e||(n.L_.add(2),await vh(n),n.q_.set("Unknown"))}function Uc(t){return t.K_||(t.K_=function(n,r,i){const s=tt(n);return s.w_(),new IY(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:kY.bind(null,t),Ro:OY.bind(null,t),mo:NY.bind(null,t),d_:DY.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),YS(t)?QS(t):t.q_.set("Unknown")):(await t.K_.stop(),j6(t))})),t.K_}function ya(t){return t.U_||(t.U_=function(n,r,i){const s=tt(n);return s.w_(),new RY(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:FY.bind(null,t),mo:UY.bind(null,t),f_:jY.bind(null,t),g_:VY.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Py(t)):(await t.U_.stop(),t.O_.length>0&&(Ve("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new no,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new XS(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function JS(t,e){if(po("AsyncQueue",`${e}: ${t}`),mh(t))return new Ne(he.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e){this.comparator=e?(n,r)=>e(n,r)||$e.comparator(n.key,r.key):(n,r)=>$e.comparator(n.key,r.key),this.keyedMap=jf(),this.sortedSet=new bn(this.comparator)}static emptySet(e){return new rc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof rc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new rc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(){this.W_=new bn($e.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Xe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Sc{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Sc(e,n,rc.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ty(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Y{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class zY{constructor(){this.queries=J2(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=tt(n),s=i.queries;i.queries=J2(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Ne(he.ABORTED,"Firestore shutting down"))}}function J2(){return new Vc(t=>c6(t),Ty)}async function ZS(t,e){const n=tt(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new $Y,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=JS(o,`Initialization of query '${Cu(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&tx(n)}async function ex(t,e){const n=tt(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function HY(t,e){const n=tt(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&tx(n)}function qY(t,e,n){const r=tt(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function tx(t){t.Y_.forEach(e=>{e.next()})}var Cb,Z2;(Z2=Cb||(Cb={})).ea="default",Z2.Cache="cache";class nx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Sc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Sc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Cb.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e){this.key=e}}class z6{constructor(e){this.key=e}}class WY{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ht(),this.mutatedKeys=ht(),this.Aa=f6(e),this.Ra=new rc(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new X2,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{const y=i.get(f),_=Sy(this.query,p)?p:null,E=!!y&&this.mutatedKeys.has(y.key),S=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let I=!1;y&&_?y.data.isEqual(_.data)?E!==S&&(r.track({type:3,doc:_}),I=!0):this.ga(y,_)||(r.track({type:2,doc:_}),I=!0,(l&&this.Aa(_,l)>0||u&&this.Aa(_,u)<0)&&(a=!0)):!y&&_?(r.track({type:0,doc:_}),I=!0):y&&!_&&(r.track({type:1,doc:y}),I=!0,(l||u)&&(a=!0)),I&&(_?(o=o.add(_),s=S?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(_,E){const S=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe()}};return S(_)-S(E)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new Sc(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new X2,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ht(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new z6(r))}),this.da.forEach(r=>{e.has(r)||n.push(new $6(r))}),n}ba(e){this.Ta=e.Ts,this.da=ht();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Sc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class KY{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class GY{constructor(e){this.key=e,this.va=!1}}class QY{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Vc(a=>c6(a),Ty),this.Ma=new Map,this.xa=new Set,this.Oa=new bn($e.comparator),this.Na=new Map,this.La=new HS,this.Ba={},this.ka=new Map,this.qa=Tc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function YY(t,e,n=!0){const r=Q6(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await H6(r,e,n,!0),i}async function XY(t,e){const n=Q6(t);await H6(n,e,!0,!1)}async function H6(t,e,n,r){const i=await _Y(t.localStore,xs(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await JY(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&M6(t.remoteStore,i),a}async function JY(t,e,n,r,i){t.Ka=(p,y,_)=>async function(S,I,R,w){let v=I.view.ma(R);v.ns&&(v=await K2(S.localStore,I.query,!1).then(({documents:D})=>I.view.ma(D,v)));const C=w&&w.targetChanges.get(I.targetId),k=w&&w.targetMismatches.get(I.targetId)!=null,B=I.view.applyChanges(v,S.isPrimaryClient,C,k);return tA(S,I.targetId,B.wa),B.snapshot}(t,p,y,_);const s=await K2(t.localStore,e,!0),o=new WY(e,s.Ts),a=o.ma(s.documents),l=yh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);tA(t,n,u.wa);const f=new KY(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function ZY(t,e,n){const r=tt(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Ty(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Rb(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&KS(r.remoteStore,i.targetId),Ab(r,i.targetId)}).catch(ph)):(Ab(r,i.targetId),await Rb(r.localStore,i.targetId,!0))}async function eX(t,e){const n=tt(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),KS(n.remoteStore,r.targetId))}async function tX(t,e,n){const r=lX(t);try{const i=await function(o,a){const l=tt(o),u=An.now(),f=a.reduce((_,E)=>_.add(E.key),ht());let p,y;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let E=mo(),S=ht();return l.cs.getEntries(_,f).next(I=>{E=I,E.forEach((R,w)=>{w.isValidDocument()||(S=S.add(R))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,E)).next(I=>{p=I;const R=[];for(const w of a){const v=TQ(w,p.get(w.key).overlayedDocument);v!=null&&R.push(new Na(w.key,v,n6(v.value.mapValue),wi.exists(!0)))}return l.mutationQueue.addMutationBatch(_,u,R,a)}).next(I=>{y=I;const R=I.applyToLocalDocumentSet(p,S);return l.documentOverlayCache.saveOverlays(_,I.batchId,R)})}).then(()=>({batchId:y.batchId,changes:h6(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new bn(bt)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await _h(r,i.changes),await Py(r.remoteStore)}catch(i){const s=JS(i,"Failed to persist write");n.reject(s)}}async function q6(t,e){const n=tt(t);try{const r=await gY(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Dt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Dt(o.va):i.removedDocuments.size>0&&(Dt(o.va),o.va=!1))}),await _h(n,r,e)}catch(r){await ph(r)}}function eA(t,e,n){const r=tt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=tt(o);l.onlineState=a;let u=!1;l.queries.forEach((f,p)=>{for(const y of p.j_)y.Z_(a)&&(u=!0)}),u&&tx(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function nX(t,e,n){const r=tt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new bn($e.comparator);o=o.insert(s,ur.newNoDocument(s,et.min()));const a=ht().add(s),l=new Ry(et.min(),new Map,new bn(bt),o,a);await q6(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),rx(r)}else await Rb(r.localStore,e,!1).then(()=>Ab(r,e,n)).catch(ph)}async function rX(t,e){const n=tt(t),r=e.batch.batchId;try{const i=await mY(n.localStore,e);K6(n,r,null),W6(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await _h(n,i)}catch(i){await ph(i)}}async function iX(t,e,n){const r=tt(t);try{const i=await function(o,a){const l=tt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return l.mutationQueue.lookupMutationBatch(u,a).next(p=>(Dt(p!==null),f=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>l.localDocuments.getDocuments(u,f))})}(r.localStore,e);K6(r,e,n),W6(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await _h(r,i)}catch(i){await ph(i)}}function W6(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function K6(t,e,n){const r=tt(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ab(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||G6(t,r)})}function G6(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(KS(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),rx(t))}function tA(t,e,n){for(const r of n)r instanceof $6?(t.La.addReference(r.key,e),sX(t,r)):r instanceof z6?(Ve("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||G6(t,r.key)):Xe()}function sX(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Ve("SyncEngine","New document in limbo: "+n),t.xa.add(r),rx(t))}function rx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new $e(zt.fromString(e)),r=t.qa.next();t.Na.set(r,new GY(n)),t.Oa=t.Oa.insert(n,r),M6(t.remoteStore,new Xo(xs(by(n.path)),r,"TargetPurposeLimboResolution",NS.oe))}}async function _h(t,e,n){const r=tt(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var f;if((u||n)&&r.isPrimaryClient){const p=u?!u.fromCache:(f=n==null?void 0:n.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){i.push(u);const p=WS.Wi(l.targetId,u);s.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const f=tt(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>ye.forEach(u,y=>ye.forEach(y.$i,_=>f.persistence.referenceDelegate.addReference(p,y.targetId,_)).next(()=>ye.forEach(y.Ui,_=>f.persistence.referenceDelegate.removeReference(p,y.targetId,_)))))}catch(p){if(!mh(p))throw p;Ve("LocalStore","Failed to update sequence numbers: "+p)}for(const p of u){const y=p.targetId;if(!p.fromCache){const _=f.os.get(y),E=_.snapshotVersion,S=_.withLastLimboFreeSnapshotVersion(E);f.os=f.os.insert(y,S)}}}(r.localStore,s))}async function oX(t,e){const n=tt(t);if(!n.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=await O6(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new Ne(he.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _h(n,r.hs)}}function aX(t,e){const n=tt(t),r=n.Na.get(e);if(r&&r.va)return ht().add(r.key);{let i=ht();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function Q6(t){const e=tt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=q6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aX.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nX.bind(null,e),e.Ca.d_=HY.bind(null,e.eventManager),e.Ca.$a=qY.bind(null,e.eventManager),e}function lX(t){const e=tt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rX.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iX.bind(null,e),e}class nA{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Cy(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return pY(this.persistence,new dY,e.initialUser,this.serializer)}createPersistence(e){return new uY(qS.Zr,this.serializer)}createSharedClientState(e){return new EY}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class uX{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>eA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=oX.bind(null,this.syncEngine),await BY(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zY}()}createDatastore(e){const n=Cy(e.databaseInfo.databaseId),r=function(s){return new xY(s)}(e.databaseInfo);return function(s,o,a,l){return new CY(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new PY(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>eA(this.syncEngine,n,0),function(){return Q2.D()?new Q2:new bY}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,f){const p=new QY(i,s,o,a,l,u);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=tt(i);Ve("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await vh(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):po("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cX{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ar.UNAUTHENTICATED,this.clientId=Z3.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Ve("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Ve("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new no;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=JS(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function A0(t,e){t.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await O6(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function rA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await dX(t);Ve("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Y2(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Y2(e.remoteStore,i)),t._onlineComponents=e}function fX(t){return t.name==="FirebaseError"?t.code===he.FAILED_PRECONDITION||t.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function dX(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ve("FirestoreClient","Using user provided OfflineComponentProvider");try{await A0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!fX(n))throw n;_c("Error using user provided cache. Falling back to memory cache: "+n),await A0(t,new nA)}}else Ve("FirestoreClient","Using default OfflineComponentProvider"),await A0(t,new nA);return t._offlineComponents}async function Y6(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ve("FirestoreClient","Using user provided OnlineComponentProvider"),await rA(t,t._uninitializedComponentsProvider._online)):(Ve("FirestoreClient","Using default OnlineComponentProvider"),await rA(t,new uX))),t._onlineComponents}function hX(t){return Y6(t).then(e=>e.syncEngine)}async function wg(t){const e=await Y6(t),n=e.eventManager;return n.onListen=YY.bind(null,e.syncEngine),n.onUnlisten=ZY.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=XY.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=eX.bind(null,e.syncEngine),n}function pX(t,e,n={}){const r=new no;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const f=new ix({next:y=>{o.enqueueAndForget(()=>ex(s,p));const _=y.docs.has(a);!_&&y.fromCache?u.reject(new Ne(he.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&y.fromCache&&l&&l.source==="server"?u.reject(new Ne(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(y)},error:y=>u.reject(y)}),p=new nx(by(a.path),f,{includeMetadataChanges:!0,_a:!0});return ZS(s,p)}(await wg(t),t.asyncQueue,e,n,r)),r.promise}function mX(t,e,n={}){const r=new no;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const f=new ix({next:y=>{o.enqueueAndForget(()=>ex(s,p)),y.fromCache&&l.source==="server"?u.reject(new Ne(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(y)},error:y=>u.reject(y)}),p=new nx(a,f,{includeMetadataChanges:!0,_a:!0});return ZS(s,p)}(await wg(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J6(t,e,n){if(!n)throw new Ne(he.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gX(t,e,n,r){if(e===!0&&r===!0)throw new Ne(he.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function sA(t){if(!$e.isDocumentKey(t))throw new Ne(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function oA(t){if($e.isDocumentKey(t))throw new Ne(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ky(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Xe()}function Hr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ne(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ky(t);throw new Ne(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ne(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ne(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gX("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=X6((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ne(he.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ne(he.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ne(he.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Oy{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aA({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ne(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Ne(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aA(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new OG;switch(r.type){case"firstParty":return new MG(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ne(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=iA.get(n);r&&(Ve("ComponentProvider","Removing Datastore"),iA.delete(n),r.terminate())}(this),Promise.resolve()}}function yX(t,e,n,r={}){var i;const s=(t=Hr(t,Oy))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&_c("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=ar.MOCK_USER;else{a=vS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Ne(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ar(u)}t._authCredentials=new NG(new J3(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bo(this.firestore,e,this._query)}}class pr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ca(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pr(this.firestore,e,this._key)}}class ca extends bo{constructor(e,n,r){super(e,n,by(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pr(this.firestore,null,new $e(e))}withConverter(e){return new ca(this.firestore,e,this._path)}}function St(t,e,...n){if(t=Lt(t),J6("collection","path",e),t instanceof Oy){const r=zt.fromString(e,...n);return oA(r),new ca(t,null,r)}{if(!(t instanceof pr||t instanceof ca))throw new Ne(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(zt.fromString(e,...n));return oA(r),new ca(t.firestore,null,r)}}function Vn(t,e,...n){if(t=Lt(t),arguments.length===1&&(e=Z3.newId()),J6("doc","path",e),t instanceof Oy){const r=zt.fromString(e,...n);return sA(r),new pr(t,null,new $e(r))}{if(!(t instanceof pr||t instanceof ca))throw new Ne(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(zt.fromString(e,...n));return sA(r),new pr(t.firestore,t instanceof ca?t.converter:null,new $e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vX{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new D6(this,"async_queue_retry"),this.Eu=()=>{const n=C0();n&&Ve("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=C0();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=C0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new no;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!mh(e))throw e;Ve("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw po("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const i=XS.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&Xe()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}function lA(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class go extends Oy{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new vX}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Z6(this),this._firestoreClient.terminate()}}function _X(t,e){const n=typeof t=="object"?t:my(),r=typeof t=="string"?t:"(default)",i=uh(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=gS("firestore");s&&yX(i,...s)}return i}function Ny(t){return t._firestoreClient||Z6(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Z6(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,f){return new QG(a,l,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,X6(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new cX(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xc(Xn.fromBase64String(e))}catch(n){throw new Ne(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xc(Xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ne(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ne(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ne(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return bt(this._lat,e._lat)||bt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wX=/^__.*__$/;class EX{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Na(e,this.data,this.fieldMask,n,this.fieldTransforms):new gh(e,this.data,n,this.fieldTransforms)}}class eM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Na(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function tM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe()}}class lx{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new lx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Eg(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(tM(this.wu)&&wX.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class bX{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Cy(e)}Nu(e,n,r,i=!1){return new lx({wu:e,methodName:n,Ou:r,path:Kn.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ly(t){const e=t._freezeSettings(),n=Cy(t._databaseId);return new bX(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nM(t,e,n,r,i,s={}){const o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);ux("Data must be an object, but it was:",o,r);const a=rM(r,o);let l,u;if(s.merge)l=new Jr(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const p of s.mergeFields){const y=Pb(e,p,n);if(!o.contains(y))throw new Ne(he.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);sM(f,y)||f.push(y)}l=new Jr(f),u=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=o.fieldTransforms;return new EX(new Lr(a),l,u)}class My extends sx{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof My}}function TX(t,e,n,r){const i=t.Nu(1,e,n);ux("Data must be an object, but it was:",i,r);const s=[],o=Lr.empty();Bl(r,(l,u)=>{const f=cx(e,l,n);u=Lt(u);const p=i.Cu(f);if(u instanceof My)s.push(f);else{const y=wh(u,p);y!=null&&(s.push(f),o.set(f,y))}});const a=new Jr(s);return new eM(o,a,i.fieldTransforms)}function SX(t,e,n,r,i,s){const o=t.Nu(1,e,n),a=[Pb(e,r,n)],l=[i];if(s.length%2!=0)throw new Ne(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(Pb(e,s[y])),l.push(s[y+1]);const u=[],f=Lr.empty();for(let y=a.length-1;y>=0;--y)if(!sM(u,a[y])){const _=a[y];let E=l[y];E=Lt(E);const S=o.Cu(_);if(E instanceof My)u.push(_);else{const I=wh(E,S);I!=null&&(u.push(_),f.set(_,I))}}const p=new Jr(u);return new eM(f,p,o.fieldTransforms)}function xX(t,e,n,r=!1){return wh(n,t.Nu(r?4:3,e))}function wh(t,e){if(iM(t=Lt(t)))return ux("Unsupported field value:",e,t),rM(t,e);if(t instanceof sx)return function(r,i){if(!tM(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=wh(a,i.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return yQ(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=An.fromDate(r);return{timestampValue:vg(i.serializer,s)}}if(r instanceof An){const s=new An(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vg(i.serializer,s)}}if(r instanceof ox)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xc)return{bytesValue:x6(i.serializer,r._byteString)};if(r instanceof pr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:zS(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ax)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Mu("VectorValues must only contain numeric values.");return VS(a.serializer,l)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${ky(r)}`)}(t,e)}function rM(t,e){const n={};return e6(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bl(t,(r,i)=>{const s=wh(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function iM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof An||t instanceof ox||t instanceof xc||t instanceof pr||t instanceof sx||t instanceof ax)}function ux(t,e,n){if(!iM(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=ky(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function Pb(t,e,n){if((e=Lt(e))instanceof Dy)return e._internalPath;if(typeof e=="string")return cx(t,e);throw Eg("Field path arguments must be of type string or ",t,!1,void 0,n)}const IX=new RegExp("[~\\*/\\[\\]]");function cx(t,e,n){if(e.search(IX)>=0)throw Eg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Dy(...e.split("."))._internalPath}catch{throw Eg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Eg(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Ne(he.INVALID_ARGUMENT,a+t+l)}function sM(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new pr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Fy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class RX extends oM{data(){return super.data()}}function Fy(t,e){return typeof e=="string"?cx(t,e):e instanceof Dy?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ne(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fx{}class dx extends fx{}function Hn(t,e,...n){let r=[];e instanceof fx&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof hx).length,a=s.filter(l=>l instanceof jy).length;if(o>1||o>0&&a>0)throw new Ne(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class jy extends dx{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new jy(e,n,r)}_apply(e){const n=this._parse(e);return lM(e._query,n),new bo(e.firestore,e.converter,bb(e._query,n))}_parse(e){const n=Ly(e.firestore);return function(s,o,a,l,u,f,p){let y;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Ne(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){cA(p,f);const _=[];for(const E of p)_.push(uA(l,s,E));y={arrayValue:{values:_}}}else y=uA(l,s,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||cA(p,f),y=xX(a,o,p,f==="in"||f==="not-in");return _n.create(u,f,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function br(t,e,n){const r=e,i=Fy("where",t);return jy._create(i,r,n)}class hx extends fx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hx(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Yi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)lM(o,l),o=bb(o,l)}(e._query,n),new bo(e.firestore,e.converter,bb(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class px extends dx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new px(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Ne(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ne(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zd(s,o)}(e._query,this._field,this._direction);return new bo(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new jc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function CX(t,e="asc"){const n=e,r=Fy("orderBy",t);return px._create(r,n)}class mx extends dx{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new mx(e,n,r)}_apply(e){return new bo(e.firestore,e.converter,mg(e._query,this._limit,this._limitType))}}function AX(t){return mx._create("limit",t,"F")}function uA(t,e,n){if(typeof(n=Lt(n))=="string"){if(n==="")throw new Ne(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!u6(e)&&n.indexOf("/")!==-1)throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(zt.fromString(n));if(!$e.isDocumentKey(r))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return P2(t,new $e(r))}if(n instanceof pr)return P2(t,n._key);throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ky(n)}.`)}function cA(t,e){if(!Array.isArray(t)||t.length===0)throw new Ne(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lM(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ne(he.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ne(he.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class PX{convertValue(e,n="none"){switch(kl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Pl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Xe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Bl(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>fn(o.doubleValue));return new ax(s)}convertGeoPoint(e){return new ox(fn(e.latitude),fn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=LS(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ud(e));default:return null}}convertTimestamp(e){const n=ga(e);return new An(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=zt.fromString(e);Dt(k6(r));const i=new Bd(r.get(1),r.get(3)),s=new $e(r.popFirst(5));return i.isEqual(n)||po(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cM extends oM{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ym(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Fy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ym extends cM{data(e={}){return super.data(e)}}class fM{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Uf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ym(this._firestore,this._userDataWriter,r.key,r,new Uf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ne(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new ym(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Uf(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new ym(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Uf(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:kX(a.type),doc:l,oldIndex:u,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function kX(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(t){t=Hr(t,pr);const e=Hr(t.firestore,go);return pX(Ny(e),t._key).then(n=>hM(e,t,n))}class gx extends PX{constructor(e){super(),this.firestore=e}convertBytes(e){return new xc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pr(this.firestore,null,n)}}function jn(t){t=Hr(t,bo);const e=Hr(t.firestore,go),n=Ny(e),r=new gx(e);return aM(t._query),mX(n,t._query).then(i=>new fM(e,r,t,i))}function bg(t,e,n){t=Hr(t,pr);const r=Hr(t.firestore,go),i=uM(t.converter,e);return Vy(r,[nM(Ly(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,wi.none())])}function gs(t,e,n,...r){t=Hr(t,pr);const i=Hr(t.firestore,go),s=Ly(i);let o;return o=typeof(e=Lt(e))=="string"||e instanceof Dy?SX(s,"updateDoc",t._key,e,n,r):TX(s,"updateDoc",t._key,e),Vy(i,[o.toMutation(t._key,wi.exists(!0))])}function dM(t){return Vy(Hr(t.firestore,go),[new US(t._key,wi.none())])}function Tg(t,e){const n=Hr(t.firestore,go),r=Vn(t),i=uM(t.converter,e);return Vy(n,[nM(Ly(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,wi.exists(!1))]).then(()=>r)}function ic(t,...e){var n,r,i;t=Lt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||lA(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(lA(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let l,u,f;if(t instanceof pr)u=Hr(t.firestore,go),f=by(t._key.path),l={next:p=>{e[o]&&e[o](hM(u,t,p))},error:e[o+1],complete:e[o+2]};else{const p=Hr(t,bo);u=Hr(p.firestore,go),f=p._query;const y=new gx(u);l={next:_=>{e[o]&&e[o](new fM(u,y,p,_))},error:e[o+1],complete:e[o+2]},aM(t._query)}return function(y,_,E,S){const I=new ix(S),R=new nx(_,I,E);return y.asyncQueue.enqueueAndForget(async()=>ZS(await wg(y),R)),()=>{I.za(),y.asyncQueue.enqueueAndForget(async()=>ex(await wg(y),R))}}(Ny(u),f,a,l)}function Vy(t,e){return function(r,i){const s=new no;return r.asyncQueue.enqueueAndForget(async()=>tX(await hX(r),i,s)),s.promise}(Ny(t),e)}function hM(t,e,n){const r=n.docs.get(e._key),i=new gx(t);return new cM(t,i,e._key,r,new Uf(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Fc=i})(Pa),pa(new co("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new go(new DG(r.getProvider("auth-internal")),new jG(r.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ne(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bd(u.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),_i(x2,"4.7.1",e),_i(x2,"4.7.1","esm2017")})();var fA={};const dA="@firebase/database",hA="1.0.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pM="";function OX(t){pM=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NX{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Wn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Dd(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DX{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return wo(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new NX(e)}}catch{}return new DX},cl=mM("localStorage"),LX=mM("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=new py("@firebase/database"),MX=function(){let t=1;return function(){return t++}}(),gM=function(t){const e=GH(t),n=new zH;n.update(e);const r=n.digest();return mS.encodeByteArray(r)},Eh=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Eh.apply(null,r):typeof r=="object"?e+=Wn(r):e+=r,e+=" "}return e};let od=null,pA=!0;const FX=function(t,e){Ae(!e,"Can't turn on custom loggers persistently."),sc.logLevel=dt.VERBOSE,od=sc.log.bind(sc)},cr=function(...t){if(pA===!0&&(pA=!1,od===null&&LX.get("logging_enabled")===!0&&FX()),od){const e=Eh.apply(null,t);od(e)}},bh=function(t){return function(...e){cr(t,...e)}},Ob=function(...t){const e="FIREBASE INTERNAL ERROR: "+Eh(...t);sc.error(e)},yo=function(...t){const e=`FIREBASE FATAL ERROR: ${Eh(...t)}`;throw sc.error(e),new Error(e)},ni=function(...t){const e="FIREBASE WARNING: "+Eh(...t);sc.warn(e)},jX=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ni("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},yM=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},VX=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ic="[MIN_NAME]",Ol="[MAX_NAME]",Bc=function(t,e){if(t===e)return 0;if(t===Ic||e===Ol)return-1;if(e===Ic||t===Ol)return 1;{const n=mA(t),r=mA(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},UX=function(t,e){return t===e?0:t<e?-1:1},Sf=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Wn(e))},yx=function(t){if(typeof t!="object"||t===null)return Wn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Wn(e[r]),n+=":",n+=yx(t[e[r]]);return n+="}",n},vM=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Si(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const _M=function(t){Ae(!yM(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const f=u.join("");let p="";for(l=0;l<64;l+=8){let y=parseInt(f.substr(l,8),2).toString(16);y.length===1&&(y="0"+y),p=p+y}return p.toLowerCase()},BX=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},$X=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},zX=new RegExp("^-?(0*)\\d{1,10}$"),HX=-2147483648,qX=2147483647,mA=function(t){if(zX.test(t)){const e=Number(t);if(e>=HX&&e<=qX)return e}return null},Th=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw ni("Exception was thrown by user callback.",n),e},Math.floor(0))}},WX=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ad=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KX{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ni(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GX{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(cr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ni(e)}}class vm{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}vm.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="5",wM="v",EM="s",bM="r",TM="f",SM=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,xM="ls",IM="p",Nb="ac",RM="websocket",CM="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=cl.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&cl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function QX(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function PM(t,e,n){Ae(typeof e=="string","typeof type must == string"),Ae(typeof n=="object","typeof params must == object");let r;if(e===RM)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===CM)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);QX(t)&&(n.ns=t.namespace);const i=[];return Si(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YX{constructor(){this.counters_={}}incrementCounter(e,n=1){wo(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return IH(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0={},k0={};function _x(t){const e=t.toString();return P0[e]||(P0[e]=new YX),P0[e]}function XX(t,e){const n=t.toString();return k0[n]||(k0[n]=e()),k0[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JX{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Th(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="start",ZX="close",eJ="pLPCommand",tJ="pRTLPCB",kM="id",OM="pw",NM="ser",nJ="cb",rJ="seg",iJ="ts",sJ="d",oJ="dframe",DM=1870,LM=30,aJ=DM-LM,lJ=25e3,uJ=3e4;class Wu{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bh(e),this.stats_=_x(n),this.urlFn=l=>(this.appCheckToken&&(l[Nb]=this.appCheckToken),PM(n,CM,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new JX(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(uJ)),VX(()=>{if(this.isClosed_)return;this.scriptTagHolder=new wx((...s)=>{const[o,a,l,u,f]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===gA)this.id=a,this.password=l;else if(o===ZX)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[gA]="t",r[NM]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[nJ]=this.scriptTagHolder.uniqueCallbackIdentifier),r[wM]=vx,this.transportSessionId&&(r[EM]=this.transportSessionId),this.lastSessionId&&(r[xM]=this.lastSessionId),this.applicationId&&(r[IM]=this.applicationId),this.appCheckToken&&(r[Nb]=this.appCheckToken),typeof location<"u"&&location.hostname&&SM.test(location.hostname)&&(r[bM]=TM);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Wu.forceAllow_=!0}static forceDisallow(){Wu.forceDisallow_=!0}static isAvailable(){return Wu.forceAllow_?!0:!Wu.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!BX()&&!$X()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Wn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=KL(n),i=vM(r,aJ);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[oJ]="t",r[kM]=e,r[OM]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Wn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class wx{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=MX(),window[eJ+this.uniqueCallbackIdentifier]=e,window[tJ+this.uniqueCallbackIdentifier]=n,this.myIFrame=wx.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){cr("frame writing exception"),a.stack&&cr(a.stack),cr(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||cr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[kM]=this.myID,e[OM]=this.myPW,e[NM]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+LM+r.length<=DM;){const o=this.pendingSegs.shift();r=r+"&"+rJ+i+"="+o.seg+"&"+iJ+i+"="+o.ts+"&"+sJ+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(lJ)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{cr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cJ=16384,fJ=45e3;let Sg=null;typeof MozWebSocket<"u"?Sg=MozWebSocket:typeof WebSocket<"u"&&(Sg=WebSocket);class Ui{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bh(this.connId),this.stats_=_x(n),this.connURL=Ui.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[wM]=vx,typeof location<"u"&&location.hostname&&SM.test(location.hostname)&&(o[bM]=TM),n&&(o[EM]=n),r&&(o[xM]=r),i&&(o[Nb]=i),s&&(o[IM]=s),PM(e,RM,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,cl.set("previous_websocket_failure",!0);try{let r;ZL(),this.mySock=new Sg(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Ui.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Sg!==null&&!Ui.forceDisallow_}static previouslyFailed(){return cl.isInMemoryStorage||cl.get("previous_websocket_failure")===!0}markConnectionHealthy(){cl.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Dd(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ae(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Wn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=vM(n,cJ);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(fJ))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ui.responsesRequiredToBeHealthy=2;Ui.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Wu,Ui]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Ui&&Ui.isAvailable();let r=n&&!Ui.previouslyFailed();if(e.webSocketOnly&&(n||ni("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ui];else{const i=this.transports_=[];for(const s of Wd.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Wd.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Wd.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dJ=6e4,hJ=5e3,pJ=10*1024,mJ=100*1024,O0="t",yA="d",gJ="s",vA="r",yJ="e",_A="o",wA="a",EA="n",bA="p",vJ="h";class _J{constructor(e,n,r,i,s,o,a,l,u,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bh("c:"+this.id+":"),this.transportManager_=new Wd(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ad(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>mJ?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>pJ?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(O0 in e){const n=e[O0];n===wA?this.upgradeIfSecondaryHealthy_():n===vA?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===_A&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Sf("t",e),r=Sf("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:bA,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:wA,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:EA,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Sf("t",e),r=Sf("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Sf(O0,e);if(yA in e){const r=e[yA];if(n===vJ){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===EA){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===gJ?this.onConnectionShutdown_(r):n===vA?this.onReset_(r):n===yJ?Ob("Server Error: "+r):n===_A?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ob("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),vx!==r&&ni("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ad(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(dJ))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ad(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(hJ))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:bA,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(cl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e){this.allowedEvents_=e,this.listeners_={},Ae(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){Ae(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg extends FM{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!_S()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new xg}getInitialEvent(e){return Ae(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=32,SA=768;class qt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function kt(){return new qt("")}function vt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function va(t){return t.pieces_.length-t.pieceNum_}function $t(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new qt(t.pieces_,e)}function jM(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function wJ(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function VM(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function UM(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new qt(e,0)}function Un(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof qt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new qt(n,0)}function pt(t){return t.pieceNum_>=t.pieces_.length}function yi(t,e){const n=vt(t),r=vt(e);if(n===null)return e;if(n===r)return yi($t(t),$t(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function BM(t,e){if(va(t)!==va(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Hi(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(va(t)>va(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class EJ{constructor(e,n){this.errorPrefix_=n,this.parts_=VM(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=hy(this.parts_[r]);$M(this)}}function bJ(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=hy(e),$M(t)}function TJ(t){const e=t.parts_.pop();t.byteLength_-=hy(e),t.parts_.length>0&&(t.byteLength_-=1)}function $M(t){if(t.byteLength_>SA)throw new Error(t.errorPrefix_+"has a key path longer than "+SA+" bytes ("+t.byteLength_+").");if(t.parts_.length>TA)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+TA+") or object contains a cycle "+el(t))}function el(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex extends FM{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Ex}getInitialEvent(e){return Ae(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf=1e3,SJ=60*5*1e3,xA=30*1e3,xJ=1.3,IJ=3e4,RJ="server_kill",IA=3;class ro extends MM{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=ro.nextPersistentConnectionId_++,this.log_=bh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=xf,this.maxReconnectDelay_=SJ,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!ZL())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ex.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&xg.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Wn(s)),Ae(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new yS,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),Ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ae(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,u=a.s;ro.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&wo(e,"w")){const r=yc(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();ni(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||$H(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=xA)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=BH(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),Ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Wn(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Ob("Unrecognized action received from server: "+Wn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ae(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=xf,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=xf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>IJ&&(this.reconnectDelay_=xf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*xJ)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+ro.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},u=function(p){Ae(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(p)};this.realtime_={close:l,sendRequest:u};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[p,y]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);o?cr("getToken() completed but was canceled"):(cr("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=y&&y.token,a=new _J(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,_=>{ni(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(RJ)},s))}catch(p){this.log_("Failed to get token: "+p),o||(this.repoInfo_.nodeAdmin&&ni(p),l())}}}interrupt(e){cr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){cr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ib(this.interruptReasons_)&&(this.reconnectDelay_=xf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>yx(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new qt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){cr("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=IA&&(this.reconnectDelay_=xA,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){cr("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=IA&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+pM.replace(/\./g,"-")]=1,_S()?e["framework.cordova"]=1:JL()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=xg.getInstance().currentlyOnline();return ib(this.interruptReasons_)&&e}}ro.nextPersistentConnectionId_=0;ro.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new _t(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new _t(Ic,e),i=new _t(Ic,n);return this.compare(r,i)!==0}minPost(){return _t.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jp;class zM extends Uy{static get __EMPTY_NODE(){return jp}static set __EMPTY_NODE(e){jp=e}compare(e,n){return Bc(e.name,n.name)}isDefinedOn(e){throw Dc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return _t.MIN}maxPost(){return new _t(Ol,jp)}makePost(e,n){return Ae(typeof e=="string","KeyIndex indexValue must always be a string."),new _t(e,jp)}toString(){return".key"}}const oc=new zM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Fn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Fn.RED,this.left=i??Fr.EMPTY_NODE,this.right=s??Fr.EMPTY_NODE}copy(e,n,r,i,s){return new Fn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Fr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Fr.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Fn.RED=!0;Fn.BLACK=!1;class CJ{copy(e,n,r,i,s){return this}insert(e,n,r){return new Fn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Fr{constructor(e,n=Fr.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Fr(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Fn.BLACK,null,null))}remove(e){return new Fr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Fn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Vp(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Vp(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Vp(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Vp(this.root_,null,this.comparator_,!0,e)}}Fr.EMPTY_NODE=new CJ;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AJ(t,e){return Bc(t.name,e.name)}function bx(t,e){return Bc(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Db;function PJ(t){Db=t}const HM=function(t){return typeof t=="number"?"number:"+_M(t):"string:"+t},qM=function(t){if(t.isLeafNode()){const e=t.val();Ae(typeof e=="string"||typeof e=="number"||typeof e=="object"&&wo(e,".sv"),"Priority must be a string or number.")}else Ae(t===Db||t.isEmpty(),"priority of unexpected type.");Ae(t===Db||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RA;class Dn{constructor(e,n=Dn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Ae(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),qM(this.priorityNode_)}static set __childrenNodeConstructor(e){RA=e}static get __childrenNodeConstructor(){return RA}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Dn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Dn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return pt(e)?this:vt(e)===".priority"?this.priorityNode_:Dn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Dn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=vt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Ae(r!==".priority"||va(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Dn.__childrenNodeConstructor.EMPTY_NODE.updateChild($t(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+HM(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=_M(this.value_):e+=this.value_,this.lazyHash_=gM(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Dn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Dn.__childrenNodeConstructor?-1:(Ae(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Dn.VALUE_TYPE_ORDER.indexOf(n),s=Dn.VALUE_TYPE_ORDER.indexOf(r);return Ae(i>=0,"Unknown leaf type: "+n),Ae(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Dn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WM,KM;function kJ(t){WM=t}function OJ(t){KM=t}class NJ extends Uy{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Bc(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return _t.MIN}maxPost(){return new _t(Ol,new Dn("[PRIORITY-POST]",KM))}makePost(e,n){const r=WM(e);return new _t(n,new Dn("[PRIORITY-POST]",r))}toString(){return".priority"}}const hr=new NJ;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DJ=Math.log(2);class LJ{constructor(e){const n=s=>parseInt(Math.log(s)/DJ,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ig=function(t,e,n,r){t.sort(e);const i=function(l,u){const f=u-l;let p,y;if(f===0)return null;if(f===1)return p=t[l],y=n?n(p):p,new Fn(y,p.node,Fn.BLACK,null,null);{const _=parseInt(f/2,10)+l,E=i(l,_),S=i(_+1,u);return p=t[_],y=n?n(p):p,new Fn(y,p.node,Fn.BLACK,E,S)}},s=function(l){let u=null,f=null,p=t.length;const y=function(E,S){const I=p-E,R=p;p-=E;const w=i(I+1,R),v=t[I],C=n?n(v):v;_(new Fn(C,v.node,S,null,w))},_=function(E){u?(u.left=E,u=E):(f=E,u=E)};for(let E=0;E<l.count;++E){const S=l.nextBitIsOne(),I=Math.pow(2,l.count-(E+1));S?y(I,Fn.BLACK):(y(I,Fn.BLACK),y(I,Fn.RED))}return f},o=new LJ(t.length),a=s(o);return new Fr(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let N0;const xu={};class Js{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Ae(xu&&hr,"ChildrenNode.ts has not been loaded"),N0=N0||new Js({".priority":xu},{".priority":hr}),N0}get(e){const n=yc(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Fr?n:null}hasIndex(e){return wo(this.indexSet_,e.toString())}addIndex(e,n){Ae(e!==oc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(_t.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Ig(r,e.getCompare()):a=xu;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const f=Object.assign({},this.indexes_);return f[l]=a,new Js(f,u)}addToIndexes(e,n){const r=ig(this.indexes_,(i,s)=>{const o=yc(this.indexSet_,s);if(Ae(o,"Missing index implementation for "+s),i===xu)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(_t.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),Ig(a,o.getCompare())}else return xu;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new _t(e.name,a))),l.insert(e,e.node)}});return new Js(r,this.indexSet_)}removeFromIndexes(e,n){const r=ig(this.indexes_,i=>{if(i===xu)return i;{const s=n.get(e.name);return s?i.remove(new _t(e.name,s)):i}});return new Js(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let If;class It{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&qM(this.priorityNode_),this.children_.isEmpty()&&Ae(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return If||(If=new It(new Fr(bx),null,Js.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||If}updatePriority(e){return this.children_.isEmpty()?this:new It(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?If:n}}getChild(e){const n=vt(e);return n===null?this:this.getImmediateChild(n).getChild($t(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Ae(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new _t(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?If:this.priorityNode_;return new It(i,o,s)}}updateChild(e,n){const r=vt(e);if(r===null)return n;{Ae(vt(e)!==".priority"||va(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild($t(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(hr,(o,a)=>{n[o]=a.val(e),r++,s&&It.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+HM(this.getPriority().val())+":"),this.forEachChild(hr,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":gM(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new _t(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new _t(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new _t(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,_t.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,_t.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Sh?-1:0}withIndex(e){if(e===oc||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new It(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===oc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(hr),i=n.getIterator(hr);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===oc?null:this.indexMap_.get(e.toString())}}It.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class MJ extends It{constructor(){super(new Fr(bx),It.EMPTY_NODE,Js.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return It.EMPTY_NODE}isEmpty(){return!1}}const Sh=new MJ;Object.defineProperties(_t,{MIN:{value:new _t(Ic,It.EMPTY_NODE)},MAX:{value:new _t(Ol,Sh)}});zM.__EMPTY_NODE=It.EMPTY_NODE;Dn.__childrenNodeConstructor=It;PJ(Sh);OJ(Sh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FJ=!0;function fr(t,e=null){if(t===null)return It.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Ae(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Dn(n,fr(e))}if(!(t instanceof Array)&&FJ){const n=[];let r=!1;if(Si(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=fr(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new _t(o,l)))}}),n.length===0)return It.EMPTY_NODE;const s=Ig(n,AJ,o=>o.name,bx);if(r){const o=Ig(n,hr.getCompare());return new It(s,fr(e),new Js({".priority":o},{".priority":hr}))}else return new It(s,fr(e),Js.Default)}else{let n=It.EMPTY_NODE;return Si(t,(r,i)=>{if(wo(t,r)&&r.substring(0,1)!=="."){const s=fr(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(fr(e))}}kJ(fr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jJ extends Uy{constructor(e){super(),this.indexPath_=e,Ae(!pt(e)&&vt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Bc(e.name,n.name):s}makePost(e,n){const r=fr(e),i=It.EMPTY_NODE.updateChild(this.indexPath_,r);return new _t(n,i)}maxPost(){const e=It.EMPTY_NODE.updateChild(this.indexPath_,Sh);return new _t(Ol,e)}toString(){return VM(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VJ extends Uy{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Bc(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return _t.MIN}maxPost(){return _t.MAX}makePost(e,n){const r=fr(e);return new _t(n,r)}toString(){return".value"}}const UJ=new VJ;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BJ(t){return{type:"value",snapshotNode:t}}function $J(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function zJ(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function CA(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function HJ(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=hr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ae(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ae(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ic}hasEnd(){return this.endSet_}getIndexEndValue(){return Ae(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ae(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ol}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ae(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===hr}copy(){const e=new Tx;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function AA(t){const e={};if(t.isDefault())return e;let n;if(t.index_===hr?n="$priority":t.index_===UJ?n="$value":t.index_===oc?n="$key":(Ae(t.index_ instanceof jJ,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Wn(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Wn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Wn(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Wn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Wn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function PA(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==hr&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg extends MM{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=bh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Ae(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Rg.getListenId_(e,r),a={};this.listens_[o]=a;const l=AA(e._queryParams);this.restRequest_(s+".json",l,(u,f)=>{let p=f;if(u===404&&(p=null,u=null),u===null&&this.onDataUpdate_(s,p,!1,r),yc(this.listens_,o)===a){let y;u?u===401?y="permission_denied":y="rest_error:"+u:y="ok",i(y,null)}})}unlisten(e,n){const r=Rg.getListenId_(e,n);delete this.listens_[r]}get(e){const n=AA(e._queryParams),r=e._path.toString(),i=new yS;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Lc(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Dd(a.responseText)}catch{ni("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&ni("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qJ{constructor(){this.rootNode_=It.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(){return{value:null,children:new Map}}function GM(t,e,n){if(pt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=vt(e);t.children.has(r)||t.children.set(r,Cg());const i=t.children.get(r);e=$t(e),GM(i,e,n)}}function Lb(t,e,n){t.value!==null?n(e,t.value):WJ(t,(r,i)=>{const s=new qt(e.toString()+"/"+r);Lb(i,s,n)})}function WJ(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KJ{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Si(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=10*1e3,GJ=30*1e3,QJ=5*60*1e3;class YJ{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new KJ(e);const r=kA+(GJ-kA)*Math.random();ad(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Si(e,(i,s)=>{s>0&&wo(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ad(this.reportStats_.bind(this),Math.floor(Math.random()*2*QJ))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ws;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ws||(ws={}));function QM(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function YM(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function XM(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ws.ACK_USER_WRITE,this.source=QM()}operationForChild(e){if(pt(this.path)){if(this.affectedTree.value!=null)return Ae(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new qt(e));return new Ag(kt(),n,this.revert)}}else return Ae(vt(this.path)===e,"operationForChild called for unrelated child."),new Ag($t(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ws.OVERWRITE}operationForChild(e){return pt(this.path)?new Nl(this.source,kt(),this.snap.getImmediateChild(e)):new Nl(this.source,$t(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ws.MERGE}operationForChild(e){if(pt(this.path)){const n=this.children.subtree(new qt(e));return n.isEmpty()?null:n.value?new Nl(this.source,kt(),n.value):new Kd(this.source,kt(),n)}else return Ae(vt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Kd(this.source,$t(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(pt(e))return this.isFullyInitialized()&&!this.filtered_;const n=vt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function XJ(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(HJ(o.childName,o.snapshotNode))}),Rf(t,i,"child_removed",e,r,n),Rf(t,i,"child_added",e,r,n),Rf(t,i,"child_moved",s,r,n),Rf(t,i,"child_changed",e,r,n),Rf(t,i,"value",e,r,n),i}function Rf(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>ZJ(t,a,l)),o.forEach(a=>{const l=JJ(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function JJ(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function ZJ(t,e,n){if(e.childName==null||n.childName==null)throw Dc("Should only compare child_ events.");const r=new _t(e.childName,e.snapshotNode),i=new _t(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(t,e){return{eventCache:t,serverCache:e}}function ld(t,e,n,r){return JM(new Sx(e,n,r),t.serverCache)}function ZM(t,e,n,r){return JM(t.eventCache,new Sx(e,n,r))}function Mb(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Dl(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let D0;const eZ=()=>(D0||(D0=new Fr(UX)),D0);class Bt{constructor(e,n=eZ()){this.value=e,this.children=n}static fromObject(e){let n=new Bt(null);return Si(e,(r,i)=>{n=n.set(new qt(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:kt(),value:this.value};if(pt(e))return null;{const r=vt(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue($t(e),n);return s!=null?{path:Un(new qt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(pt(e))return this;{const n=vt(e),r=this.children.get(n);return r!==null?r.subtree($t(e)):new Bt(null)}}set(e,n){if(pt(e))return new Bt(n,this.children);{const r=vt(e),s=(this.children.get(r)||new Bt(null)).set($t(e),n),o=this.children.insert(r,s);return new Bt(this.value,o)}}remove(e){if(pt(e))return this.children.isEmpty()?new Bt(null):new Bt(null,this.children);{const n=vt(e),r=this.children.get(n);if(r){const i=r.remove($t(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Bt(null):new Bt(this.value,s)}else return this}}get(e){if(pt(e))return this.value;{const n=vt(e),r=this.children.get(n);return r?r.get($t(e)):null}}setTree(e,n){if(pt(e))return n;{const r=vt(e),s=(this.children.get(r)||new Bt(null)).setTree($t(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Bt(this.value,o)}}fold(e){return this.fold_(kt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Un(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,kt(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(pt(e))return null;{const s=vt(e),o=this.children.get(s);return o?o.findOnPath_($t(e),Un(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,kt(),n)}foreachOnPath_(e,n,r){if(pt(e))return this;{this.value&&r(n,this.value);const i=vt(e),s=this.children.get(i);return s?s.foreachOnPath_($t(e),Un(n,i),r):new Bt(null)}}foreach(e){this.foreach_(kt(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Un(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this.writeTree_=e}static empty(){return new Gi(new Bt(null))}}function ud(t,e,n){if(pt(e))return new Gi(new Bt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=yi(i,e);return s=s.updateChild(o,n),new Gi(t.writeTree_.set(i,s))}else{const i=new Bt(n),s=t.writeTree_.setTree(e,i);return new Gi(s)}}}function OA(t,e,n){let r=t;return Si(n,(i,s)=>{r=ud(r,Un(e,i),s)}),r}function NA(t,e){if(pt(e))return Gi.empty();{const n=t.writeTree_.setTree(e,new Bt(null));return new Gi(n)}}function Fb(t,e){return zl(t,e)!=null}function zl(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(yi(n.path,e)):null}function DA(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(hr,(r,i)=>{e.push(new _t(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new _t(r,i.value))}),e}function fa(t,e){if(pt(e))return t;{const n=zl(t,e);return n!=null?new Gi(new Bt(n)):new Gi(t.writeTree_.subtree(e))}}function jb(t){return t.writeTree_.isEmpty()}function Rc(t,e){return e5(kt(),t.writeTree_,e)}function e5(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(Ae(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=e5(Un(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Un(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t5(t,e){return o5(e,t)}function tZ(t,e,n,r,i){Ae(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=ud(t.visibleWrites,e,n)),t.lastWriteId=r}function nZ(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function rZ(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Ae(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&iZ(a,r.path)?i=!1:Hi(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return sZ(t),!0;if(r.snap)t.visibleWrites=NA(t.visibleWrites,r.path);else{const a=r.children;Si(a,l=>{t.visibleWrites=NA(t.visibleWrites,Un(r.path,l))})}return!0}else return!1}function iZ(t,e){if(t.snap)return Hi(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Hi(Un(t.path,n),e))return!0;return!1}function sZ(t){t.visibleWrites=n5(t.allWrites,oZ,kt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function oZ(t){return t.visible}function n5(t,e,n){let r=Gi.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Hi(n,o)?(a=yi(n,o),r=ud(r,a,s.snap)):Hi(o,n)&&(a=yi(o,n),r=ud(r,kt(),s.snap.getChild(a)));else if(s.children){if(Hi(n,o))a=yi(n,o),r=OA(r,a,s.children);else if(Hi(o,n))if(a=yi(o,n),pt(a))r=OA(r,kt(),s.children);else{const l=yc(s.children,vt(a));if(l){const u=l.getChild($t(a));r=ud(r,kt(),u)}}}else throw Dc("WriteRecord should have .snap or .children")}}return r}function r5(t,e,n,r,i){if(!r&&!i){const s=zl(t.visibleWrites,e);if(s!=null)return s;{const o=fa(t.visibleWrites,e);if(jb(o))return n;if(n==null&&!Fb(o,kt()))return null;{const a=n||It.EMPTY_NODE;return Rc(o,a)}}}else{const s=fa(t.visibleWrites,e);if(!i&&jb(s))return n;if(!i&&n==null&&!Fb(s,kt()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Hi(u.path,e)||Hi(e,u.path))},a=n5(t.allWrites,o,e),l=n||It.EMPTY_NODE;return Rc(a,l)}}}function aZ(t,e,n){let r=It.EMPTY_NODE;const i=zl(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(hr,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=fa(t.visibleWrites,e);return n.forEachChild(hr,(o,a)=>{const l=Rc(fa(s,new qt(o)),a);r=r.updateImmediateChild(o,l)}),DA(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=fa(t.visibleWrites,e);return DA(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function lZ(t,e,n,r,i){Ae(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Un(e,n);if(Fb(t.visibleWrites,s))return null;{const o=fa(t.visibleWrites,s);return jb(o)?i.getChild(n):Rc(o,i.getChild(n))}}function uZ(t,e,n,r){const i=Un(e,n),s=zl(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=fa(t.visibleWrites,i);return Rc(o,r.getNode().getImmediateChild(n))}else return null}function cZ(t,e){return zl(t.visibleWrites,e)}function fZ(t,e,n,r,i,s,o){let a;const l=fa(t.visibleWrites,e),u=zl(l,kt());if(u!=null)a=u;else if(n!=null)a=Rc(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const f=[],p=o.getCompare(),y=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let _=y.getNext();for(;_&&f.length<i;)p(_,r)!==0&&f.push(_),_=y.getNext();return f}else return[]}function dZ(){return{visibleWrites:Gi.empty(),allWrites:[],lastWriteId:-1}}function Vb(t,e,n,r){return r5(t.writeTree,t.treePath,e,n,r)}function i5(t,e){return aZ(t.writeTree,t.treePath,e)}function LA(t,e,n,r){return lZ(t.writeTree,t.treePath,e,n,r)}function Pg(t,e){return cZ(t.writeTree,Un(t.treePath,e))}function hZ(t,e,n,r,i,s){return fZ(t.writeTree,t.treePath,e,n,r,i,s)}function xx(t,e,n){return uZ(t.writeTree,t.treePath,e,n)}function s5(t,e){return o5(Un(t.treePath,e),t.writeTree)}function o5(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pZ{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Ae(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Ae(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,CA(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,zJ(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,$J(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,CA(r,e.snapshotNode,i.oldSnap));else throw Dc("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mZ{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const a5=new mZ;class Ix{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Sx(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return xx(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Dl(this.viewCache_),s=hZ(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function gZ(t,e){Ae(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Ae(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function yZ(t,e,n,r,i){const s=new pZ;let o,a;if(n.type===ws.OVERWRITE){const u=n;u.source.fromUser?o=Ub(t,e,u.path,u.snap,r,i,s):(Ae(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!pt(u.path),o=kg(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===ws.MERGE){const u=n;u.source.fromUser?o=_Z(t,e,u.path,u.children,r,i,s):(Ae(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=Bb(t,e,u.path,u.children,r,i,a,s))}else if(n.type===ws.ACK_USER_WRITE){const u=n;u.revert?o=bZ(t,e,u.path,r,i,s):o=wZ(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===ws.LISTEN_COMPLETE)o=EZ(t,e,n.path,r,s);else throw Dc("Unknown operation type: "+n.type);const l=s.getChanges();return vZ(e,o,l),{viewCache:o,changes:l}}function vZ(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Mb(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(BJ(Mb(e)))}}function l5(t,e,n,r,i,s){const o=e.eventCache;if(Pg(r,n)!=null)return e;{let a,l;if(pt(n))if(Ae(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Dl(e),f=u instanceof It?u:It.EMPTY_NODE,p=i5(r,f);a=t.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{const u=Vb(r,Dl(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=vt(n);if(u===".priority"){Ae(va(n)===1,"Can't have a priority with additional path components");const f=o.getNode();l=e.serverCache.getNode();const p=LA(r,n,f,l);p!=null?a=t.filter.updatePriority(f,p):a=o.getNode()}else{const f=$t(n);let p;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const y=LA(r,n,o.getNode(),l);y!=null?p=o.getNode().getImmediateChild(u).updateChild(f,y):p=o.getNode().getImmediateChild(u)}else p=xx(r,u,e.serverCache);p!=null?a=t.filter.updateChild(o.getNode(),u,p,f,i,s):a=o.getNode()}}return ld(e,a,o.isFullyInitialized()||pt(n),t.filter.filtersNodes())}}function kg(t,e,n,r,i,s,o,a){const l=e.serverCache;let u;const f=o?t.filter:t.filter.getIndexedFilter();if(pt(n))u=f.updateFullNode(l.getNode(),r,null);else if(f.filtersNodes()&&!l.isFiltered()){const _=l.getNode().updateChild(n,r);u=f.updateFullNode(l.getNode(),_,null)}else{const _=vt(n);if(!l.isCompleteForPath(n)&&va(n)>1)return e;const E=$t(n),I=l.getNode().getImmediateChild(_).updateChild(E,r);_===".priority"?u=f.updatePriority(l.getNode(),I):u=f.updateChild(l.getNode(),_,I,E,a5,null)}const p=ZM(e,u,l.isFullyInitialized()||pt(n),f.filtersNodes()),y=new Ix(i,p,s);return l5(t,p,n,i,y,a)}function Ub(t,e,n,r,i,s,o){const a=e.eventCache;let l,u;const f=new Ix(i,e,s);if(pt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=ld(e,u,!0,t.filter.filtersNodes());else{const p=vt(n);if(p===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),l=ld(e,u,a.isFullyInitialized(),a.isFiltered());else{const y=$t(n),_=a.getNode().getImmediateChild(p);let E;if(pt(y))E=r;else{const S=f.getCompleteChild(p);S!=null?jM(y)===".priority"&&S.getChild(UM(y)).isEmpty()?E=S:E=S.updateChild(y,r):E=It.EMPTY_NODE}if(_.equals(E))l=e;else{const S=t.filter.updateChild(a.getNode(),p,E,y,f,o);l=ld(e,S,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function MA(t,e){return t.eventCache.isCompleteForChild(e)}function _Z(t,e,n,r,i,s,o){let a=e;return r.foreach((l,u)=>{const f=Un(n,l);MA(e,vt(f))&&(a=Ub(t,a,f,u,i,s,o))}),r.foreach((l,u)=>{const f=Un(n,l);MA(e,vt(f))||(a=Ub(t,a,f,u,i,s,o))}),a}function FA(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Bb(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;pt(n)?u=r:u=new Bt(null).setTree(n,r);const f=e.serverCache.getNode();return u.children.inorderTraversal((p,y)=>{if(f.hasChild(p)){const _=e.serverCache.getNode().getImmediateChild(p),E=FA(t,_,y);l=kg(t,l,new qt(p),E,i,s,o,a)}}),u.children.inorderTraversal((p,y)=>{const _=!e.serverCache.isCompleteForChild(p)&&y.value===null;if(!f.hasChild(p)&&!_){const E=e.serverCache.getNode().getImmediateChild(p),S=FA(t,E,y);l=kg(t,l,new qt(p),S,i,s,o,a)}}),l}function wZ(t,e,n,r,i,s,o){if(Pg(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(pt(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return kg(t,e,n,l.getNode().getChild(n),i,s,a,o);if(pt(n)){let u=new Bt(null);return l.getNode().forEachChild(oc,(f,p)=>{u=u.set(new qt(f),p)}),Bb(t,e,n,u,i,s,a,o)}else return e}else{let u=new Bt(null);return r.foreach((f,p)=>{const y=Un(n,f);l.isCompleteForPath(y)&&(u=u.set(f,l.getNode().getChild(y)))}),Bb(t,e,n,u,i,s,a,o)}}function EZ(t,e,n,r,i){const s=e.serverCache,o=ZM(e,s.getNode(),s.isFullyInitialized()||pt(n),s.isFiltered());return l5(t,o,n,r,a5,i)}function bZ(t,e,n,r,i,s){let o;if(Pg(r,n)!=null)return e;{const a=new Ix(r,e,i),l=e.eventCache.getNode();let u;if(pt(n)||vt(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=Vb(r,Dl(e));else{const p=e.serverCache.getNode();Ae(p instanceof It,"serverChildren would be complete if leaf node"),f=i5(r,p)}f=f,u=t.filter.updateFullNode(l,f,s)}else{const f=vt(n);let p=xx(r,f,e.serverCache);p==null&&e.serverCache.isCompleteForChild(f)&&(p=l.getImmediateChild(f)),p!=null?u=t.filter.updateChild(l,f,p,$t(n),a,s):e.eventCache.getNode().hasChild(f)?u=t.filter.updateChild(l,f,It.EMPTY_NODE,$t(n),a,s):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Vb(r,Dl(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||Pg(r,kt())!=null,ld(e,u,o,t.filter.filtersNodes())}}function TZ(t,e){const n=Dl(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!pt(e)&&!n.getImmediateChild(vt(e)).isEmpty())?n.getChild(e):null}function jA(t,e,n,r){e.type===ws.MERGE&&e.source.queryId!==null&&(Ae(Dl(t.viewCache_),"We should always have a full cache before handling merges"),Ae(Mb(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=yZ(t.processor_,i,e,n,r);return gZ(t.processor_,s.viewCache),Ae(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,SZ(t,s.changes,s.viewCache.eventCache.getNode())}function SZ(t,e,n,r){const i=t.eventRegistrations_;return XJ(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VA;function xZ(t){Ae(!VA,"__referenceConstructor has already been defined"),VA=t}function Rx(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return Ae(s!=null,"SyncTree gave us an op for an invalid query."),jA(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(jA(o,e,n,r));return s}}function Cx(t,e){let n=null;for(const r of t.views.values())n=n||TZ(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UA;function IZ(t){Ae(!UA,"__referenceConstructor has already been defined"),UA=t}class BA{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Bt(null),this.pendingWriteTree_=dZ(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function RZ(t,e,n,r,i){return tZ(t.pendingWriteTree_,e,n,r,i),i?$y(t,new Nl(QM(),e,n)):[]}function Ku(t,e,n=!1){const r=nZ(t.pendingWriteTree_,e);if(rZ(t.pendingWriteTree_,e)){let s=new Bt(null);return r.snap!=null?s=s.set(kt(),!0):Si(r.children,o=>{s=s.set(new qt(o),!0)}),$y(t,new Ag(r.path,s,n))}else return[]}function By(t,e,n){return $y(t,new Nl(YM(),e,n))}function CZ(t,e,n){const r=Bt.fromObject(n);return $y(t,new Kd(YM(),e,r))}function AZ(t,e,n,r){const i=d5(t,r);if(i!=null){const s=h5(i),o=s.path,a=s.queryId,l=yi(o,e),u=new Nl(XM(a),l,n);return p5(t,o,u)}else return[]}function PZ(t,e,n,r){const i=d5(t,r);if(i){const s=h5(i),o=s.path,a=s.queryId,l=yi(o,e),u=Bt.fromObject(n),f=new Kd(XM(a),l,u);return p5(t,o,f)}else return[]}function u5(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=yi(o,e),u=Cx(a,l);if(u)return u});return r5(i,e,s,n,!0)}function $y(t,e){return c5(e,t.syncPointTree_,null,t5(t.pendingWriteTree_,kt()))}function c5(t,e,n,r){if(pt(t.path))return f5(t,e,n,r);{const i=e.get(kt());n==null&&i!=null&&(n=Cx(i,kt()));let s=[];const o=vt(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,f=s5(r,o);s=s.concat(c5(a,l,u,f))}return i&&(s=s.concat(Rx(i,t,r,n))),s}}function f5(t,e,n,r){const i=e.get(kt());n==null&&i!=null&&(n=Cx(i,kt()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=s5(r,o),f=t.operationForChild(o);f&&(s=s.concat(f5(f,a,l,u)))}),i&&(s=s.concat(Rx(i,t,r,n))),s}function d5(t,e){return t.tagToQueryMap.get(e)}function h5(t){const e=t.indexOf("$");return Ae(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new qt(t.substr(0,e))}}function p5(t,e,n){const r=t.syncPointTree_.get(e);Ae(r,"Missing sync point for query tag that we're tracking");const i=t5(t.pendingWriteTree_,e);return Rx(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Ax(n)}node(){return this.node_}}class Px{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Un(this.path_,e);return new Px(this.syncTree_,n)}node(){return u5(this.syncTree_,this.path_)}}const kZ=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},$A=function(t,e,n){if(!t||typeof t!="object")return t;if(Ae(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return OZ(t[".sv"],e,n);if(typeof t[".sv"]=="object")return NZ(t[".sv"],e);Ae(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},OZ=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Ae(!1,"Unexpected server value: "+t)}},NZ=function(t,e,n){t.hasOwnProperty("increment")||Ae(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Ae(!1,"Unexpected increment value: "+r);const i=e.node();if(Ae(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},DZ=function(t,e,n,r){return kx(e,new Px(n,t),r)},LZ=function(t,e,n){return kx(t,new Ax(e),n)};function kx(t,e,n){const r=t.getPriority().val(),i=$A(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=$A(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Dn(a,fr(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Dn(i))),o.forEachChild(hr,(a,l)=>{const u=kx(l,e.getImmediateChild(a),n);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Nx(t,e){let n=e instanceof qt?e:new qt(e),r=t,i=vt(n);for(;i!==null;){const s=yc(r.node.children,i)||{children:{},childCount:0};r=new Ox(i,r,s),n=$t(n),i=vt(n)}return r}function $c(t){return t.node.value}function m5(t,e){t.node.value=e,$b(t)}function g5(t){return t.node.childCount>0}function MZ(t){return $c(t)===void 0&&!g5(t)}function zy(t,e){Si(t.node.children,(n,r)=>{e(new Ox(n,t,r))})}function y5(t,e,n,r){n&&!r&&e(t),zy(t,i=>{y5(i,e,!0,r)}),n&&r&&e(t)}function FZ(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function xh(t){return new qt(t.parent===null?t.name:xh(t.parent)+"/"+t.name)}function $b(t){t.parent!==null&&jZ(t.parent,t.name,t)}function jZ(t,e,n){const r=MZ(n),i=wo(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,$b(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,$b(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VZ=/[\[\].#$\/\u0000-\u001F\u007F]/,UZ=/[\[\].#$\u0000-\u001F\u007F]/,L0=10*1024*1024,v5=function(t){return typeof t=="string"&&t.length!==0&&!VZ.test(t)},BZ=function(t){return typeof t=="string"&&t.length!==0&&!UZ.test(t)},$Z=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),BZ(t)},_5=function(t,e,n){const r=n instanceof qt?new EJ(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+el(r));if(typeof e=="function")throw new Error(t+"contains a function "+el(r)+" with contents = "+e.toString());if(yM(e))throw new Error(t+"contains "+e.toString()+" "+el(r));if(typeof e=="string"&&e.length>L0/3&&hy(e)>L0)throw new Error(t+"contains a string greater than "+L0+" utf8 bytes "+el(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Si(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!v5(o)))throw new Error(t+" contains an invalid key ("+o+") "+el(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);bJ(r,o),_5(t,a,r),TJ(r)}),i&&s)throw new Error(t+' contains ".value" child '+el(r)+" in addition to actual children.")}},zZ=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!v5(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!$Z(n))throw new Error(KH(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HZ{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function qZ(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!BM(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Hl(t,e,n){qZ(t,n),WZ(t,r=>Hi(r,e)||Hi(e,r))}function WZ(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(KZ(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function KZ(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();od&&cr("event: "+n.toString()),Th(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GZ="repo_interrupt",QZ=25;class YZ{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new HZ,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Cg(),this.transactionQueueTree_=new Ox,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function XZ(t,e,n){if(t.stats_=_x(t.repoInfo_),t.forceRestClient_||WX())t.server_=new Rg(t.repoInfo_,(r,i,s,o)=>{zA(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>HA(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Wn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new ro(t.repoInfo_,e,(r,i,s,o)=>{zA(t,r,i,s,o)},r=>{HA(t,r)},r=>{ZZ(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=XX(t.repoInfo_,()=>new YJ(t.stats_,t.server_)),t.infoData_=new qJ,t.infoSyncTree_=new BA({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=By(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Dx(t,"connected",!1),t.serverSyncTree_=new BA({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const u=o(a,l);Hl(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function JZ(t){const n=t.infoData_.getNode(new qt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function w5(t){return kZ({timestamp:JZ(t)})}function zA(t,e,n,r,i){t.dataUpdateCount++;const s=new qt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=ig(n,u=>fr(u));o=PZ(t.serverSyncTree_,s,l,i)}else{const l=fr(n);o=AZ(t.serverSyncTree_,s,l,i)}else if(r){const l=ig(n,u=>fr(u));o=CZ(t.serverSyncTree_,s,l)}else{const l=fr(n);o=By(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Mx(t,s)),Hl(t.eventQueue_,a,o)}function HA(t,e){Dx(t,"connected",e),e===!1&&tee(t)}function ZZ(t,e){Si(e,(n,r)=>{Dx(t,n,r)})}function Dx(t,e,n){const r=new qt("/.info/"+e),i=fr(n);t.infoData_.updateSnapshot(r,i);const s=By(t.infoSyncTree_,r,i);Hl(t.eventQueue_,r,s)}function eee(t){return t.nextWriteId_++}function tee(t){E5(t,"onDisconnectEvents");const e=w5(t),n=Cg();Lb(t.onDisconnect_,kt(),(i,s)=>{const o=DZ(i,s,t.serverSyncTree_,e);GM(n,i,o)});let r=[];Lb(n,kt(),(i,s)=>{r=r.concat(By(t.serverSyncTree_,i,s));const o=see(t,i);Mx(t,o)}),t.onDisconnect_=Cg(),Hl(t.eventQueue_,kt(),r)}function nee(t){t.persistentConnection_&&t.persistentConnection_.interrupt(GZ)}function E5(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),cr(n,...e)}function b5(t,e,n){return u5(t.serverSyncTree_,e,n)||It.EMPTY_NODE}function Lx(t,e=t.transactionQueueTree_){if(e||Hy(t,e),$c(e)){const n=S5(t,e);Ae(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&ree(t,xh(e),n)}else g5(e)&&zy(e,n=>{Lx(t,n)})}function ree(t,e,n){const r=n.map(u=>u.currentWriteId),i=b5(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const f=n[u];Ae(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const p=yi(e,f.path);s=s.updateChild(p,f.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,u=>{E5(t,"transaction put response",{path:l.toString(),status:u});let f=[];if(u==="ok"){const p=[];for(let y=0;y<n.length;y++)n[y].status=2,f=f.concat(Ku(t.serverSyncTree_,n[y].currentWriteId)),n[y].onComplete&&p.push(()=>n[y].onComplete(null,!0,n[y].currentOutputSnapshotResolved)),n[y].unwatcher();Hy(t,Nx(t.transactionQueueTree_,e)),Lx(t,t.transactionQueueTree_),Hl(t.eventQueue_,e,f);for(let y=0;y<p.length;y++)Th(p[y])}else{if(u==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{ni("transaction at "+l.toString()+" failed: "+u);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=u}Mx(t,e)}},o)}function Mx(t,e){const n=T5(t,e),r=xh(n),i=S5(t,n);return iee(t,i,r),r}function iee(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=yi(n,l.path);let f=!1,p;if(Ae(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)f=!0,p=l.abortReason,i=i.concat(Ku(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=QZ)f=!0,p="maxretry",i=i.concat(Ku(t.serverSyncTree_,l.currentWriteId,!0));else{const y=b5(t,l.path,o);l.currentInputSnapshot=y;const _=e[a].update(y.val());if(_!==void 0){_5("transaction failed: Data returned ",_,l.path);let E=fr(_);typeof _=="object"&&_!=null&&wo(_,".priority")||(E=E.updatePriority(y.getPriority()));const I=l.currentWriteId,R=w5(t),w=LZ(E,y,R);l.currentOutputSnapshotRaw=E,l.currentOutputSnapshotResolved=w,l.currentWriteId=eee(t),o.splice(o.indexOf(I),1),i=i.concat(RZ(t.serverSyncTree_,l.path,w,l.currentWriteId,l.applyLocally)),i=i.concat(Ku(t.serverSyncTree_,I,!0))}else f=!0,p="nodata",i=i.concat(Ku(t.serverSyncTree_,l.currentWriteId,!0))}Hl(t.eventQueue_,n,i),i=[],f&&(e[a].status=2,function(y){setTimeout(y,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(p==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(p),!1,null))))}Hy(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Th(r[a]);Lx(t,t.transactionQueueTree_)}function T5(t,e){let n,r=t.transactionQueueTree_;for(n=vt(e);n!==null&&$c(r)===void 0;)r=Nx(r,n),e=$t(e),n=vt(e);return r}function S5(t,e){const n=[];return x5(t,e,n),n.sort((r,i)=>r.order-i.order),n}function x5(t,e,n){const r=$c(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);zy(e,i=>{x5(t,i,n)})}function Hy(t,e){const n=$c(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,m5(e,n.length>0?n:void 0)}zy(e,r=>{Hy(t,r)})}function see(t,e){const n=xh(T5(t,e)),r=Nx(t.transactionQueueTree_,e);return FZ(r,i=>{M0(t,i)}),M0(t,r),y5(r,i=>{M0(t,i)}),n}function M0(t,e){const n=$c(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Ae(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(Ae(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Ku(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?m5(e,void 0):n.length=s+1,Hl(t.eventQueue_,xh(e),i);for(let o=0;o<r.length;o++)Th(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oee(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function aee(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ni(`Invalid query segment '${n}' in query '${t}'`)}return e}const qA=function(t,e){const n=lee(t),r=n.namespace;n.domain==="firebase.com"&&yo(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&yo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||jX();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new AM(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new qt(n.pathString)}},lee=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let f=t.indexOf("/");f===-1&&(f=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(f,p)),f<p&&(i=oee(t.substring(f,p)));const y=aee(t.substring(Math.min(t.length,p)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const _=e.slice(0,u);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{const E=e.indexOf(".");r=e.substring(0,E).toLowerCase(),n=e.substring(E+1),s=r}"ns"in y&&(s=y.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return pt(this._path)?null:jM(this._path)}get ref(){return new zc(this._repo,this._path)}get _queryIdentifier(){const e=PA(this._queryParams),n=yx(e);return n==="{}"?"default":n}get _queryObject(){return PA(this._queryParams)}isEqual(e){if(e=Lt(e),!(e instanceof Fx))return!1;const n=this._repo===e._repo,r=BM(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+wJ(this._path)}}class zc extends Fx{constructor(e,n){super(e,n,new Tx,!1)}get parent(){const e=UM(this._path);return e===null?null:new zc(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}xZ(zc);IZ(zc);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uee="FIREBASE_DATABASE_EMULATOR_HOST",zb={};let cee=!1;function fee(t,e,n,r){t.repoInfo_=new AM(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function dee(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||yo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),cr("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=qA(s,i),a=o.repoInfo,l;typeof process<"u"&&fA&&(l=fA[uee]),l?(s=`http://${l}?ns=${a.namespace}`,o=qA(s,i),a=o.repoInfo):o.repoInfo.secure;const u=new GX(t.name,t.options,e);zZ("Invalid Firebase Database URL",o),pt(o.path)||yo("Database URL must point to the root of a Firebase Database (not including a child path).");const f=pee(a,t,u,new KX(t.name,n));return new mee(f,t)}function hee(t,e){const n=zb[e];(!n||n[t.key]!==t)&&yo(`Database ${e}(${t.repoInfo_}) has already been deleted.`),nee(t),delete n[t.key]}function pee(t,e,n,r){let i=zb[e.name];i||(i={},zb[e.name]=i);let s=i[t.toURLString()];return s&&yo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new YZ(t,cee,n,r),i[t.toURLString()]=s,s}class mee{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(XZ(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new zc(this._repo,kt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(hee(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&yo("Cannot call "+e+" on a deleted database.")}}function gee(t=my(),e){const n=uh(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=gS("database");r&&yee(n,...r)}return n}function yee(t,e,n,r={}){t=Lt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&yo("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&yo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new vm(vm.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:vS(r.mockUserToken,t.app.options.projectId);s=new vm(o)}fee(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vee(t){OX(Pa),pa(new co("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return dee(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),_i(dA,hA,t),_i(dA,hA,"esm2017")}ro.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ro.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};vee();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5="firebasestorage.googleapis.com",R5="storageBucket",_ee=2*60*1e3,wee=10*60*1e3,Eee=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn extends As{constructor(e,n,r=0){super(F0(e),`Firebase Storage: ${n} (${F0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,nn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return F0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Wt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Wt||(Wt={}));function F0(t){return"storage/"+t}function jx(){const t="An unknown error occurred, please check the error payload for server response.";return new nn(Wt.UNKNOWN,t)}function bee(t){return new nn(Wt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Tee(t){return new nn(Wt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function See(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new nn(Wt.UNAUTHENTICATED,t)}function xee(){return new nn(Wt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Iee(t){return new nn(Wt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function C5(){return new nn(Wt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function A5(){return new nn(Wt.CANCELED,"User canceled the upload/download.")}function Ree(t){return new nn(Wt.INVALID_URL,"Invalid URL '"+t+"'.")}function Cee(t){return new nn(Wt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Aee(){return new nn(Wt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+R5+"' property when initializing the app?")}function P5(){return new nn(Wt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Pee(){return new nn(Wt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function kee(){return new nn(Wt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Oee(t){return new nn(Wt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Hb(t){return new nn(Wt.INVALID_ARGUMENT,t)}function k5(){return new nn(Wt.APP_DELETED,"The Firebase app was deleted.")}function Nee(t){return new nn(Wt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function cd(t,e){return new nn(Wt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Cf(t){throw new nn(Wt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Zr.makeFromUrl(e,n)}catch{return new Zr(e,"")}if(r.path==="")return r;throw Cee(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(C){C.path_=decodeURIComponent(C.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",_=new RegExp(`^https?://${p}/${f}/b/${i}/o${y}`,"i"),E={bucket:1,path:3},S=n===I5?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",R=new RegExp(`^https?://${S}/${i}/${I}`,"i"),v=[{regex:a,indices:l,postModify:s},{regex:_,indices:E,postModify:u},{regex:R,indices:{bucket:1,path:2},postModify:u}];for(let C=0;C<v.length;C++){const k=v[C],B=k.regex.exec(e);if(B){const D=B[k.indices.bucket];let T=B[k.indices.path];T||(T=""),r=new Zr(D,T),k.postModify(r);break}}if(r==null)throw Ree(e);return r}}class Dee{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lee(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function f(...I){u||(u=!0,e.apply(null,I))}function p(I){i=setTimeout(()=>{i=null,t(_,l())},I)}function y(){s&&clearTimeout(s)}function _(I,...R){if(u){y();return}if(I){y(),f.call(null,I,...R);return}if(l()||o){y(),f.call(null,I,...R);return}r<64&&(r*=2);let v;a===1?(a=2,v=0):v=(r+Math.random())*1e3,p(v)}let E=!1;function S(I){E||(E=!0,y(),!u&&(i!==null?(I||(a=2),clearTimeout(i),p(0)):I||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,S(!0)},n),S}function Mee(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fee(t){return t!==void 0}function jee(t){return typeof t=="function"}function Vee(t){return typeof t=="object"&&!Array.isArray(t)}function qy(t){return typeof t=="string"||t instanceof String}function WA(t){return Vx()&&t instanceof Blob}function Vx(){return typeof Blob<"u"}function KA(t,e,n,r){if(r<e)throw Hb(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Hb(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function O5(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var vl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(vl||(vl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uee{constructor(e,n,r,i,s,o,a,l,u,f,p,y=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=p,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,E)=>{this.resolve_=_,this.reject_=E,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Up(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===vl.NO_ERROR,l=s.getStatus();if(!a||N5(l,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===vl.ABORT;r(!1,new Up(!1,null,f));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Up(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());Fee(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=jx();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?k5():A5();o(l)}else{const l=C5();o(l)}};this.canceled_?n(!1,new Up(!1,null,!0)):this.backoffId_=Lee(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Mee(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Up{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Bee(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function $ee(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function zee(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Hee(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function qee(t,e,n,r,i,s,o=!0){const a=O5(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return zee(u,e),Bee(u,n),$ee(u,s),Hee(u,r),new Uee(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wee(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Kee(...t){const e=Wee();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Vx())return new Blob(t);throw new nn(Wt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Gee(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qee(t){if(typeof atob>"u")throw Oee("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class j0{constructor(e,n){this.data=e,this.contentType=n||null}}function Yee(t,e){switch(t){case Es.RAW:return new j0(D5(e));case Es.BASE64:case Es.BASE64URL:return new j0(L5(t,e));case Es.DATA_URL:return new j0(Jee(e),Zee(e))}throw jx()}function D5(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Xee(t){let e;try{e=decodeURIComponent(t)}catch{throw cd(Es.DATA_URL,"Malformed data URL.")}return D5(e)}function L5(t,e){switch(t){case Es.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw cd(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Es.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw cd(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Qee(e)}catch(i){throw i.message.includes("polyfill")?i:cd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class M5{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw cd(Es.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=ete(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Jee(t){const e=new M5(t);return e.base64?L5(Es.BASE64,e.rest):Xee(e.rest)}function Zee(t){return new M5(t).contentType}function ete(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,n){let r=0,i="";WA(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(WA(this.data_)){const r=this.data_,i=Gee(r,e,n);return i===null?null:new Wo(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Wo(r,!0)}}static getBlob(...e){if(Vx()){const n=e.map(r=>r instanceof Wo?r.data_:r);return new Wo(Kee.apply(null,n))}else{const n=e.map(o=>qy(o)?Yee(Es.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Wo(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F5(t){let e;try{e=JSON.parse(t)}catch{return null}return Vee(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tte(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function nte(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function j5(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rte(t,e){return e}class vr{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||rte}}let Bp=null;function ite(t){return!qy(t)||t.length<2?t:j5(t)}function V5(){if(Bp)return Bp;const t=[];t.push(new vr("bucket")),t.push(new vr("generation")),t.push(new vr("metageneration")),t.push(new vr("name","fullPath",!0));function e(s,o){return ite(o)}const n=new vr("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new vr("size");return i.xform=r,t.push(i),t.push(new vr("timeCreated")),t.push(new vr("updated")),t.push(new vr("md5Hash",null,!0)),t.push(new vr("cacheControl",null,!0)),t.push(new vr("contentDisposition",null,!0)),t.push(new vr("contentEncoding",null,!0)),t.push(new vr("contentLanguage",null,!0)),t.push(new vr("contentType",null,!0)),t.push(new vr("metadata","customMetadata",!0)),Bp=t,Bp}function ste(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Zr(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function ote(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return ste(r,t),r}function U5(t,e,n){const r=F5(e);return r===null?null:ote(t,r,n)}function ate(t,e,n,r){const i=F5(e);if(i===null||!qy(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const f=t.bucket,p=t.fullPath,y="/b/"+o(f)+"/o/"+o(p),_=Ih(y,n,r),E=O5({alt:"media",token:u});return _+E})[0]}function B5(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Hc{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(t){if(!t)throw jx()}function Ux(t,e){function n(r,i){const s=U5(t,i,e);return io(s!==null),s}return n}function lte(t,e){function n(r,i){const s=U5(t,i,e);return io(s!==null),ate(s,i,t.host,t._protocol)}return n}function Rh(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=xee():i=See():n.getStatus()===402?i=Tee(t.bucket):n.getStatus()===403?i=Iee(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function $5(t){const e=Rh(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=bee(t.path)),s.serverResponse=i.serverResponse,s}return n}function ute(t,e,n){const r=e.fullServerUrl(),i=Ih(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Hc(i,s,Ux(t,n),o);return a.errorHandler=$5(e),a}function cte(t,e,n){const r=e.fullServerUrl(),i=Ih(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Hc(i,s,lte(t,n),o);return a.errorHandler=$5(e),a}function fte(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function z5(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=fte(null,e)),r}function dte(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let v="";for(let C=0;C<2;C++)v=v+Math.random().toString().slice(2);return v}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=z5(e,r,i),f=B5(u,n),p="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,y=`\r
--`+l+"--",_=Wo.getBlob(p,r,y);if(_===null)throw P5();const E={name:u.fullPath},S=Ih(s,t.host,t._protocol),I="POST",R=t.maxUploadRetryTime,w=new Hc(S,I,Ux(t,n),R);return w.urlParams=E,w.headers=o,w.body=_.uploadData(),w.errorHandler=Rh(e),w}class Og{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function Bx(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{io(!1)}return io(!!n&&(e||["active"]).indexOf(n)!==-1),n}function hte(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=z5(e,r,i),a={name:o.fullPath},l=Ih(s,t.host,t._protocol),u="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},p=B5(o,n),y=t.maxUploadRetryTime;function _(S){Bx(S);let I;try{I=S.getResponseHeader("X-Goog-Upload-URL")}catch{io(!1)}return io(qy(I)),I}const E=new Hc(l,u,_,y);return E.urlParams=a,E.headers=f,E.body=p,E.errorHandler=Rh(e),E}function pte(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(u){const f=Bx(u,["active","final"]);let p=null;try{p=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{io(!1)}p||io(!1);const y=Number(p);return io(!isNaN(y)),new Og(y,r.size(),f==="final")}const o="POST",a=t.maxUploadRetryTime,l=new Hc(n,o,s,a);return l.headers=i,l.errorHandler=Rh(e),l}const GA=256*1024;function mte(t,e,n,r,i,s,o,a){const l=new Og(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw Pee();const u=l.total-l.current;let f=u;i>0&&(f=Math.min(f,i));const p=l.current,y=p+f;let _="";f===0?_="finalize":u===f?_="upload, finalize":_="upload";const E={"X-Goog-Upload-Command":_,"X-Goog-Upload-Offset":`${l.current}`},S=r.slice(p,y);if(S===null)throw P5();function I(C,k){const B=Bx(C,["active","final"]),D=l.current+f,T=r.size();let N;return B==="final"?N=Ux(e,s)(C,k):N=null,new Og(D,T,B==="final",N)}const R="POST",w=e.maxUploadRetryTime,v=new Hc(n,R,I,w);return v.headers=E,v.body=S.uploadData(),v.progressCallback=a||null,v.errorHandler=Rh(t),v}const Nr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function V0(t){switch(t){case"running":case"pausing":case"canceling":return Nr.RUNNING;case"paused":return Nr.PAUSED;case"success":return Nr.SUCCESS;case"canceled":return Nr.CANCELED;case"error":return Nr.ERROR;default:return Nr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gte{constructor(e,n,r){if(jee(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class yte{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Cf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Cf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Cf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Cf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Cf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class vte extends yte{initXhr(){this.xhr_.responseType="text"}}function ku(){return new vte}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _te{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=V5(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Wt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(N5(i.status,[]))if(s)i=C5();else{this.sleepTime=Math.max(this.sleepTime*2,Eee),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Wt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=hte(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ku,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=pte(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,ku,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=GA*this._chunkMultiplier,n=new Og(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=mte(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,ku,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){GA*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=ute(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ku,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=dte(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ku,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=A5(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=V0(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new gte(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(V0(this._state)){case Nr.SUCCESS:Iu(this._resolve.bind(null,this.snapshot))();break;case Nr.CANCELED:case Nr.ERROR:const n=this._reject;Iu(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(V0(this._state)){case Nr.RUNNING:case Nr.PAUSED:e.next&&Iu(e.next.bind(e,this.snapshot))();break;case Nr.SUCCESS:e.complete&&Iu(e.complete.bind(e))();break;case Nr.CANCELED:case Nr.ERROR:e.error&&Iu(e.error.bind(e,this._error))();break;default:e.error&&Iu(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,n){this._service=e,n instanceof Zr?this._location=n:this._location=Zr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ll(e,n)}get root(){const e=new Zr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return j5(this._location.path)}get storage(){return this._service}get parent(){const e=tte(this._location.path);if(e===null)return null;const n=new Zr(this._location.bucket,e);return new Ll(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Nee(e)}}function wte(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new _te(t,new Wo(e),n)}function Ete(t){t._throwIfRoot("getDownloadURL");const e=cte(t.storage,t._location,V5());return t.storage.makeRequestWithTokens(e,ku).then(n=>{if(n===null)throw kee();return n})}function bte(t,e){const n=nte(t._location.path,e),r=new Zr(t._location.bucket,n);return new Ll(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tte(t){return/^[A-Za-z]+:\/\//.test(t)}function Ste(t,e){return new Ll(t,e)}function H5(t,e){if(t instanceof $x){const n=t;if(n._bucket==null)throw Aee();const r=new Ll(n,n._bucket);return e!=null?H5(r,e):r}else return e!==void 0?bte(t,e):t}function xte(t,e){if(e&&Tte(e)){if(t instanceof $x)return Ste(t,e);throw Hb("To use ref(service, url), the first argument must be a Storage instance.")}else return H5(t,e)}function QA(t,e){const n=e==null?void 0:e[R5];return n==null?null:Zr.makeFromBucketSpec(n,t)}function Ite(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:vS(i,t.app.options.projectId))}class $x{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=I5,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=_ee,this._maxUploadRetryTime=wee,this._requests=new Set,i!=null?this._bucket=Zr.makeFromBucketSpec(i,this._host):this._bucket=QA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Zr.makeFromBucketSpec(this._url,e):this._bucket=QA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){KA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){KA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ll(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Dee(k5());{const o=qee(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const YA="@firebase/storage",XA="0.13.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5="storage";function Rte(t,e,n){return t=Lt(t),wte(t,e,n)}function Cte(t){return t=Lt(t),Ete(t)}function Ate(t,e){return t=Lt(t),xte(t,e)}function Pte(t=my(),e){t=Lt(t);const r=uh(t,q5).getImmediate({identifier:e}),i=gS("storage");return i&&kte(r,...i),r}function kte(t,e,n,r={}){Ite(t,e,n,r)}function Ote(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new $x(n,r,i,e,Pa)}function Nte(){pa(new co(q5,Ote,"PUBLIC").setMultipleInstances(!0)),_i(YA,XA,""),_i(YA,XA,"esm2017")}Nte();const Dte={apiKey:"AIzaSyBI7getH_fChUe0QQDJdlx5Opsrrmnm9M0",authDomain:"r-social-f2ef8.firebaseapp.com",databaseURL:"https://r-social-f2ef8-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"r-social-f2ef8",storageBucket:"r-social-f2ef8.appspot.com",messagingSenderId:"364260354059",appId:"1:364260354059:web:9861d4323431c776e7ff0e",measurementId:"G-L49PRTPQLR"},Wy=r3(Dte),Bi=_X(Wy);gee(Wy);const tl=mG(Wy),Lte=Pte(Wy),W5=O.createContext();function Mte({children:t}){const[e,n]=O.useState(null),r=new Vi,i=async f=>{(await jn(Hn(St(Bi,"users"),br("uid","==",f)))).forEach(y=>{n(y.data())})};O.useEffect(()=>{const f=iK(tl,p=>{p?i(p==null?void 0:p.uid):n(null)});return()=>{f()}},[]),O.useEffect(()=>{},[]);function s(f,p){return XW(tl,f,p)}async function o(f,p){return tK(tl,P3).then(()=>JW(tl,f,p))}function a(){return sK(tl)}function l(){return SK(tl,r)}const u={currentUser:e,setCurrentUser:n,registerUzer:s,loginUzer:o,logoutUzer:a,loginWithProvider:l,db:Bi};return x.jsx(W5.Provider,{value:u,children:t})}function Jn(){return O.useContext(W5)}const vs=(t="Some msg",e="info",n="bottom-center",r=4e3)=>{Mt[e](`${t}`,{position:n,autoClose:r,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light",transition:RG})};var K5={exports:{}};(function(t,e){(function(r,i){t.exports=i()})(typeof self<"u"?self:$i,function(){return function(n){var r={};function i(s){if(r[s])return r[s].exports;var o=r[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=n,i.c=r,i.d=function(s,o,a){i.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:a})},i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,"a",o),o},i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},i.p="/",i(i.s=7)}([function(n,r,i){function s(o,a,l,u,f,p,y,_){if(!o){var E;if(a===void 0)E=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var S=[l,u,f,p,y,_],I=0;E=new Error(a.replace(/%s/g,function(){return S[I++]})),E.name="Invariant Violation"}throw E.framesToPop=1,E}}n.exports=s},function(n,r,i){function s(a){return function(){return a}}var o=function(){};o.thatReturns=s,o.thatReturnsFalse=s(!1),o.thatReturnsTrue=s(!0),o.thatReturnsNull=s(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(a){return a},n.exports=o},function(n,r,i){/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function l(f){if(f==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(f)}function u(){try{if(!Object.assign)return!1;var f=new String("abc");if(f[5]="de",Object.getOwnPropertyNames(f)[0]==="5")return!1;for(var p={},y=0;y<10;y++)p["_"+String.fromCharCode(y)]=y;var _=Object.getOwnPropertyNames(p).map(function(S){return p[S]});if(_.join("")!=="0123456789")return!1;var E={};return"abcdefghijklmnopqrst".split("").forEach(function(S){E[S]=S}),Object.keys(Object.assign({},E)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}n.exports=u()?Object.assign:function(f,p){for(var y,_=l(f),E,S=1;S<arguments.length;S++){y=Object(arguments[S]);for(var I in y)o.call(y,I)&&(_[I]=y[I]);if(s){E=s(y);for(var R=0;R<E.length;R++)a.call(y,E[R])&&(_[E[R]]=y[E[R]])}}return _}},function(n,r,i){var s=i(1),o=s;n.exports=o},function(n,r,i){var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";n.exports=s},function(n,r,i){var s={};n.exports=s},function(n,r,i){function s(o,a,l,u,f){}n.exports=s},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=Object.assign||function(C){for(var k=1;k<arguments.length;k++){var B=arguments[k];for(var D in B)Object.prototype.hasOwnProperty.call(B,D)&&(C[D]=B[D])}return C},o=function(){function C(k,B){for(var D=0;D<B.length;D++){var T=B[D];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(k,T.key,T)}}return function(k,B,D){return B&&C(k.prototype,B),D&&C(k,D),k}}(),a=i(8),l=E(a),u=i(11),f=E(u),p=i(14),y=_(p);function _(C){if(C&&C.__esModule)return C;var k={};if(C!=null)for(var B in C)Object.prototype.hasOwnProperty.call(C,B)&&(k[B]=C[B]);return k.default=C,k}function E(C){return C&&C.__esModule?C:{default:C}}function S(C,k){var B={};for(var D in C)k.indexOf(D)>=0||Object.prototype.hasOwnProperty.call(C,D)&&(B[D]=C[D]);return B}function I(C,k){if(!(C instanceof k))throw new TypeError("Cannot call a class as a function")}function R(C,k){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:C}function w(C,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);C.prototype=Object.create(k&&k.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(C,k):C.__proto__=k)}var v=function(C){w(k,C);function k(){var B,D,T,N;I(this,k);for(var L=arguments.length,V=Array(L),j=0;j<L;j++)V[j]=arguments[j];return N=(D=(T=R(this,(B=k.__proto__||Object.getPrototypeOf(k)).call.apply(B,[this].concat(V))),T),T.state={delayed:T.props.delay>0},D),R(T,N)}return o(k,[{key:"componentDidMount",value:function(){var D=this,T=this.props.delay,N=this.state.delayed;N&&(this.timeout=setTimeout(function(){D.setState({delayed:!1})},T))}},{key:"componentWillUnmount",value:function(){var D=this.timeout;D&&clearTimeout(D)}},{key:"render",value:function(){var D=this.props,T=D.color;D.delay;var N=D.type,L=D.height,V=D.width,j=S(D,["color","delay","type","height","width"]),M=this.state.delayed?"blank":N,le=y[M],me={fill:T,height:L,width:V};return l.default.createElement("div",s({style:me,dangerouslySetInnerHTML:{__html:le}},j))}}]),k}(a.Component);v.propTypes={color:f.default.string,delay:f.default.number,type:f.default.string,height:f.default.oneOfType([f.default.string,f.default.number]),width:f.default.oneOfType([f.default.string,f.default.number])},v.defaultProps={color:"#fff",delay:0,type:"balls",height:64,width:64},r.default=v},function(n,r,i){n.exports=i(9)},function(n,r,i){/** @license React v16.3.2
 * react.production.min.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=i(2),o=i(0),a=i(5),l=i(1),u=typeof Symbol=="function"&&Symbol.for,f=u?Symbol.for("react.element"):60103,p=u?Symbol.for("react.portal"):60106,y=u?Symbol.for("react.fragment"):60107,_=u?Symbol.for("react.strict_mode"):60108,E=u?Symbol.for("react.provider"):60109,S=u?Symbol.for("react.context"):60110,I=u?Symbol.for("react.async_mode"):60111,R=u?Symbol.for("react.forward_ref"):60112,w=typeof Symbol=="function"&&Symbol.iterator;function v(W){for(var ue=arguments.length-1,Se="http://reactjs.org/docs/error-decoder.html?invariant="+W,be=0;be<ue;be++)Se+="&args[]="+encodeURIComponent(arguments[be+1]);o(!1,"Minified React error #"+W+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",Se)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};function k(W,ue,Se){this.props=W,this.context=ue,this.refs=a,this.updater=Se||C}k.prototype.isReactComponent={},k.prototype.setState=function(W,ue){typeof W!="object"&&typeof W!="function"&&W!=null&&v("85"),this.updater.enqueueSetState(this,W,ue,"setState")},k.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function B(){}B.prototype=k.prototype;function D(W,ue,Se){this.props=W,this.context=ue,this.refs=a,this.updater=Se||C}var T=D.prototype=new B;T.constructor=D,s(T,k.prototype),T.isPureReactComponent=!0;var N={current:null},L=Object.prototype.hasOwnProperty,V={key:!0,ref:!0,__self:!0,__source:!0};function j(W,ue,Se){var be=void 0,xe={},Ke=null,Et=null;if(ue!=null)for(be in ue.ref!==void 0&&(Et=ue.ref),ue.key!==void 0&&(Ke=""+ue.key),ue)L.call(ue,be)&&!V.hasOwnProperty(be)&&(xe[be]=ue[be]);var He=arguments.length-2;if(He===1)xe.children=Se;else if(1<He){for(var We=Array(He),Qt=0;Qt<He;Qt++)We[Qt]=arguments[Qt+2];xe.children=We}if(W&&W.defaultProps)for(be in He=W.defaultProps,He)xe[be]===void 0&&(xe[be]=He[be]);return{$$typeof:f,type:W,key:Ke,ref:Et,props:xe,_owner:N.current}}function M(W){return typeof W=="object"&&W!==null&&W.$$typeof===f}function le(W){var ue={"=":"=0",":":"=2"};return"$"+(""+W).replace(/[=:]/g,function(Se){return ue[Se]})}var me=/\/+/g,pe=[];function X(W,ue,Se,be){if(pe.length){var xe=pe.pop();return xe.result=W,xe.keyPrefix=ue,xe.func=Se,xe.context=be,xe.count=0,xe}return{result:W,keyPrefix:ue,func:Se,context:be,count:0}}function G(W){W.result=null,W.keyPrefix=null,W.func=null,W.context=null,W.count=0,10>pe.length&&pe.push(W)}function Y(W,ue,Se,be){var xe=typeof W;(xe==="undefined"||xe==="boolean")&&(W=null);var Ke=!1;if(W===null)Ke=!0;else switch(xe){case"string":case"number":Ke=!0;break;case"object":switch(W.$$typeof){case f:case p:Ke=!0}}if(Ke)return Se(be,W,ue===""?"."+ce(W,0):ue),1;if(Ke=0,ue=ue===""?".":ue+":",Array.isArray(W))for(var Et=0;Et<W.length;Et++){xe=W[Et];var He=ue+ce(xe,Et);Ke+=Y(xe,He,Se,be)}else if(W===null||typeof W>"u"?He=null:(He=w&&W[w]||W["@@iterator"],He=typeof He=="function"?He:null),typeof He=="function")for(W=He.call(W),Et=0;!(xe=W.next()).done;)xe=xe.value,He=ue+ce(xe,Et++),Ke+=Y(xe,He,Se,be);else xe==="object"&&(Se=""+W,v("31",Se==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":Se,""));return Ke}function ce(W,ue){return typeof W=="object"&&W!==null&&W.key!=null?le(W.key):ue.toString(36)}function ee(W,ue){W.func.call(W.context,ue,W.count++)}function $(W,ue,Se){var be=W.result,xe=W.keyPrefix;W=W.func.call(W.context,ue,W.count++),Array.isArray(W)?K(W,be,Se,l.thatReturnsArgument):W!=null&&(M(W)&&(ue=xe+(!W.key||ue&&ue.key===W.key?"":(""+W.key).replace(me,"$&/")+"/")+Se,W={$$typeof:f,type:W.type,key:ue,ref:W.ref,props:W.props,_owner:W._owner}),be.push(W))}function K(W,ue,Se,be,xe){var Ke="";Se!=null&&(Ke=(""+Se).replace(me,"$&/")+"/"),ue=X(ue,Ke,be,xe),W==null||Y(W,"",$,ue),G(ue)}var te={Children:{map:function(W,ue,Se){if(W==null)return W;var be=[];return K(W,be,null,ue,Se),be},forEach:function(W,ue,Se){if(W==null)return W;ue=X(null,null,ue,Se),W==null||Y(W,"",ee,ue),G(ue)},count:function(W){return W==null?0:Y(W,"",l.thatReturnsNull,null)},toArray:function(W){var ue=[];return K(W,ue,null,l.thatReturnsArgument),ue},only:function(W){return M(W)||v("143"),W}},createRef:function(){return{current:null}},Component:k,PureComponent:D,createContext:function(W,ue){return ue===void 0&&(ue=null),W={$$typeof:S,_calculateChangedBits:ue,_defaultValue:W,_currentValue:W,_changedBits:0,Provider:null,Consumer:null},W.Provider={$$typeof:E,_context:W},W.Consumer=W},forwardRef:function(W){return{$$typeof:R,render:W}},Fragment:y,StrictMode:_,unstable_AsyncMode:I,createElement:j,cloneElement:function(W,ue,Se){W==null&&v("267",W);var be=void 0,xe=s({},W.props),Ke=W.key,Et=W.ref,He=W._owner;if(ue!=null){ue.ref!==void 0&&(Et=ue.ref,He=N.current),ue.key!==void 0&&(Ke=""+ue.key);var We=void 0;W.type&&W.type.defaultProps&&(We=W.type.defaultProps);for(be in ue)L.call(ue,be)&&!V.hasOwnProperty(be)&&(xe[be]=ue[be]===void 0&&We!==void 0?We[be]:ue[be])}if(be=arguments.length-2,be===1)xe.children=Se;else if(1<be){We=Array(be);for(var Qt=0;Qt<be;Qt++)We[Qt]=arguments[Qt+2];xe.children=We}return{$$typeof:f,type:W.type,key:Ke,ref:Et,props:xe,_owner:He}},createFactory:function(W){var ue=j.bind(null,W);return ue.type=W,ue},isValidElement:M,version:"16.3.2",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:N,assign:s}},Ee=Object.freeze({default:te}),Te=Ee&&te||Ee;n.exports=Te.default?Te.default:Te},function(n,r,i){},function(n,r,i){n.exports=i(13)()},function(n,r,i){var s=i(1),o=i(0),a=i(3),l=i(2),u=i(4),f=i(6);n.exports=function(p,y){var _=typeof Symbol=="function"&&Symbol.iterator,E="@@iterator";function S($){var K=$&&(_&&$[_]||$[E]);if(typeof K=="function")return K}var I="<<anonymous>>",R={array:k("array"),bool:k("boolean"),func:k("function"),number:k("number"),object:k("object"),string:k("string"),symbol:k("symbol"),any:B(),arrayOf:D,element:T(),instanceOf:N,node:M(),objectOf:V,oneOf:L,oneOfType:j,shape:le,exact:me};function w($,K){return $===K?$!==0||1/$===1/K:$!==$&&K!==K}function v($){this.message=$,this.stack=""}v.prototype=Error.prototype;function C($){function K(Ee,Te,W,ue,Se,be,xe){return ue=ue||I,be=be||W,xe!==u&&y&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types"),Te[W]==null?Ee?Te[W]===null?new v("The "+Se+" `"+be+"` is marked as required "+("in `"+ue+"`, but its value is `null`.")):new v("The "+Se+" `"+be+"` is marked as required in "+("`"+ue+"`, but its value is `undefined`.")):null:$(Te,W,ue,Se,be)}var te=K.bind(null,!1);return te.isRequired=K.bind(null,!0),te}function k($){function K(te,Ee,Te,W,ue,Se){var be=te[Ee],xe=G(be);if(xe!==$){var Ke=Y(be);return new v("Invalid "+W+" `"+ue+"` of type "+("`"+Ke+"` supplied to `"+Te+"`, expected ")+("`"+$+"`."))}return null}return C(K)}function B(){return C(s.thatReturnsNull)}function D($){function K(te,Ee,Te,W,ue){if(typeof $!="function")return new v("Property `"+ue+"` of component `"+Te+"` has invalid PropType notation inside arrayOf.");var Se=te[Ee];if(!Array.isArray(Se)){var be=G(Se);return new v("Invalid "+W+" `"+ue+"` of type "+("`"+be+"` supplied to `"+Te+"`, expected an array."))}for(var xe=0;xe<Se.length;xe++){var Ke=$(Se,xe,Te,W,ue+"["+xe+"]",u);if(Ke instanceof Error)return Ke}return null}return C(K)}function T(){function $(K,te,Ee,Te,W){var ue=K[te];if(!p(ue)){var Se=G(ue);return new v("Invalid "+Te+" `"+W+"` of type "+("`"+Se+"` supplied to `"+Ee+"`, expected a single ReactElement."))}return null}return C($)}function N($){function K(te,Ee,Te,W,ue){if(!(te[Ee]instanceof $)){var Se=$.name||I,be=ee(te[Ee]);return new v("Invalid "+W+" `"+ue+"` of type "+("`"+be+"` supplied to `"+Te+"`, expected ")+("instance of `"+Se+"`."))}return null}return C(K)}function L($){if(!Array.isArray($))return s.thatReturnsNull;function K(te,Ee,Te,W,ue){for(var Se=te[Ee],be=0;be<$.length;be++)if(w(Se,$[be]))return null;var xe=JSON.stringify($);return new v("Invalid "+W+" `"+ue+"` of value `"+Se+"` "+("supplied to `"+Te+"`, expected one of "+xe+"."))}return C(K)}function V($){function K(te,Ee,Te,W,ue){if(typeof $!="function")return new v("Property `"+ue+"` of component `"+Te+"` has invalid PropType notation inside objectOf.");var Se=te[Ee],be=G(Se);if(be!=="object")return new v("Invalid "+W+" `"+ue+"` of type "+("`"+be+"` supplied to `"+Te+"`, expected an object."));for(var xe in Se)if(Se.hasOwnProperty(xe)){var Ke=$(Se,xe,Te,W,ue+"."+xe,u);if(Ke instanceof Error)return Ke}return null}return C(K)}function j($){if(!Array.isArray($))return s.thatReturnsNull;for(var K=0;K<$.length;K++){var te=$[K];if(typeof te!="function")return a(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",ce(te),K),s.thatReturnsNull}function Ee(Te,W,ue,Se,be){for(var xe=0;xe<$.length;xe++){var Ke=$[xe];if(Ke(Te,W,ue,Se,be,u)==null)return null}return new v("Invalid "+Se+" `"+be+"` supplied to "+("`"+ue+"`."))}return C(Ee)}function M(){function $(K,te,Ee,Te,W){return pe(K[te])?null:new v("Invalid "+Te+" `"+W+"` supplied to "+("`"+Ee+"`, expected a ReactNode."))}return C($)}function le($){function K(te,Ee,Te,W,ue){var Se=te[Ee],be=G(Se);if(be!=="object")return new v("Invalid "+W+" `"+ue+"` of type `"+be+"` "+("supplied to `"+Te+"`, expected `object`."));for(var xe in $){var Ke=$[xe];if(Ke){var Et=Ke(Se,xe,Te,W,ue+"."+xe,u);if(Et)return Et}}return null}return C(K)}function me($){function K(te,Ee,Te,W,ue){var Se=te[Ee],be=G(Se);if(be!=="object")return new v("Invalid "+W+" `"+ue+"` of type `"+be+"` "+("supplied to `"+Te+"`, expected `object`."));var xe=l({},te[Ee],$);for(var Ke in xe){var Et=$[Ke];if(!Et)return new v("Invalid "+W+" `"+ue+"` key `"+Ke+"` supplied to `"+Te+"`.\nBad object: "+JSON.stringify(te[Ee],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys($),null,"  "));var He=Et(Se,Ke,Te,W,ue+"."+Ke,u);if(He)return He}return null}return C(K)}function pe($){switch(typeof $){case"number":case"string":case"undefined":return!0;case"boolean":return!$;case"object":if(Array.isArray($))return $.every(pe);if($===null||p($))return!0;var K=S($);if(K){var te=K.call($),Ee;if(K!==$.entries){for(;!(Ee=te.next()).done;)if(!pe(Ee.value))return!1}else for(;!(Ee=te.next()).done;){var Te=Ee.value;if(Te&&!pe(Te[1]))return!1}}else return!1;return!0;default:return!1}}function X($,K){return $==="symbol"||K["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&K instanceof Symbol}function G($){var K=typeof $;return Array.isArray($)?"array":$ instanceof RegExp?"object":X(K,$)?"symbol":K}function Y($){if(typeof $>"u"||$===null)return""+$;var K=G($);if(K==="object"){if($ instanceof Date)return"date";if($ instanceof RegExp)return"regexp"}return K}function ce($){var K=Y($);switch(K){case"array":case"object":return"an "+K;case"boolean":case"date":case"regexp":return"a "+K;default:return K}}function ee($){return!$.constructor||!$.constructor.name?I:$.constructor.name}return R.checkPropTypes=f,R.PropTypes=R,R}},function(n,r,i){var s=i(1),o=i(0),a=i(4);n.exports=function(){function l(p,y,_,E,S,I){I!==a&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}l.isRequired=l;function u(){return l}var f={array:l,bool:l,func:l,number:l,object:l,string:l,symbol:l,any:l,arrayOf:u,element:l,instanceOf:u,node:l,objectOf:u,oneOf:u,oneOfType:u,shape:u,exact:u};return f.checkPropTypes=s,f.PropTypes=f,f}},function(n,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(15);Object.defineProperty(r,"blank",{enumerable:!0,get:function(){return E(s).default}});var o=i(16);Object.defineProperty(r,"balls",{enumerable:!0,get:function(){return E(o).default}});var a=i(17);Object.defineProperty(r,"bars",{enumerable:!0,get:function(){return E(a).default}});var l=i(18);Object.defineProperty(r,"bubbles",{enumerable:!0,get:function(){return E(l).default}});var u=i(19);Object.defineProperty(r,"cubes",{enumerable:!0,get:function(){return E(u).default}});var f=i(20);Object.defineProperty(r,"cylon",{enumerable:!0,get:function(){return E(f).default}});var p=i(21);Object.defineProperty(r,"spin",{enumerable:!0,get:function(){return E(p).default}});var y=i(22);Object.defineProperty(r,"spinningBubbles",{enumerable:!0,get:function(){return E(y).default}});var _=i(23);Object.defineProperty(r,"spokes",{enumerable:!0,get:function(){return E(_).default}});function E(S){return S&&S.__esModule?S:{default:S}}},function(n,r){n.exports=`<svg class="icon-blank" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"></svg>
`},function(n,r){n.exports=`<svg class="icon-loading" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <path transform="translate(-8 0)" d="M4 12 A4 4 0 0 0 4 20 A4 4 0 0 0 4 12"> 
    <animateTransform attributeName="transform" type="translate" values="-8 0; 2 0; 2 0;" dur="0.8s" repeatCount="indefinite" begin="0" keytimes="0;.25;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline"  />
  </path>
  <path transform="translate(2 0)" d="M4 12 A4 4 0 0 0 4 20 A4 4 0 0 0 4 12"> 
    <animateTransform attributeName="transform" type="translate" values="2 0; 12 0; 12 0;" dur="0.8s" repeatCount="indefinite" begin="0" keytimes="0;.35;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline"  />
  </path>
  <path transform="translate(12 0)" d="M4 12 A4 4 0 0 0 4 20 A4 4 0 0 0 4 12"> 
    <animateTransform attributeName="transform" type="translate" values="12 0; 22 0; 22 0;" dur="0.8s" repeatCount="indefinite" begin="0" keytimes="0;.45;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline"  />
  </path>
  <path transform="translate(24 0)" d="M4 12 A4 4 0 0 0 4 20 A4 4 0 0 0 4 12"> 
    <animateTransform attributeName="transform" type="translate" values="22 0; 32 0; 32 0;" dur="0.8s" repeatCount="indefinite" begin="0" keytimes="0;.55;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline"  />
  </path>
</svg>
`},function(n,r){n.exports=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <path transform="translate(2)" d="M0 12 V20 H4 V12z"> 
    <animate attributeName="d" values="M0 12 V20 H4 V12z; M0 4 V28 H4 V4z; M0 12 V20 H4 V12z; M0 12 V20 H4 V12z" dur="1.2s" repeatCount="indefinite" begin="0" keytimes="0;.2;.5;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.8 0.4 0.8" calcMode="spline"  />
  </path>
  <path transform="translate(8)" d="M0 12 V20 H4 V12z">
    <animate attributeName="d" values="M0 12 V20 H4 V12z; M0 4 V28 H4 V4z; M0 12 V20 H4 V12z; M0 12 V20 H4 V12z" dur="1.2s" repeatCount="indefinite" begin="0.2" keytimes="0;.2;.5;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.8 0.4 0.8" calcMode="spline"  />
  </path>
  <path transform="translate(14)" d="M0 12 V20 H4 V12z">
    <animate attributeName="d" values="M0 12 V20 H4 V12z; M0 4 V28 H4 V4z; M0 12 V20 H4 V12z; M0 12 V20 H4 V12z" dur="1.2s" repeatCount="indefinite" begin="0.4" keytimes="0;.2;.5;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.8 0.4 0.8" calcMode="spline" />
  </path>
  <path transform="translate(20)" d="M0 12 V20 H4 V12z">
    <animate attributeName="d" values="M0 12 V20 H4 V12z; M0 4 V28 H4 V4z; M0 12 V20 H4 V12z; M0 12 V20 H4 V12z" dur="1.2s" repeatCount="indefinite" begin="0.6" keytimes="0;.2;.5;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.8 0.4 0.8" calcMode="spline" />
  </path>
  <path transform="translate(26)" d="M0 12 V20 H4 V12z">
    <animate attributeName="d" values="M0 12 V20 H4 V12z; M0 4 V28 H4 V4z; M0 12 V20 H4 V12z; M0 12 V20 H4 V12z" dur="1.2s" repeatCount="indefinite" begin="0.8" keytimes="0;.2;.5;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.8 0.4 0.8" calcMode="spline" />
  </path>
</svg>
`},function(n,r){n.exports=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <circle transform="translate(8 0)" cx="0" cy="16" r="0"> 
    <animate attributeName="r" values="0; 4; 0; 0" dur="1.2s" repeatCount="indefinite" begin="0"
      keytimes="0;0.2;0.7;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline" />
  </circle>
  <circle transform="translate(16 0)" cx="0" cy="16" r="0"> 
    <animate attributeName="r" values="0; 4; 0; 0" dur="1.2s" repeatCount="indefinite" begin="0.3"
      keytimes="0;0.2;0.7;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline" />
  </circle>
  <circle transform="translate(24 0)" cx="0" cy="16" r="0"> 
    <animate attributeName="r" values="0; 4; 0; 0" dur="1.2s" repeatCount="indefinite" begin="0.6"
      keytimes="0;0.2;0.7;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline" />
  </circle>
</svg>
`},function(n,r){n.exports=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <path transform="translate(-8 0)" d="M0 12 V20 H8 V12z"> 
    <animateTransform attributeName="transform" type="translate" values="-8 0; 2 0; 2 0;" dur="0.8s" repeatCount="indefinite" begin="0" keytimes="0;.25;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline"  />
  </path>
  <path transform="translate(2 0)" d="M0 12 V20 H8 V12z"> 
    <animateTransform attributeName="transform" type="translate" values="2 0; 12 0; 12 0;" dur="0.8s" repeatCount="indefinite" begin="0" keytimes="0;.35;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline"  />
  </path>
  <path transform="translate(12 0)" d="M0 12 V20 H8 V12z"> 
    <animateTransform attributeName="transform" type="translate" values="12 0; 22 0; 22 0;" dur="0.8s" repeatCount="indefinite" begin="0" keytimes="0;.45;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline"  />
  </path>
  <path transform="translate(24 0)" d="M0 12 V20 H8 V12z"> 
    <animateTransform attributeName="transform" type="translate" values="22 0; 32 0; 32 0;" dur="0.8s" repeatCount="indefinite" begin="0" keytimes="0;.55;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline"  />
  </path>
</svg>
`},function(n,r){n.exports=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <path transform="translate(0 0)" d="M0 12 V20 H4 V12z">
    <animateTransform attributeName="transform" type="translate" values="0 0; 28 0; 0 0; 0 0" dur="1.5s" begin="0" repeatCount="indefinite" keytimes="0;0.3;0.6;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </path>
  <path opacity="0.5" transform="translate(0 0)" d="M0 12 V20 H4 V12z">
    <animateTransform attributeName="transform" type="translate" values="0 0; 28 0; 0 0; 0 0" dur="1.5s" begin="0.1s" repeatCount="indefinite" keytimes="0;0.3;0.6;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </path>
  <path opacity="0.25" transform="translate(0 0)" d="M0 12 V20 H4 V12z">
    <animateTransform attributeName="transform" type="translate" values="0 0; 28 0; 0 0; 0 0" dur="1.5s" begin="0.2s" repeatCount="indefinite" keytimes="0;0.3;0.6;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </path>
</svg>
`},function(n,r){n.exports=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <path opacity=".25" d="M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"/>
  <path d="M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z">
    <animateTransform attributeName="transform" type="rotate" from="0 16 16" to="360 16 16" dur="0.8s" repeatCount="indefinite" />
  </path>
</svg>
`},function(n,r){n.exports=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <circle cx="16" cy="3" r="0">
    <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </circle>
  <circle transform="rotate(45 16 16)" cx="16" cy="3" r="0">
    <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.125s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </circle>
  <circle transform="rotate(90 16 16)" cx="16" cy="3" r="0">
    <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.25s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </circle>
  <circle transform="rotate(135 16 16)" cx="16" cy="3" r="0">
    <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.375s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </circle>
  <circle transform="rotate(180 16 16)" cx="16" cy="3" r="0">
    <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.5s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </circle>
  <circle transform="rotate(225 16 16)" cx="16" cy="3" r="0">
    <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.625s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </circle>
  <circle transform="rotate(270 16 16)" cx="16" cy="3" r="0">
    <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.75s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </circle>
  <circle transform="rotate(315 16 16)" cx="16" cy="3" r="0">
    <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.875s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </circle>
  <circle transform="rotate(180 16 16)" cx="16" cy="3" r="0">
    <animate attributeName="r" values="0;3;0;0" dur="1s" repeatCount="indefinite" begin="0.5s" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" />
  </circle>
</svg>
`},function(n,r){n.exports=`<svg id="loading" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <path opacity=".1" d="M14 0 H18 V8 H14 z" transform="rotate(0 16 16)">
    <animate attributeName="opacity" from="1" to=".1" dur="1s" repeatCount="indefinite" begin="0"/>
  </path>
  <path opacity=".1" d="M14 0 H18 V8 H14 z" transform="rotate(45 16 16)">
    <animate attributeName="opacity" from="1" to=".1" dur="1s" repeatCount="indefinite" begin="0.125s"/>
  </path>
  <path opacity=".1" d="M14 0 H18 V8 H14 z" transform="rotate(90 16 16)">
    <animate attributeName="opacity" from="1" to=".1" dur="1s" repeatCount="indefinite" begin="0.25s"/>
  </path>
  <path opacity=".1" d="M14 0 H18 V8 H14 z" transform="rotate(135 16 16)">
    <animate attributeName="opacity" from="1" to=".1" dur="1s" repeatCount="indefinite" begin="0.375s"/>
  </path>
  <path opacity=".1" d="M14 0 H18 V8 H14 z" transform="rotate(180 16 16)">
    <animate attributeName="opacity" from="1" to=".1" dur="1s" repeatCount="indefinite" begin="0.5s"/>
  </path>
  <path opacity=".1" d="M14 0 H18 V8 H14 z" transform="rotate(225 16 16)">
    <animate attributeName="opacity" from="1" to=".1" dur="1s" repeatCount="indefinite" begin="0.675s"/>
  </path>
  <path opacity=".1" d="M14 0 H18 V8 H14 z" transform="rotate(270 16 16)">
    <animate attributeName="opacity" from="1" to=".1" dur="1s" repeatCount="indefinite" begin="0.75s"/>
  </path>
  <path opacity=".1" d="M14 0 H18 V8 H14 z" transform="rotate(315 16 16)">
    <animate attributeName="opacity" from="1" to=".1" dur="1s" repeatCount="indefinite" begin="0.875s"/>
  </path>
</svg>
`}])})})(K5);var Fte=K5.exports;const jte=rT(Fte),Ky=({height:t,width:e})=>x.jsx(jte,{type:"spokes",color:"white",height:t||"90%",width:e||"90%",className:"text-center mx-3 "});var Vte={exports:{}};function Ute(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var U0={exports:{}};const Bte={},$te=Object.freeze(Object.defineProperty({__proto__:null,default:Bte},Symbol.toStringTag,{value:"Module"})),zte=gV($te);var JA;function Hte(){return JA||(JA=1,function(t,e){(function(n,r){t.exports=r()})($i,function(){var n=n||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof $i<"u"&&$i.crypto&&(s=$i.crypto),!s&&typeof Ute=="function")try{s=zte}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function w(){}return function(v){var C;return w.prototype=v,C=new w,w.prototype=null,C}}(),l={},u=l.lib={},f=u.Base=function(){return{extend:function(w){var v=a(this);return w&&v.mixIn(w),(!v.hasOwnProperty("init")||this.init===v.init)&&(v.init=function(){v.$super.init.apply(this,arguments)}),v.init.prototype=v,v.$super=this,v},create:function(){var w=this.extend();return w.init.apply(w,arguments),w},init:function(){},mixIn:function(w){for(var v in w)w.hasOwnProperty(v)&&(this[v]=w[v]);w.hasOwnProperty("toString")&&(this.toString=w.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),p=u.WordArray=f.extend({init:function(w,v){w=this.words=w||[],v!=i?this.sigBytes=v:this.sigBytes=w.length*4},toString:function(w){return(w||_).stringify(this)},concat:function(w){var v=this.words,C=w.words,k=this.sigBytes,B=w.sigBytes;if(this.clamp(),k%4)for(var D=0;D<B;D++){var T=C[D>>>2]>>>24-D%4*8&255;v[k+D>>>2]|=T<<24-(k+D)%4*8}else for(var N=0;N<B;N+=4)v[k+N>>>2]=C[N>>>2];return this.sigBytes+=B,this},clamp:function(){var w=this.words,v=this.sigBytes;w[v>>>2]&=4294967295<<32-v%4*8,w.length=r.ceil(v/4)},clone:function(){var w=f.clone.call(this);return w.words=this.words.slice(0),w},random:function(w){for(var v=[],C=0;C<w;C+=4)v.push(o());return new p.init(v,w)}}),y=l.enc={},_=y.Hex={stringify:function(w){for(var v=w.words,C=w.sigBytes,k=[],B=0;B<C;B++){var D=v[B>>>2]>>>24-B%4*8&255;k.push((D>>>4).toString(16)),k.push((D&15).toString(16))}return k.join("")},parse:function(w){for(var v=w.length,C=[],k=0;k<v;k+=2)C[k>>>3]|=parseInt(w.substr(k,2),16)<<24-k%8*4;return new p.init(C,v/2)}},E=y.Latin1={stringify:function(w){for(var v=w.words,C=w.sigBytes,k=[],B=0;B<C;B++){var D=v[B>>>2]>>>24-B%4*8&255;k.push(String.fromCharCode(D))}return k.join("")},parse:function(w){for(var v=w.length,C=[],k=0;k<v;k++)C[k>>>2]|=(w.charCodeAt(k)&255)<<24-k%4*8;return new p.init(C,v)}},S=y.Utf8={stringify:function(w){try{return decodeURIComponent(escape(E.stringify(w)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(w){return E.parse(unescape(encodeURIComponent(w)))}},I=u.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new p.init,this._nDataBytes=0},_append:function(w){typeof w=="string"&&(w=S.parse(w)),this._data.concat(w),this._nDataBytes+=w.sigBytes},_process:function(w){var v,C=this._data,k=C.words,B=C.sigBytes,D=this.blockSize,T=D*4,N=B/T;w?N=r.ceil(N):N=r.max((N|0)-this._minBufferSize,0);var L=N*D,V=r.min(L*4,B);if(L){for(var j=0;j<L;j+=D)this._doProcessBlock(k,j);v=k.splice(0,L),C.sigBytes-=V}return new p.init(v,V)},clone:function(){var w=f.clone.call(this);return w._data=this._data.clone(),w},_minBufferSize:0});u.Hasher=I.extend({cfg:f.extend(),init:function(w){this.cfg=this.cfg.extend(w),this.reset()},reset:function(){I.reset.call(this),this._doReset()},update:function(w){return this._append(w),this._process(),this},finalize:function(w){w&&this._append(w);var v=this._doFinalize();return v},blockSize:16,_createHelper:function(w){return function(v,C){return new w.init(C).finalize(v)}},_createHmacHelper:function(w){return function(v,C){return new R.HMAC.init(w,C).finalize(v)}}});var R=l.algo={};return l}(Math);return n})}(U0)),U0.exports}(function(t,e){(function(n,r){t.exports=r(Hte())})($i,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,l=i.algo,u=[];(function(){for(var S=0;S<64;S++)u[S]=r.abs(r.sin(S+1))*4294967296|0})();var f=l.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(S,I){for(var R=0;R<16;R++){var w=I+R,v=S[w];S[w]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360}var C=this._hash.words,k=S[I+0],B=S[I+1],D=S[I+2],T=S[I+3],N=S[I+4],L=S[I+5],V=S[I+6],j=S[I+7],M=S[I+8],le=S[I+9],me=S[I+10],pe=S[I+11],X=S[I+12],G=S[I+13],Y=S[I+14],ce=S[I+15],ee=C[0],$=C[1],K=C[2],te=C[3];ee=p(ee,$,K,te,k,7,u[0]),te=p(te,ee,$,K,B,12,u[1]),K=p(K,te,ee,$,D,17,u[2]),$=p($,K,te,ee,T,22,u[3]),ee=p(ee,$,K,te,N,7,u[4]),te=p(te,ee,$,K,L,12,u[5]),K=p(K,te,ee,$,V,17,u[6]),$=p($,K,te,ee,j,22,u[7]),ee=p(ee,$,K,te,M,7,u[8]),te=p(te,ee,$,K,le,12,u[9]),K=p(K,te,ee,$,me,17,u[10]),$=p($,K,te,ee,pe,22,u[11]),ee=p(ee,$,K,te,X,7,u[12]),te=p(te,ee,$,K,G,12,u[13]),K=p(K,te,ee,$,Y,17,u[14]),$=p($,K,te,ee,ce,22,u[15]),ee=y(ee,$,K,te,B,5,u[16]),te=y(te,ee,$,K,V,9,u[17]),K=y(K,te,ee,$,pe,14,u[18]),$=y($,K,te,ee,k,20,u[19]),ee=y(ee,$,K,te,L,5,u[20]),te=y(te,ee,$,K,me,9,u[21]),K=y(K,te,ee,$,ce,14,u[22]),$=y($,K,te,ee,N,20,u[23]),ee=y(ee,$,K,te,le,5,u[24]),te=y(te,ee,$,K,Y,9,u[25]),K=y(K,te,ee,$,T,14,u[26]),$=y($,K,te,ee,M,20,u[27]),ee=y(ee,$,K,te,G,5,u[28]),te=y(te,ee,$,K,D,9,u[29]),K=y(K,te,ee,$,j,14,u[30]),$=y($,K,te,ee,X,20,u[31]),ee=_(ee,$,K,te,L,4,u[32]),te=_(te,ee,$,K,M,11,u[33]),K=_(K,te,ee,$,pe,16,u[34]),$=_($,K,te,ee,Y,23,u[35]),ee=_(ee,$,K,te,B,4,u[36]),te=_(te,ee,$,K,N,11,u[37]),K=_(K,te,ee,$,j,16,u[38]),$=_($,K,te,ee,me,23,u[39]),ee=_(ee,$,K,te,G,4,u[40]),te=_(te,ee,$,K,k,11,u[41]),K=_(K,te,ee,$,T,16,u[42]),$=_($,K,te,ee,V,23,u[43]),ee=_(ee,$,K,te,le,4,u[44]),te=_(te,ee,$,K,X,11,u[45]),K=_(K,te,ee,$,ce,16,u[46]),$=_($,K,te,ee,D,23,u[47]),ee=E(ee,$,K,te,k,6,u[48]),te=E(te,ee,$,K,j,10,u[49]),K=E(K,te,ee,$,Y,15,u[50]),$=E($,K,te,ee,L,21,u[51]),ee=E(ee,$,K,te,X,6,u[52]),te=E(te,ee,$,K,T,10,u[53]),K=E(K,te,ee,$,me,15,u[54]),$=E($,K,te,ee,B,21,u[55]),ee=E(ee,$,K,te,M,6,u[56]),te=E(te,ee,$,K,ce,10,u[57]),K=E(K,te,ee,$,V,15,u[58]),$=E($,K,te,ee,G,21,u[59]),ee=E(ee,$,K,te,N,6,u[60]),te=E(te,ee,$,K,pe,10,u[61]),K=E(K,te,ee,$,D,15,u[62]),$=E($,K,te,ee,le,21,u[63]),C[0]=C[0]+ee|0,C[1]=C[1]+$|0,C[2]=C[2]+K|0,C[3]=C[3]+te|0},_doFinalize:function(){var S=this._data,I=S.words,R=this._nDataBytes*8,w=S.sigBytes*8;I[w>>>5]|=128<<24-w%32;var v=r.floor(R/4294967296),C=R;I[(w+64>>>9<<4)+15]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,I[(w+64>>>9<<4)+14]=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,S.sigBytes=(I.length+1)*4,this._process();for(var k=this._hash,B=k.words,D=0;D<4;D++){var T=B[D];B[D]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360}return k},clone:function(){var S=a.clone.call(this);return S._hash=this._hash.clone(),S}});function p(S,I,R,w,v,C,k){var B=S+(I&R|~I&w)+v+k;return(B<<C|B>>>32-C)+I}function y(S,I,R,w,v,C,k){var B=S+(I&w|R&~w)+v+k;return(B<<C|B>>>32-C)+I}function _(S,I,R,w,v,C,k){var B=S+(I^R^w)+v+k;return(B<<C|B>>>32-C)+I}function E(S,I,R,w,v,C,k){var B=S+(R^(I|~w))+v+k;return(B<<C|B>>>32-C)+I}i.MD5=a._createHelper(f),i.HmacMD5=a._createHmacHelper(f)}(Math),n.MD5})})(Vte);const G5=O.createContext({userArray:[]}),Cr=()=>O.useContext(G5);function qte({children:t}){const{db:e,currentUser:n,setCurrentUser:r}=Jn(),[i,s]=O.useState([]),[o,a]=O.useState([]),[l,u]=O.useState([]),[f,p]=O.useState(!1),y=[],[_,E]=O.useState([]),[S,I]=O.useState([]),[R,w]=O.useState(!1),v=async()=>{try{(await jn(Hn(St(e,"users")))).forEach(M=>{y.push(M.data())}),a(n==null?void 0:n.following)}catch{}finally{}},C=j=>{if(j==="https://i.pinimg.com/736x/90/d1/ac/90d1ac48711f63c6a290238c8382632f.jpg"||j!=null&&j.includes("google"))return j;const M="q_auto,f_auto,h_500,w_500,c_fill,g_auto",le=(j==null?void 0:j.indexOf("/upload"))+7;return(j==null?void 0:j.slice(0,le))+`/${M}`+(j==null?void 0:j.slice(le))},k=(j,M,le)=>{j.forEach(me=>{if(M===me.uid){r(me);return}})},B=async j=>!(await jn(Hn(St(e,"users"),br("email","==",j)))).empty,D=async j=>{(await jn(Hn(St(e,"users"),br("uid","==",j)))).forEach(le=>{r(le.data()),a(le.data().following)})},T=()=>{i&&i.map((j,M,le)=>{let me=[...S,{uid:j.uid,followers:j.followers,following:j.following}];I(me)})};async function N(j,M){try{const le=await jn(Hn(St(e,"users"),br("uid","==",j)));le.empty||le.forEach(async me=>{const pe=me.data(),X=pe.posts.findIndex(G=>G.pid===M);if(X!==-1)if(pe.posts[X].likes.includes(n==null?void 0:n.uid)){const G=[...pe.posts];G[X].likes=G[X].likes.filter(ce=>ce!==(n==null?void 0:n.uid));const Y=Vn(e,"users",me.id);await gs(Y,{posts:G})}else{const G=[...pe.posts];G[X].likes.push(n==null?void 0:n.uid);const Y=Vn(e,"users",me.id);await gs(Y,{posts:G})}})}catch(le){console.error("Error liking post:",le)}try{const le=await jn(Hn(St(e,"users"),br("uid","==",n==null?void 0:n.uid)));le.empty||le.forEach(async me=>{const pe=me.data();if(pe.postsLiked.includes(M)){const X=pe.postsLiked.indexOf(M);let G=pe.postsLiked;G.splice(X,1);const Y=Vn(e,"users",me.id);await gs(Y,{postsLiked:G})}else{const X=Vn(e,"users",me.id);let G=pe.postsLiked;G.push(M),await gs(X,{postsLiked:G})}})}catch(le){console.error("Error liking post:",le)}}async function L(j){try{const M=St(e,"users"),le=Hn(M,br("uid","==",j)),me=await jn(le);let pe={};me.empty||me.forEach(async X=>{let G=X.data().followers||[];G.includes(n.uid)?G=G.filter(ce=>ce!==n.uid):G.push(n.uid);const Y=Vn(e,"users",X.id);await gs(Y,{followers:G}).then(()=>{}).catch(ce=>{console.error(ce)})})}catch(M){console.error(M)}try{const M=St(e,"users"),le=Hn(M,br("uid","==",n.uid)),me=await jn(le);me.empty||me.forEach(async pe=>{let X=pe.data().following||[];X.includes(j)?X=X.filter(Y=>Y!==j):(X.push(j),a(X));const G=Vn(e,"users",pe.id);await gs(G,{following:X}).then(()=>{const Y={...n,following:X};a(X)}).catch(Y=>{console.error(Y)})})}catch{}}const V={userArray:i,setUserArray:s,users:y,getUsers:v,getUserDetailsById:D,isFirstLogin:f,setIsFirstLogin:p,setIsFollowing:a,isFollowing:o,handleFollow:L,userExists:B,uzerFollowArray:l,getValueByKey:k,isUsersFollowing:_,setUsersIsFollowing:E,userFollow:S,setUserFollow:I,handleLike:N,setPostsLoaded:w,postsLoaded:R,transformCloudinaryURL:C};return O.useEffect(()=>{async function j(){await v()}j(),i&&T()},[n]),O.useEffect(()=>{const j=St(e,"users"),M=ic(j,le=>{const me=le.docs.map(pe=>({id:pe.id,...pe.data()}));s(me),w(!0)});return()=>M()},[]),O.useEffect(()=>{p((n==null?void 0:n.username)==="")},[n]),x.jsx(G5.Provider,{value:V,children:t})}function Wte(){const{currentUser:t,loginUzer:e,setCurrentUser:n}=Jn(),{getUserDetailsById:r}=Cr(),i=Aa(),{register:s,handleSubmit:o,formState:{errors:a,isSubmitting:l,isSubmitted:u}}=rh(),f=async p=>{try{e(p.email,p.password).then(y=>{vs("Login Successful 🥳","success","bottom-center",1500),r(y.user.uid),i("/r-social/profile/me",{replace:!0}),n(y.user)}).catch(y=>{y.message==="Firebase: Error (auth/invalid-credential)."?vs("Invalid User Credentials","error","bottom-center",4e3):vs(y.message,"error","bottom-center",4e3)})}catch(y){console.error(y),vs(y.message,"error","bottom-center",4e3)}};return O.useEffect(()=>{t!==null&&i("/r-social/")},[t]),x.jsx(x.Fragment,{children:x.jsxs("div",{className:"flex bg-cyan-100 min-h-full  flex-1 flex-col border-2 border-cyan-200  shadow-2xl justify-center px-6 py-10 lg:px-8 m-auto w-80 my-5 rounded-md ",children:[x.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[x.jsx("h1",{className:"mt-10 text-center text-4xl font-bold leading-9 tracking-tight text-blue-900",children:"R-Social"}),x.jsx("h2",{className:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900",children:"Login"})]}),x.jsxs("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:[x.jsxs("form",{onSubmit:o(f),className:"space-y-5",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900",children:"Email"}),x.jsx("div",{className:"mt-2",children:x.jsx("input",{autoFocus:!0,id:"email",name:"email",type:"email",required:!0,...s("email",{required:!0}),autoComplete:"email",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 "})})]}),x.jsxs("div",{children:[x.jsx("div",{className:"flex items-center justify-between",children:x.jsx("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"Password"})}),x.jsx("div",{className:"mt-2",children:x.jsx("input",{...s("password",{required:!0,minLength:{value:8,message:"Password must have atleast 8 characters"},maxLength:{value:16,message:"Password must have maximum 16 characters"}}),id:"password",name:"password",type:"password",required:!0,autoComplete:"current-password",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})}),a.password&&x.jsx("p",{role:"alert",className:"text-red-600",children:a.password.message})]}),x.jsx("div",{children:x.jsxs("button",{disabled:l||t,type:"submit",className:`flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 ${t?"disabled disabled:bg-slate-500":""}`,children:["Sign in ",x.jsx("span",{children:l&&x.jsx(Ky,{type:"spin",color:"white"})})]})})]}),x.jsx("br",{}),!t&&x.jsxs("div",{children:[x.jsx("p",{children:"Not a Registered User?"}),x.jsx(qn,{to:"/r-social/register",children:x.jsx("p",{className:"text-blue-700 font-semibold",children:"Register"})})]})]})]})})}function Kte(){const t=Aa(),{register:e,handleSubmit:n,formState:{errors:r,isSubmitting:i,isSubmitted:s}}=rh(),{currentUser:o,registerUzer:a,loginWithProvider:l,setCurrentUser:u,db:f}=Jn();O.useState(!0);const{isFirstLogin:p,setIsFirstLogin:y,getUserDetailsById:_,userExists:E,transformCloudinaryURL:S}=Cr(),I=()=>o&&o.profilePictureURL?S(o.profilePictureURL):"https://i.pinimg.com/736x/90/d1/ac/90d1ac48711f63c6a290238c8382632f.jpg",R=async()=>l().then(async v=>{Vi.credentialFromResult(v).accessToken;const k=v.user;y(!k.email),_(k.uid);try{const B=St(f,"users"),D=Hn(B,br("email","==",v.user.email));try{const T=await jn(D);if(console.log(T.empty),T.empty){console.log("does not exist");const N=await Tg(St(f,"users"),{uid:k.uid,username:"",email:k.email,profilePictureURL:k.providerData[0].photoURL,bio:"This is a bio",followers:[],following:[],accountPrivacy:"public",notificationPreferences:{email:!0,push:!0},twoFactorEnabled:!1,posts:[],accountStatus:"active",verificationStatus:"unverified",postsLiked:[],roomID:""}).then(L=>{y(!0)}).catch(L=>{console.error(L)})}}catch(T){console.error("Error checking email: ",T)}}catch(B){console.error(B)}t("/r-social/profile/me")}).catch(v=>{v.code;const C=v.message;vs(C,"error","bottom-center",4e3),v.customData.email,Vi.credentialFromError(v)}),w=async v=>{try{await a(v.email,v.password).then(async C=>{vs("User Registered Successfully 🥳","success","bottom-center",2e3);const k=C.user;try{await eK(k,{displayName:v.fname}),I();const B=await Tg(St(f,"users"),{uid:k.uid,username:"",email:k.email,profilePictureURL:I(),bio:"This is a bio",followers:[],following:[],accountPrivacy:"public",notificationPreferences:{email:!0,push:!0},twoFactorEnabled:!1,posts:[],accountStatus:"active",verificationStatus:"unverified",postsLiked:[],roomID:""}).then(D=>{y(!0)}).catch(D=>{console.error(D)})}catch(B){console.error(B)}t("/r-social/login",{replace:!0})}).catch(C=>{C.message==="Firebase: Error (auth/email-already-in-use)."?vs("User with this Email already exists!","error","bottom-center",4e3):vs(C.message,"error","bottom-center",4e3)})}catch(C){vs(C.message,"error","bottom-center",4e3)}};return O.useEffect(()=>{o!==null&&t("/r-social/")},[o]),x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex bg-cyan-100 min-h-full  flex-1 flex-col border-2   border-cyan-200  shadow-2xl justify-center px-6 py-7 lg:px-8 m-auto w-80 my-5 rounded-md ",children:[x.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:[x.jsx("h1",{className:"mt-10 text-center text-4xl font-bold leading-9 tracking-tight text-blue-900",children:"R-Social"}),x.jsx("h2",{className:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900",children:"Sign Up"})]}),x.jsxs("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:[x.jsxs("form",{onSubmit:n(w),className:"space-y-5",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900",children:"Email address"}),x.jsx("div",{className:"mt-2",children:x.jsx("input",{id:"email",name:"email",type:"email",required:!0,...e("email",{required:!0}),autoComplete:"email",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"fname",className:"block text-sm font-medium leading-6 text-gray-900",children:"First Name"}),x.jsx("div",{className:"mt-2",children:x.jsx("input",{...e("fname",{required:!0}),id:"fname",name:"fname",type:"text",required:!0,autoComplete:"fname",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),x.jsxs("div",{children:[x.jsx("div",{className:"flex items-center justify-between",children:x.jsx("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"Password"})}),x.jsx("div",{className:"mt-2",children:x.jsx("input",{...e("password",{required:!0,minLength:{value:8,message:"Password must have atleast 8 characters"},maxLength:{value:16,message:"Password must have maximum 16 characters"}}),id:"password",name:"password",type:"password",required:!0,autoComplete:"current-password",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})}),r.password&&x.jsx("p",{role:"alert",className:"text-red-600",children:r.password.message})]}),x.jsx("div",{children:x.jsxs("button",{disabled:i||o,type:"submit",className:`flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 ${i?"disabled":""} ${o?"disabled disabled:bg-slate-500":""}`,children:["Sign Up",x.jsx("span",{children:i&&x.jsx(Ky,{type:"spin",color:"white"})})]})})]}),x.jsx("br",{}),x.jsx("div",{className:"flex items-center justify-center ",children:x.jsxs("button",{disabled:o,onClick:R,className:`px-4 py-2 border flex gap-2 border-slate-200 dark:border-slate-700 rounded-lg text-blue-600 bg-white dark:text-slate-200 hover:border-slate-400 dark:hover:border-slate-500 hover:text-slate-900 dark:hover:text-slate-300 hover:shadow transition duration-150 ${o?"disabled disabled:bg-slate-500":""}`,children:[x.jsx("img",{className:"w-6 h-6",src:"https://www.svgrepo.com/show/475656/google-color.svg",loading:"lazy",alt:"google logo"}),x.jsx("span",{className:"text-slate-600 font-mono size-30 ",children:"Login with Google"})]})}),!o&&x.jsxs("div",{children:[x.jsx("p",{children:"Already a user?"}),x.jsx(qn,{to:"/r-social/login",children:x.jsx("p",{className:"text-blue-700 font-semibold",children:"Login"})})]})]})]}),x.jsx("h1",{className:"text-center",children:"Just a Demo Project website made by Rohit S Koujalagi"})]})}const Q5=typeof document<"u"?Pe.useLayoutEffect:()=>{};function Gte(t){const e=O.useRef(null);return Q5(()=>{e.current=t},[t]),O.useCallback((...n)=>{const r=e.current;return r==null?void 0:r(...n)},[])}const Ch=t=>{var e;return(e=t==null?void 0:t.ownerDocument)!==null&&e!==void 0?e:document},fl=t=>t&&"window"in t&&t.window===t?t:Ch(t).defaultView||window;function Qte(t){var e;return typeof window>"u"||window.navigator==null?!1:((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands.some(n=>t.test(n.brand)))||t.test(window.navigator.userAgent)}function Yte(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function Y5(t){let e=null;return()=>(e==null&&(e=t()),e)}const Xte=Y5(function(){return Yte(/^Mac/i)}),Jte=Y5(function(){return Qte(/Android/i)});function Zte(t){return t.mozInputSource===0&&t.isTrusted?!0:Jte()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}class ene{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,n){this.nativeEvent=n,this.target=n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget,this.bubbles=n.bubbles,this.cancelable=n.cancelable,this.defaultPrevented=n.defaultPrevented,this.eventPhase=n.eventPhase,this.isTrusted=n.isTrusted,this.timeStamp=n.timeStamp,this.type=e}}function X5(t){let e=O.useRef({isFocused:!1,observer:null});Q5(()=>{const r=e.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=Gte(r=>{t==null||t(r)});return O.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){e.current.isFocused=!0;let i=r.target,s=o=>{e.current.isFocused=!1,i.disabled&&n(new ene("blur",o)),e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};i.addEventListener("focusout",s,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&i.disabled){var o;(o=e.current.observer)===null||o===void 0||o.disconnect();let a=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),e.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[n])}function tne(t){let{isDisabled:e,onFocus:n,onBlur:r,onFocusChange:i}=t;const s=O.useCallback(l=>{if(l.target===l.currentTarget)return r&&r(l),i&&i(!1),!0},[r,i]),o=X5(s),a=O.useCallback(l=>{const u=Ch(l.target);l.target===l.currentTarget&&u.activeElement===l.target&&(n&&n(l),i&&i(!0),o(l))},[i,n,o]);return{focusProps:{onFocus:!e&&(n||i||r)?a:void 0,onBlur:!e&&(r||i)?s:void 0}}}let Ah=null,qb=new Set,fd=new Map,Ml=!1,Wb=!1;const nne={Tab:!0,Escape:!0};function zx(t,e){for(let n of qb)n(t,e)}function rne(t){return!(t.metaKey||!Xte()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function Ng(t){Ml=!0,rne(t)&&(Ah="keyboard",zx("keyboard",t))}function mi(t){Ah="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(Ml=!0,zx("pointer",t))}function J5(t){Zte(t)&&(Ml=!0,Ah="virtual")}function Z5(t){t.target===window||t.target===document||(!Ml&&!Wb&&(Ah="virtual",zx("virtual",t)),Ml=!1,Wb=!1)}function eF(){Ml=!1,Wb=!0}function Kb(t){if(typeof window>"u"||fd.get(fl(t)))return;const e=fl(t),n=Ch(t);let r=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){Ml=!0,r.apply(this,arguments)},n.addEventListener("keydown",Ng,!0),n.addEventListener("keyup",Ng,!0),n.addEventListener("click",J5,!0),e.addEventListener("focus",Z5,!0),e.addEventListener("blur",eF,!1),typeof PointerEvent<"u"?(n.addEventListener("pointerdown",mi,!0),n.addEventListener("pointermove",mi,!0),n.addEventListener("pointerup",mi,!0)):(n.addEventListener("mousedown",mi,!0),n.addEventListener("mousemove",mi,!0),n.addEventListener("mouseup",mi,!0)),e.addEventListener("beforeunload",()=>{tF(t)},{once:!0}),fd.set(e,{focus:r})}const tF=(t,e)=>{const n=fl(t),r=Ch(t);e&&r.removeEventListener("DOMContentLoaded",e),fd.has(n)&&(n.HTMLElement.prototype.focus=fd.get(n).focus,r.removeEventListener("keydown",Ng,!0),r.removeEventListener("keyup",Ng,!0),r.removeEventListener("click",J5,!0),n.removeEventListener("focus",Z5,!0),n.removeEventListener("blur",eF,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",mi,!0),r.removeEventListener("pointermove",mi,!0),r.removeEventListener("pointerup",mi,!0)):(r.removeEventListener("mousedown",mi,!0),r.removeEventListener("mousemove",mi,!0),r.removeEventListener("mouseup",mi,!0)),fd.delete(n))};function ine(t){const e=Ch(t);let n;return e.readyState!=="loading"?Kb(t):(n=()=>{Kb(t)},e.addEventListener("DOMContentLoaded",n)),()=>tF(t,n)}typeof document<"u"&&ine();function nF(){return Ah!=="pointer"}const sne=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function one(t,e,n){var r;const i=typeof window<"u"?fl(n==null?void 0:n.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?fl(n==null?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,o=typeof window<"u"?fl(n==null?void 0:n.target).HTMLElement:HTMLElement,a=typeof window<"u"?fl(n==null?void 0:n.target).KeyboardEvent:KeyboardEvent;return t=t||(n==null?void 0:n.target)instanceof i&&!sne.has(n==null||(r=n.target)===null||r===void 0?void 0:r.type)||(n==null?void 0:n.target)instanceof s||(n==null?void 0:n.target)instanceof o&&(n==null?void 0:n.target.isContentEditable),!(t&&e==="keyboard"&&n instanceof a&&!nne[n.key])}function ane(t,e,n){Kb(),O.useEffect(()=>{let r=(i,s)=>{one(!!(n!=null&&n.isTextInput),i,s)&&t(nF())};return qb.add(r),()=>{qb.delete(r)}},e)}function lne(t){let{isDisabled:e,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:i}=t,s=O.useRef({isFocusWithin:!1}),o=O.useCallback(u=>{s.current.isFocusWithin&&!u.currentTarget.contains(u.relatedTarget)&&(s.current.isFocusWithin=!1,n&&n(u),i&&i(!1))},[n,i,s]),a=X5(o),l=O.useCallback(u=>{!s.current.isFocusWithin&&document.activeElement===u.target&&(r&&r(u),i&&i(!0),s.current.isFocusWithin=!0,a(u))},[r,i,a]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:l,onBlur:o}}}let Dg=!1,B0=0;function Gb(){Dg=!0,setTimeout(()=>{Dg=!1},50)}function ZA(t){t.pointerType==="touch"&&Gb()}function une(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",ZA):document.addEventListener("touchend",Gb),B0++,()=>{B0--,!(B0>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",ZA):document.removeEventListener("touchend",Gb))}}function rF(t){let{onHoverStart:e,onHoverChange:n,onHoverEnd:r,isDisabled:i}=t,[s,o]=O.useState(!1),a=O.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;O.useEffect(une,[]);let{hoverProps:l,triggerHoverEnd:u}=O.useMemo(()=>{let f=(_,E)=>{if(a.pointerType=E,i||E==="touch"||a.isHovered||!_.currentTarget.contains(_.target))return;a.isHovered=!0;let S=_.currentTarget;a.target=S,e&&e({type:"hoverstart",target:S,pointerType:E}),n&&n(!0),o(!0)},p=(_,E)=>{if(a.pointerType="",a.target=null,E==="touch"||!a.isHovered)return;a.isHovered=!1;let S=_.currentTarget;r&&r({type:"hoverend",target:S,pointerType:E}),n&&n(!1),o(!1)},y={};return typeof PointerEvent<"u"?(y.onPointerEnter=_=>{Dg&&_.pointerType==="mouse"||f(_,_.pointerType)},y.onPointerLeave=_=>{!i&&_.currentTarget.contains(_.target)&&p(_,_.pointerType)}):(y.onTouchStart=()=>{a.ignoreEmulatedMouseEvents=!0},y.onMouseEnter=_=>{!a.ignoreEmulatedMouseEvents&&!Dg&&f(_,"mouse"),a.ignoreEmulatedMouseEvents=!1},y.onMouseLeave=_=>{!i&&_.currentTarget.contains(_.target)&&p(_,"mouse")}),{hoverProps:y,triggerHoverEnd:p}},[e,n,r,i,a]);return O.useEffect(()=>{i&&u({currentTarget:a.target},a.pointerType)},[i]),{hoverProps:l,isHovered:s}}function iF(t={}){let{autoFocus:e=!1,isTextInput:n,within:r}=t,i=O.useRef({isFocused:!1,isFocusVisible:e||nF()}),[s,o]=O.useState(!1),[a,l]=O.useState(()=>i.current.isFocused&&i.current.isFocusVisible),u=O.useCallback(()=>l(i.current.isFocused&&i.current.isFocusVisible),[]),f=O.useCallback(_=>{i.current.isFocused=_,o(_),u()},[u]);ane(_=>{i.current.isFocusVisible=_,u()},[],{isTextInput:n});let{focusProps:p}=tne({isDisabled:r,onFocusChange:f}),{focusWithinProps:y}=lne({isDisabled:!r,onFocusWithinChange:f});return{isFocused:s,isFocusVisible:a,focusProps:r?y:p}}var cne=Object.defineProperty,fne=(t,e,n)=>e in t?cne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$0=(t,e,n)=>(fne(t,typeof e!="symbol"?e+"":e,n),n);let dne=class{constructor(){$0(this,"current",this.detect()),$0(this,"handoffState","pending"),$0(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},_l=new dne;function ql(t){return _l.isServer?null:t instanceof Node?t.ownerDocument:t!=null&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}function sF(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function Ps(){let t=[],e={addEventListener(n,r,i,s){return n.addEventListener(r,i,s),e.add(()=>n.removeEventListener(r,i,s))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return sF(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,i){let s=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:i}),this.add(()=>{Object.assign(n.style,{[r]:s})})},group(n){let r=Ps();return n(r),this.add(()=>r.dispose())},add(n){return t.includes(n)||t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let i of t.splice(r,1))i()}},dispose(){for(let n of t.splice(0))n()}};return e}function Gy(){let[t]=O.useState(Ps);return O.useEffect(()=>()=>t.dispose(),[t]),t}let wn=(t,e)=>{_l.isServer?O.useEffect(t,e):O.useLayoutEffect(t,e)};function Ph(t){let e=O.useRef(t);return wn(()=>{e.current=t},[t]),e}let xt=function(t){let e=Ph(t);return Pe.useCallback((...n)=>e.current(...n),[e])};function hne(t){let e=t.width/2,n=t.height/2;return{top:t.clientY-n,right:t.clientX+e,bottom:t.clientY+n,left:t.clientX-e}}function pne(t,e){return!(!t||!e||t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)}function oF({disabled:t=!1}={}){let e=O.useRef(null),[n,r]=O.useState(!1),i=Gy(),s=xt(()=>{e.current=null,r(!1),i.dispose()}),o=xt(a=>{if(i.dispose(),e.current===null){e.current=a.currentTarget,r(!0);{let l=ql(a.currentTarget);i.addEventListener(l,"pointerup",s,!1),i.addEventListener(l,"pointermove",u=>{if(e.current){let f=hne(u);r(pne(f,e.current.getBoundingClientRect()))}},!1),i.addEventListener(l,"pointercancel",s,!1)}}});return{pressed:n,pressProps:t?{}:{onPointerDown:o,onPointerUp:s,onClick:s}}}let mne=O.createContext(void 0);function aF(){return O.useContext(mne)}function eP(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function Da(t,e,...n){if(t in e){let i=e[t];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Da),r}var Gd=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Gd||{}),gne=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(gne||{});function Ar({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:i,visible:s=!0,name:o,mergeRefs:a}){a=a??yne;let l=lF(e,t);if(s)return $p(l,n,r,o,a);let u=i??0;if(u&2){let{static:f=!1,...p}=l;if(f)return $p(p,n,r,o,a)}if(u&1){let{unmount:f=!0,...p}=l;return Da(f?0:1,{0(){return null},1(){return $p({...p,hidden:!0,style:{display:"none"}},n,r,o,a)}})}return $p(l,n,r,o,a)}function $p(t,e={},n,r,i){let{as:s=n,children:o,refName:a="ref",...l}=z0(t,["unmount","static"]),u=t.ref!==void 0?{[a]:t.ref}:{},f=typeof o=="function"?o(e):o;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(e)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let p={};if(e){let y=!1,_=[];for(let[E,S]of Object.entries(e))typeof S=="boolean"&&(y=!0),S===!0&&_.push(E.replace(/([A-Z])/g,I=>`-${I.toLowerCase()}`));if(y){p["data-headlessui-state"]=_.join(" ");for(let E of _)p[`data-${E}`]=""}}if(s===O.Fragment&&(Object.keys(Ru(l)).length>0||Object.keys(Ru(p)).length>0))if(!O.isValidElement(f)||Array.isArray(f)&&f.length>1){if(Object.keys(Ru(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Ru(l)).concat(Object.keys(Ru(p))).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`))}else{let y=f.props,_=y==null?void 0:y.className,E=typeof _=="function"?(...R)=>eP(_(...R),l.className):eP(_,l.className),S=E?{className:E}:{},I=lF(f.props,Ru(z0(l,["ref"])));for(let R in p)R in I&&delete p[R];return O.cloneElement(f,Object.assign({},I,p,u,{ref:i(f.ref,u.ref)},S))}return O.createElement(s,Object.assign({},z0(l,["ref"]),s!==O.Fragment&&u,s!==O.Fragment&&p),f)}function Hx(){let t=O.useRef([]),e=O.useCallback(n=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return t.current=n,e}}function yne(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function lF(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];if(e.disabled||e["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[i=>{var s;return(s=i==null?void 0:i.preventDefault)==null?void 0:s.call(i)}]);for(let r in n)Object.assign(e,{[r](i,...s){let o=n[r];for(let a of o){if((i instanceof Event||(i==null?void 0:i.nativeEvent)instanceof Event)&&i.defaultPrevented)return;a(i,...s)}}});return e}function Lg(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let i in r)i.startsWith("on")&&typeof r[i]=="function"?(n[i]!=null||(n[i]=[]),n[i].push(r[i])):e[i]=r[i];for(let r in n)Object.assign(e,{[r](...i){let s=n[r];for(let o of s)o==null||o(...i)}});return e}function Pr(t){var e;return Object.assign(O.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function Ru(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function z0(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}let vne=O.createContext(void 0);function _ne(){return O.useContext(vne)}function uF(t){let e=t.parentElement,n=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(n=e),e=e.parentElement;let r=(e==null?void 0:e.getAttribute("disabled"))==="";return r&&wne(n)?!1:r}function wne(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}let cF=Symbol();function fF(t,e=!0){return Object.assign(t,{[cF]:e})}function xi(...t){let e=O.useRef(t);O.useEffect(()=>{e.current=t},[t]);let n=xt(r=>{for(let i of e.current)i!=null&&(typeof i=="function"?i(r):i.current=r)});return t.every(r=>r==null||(r==null?void 0:r[cF]))?void 0:n}let qx=O.createContext(null);qx.displayName="DescriptionContext";function dF(){let t=O.useContext(qx);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,dF),e}return t}function Ene(){let[t,e]=O.useState([]);return[t.length>0?t.join(" "):void 0,O.useMemo(()=>function(n){let r=xt(s=>(e(o=>[...o,s]),()=>e(o=>{let a=o.slice(),l=a.indexOf(s);return l!==-1&&a.splice(l,1),a}))),i=O.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return Pe.createElement(qx.Provider,{value:i},n.children)},[e])]}let bne="p";function Tne(t,e){let n=O.useId(),r=aF(),{id:i=`headlessui-description-${n}`,...s}=t,o=dF(),a=xi(e);wn(()=>o.register(i),[i,o.register]);let l=r||!1,u=O.useMemo(()=>({...o.slot,disabled:l}),[o.slot,l]),f={ref:a,...o.props,id:i};return Ar({ourProps:f,theirProps:s,slot:u,defaultTag:bne,name:o.name||"Description"})}let Sne=Pr(Tne);Object.assign(Sne,{});var on=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(on||{});let Qy=O.createContext(null);Qy.displayName="LabelContext";function Wx(){let t=O.useContext(Qy);if(t===null){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Wx),e}return t}function xne(t){var e,n,r;let i=(n=(e=O.useContext(Qy))==null?void 0:e.value)!=null?n:void 0;return((r=void 0)!=null?r:0)>0?[i,...t].filter(Boolean).join(" "):i}function hF({inherit:t=!1}={}){let e=xne(),[n,r]=O.useState([]),i=t?[e,...n].filter(Boolean):n;return[i.length>0?i.join(" "):void 0,O.useMemo(()=>function(s){let o=xt(l=>(r(u=>[...u,l]),()=>r(u=>{let f=u.slice(),p=f.indexOf(l);return p!==-1&&f.splice(p,1),f}))),a=O.useMemo(()=>({register:o,slot:s.slot,name:s.name,props:s.props,value:s.value}),[o,s.slot,s.name,s.props,s.value]);return Pe.createElement(Qy.Provider,{value:a},s.children)},[r])]}let Ine="label";function Rne(t,e){var n;let r=O.useId(),i=Wx(),s=_ne(),o=aF(),{id:a=`headlessui-label-${r}`,htmlFor:l=s??((n=i.props)==null?void 0:n.htmlFor),passive:u=!1,...f}=t,p=xi(e);wn(()=>i.register(a),[a,i.register]);let y=xt(I=>{let R=I.currentTarget;if(R instanceof HTMLLabelElement&&I.preventDefault(),i.props&&"onClick"in i.props&&typeof i.props.onClick=="function"&&i.props.onClick(I),R instanceof HTMLLabelElement){let w=document.getElementById(R.htmlFor);if(w){let v=w.getAttribute("disabled");if(v==="true"||v==="")return;let C=w.getAttribute("aria-disabled");if(C==="true"||C==="")return;(w instanceof HTMLInputElement&&(w.type==="radio"||w.type==="checkbox")||w.role==="radio"||w.role==="checkbox"||w.role==="switch")&&w.click(),w.focus({preventScroll:!0})}}}),_=o||!1,E=O.useMemo(()=>({...i.slot,disabled:_}),[i.slot,_]),S={ref:p,...i.props,id:a,htmlFor:l,onClick:y};return u&&("onClick"in S&&(delete S.htmlFor,delete S.onClick),"onClick"in f&&delete f.onClick),Ar({ourProps:S,theirProps:f,slot:E,defaultTag:l?Ine:"div",name:i.name||"Label"})}let Cne=Pr(Rne);Object.assign(Cne,{});let Ane=O.createContext(()=>{});function Pne({value:t,children:e}){return Pe.createElement(Ane.Provider,{value:t},e)}function kne(t){if(t===null)return{width:0,height:0};let{width:e,height:n}=t.getBoundingClientRect();return{width:e,height:n}}function One(t,e=!1){let[n,r]=O.useReducer(()=>({}),{}),i=O.useMemo(()=>kne(t),[t,n]);return wn(()=>{if(!t)return;let s=new ResizeObserver(r);return s.observe(t),()=>{s.disconnect()}},[t]),e?{width:`${i.width}px`,height:`${i.height}px`}:i}let Nne=class extends Map{constructor(e){super(),this.factory=e}get(e){let n=super.get(e);return n===void 0&&(n=this.factory(e),this.set(e,n)),n}};function pF(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(i){return r.add(i),()=>r.delete(i)},dispatch(i,...s){let o=e[i].call(n,...s);o&&(n=o,r.forEach(a=>a()))}}}function mF(t){return O.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}let Dne=new Nne(()=>pF(()=>[],{ADD(t){return this.includes(t)?this:[...this,t]},REMOVE(t){let e=this.indexOf(t);if(e===-1)return this;let n=this.slice();return n.splice(e,1),n}}));function Kx(t,e){let n=Dne.get(e),r=O.useId(),i=mF(n);if(wn(()=>{if(t)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,t]),!t)return!1;let s=i.indexOf(r),o=i.length;return s===-1&&(s=o,o+=1),s===o-1}let Qb=new Map,dd=new Map;function tP(t){var e;let n=(e=dd.get(t))!=null?e:0;return dd.set(t,n+1),n!==0?()=>nP(t):(Qb.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>nP(t))}function nP(t){var e;let n=(e=dd.get(t))!=null?e:1;if(n===1?dd.delete(t):dd.set(t,n-1),n!==1)return;let r=Qb.get(t);r&&(r["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",r["aria-hidden"]),t.inert=r.inert,Qb.delete(t))}function Lne(t,{allowed:e,disallowed:n}={}){let r=Kx(t,"inert-others");wn(()=>{var i,s;if(!r)return;let o=Ps();for(let l of(i=n==null?void 0:n())!=null?i:[])l&&o.add(tP(l));let a=(s=e==null?void 0:e())!=null?s:[];for(let l of a){if(!l)continue;let u=ql(l);if(!u)continue;let f=l.parentElement;for(;f&&f!==u.body;){for(let p of f.children)a.some(y=>p.contains(y))||o.add(tP(p));f=f.parentElement}}return o.dispose},[r,e,n])}function Mne(t,e,n){let r=Ph(i=>{let s=i.getBoundingClientRect();s.x===0&&s.y===0&&s.width===0&&s.height===0&&n()});O.useEffect(()=>{if(!t)return;let i=e===null?null:e instanceof HTMLElement?e:e.current;if(!i)return;let s=Ps();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>r.current(i));o.observe(i),s.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>r.current(i));o.observe(i),s.add(()=>o.disconnect())}return()=>s.dispose()},[e,r,t])}let Yb=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),Fne=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Xb=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(Xb||{}),jne=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(jne||{}),Vne=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(Vne||{});function gF(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(Yb)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function Une(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(Fne)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Gx=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(Gx||{});function Qx(t,e=0){var n;return t===((n=ql(t))==null?void 0:n.body)?!1:Da(e,{0(){return t.matches(Yb)},1(){let r=t;for(;r!==null;){if(r.matches(Yb))return!0;r=r.parentElement}return!1}})}function yF(t){let e=ql(t);Ps().nextFrame(()=>{e&&!Qx(e.activeElement,0)&&$ne(t)})}var Bne=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(Bne||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function $ne(t){t==null||t.focus({preventScroll:!0})}let zne=["textarea","input"].join(",");function Hne(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,zne))!=null?n:!1}function vF(t,e=n=>n){return t.slice().sort((n,r)=>{let i=e(n),s=e(r);if(i===null||s===null)return 0;let o=i.compareDocumentPosition(s);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function qne(t,e){return Wne(gF(),e,{relativeTo:t})}function Wne(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let s=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,o=Array.isArray(t)?n?vF(t):t:e&64?Une(t):gF(t);i.length>0&&o.length>1&&(o=o.filter(_=>!i.some(E=>E!=null&&"current"in E?(E==null?void 0:E.current)===_:E===_))),r=r??s.activeElement;let a=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,o.indexOf(r))-1;if(e&4)return Math.max(0,o.indexOf(r))+1;if(e&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=e&32?{preventScroll:!0}:{},f=0,p=o.length,y;do{if(f>=p||f+p<=0)return 0;let _=l+f;if(e&16)_=(_+p)%p;else{if(_<0)return 3;if(_>=p)return 1}y=o[_],y==null||y.focus(u),f+=a}while(y!==s.activeElement);return e&6&&Hne(y)&&y.select(),2}function _F(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Kne(){return/Android/gi.test(window.navigator.userAgent)}function Gne(){return _F()||Kne()}function Af(t,e,n,r){let i=Ph(n);O.useEffect(()=>{if(!t)return;function s(o){i.current(o)}return document.addEventListener(e,s,r),()=>document.removeEventListener(e,s,r)},[t,e,r])}function Qne(t,e,n,r){let i=Ph(n);O.useEffect(()=>{if(!t)return;function s(o){i.current(o)}return window.addEventListener(e,s,r),()=>window.removeEventListener(e,s,r)},[t,e,r])}const rP=30;function Yne(t,e,n){let r=Kx(t,"outside-click"),i=Ph(n),s=O.useCallback(function(l,u){if(l.defaultPrevented)return;let f=u(l);if(f===null||!f.getRootNode().contains(f)||!f.isConnected)return;let p=function y(_){return typeof _=="function"?y(_()):Array.isArray(_)||_ instanceof Set?_:[_]}(e);for(let y of p)if(y!==null&&(y.contains(f)||l.composed&&l.composedPath().includes(y)))return;return!Qx(f,Gx.Loose)&&f.tabIndex!==-1&&l.preventDefault(),i.current(l,f)},[i,e]),o=O.useRef(null);Af(r,"pointerdown",l=>{var u,f;o.current=((f=(u=l.composedPath)==null?void 0:u.call(l))==null?void 0:f[0])||l.target},!0),Af(r,"mousedown",l=>{var u,f;o.current=((f=(u=l.composedPath)==null?void 0:u.call(l))==null?void 0:f[0])||l.target},!0),Af(r,"click",l=>{Gne()||o.current&&(s(l,()=>o.current),o.current=null)},!0);let a=O.useRef({x:0,y:0});Af(r,"touchstart",l=>{a.current.x=l.touches[0].clientX,a.current.y=l.touches[0].clientY},!0),Af(r,"touchend",l=>{let u={x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY};if(!(Math.abs(u.x-a.current.x)>=rP||Math.abs(u.y-a.current.y)>=rP))return s(l,()=>l.target instanceof HTMLElement?l.target:null)},!0),Qne(r,"blur",l=>s(l,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Yx(...t){return O.useMemo(()=>ql(...t),[...t])}function wF(t,e){return O.useMemo(()=>{var n;if(t.type)return t.type;let r=(n=t.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||(e==null?void 0:e.tagName)==="BUTTON"&&!e.hasAttribute("type"))return"button"},[t.type,t.as,e])}function Xne(){let t;return{before({doc:e}){var n;let r=e.documentElement,i=(n=e.defaultView)!=null?n:window;t=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:e,d:n}){let r=e.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),s=Math.max(0,t-i);n.style(r,"paddingRight",`${s}px`)}}}function Jne(){return _F()?{before({doc:t,d:e,meta:n}){function r(i){return n.containers.flatMap(s=>s()).some(s=>s.contains(i))}e.microTask(()=>{var i;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let a=Ps();a.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>a.dispose()))}let s=(i=window.scrollY)!=null?i:window.pageYOffset,o=null;e.addEventListener(t,"click",a=>{if(a.target instanceof HTMLElement)try{let l=a.target.closest("a");if(!l)return;let{hash:u}=new URL(l.href),f=t.querySelector(u);f&&!r(f)&&(o=f)}catch{}},!0),e.addEventListener(t,"touchstart",a=>{if(a.target instanceof HTMLElement)if(r(a.target)){let l=a.target;for(;l.parentElement&&r(l.parentElement);)l=l.parentElement;e.style(l,"overscrollBehavior","contain")}else e.style(a.target,"touchAction","none")}),e.addEventListener(t,"touchmove",a=>{if(a.target instanceof HTMLElement){if(a.target.tagName==="INPUT")return;if(r(a.target)){let l=a.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&a.preventDefault()}else a.preventDefault()}},{passive:!1}),e.add(()=>{var a;let l=(a=window.scrollY)!=null?a:window.pageYOffset;s!==l&&window.scrollTo(0,s),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function Zne(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function ere(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let dl=pF(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:Ps(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:ere(n)},i=[Jne(),Xne(),Zne()];i.forEach(({before:s})=>s==null?void 0:s(r)),i.forEach(({after:s})=>s==null?void 0:s(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});dl.subscribe(()=>{let t=dl.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",i=n.count!==0;(i&&!r||!i&&r)&&dl.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&dl.dispatch("TEARDOWN",n)}});function tre(t,e,n=()=>({containers:[]})){let r=mF(dl),i=e?r.get(e):void 0,s=i?i.count>0:!1;return wn(()=>{if(!(!e||!t))return dl.dispatch("PUSH",e,n),()=>dl.dispatch("POP",e,n)},[t,e]),s}function nre(t,e,n=()=>[document.body]){let r=Kx(t,"scroll-lock");tre(r,e,i=>{var s;return{containers:[...(s=i.containers)!=null?s:[],n]}})}function iP(t){return[t.screenX,t.screenY]}function rre(){let t=O.useRef([-1,-1]);return{wasMoved(e){let n=iP(e);return t.current[0]===n[0]&&t.current[1]===n[1]?!1:(t.current=n,!0)},update(e){t.current=iP(e)}}}function ire(t=0){let[e,n]=O.useState(t),r=O.useCallback(l=>n(l),[e]),i=O.useCallback(l=>n(u=>u|l),[e]),s=O.useCallback(l=>(e&l)===l,[e]),o=O.useCallback(l=>n(u=>u&~l),[n]),a=O.useCallback(l=>n(u=>u^l),[n]);return{flags:e,setFlag:r,addFlag:i,hasFlag:s,removeFlag:o,toggleFlag:a}}var sre={},sP;typeof process<"u"&&typeof globalThis<"u"&&((sP=process==null?void 0:sre)==null?void 0:sP.NODE_ENV)==="test"&&typeof Element.prototype.getAnimations>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var ore=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(ore||{});function EF(t){let e={};for(let n in t)t[n]===!0&&(e[`data-${n}`]="");return e}function bF(t,e,n,r){let[i,s]=O.useState(n),{hasFlag:o,addFlag:a,removeFlag:l}=ire(t&&i?3:0),u=O.useRef(!1),f=O.useRef(!1),p=Gy();return wn(()=>{var y;if(t){if(n&&s(!0),!e){n&&a(3);return}return(y=void 0)==null||y.call(r,n),are(e,{inFlight:u,prepare(){f.current?f.current=!1:f.current=u.current,u.current=!0,!f.current&&(n?(a(3),l(4)):(a(4),l(2)))},run(){f.current?n?(l(3),a(4)):(l(4),a(3)):n?l(1):a(1)},done(){var _;f.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(u.current=!1,l(7),n||s(!1),(_=void 0)==null||_.call(r,n))}})}},[t,n,e,p]),t?[i,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function are(t,{prepare:e,run:n,done:r,inFlight:i}){let s=Ps();return ure(t,{prepare:e,inFlight:i}),s.nextFrame(()=>{n(),s.requestAnimationFrame(()=>{s.add(lre(t,r))})}),s.dispose}function lre(t,e){var n,r;let i=Ps();if(!t)return i.dispose;let s=!1;i.add(()=>{s=!0});let o=(r=(n=t.getAnimations)==null?void 0:n.call(t).filter(a=>a instanceof CSSTransition))!=null?r:[];return o.length===0?(e(),i.dispose):(Promise.allSettled(o.map(a=>a.finished)).then(()=>{s||e()}),i.dispose)}function ure(t,{inFlight:e,prepare:n}){if(e!=null&&e.current){n();return}let r=t.style.transition;t.style.transition="none",n(),t.offsetHeight,t.style.transition=r}function cre(t,{container:e,accept:n,walk:r}){let i=O.useRef(n),s=O.useRef(r);O.useEffect(()=>{i.current=n,s.current=r},[n,r]),wn(()=>{if(!e||!t)return;let o=ql(e);if(!o)return;let a=i.current,l=s.current,u=Object.assign(p=>a(p),{acceptNode:a}),f=o.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,u,!1);for(;f.nextNode();)l(f.currentNode)},[e,t,i,s])}function qc(t){return TF(t)?(t.nodeName||"").toLowerCase():"#document"}function ri(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function To(t){var e;return(e=(TF(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function TF(t){return t instanceof Node||t instanceof ri(t).Node}function Sr(t){return t instanceof Element||t instanceof ri(t).Element}function Cs(t){return t instanceof HTMLElement||t instanceof ri(t).HTMLElement}function oP(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ri(t).ShadowRoot}function kh(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Xi(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function fre(t){return["table","td","th"].includes(qc(t))}function Yy(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Xx(t){const e=Jx(),n=Sr(t)?Xi(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function dre(t){let e=_a(t);for(;Cs(e)&&!Cc(e);){if(Xx(e))return e;if(Yy(e))return null;e=_a(e)}return null}function Jx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Cc(t){return["html","body","#document"].includes(qc(t))}function Xi(t){return ri(t).getComputedStyle(t)}function Xy(t){return Sr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function _a(t){if(qc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||oP(t)&&t.host||To(t);return oP(e)?e.host:e}function SF(t){const e=_a(t);return Cc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Cs(e)&&kh(e)?e:SF(e)}function Qd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=SF(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=ri(i);if(s){const a=Jb(o);return e.concat(o,o.visualViewport||[],kh(i)?i:[],a&&n?Qd(a):[])}return e.concat(i,Qd(i,[],n))}function Jb(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function hre(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}const Jo=Math.min,Qr=Math.max,Mg=Math.round,zp=Math.floor,wa=t=>({x:t,y:t}),pre={left:"right",right:"left",bottom:"top",top:"bottom"},mre={start:"end",end:"start"};function aP(t,e,n){return Qr(t,Jo(e,n))}function Wc(t,e){return typeof t=="function"?t(e):t}function Ea(t){return t.split("-")[0]}function Oh(t){return t.split("-")[1]}function xF(t){return t==="x"?"y":"x"}function IF(t){return t==="y"?"height":"width"}function Fl(t){return["top","bottom"].includes(Ea(t))?"y":"x"}function RF(t){return xF(Fl(t))}function gre(t,e,n){n===void 0&&(n=!1);const r=Oh(t),i=RF(t),s=IF(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Fg(o)),[o,Fg(o)]}function yre(t){const e=Fg(t);return[Zb(t),e,Zb(e)]}function Zb(t){return t.replace(/start|end/g,e=>mre[e])}function vre(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function _re(t,e,n,r){const i=Oh(t);let s=vre(Ea(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(Zb)))),s}function Fg(t){return t.replace(/left|right|bottom|top/g,e=>pre[e])}function wre(t){return{top:0,right:0,bottom:0,left:0,...t}}function Ere(t){return typeof t!="number"?wre(t):{top:t,right:t,bottom:t,left:t}}function jg(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function lP(t,e,n){let{reference:r,floating:i}=t;const s=Fl(e),o=RF(e),a=IF(o),l=Ea(e),u=s==="y",f=r.x+r.width/2-i.width/2,p=r.y+r.height/2-i.height/2,y=r[a]/2-i[a]/2;let _;switch(l){case"top":_={x:f,y:r.y-i.height};break;case"bottom":_={x:f,y:r.y+r.height};break;case"right":_={x:r.x+r.width,y:p};break;case"left":_={x:r.x-i.width,y:p};break;default:_={x:r.x,y:r.y}}switch(Oh(e)){case"start":_[o]-=y*(n&&u?-1:1);break;case"end":_[o]+=y*(n&&u?-1:1);break}return _}const bre=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:f,y:p}=lP(u,r,l),y=r,_={},E=0;for(let S=0;S<a.length;S++){const{name:I,fn:R}=a[S],{x:w,y:v,data:C,reset:k}=await R({x:f,y:p,initialPlacement:r,placement:y,strategy:i,middlewareData:_,rects:u,platform:o,elements:{reference:t,floating:e}});f=w??f,p=v??p,_={..._,[I]:{..._[I],...C}},k&&E<=50&&(E++,typeof k=="object"&&(k.placement&&(y=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):k.rects),{x:f,y:p}=lP(u,y,l)),S=-1)}return{x:f,y:p,placement:y,strategy:i,middlewareData:_}};async function Jy(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:y=!1,padding:_=0}=Wc(e,t),E=Ere(_),I=a[y?p==="floating"?"reference":"floating":p],R=jg(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(I)))==null||n?I:I.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:f,strategy:l})),w=p==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,v=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),C=await(s.isElement==null?void 0:s.isElement(v))?await(s.getScale==null?void 0:s.getScale(v))||{x:1,y:1}:{x:1,y:1},k=jg(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:v,strategy:l}):w);return{top:(R.top-k.top+E.top)/C.y,bottom:(k.bottom-R.bottom+E.bottom)/C.y,left:(R.left-k.left+E.left)/C.x,right:(k.right-R.right+E.right)/C.x}}const Tre=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:y,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:S=!0,...I}=Wc(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const R=Ea(i),w=Fl(a),v=Ea(a)===a,C=await(l.isRTL==null?void 0:l.isRTL(u.floating)),k=y||(v||!S?[Fg(a)]:yre(a)),B=E!=="none";!y&&B&&k.push(..._re(a,S,E,C));const D=[a,...k],T=await Jy(e,I),N=[];let L=((r=s.flip)==null?void 0:r.overflows)||[];if(f&&N.push(T[R]),p){const le=gre(i,o,C);N.push(T[le[0]],T[le[1]])}if(L=[...L,{placement:i,overflows:N}],!N.every(le=>le<=0)){var V,j;const le=(((V=s.flip)==null?void 0:V.index)||0)+1,me=D[le];if(me)return{data:{index:le,overflows:L},reset:{placement:me}};let pe=(j=L.filter(X=>X.overflows[0]<=0).sort((X,G)=>X.overflows[1]-G.overflows[1])[0])==null?void 0:j.placement;if(!pe)switch(_){case"bestFit":{var M;const X=(M=L.filter(G=>{if(B){const Y=Fl(G.placement);return Y===w||Y==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(Y=>Y>0).reduce((Y,ce)=>Y+ce,0)]).sort((G,Y)=>G[1]-Y[1])[0])==null?void 0:M[0];X&&(pe=X);break}case"initialPlacement":pe=a;break}if(i!==pe)return{reset:{placement:pe}}}return{}}}};async function Sre(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Ea(n),a=Oh(n),l=Fl(n)==="y",u=["left","top"].includes(o)?-1:1,f=s&&l?-1:1,p=Wc(e,t);let{mainAxis:y,crossAxis:_,alignmentAxis:E}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...p};return a&&typeof E=="number"&&(_=a==="end"?E*-1:E),l?{x:_*f,y:y*u}:{x:y*u,y:_*f}}const xre=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await Sre(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},Ire=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:I=>{let{x:R,y:w}=I;return{x:R,y:w}}},...l}=Wc(t,e),u={x:n,y:r},f=await Jy(e,l),p=Fl(Ea(i)),y=xF(p);let _=u[y],E=u[p];if(s){const I=y==="y"?"top":"left",R=y==="y"?"bottom":"right",w=_+f[I],v=_-f[R];_=aP(w,_,v)}if(o){const I=p==="y"?"top":"left",R=p==="y"?"bottom":"right",w=E+f[I],v=E-f[R];E=aP(w,E,v)}const S=a.fn({...e,[y]:_,[p]:E});return{...S,data:{x:S.x-n,y:S.y-r}}}}},Rre=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:r,platform:i,elements:s}=e,{apply:o=()=>{},...a}=Wc(t,e),l=await Jy(e,a),u=Ea(n),f=Oh(n),p=Fl(n)==="y",{width:y,height:_}=r.floating;let E,S;u==="top"||u==="bottom"?(E=u,S=f===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(S=u,E=f==="end"?"top":"bottom");const I=_-l.top-l.bottom,R=y-l.left-l.right,w=Jo(_-l[E],I),v=Jo(y-l[S],R),C=!e.middlewareData.shift;let k=w,B=v;if(p?B=f||C?Jo(v,R):R:k=f||C?Jo(w,I):I,C&&!f){const T=Qr(l.left,0),N=Qr(l.right,0),L=Qr(l.top,0),V=Qr(l.bottom,0);p?B=y-2*(T!==0||N!==0?T+N:Qr(l.left,l.right)):k=_-2*(L!==0||V!==0?L+V:Qr(l.top,l.bottom))}await o({...e,availableWidth:B,availableHeight:k});const D=await i.getDimensions(s.floating);return y!==D.width||_!==D.height?{reset:{rects:!0}}:{}}}};function CF(t){const e=Xi(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Cs(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Mg(n)!==s||Mg(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Zx(t){return Sr(t)?t:t.contextElement}function ac(t){const e=Zx(t);if(!Cs(e))return wa(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=CF(e);let o=(s?Mg(n.width):n.width)/r,a=(s?Mg(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Cre=wa(0);function AF(t){const e=ri(t);return!Jx()||!e.visualViewport?Cre:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Are(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ri(t)?!1:e}function jl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=Zx(t);let o=wa(1);e&&(r?Sr(r)&&(o=ac(r)):o=ac(t));const a=Are(s,n,r)?AF(s):wa(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,f=i.width/o.x,p=i.height/o.y;if(s){const y=ri(s),_=r&&Sr(r)?ri(r):r;let E=y,S=Jb(E);for(;S&&r&&_!==E;){const I=ac(S),R=S.getBoundingClientRect(),w=Xi(S),v=R.left+(S.clientLeft+parseFloat(w.paddingLeft))*I.x,C=R.top+(S.clientTop+parseFloat(w.paddingTop))*I.y;l*=I.x,u*=I.y,f*=I.x,p*=I.y,l+=v,u+=C,E=ri(S),S=Jb(E)}}return jg({width:f,height:p,x:l,y:u})}function Pre(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=To(r),a=e?Yy(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=wa(1);const f=wa(0),p=Cs(r);if((p||!p&&!s)&&((qc(r)!=="body"||kh(o))&&(l=Xy(r)),Cs(r))){const y=jl(r);u=ac(r),f.x=y.x+r.clientLeft,f.y=y.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+f.x,y:n.y*u.y-l.scrollTop*u.y+f.y}}function kre(t){return Array.from(t.getClientRects())}function PF(t){return jl(To(t)).left+Xy(t).scrollLeft}function Ore(t){const e=To(t),n=Xy(t),r=t.ownerDocument.body,i=Qr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Qr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+PF(t);const a=-n.scrollTop;return Xi(r).direction==="rtl"&&(o+=Qr(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function Nre(t,e){const n=ri(t),r=To(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=Jx();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function Dre(t,e){const n=jl(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Cs(t)?ac(t):wa(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function uP(t,e,n){let r;if(e==="viewport")r=Nre(t,n);else if(e==="document")r=Ore(To(t));else if(Sr(e))r=Dre(e,n);else{const i=AF(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return jg(r)}function kF(t,e){const n=_a(t);return n===e||!Sr(n)||Cc(n)?!1:Xi(n).position==="fixed"||kF(n,e)}function Lre(t,e){const n=e.get(t);if(n)return n;let r=Qd(t,[],!1).filter(a=>Sr(a)&&qc(a)!=="body"),i=null;const s=Xi(t).position==="fixed";let o=s?_a(t):t;for(;Sr(o)&&!Cc(o);){const a=Xi(o),l=Xx(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||kh(o)&&!l&&kF(t,o))?r=r.filter(f=>f!==o):i=a,o=_a(o)}return e.set(t,r),r}function Mre(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Yy(e)?[]:Lre(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,f)=>{const p=uP(e,f,i);return u.top=Qr(p.top,u.top),u.right=Jo(p.right,u.right),u.bottom=Jo(p.bottom,u.bottom),u.left=Qr(p.left,u.left),u},uP(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Fre(t){const{width:e,height:n}=CF(t);return{width:e,height:n}}function jre(t,e,n){const r=Cs(e),i=To(e),s=n==="fixed",o=jl(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=wa(0);if(r||!r&&!s)if((qc(e)!=="body"||kh(i))&&(a=Xy(e)),r){const p=jl(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else i&&(l.x=PF(i));const u=o.left+a.scrollLeft-l.x,f=o.top+a.scrollTop-l.y;return{x:u,y:f,width:o.width,height:o.height}}function H0(t){return Xi(t).position==="static"}function cP(t,e){return!Cs(t)||Xi(t).position==="fixed"?null:e?e(t):t.offsetParent}function OF(t,e){const n=ri(t);if(Yy(t))return n;if(!Cs(t)){let i=_a(t);for(;i&&!Cc(i);){if(Sr(i)&&!H0(i))return i;i=_a(i)}return n}let r=cP(t,e);for(;r&&fre(r)&&H0(r);)r=cP(r,e);return r&&Cc(r)&&H0(r)&&!Xx(r)?n:r||dre(t)||n}const Vre=async function(t){const e=this.getOffsetParent||OF,n=this.getDimensions,r=await n(t.floating);return{reference:jre(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Ure(t){return Xi(t).direction==="rtl"}const Bre={convertOffsetParentRelativeRectToViewportRelativeRect:Pre,getDocumentElement:To,getClippingRect:Mre,getOffsetParent:OF,getElementRects:Vre,getClientRects:kre,getDimensions:Fre,getScale:ac,isElement:Sr,isRTL:Ure};function $re(t,e){let n=null,r;const i=To(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:f,width:p,height:y}=t.getBoundingClientRect();if(a||e(),!p||!y)return;const _=zp(f),E=zp(i.clientWidth-(u+p)),S=zp(i.clientHeight-(f+y)),I=zp(u),w={rootMargin:-_+"px "+-E+"px "+-S+"px "+-I+"px",threshold:Qr(0,Jo(1,l))||1};let v=!0;function C(k){const B=k[0].intersectionRatio;if(B!==l){if(!v)return o();B?o(!1,B):r=setTimeout(()=>{o(!1,1e-7)},1e3)}v=!1}try{n=new IntersectionObserver(C,{...w,root:i.ownerDocument})}catch{n=new IntersectionObserver(C,w)}n.observe(t)}return o(!0),s}function zre(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=Zx(t),f=i||s?[...u?Qd(u):[],...Qd(e)]:[];f.forEach(R=>{i&&R.addEventListener("scroll",n,{passive:!0}),s&&R.addEventListener("resize",n)});const p=u&&a?$re(u,n):null;let y=-1,_=null;o&&(_=new ResizeObserver(R=>{let[w]=R;w&&w.target===u&&_&&(_.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var v;(v=_)==null||v.observe(e)})),n()}),u&&!l&&_.observe(u),_.observe(e));let E,S=l?jl(t):null;l&&I();function I(){const R=jl(t);S&&(R.x!==S.x||R.y!==S.y||R.width!==S.width||R.height!==S.height)&&n(),S=R,E=requestAnimationFrame(I)}return n(),()=>{var R;f.forEach(w=>{i&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),p==null||p(),(R=_)==null||R.disconnect(),_=null,l&&cancelAnimationFrame(E)}}const q0=Jy,Hre=xre,qre=Ire,Wre=Tre,Kre=Rre,Gre=(t,e,n)=>{const r=new Map,i={platform:Bre,...n},s={...i.platform,_c:r};return bre(t,e,{...i,platform:s})};var _m=typeof document<"u"?O.useLayoutEffect:O.useEffect;function Vg(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Vg(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Vg(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function NF(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function fP(t,e){const n=NF(t);return Math.round(e*n)/n}function dP(t){const e=O.useRef(t);return _m(()=>{e.current=t}),e}function Qre(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[f,p]=O.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[y,_]=O.useState(r);Vg(y,r)||_(r);const[E,S]=O.useState(null),[I,R]=O.useState(null),w=O.useCallback(X=>{X!==B.current&&(B.current=X,S(X))},[]),v=O.useCallback(X=>{X!==D.current&&(D.current=X,R(X))},[]),C=s||E,k=o||I,B=O.useRef(null),D=O.useRef(null),T=O.useRef(f),N=l!=null,L=dP(l),V=dP(i),j=O.useCallback(()=>{if(!B.current||!D.current)return;const X={placement:e,strategy:n,middleware:y};V.current&&(X.platform=V.current),Gre(B.current,D.current,X).then(G=>{const Y={...G,isPositioned:!0};M.current&&!Vg(T.current,Y)&&(T.current=Y,Br.flushSync(()=>{p(Y)}))})},[y,e,n,V]);_m(()=>{u===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,p(X=>({...X,isPositioned:!1})))},[u]);const M=O.useRef(!1);_m(()=>(M.current=!0,()=>{M.current=!1}),[]),_m(()=>{if(C&&(B.current=C),k&&(D.current=k),C&&k){if(L.current)return L.current(C,k,j);j()}},[C,k,j,L,N]);const le=O.useMemo(()=>({reference:B,floating:D,setReference:w,setFloating:v}),[w,v]),me=O.useMemo(()=>({reference:C,floating:k}),[C,k]),pe=O.useMemo(()=>{const X={position:n,left:0,top:0};if(!me.floating)return X;const G=fP(me.floating,f.x),Y=fP(me.floating,f.y);return a?{...X,transform:"translate("+G+"px, "+Y+"px)",...NF(me.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:G,top:Y}},[n,a,me.floating,f.x,f.y]);return O.useMemo(()=>({...f,update:j,refs:le,elements:me,floatingStyles:pe}),[f,j,le,me,pe])}const DF=(t,e)=>({...Hre(t),options:[t,e]}),Yre=(t,e)=>({...qre(t),options:[t,e]}),Xre=(t,e)=>({...Wre(t),options:[t,e]}),Jre=(t,e)=>({...Kre(t),options:[t,e]}),LF={...Em},Zre=LF.useInsertionEffect,eie=Zre||(t=>t());function MF(t){const e=O.useRef(()=>{});return eie(()=>{e.current=t}),O.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}var eT=typeof document<"u"?O.useLayoutEffect:O.useEffect;let hP=!1,tie=0;const pP=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+tie++;function nie(){const[t,e]=O.useState(()=>hP?pP():void 0);return eT(()=>{t==null&&e(pP())},[]),O.useEffect(()=>{hP=!0},[]),t}const rie=LF.useId,iie=rie||nie;function sie(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(i=>i!==n))||[])}}}const oie=O.createContext(null),aie=O.createContext(null),lie=()=>{var t;return((t=O.useContext(oie))==null?void 0:t.id)||null},uie=()=>O.useContext(aie),cie="data-floating-ui-focusable";function fie(t){const{open:e=!1,onOpenChange:n,elements:r}=t,i=iie(),s=O.useRef({}),[o]=O.useState(()=>sie()),a=lie()!=null,[l,u]=O.useState(r.reference),f=MF((_,E,S)=>{s.current.openEvent=_?E:void 0,o.emit("openchange",{open:_,event:E,reason:S,nested:a}),n==null||n(_,E,S)}),p=O.useMemo(()=>({setPositionReference:u}),[]),y=O.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return O.useMemo(()=>({dataRef:s,open:e,onOpenChange:f,elements:y,events:o,floatingId:i,refs:p}),[e,f,y,o,i,p])}function die(t){t===void 0&&(t={});const{nodeId:e}=t,n=fie({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,i=r.elements,[s,o]=O.useState(null),[a,l]=O.useState(null),f=(i==null?void 0:i.reference)||s,p=O.useRef(null),y=uie();eT(()=>{f&&(p.current=f)},[f]);const _=Qre({...t,elements:{...i,...a&&{reference:a}}}),E=O.useCallback(v=>{const C=Sr(v)?{getBoundingClientRect:()=>v.getBoundingClientRect(),contextElement:v}:v;l(C),_.refs.setReference(C)},[_.refs]),S=O.useCallback(v=>{(Sr(v)||v===null)&&(p.current=v,o(v)),(Sr(_.refs.reference.current)||_.refs.reference.current===null||v!==null&&!Sr(v))&&_.refs.setReference(v)},[_.refs]),I=O.useMemo(()=>({..._.refs,setReference:S,setPositionReference:E,domReference:p}),[_.refs,S,E]),R=O.useMemo(()=>({..._.elements,domReference:f}),[_.elements,f]),w=O.useMemo(()=>({..._,...r,refs:I,elements:R,nodeId:e}),[_,I,R,e,r]);return eT(()=>{r.dataRef.current.floatingContext=w;const v=y==null?void 0:y.nodesRef.current.find(C=>C.id===e);v&&(v.context=w)}),O.useMemo(()=>({..._,context:w,refs:I,elements:R}),[_,I,R,w])}const mP="active",gP="selected";function W0(t,e,n){const r=new Map,i=n==="item";let s=t;if(i&&t){const{[mP]:o,[gP]:a,...l}=t;s=l}return{...n==="floating"&&{tabIndex:-1,[cie]:""},...s,...e.map(o=>{const a=o?o[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((o,a)=>(a&&Object.entries(a).forEach(l=>{let[u,f]=l;if(!(i&&[mP,gP].includes(u)))if(u.indexOf("on")===0){if(r.has(u)||r.set(u,[]),typeof f=="function"){var p;(p=r.get(u))==null||p.push(f),o[u]=function(){for(var y,_=arguments.length,E=new Array(_),S=0;S<_;S++)E[S]=arguments[S];return(y=r.get(u))==null?void 0:y.map(I=>I(...E)).find(I=>I!==void 0)}}}else o[u]=f}),o),{})}}function hie(t){t===void 0&&(t=[]);const e=t.map(a=>a==null?void 0:a.reference),n=t.map(a=>a==null?void 0:a.floating),r=t.map(a=>a==null?void 0:a.item),i=O.useCallback(a=>W0(a,t,"reference"),e),s=O.useCallback(a=>W0(a,t,"floating"),n),o=O.useCallback(a=>W0(a,t,"item"),r);return O.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}function yP(t,e){return{...t,rects:{...t.rects,floating:{...t.rects.floating,height:e}}}}const pie=t=>({name:"inner",options:t,async fn(e){const{listRef:n,overflowRef:r,onFallbackChange:i,offset:s=0,index:o=0,minItemsVisible:a=4,referenceOverflowThreshold:l=0,scrollRef:u,...f}=Wc(t,e),{rects:p,elements:{floating:y}}=e,_=n.current[o],E=(u==null?void 0:u.current)||y,S=y.clientTop||E.clientTop,I=y.clientTop!==0,R=E.clientTop!==0,w=y===E;if(!_)return{};const v={...e,...await DF(-_.offsetTop-y.clientTop-p.reference.height/2-_.offsetHeight/2-s).fn(e)},C=await q0(yP(v,E.scrollHeight+S+y.clientTop),f),k=await q0(v,{...f,elementContext:"reference"}),B=Math.max(0,C.top),D=v.y+B,T=Math.max(0,E.scrollHeight+(I&&w||R?S*2:0)-B-Math.max(0,C.bottom));return E.style.maxHeight=T+"px",E.scrollTop=B,i&&(E.offsetHeight<_.offsetHeight*Math.min(a,n.current.length-1)-1||k.top>=-l||k.bottom>=-l?Br.flushSync(()=>i(!0)):Br.flushSync(()=>i(!1))),r&&(r.current=await q0(yP({...v,y:D},E.offsetHeight+S+y.clientTop),f)),{y:D}}});function mie(t,e){const{open:n,elements:r}=t,{enabled:i=!0,overflowRef:s,scrollRef:o,onChange:a}=e,l=MF(a),u=O.useRef(!1),f=O.useRef(null),p=O.useRef(null);O.useEffect(()=>{if(!i)return;function _(S){if(S.ctrlKey||!E||s.current==null)return;const I=S.deltaY,R=s.current.top>=-.5,w=s.current.bottom>=-.5,v=E.scrollHeight-E.clientHeight,C=I<0?-1:1,k=I<0?"max":"min";E.scrollHeight<=E.clientHeight||(!R&&I>0||!w&&I<0?(S.preventDefault(),Br.flushSync(()=>{l(B=>B+Math[k](I,v*C))})):/firefox/i.test(hre())&&(E.scrollTop+=I))}const E=(o==null?void 0:o.current)||r.floating;if(n&&E)return E.addEventListener("wheel",_),requestAnimationFrame(()=>{f.current=E.scrollTop,s.current!=null&&(p.current={...s.current})}),()=>{f.current=null,p.current=null,E.removeEventListener("wheel",_)}},[i,n,r.floating,s,o,l]);const y=O.useMemo(()=>({onKeyDown(){u.current=!0},onWheel(){u.current=!1},onPointerMove(){u.current=!1},onScroll(){const _=(o==null?void 0:o.current)||r.floating;if(!(!s.current||!_||!u.current)){if(f.current!==null){const E=_.scrollTop-f.current;(s.current.bottom<-.5&&E<-1||s.current.top<-.5&&E>1)&&Br.flushSync(()=>l(S=>S+E))}requestAnimationFrame(()=>{f.current=_.scrollTop})}}}),[r.floating,l,s,o]);return O.useMemo(()=>i?{floating:y}:{},[i,y])}let Kc=O.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});Kc.displayName="FloatingContext";let eI=O.createContext(null);eI.displayName="PlacementContext";function gie(t){return O.useMemo(()=>t?typeof t=="string"?{to:t}:t:null,[t])}function yie(){return O.useContext(Kc).setReference}function vie(){return O.useContext(Kc).getReferenceProps}function _ie(){let{getFloatingProps:t,slot:e}=O.useContext(Kc);return O.useCallback((...n)=>Object.assign({},t(...n),{"data-anchor":e.anchor}),[t,e])}function wie(t=null){t===!1&&(t=null),typeof t=="string"&&(t={to:t});let e=O.useContext(eI),n=O.useMemo(()=>t,[JSON.stringify(t,typeof HTMLElement<"u"?(i,s)=>s instanceof HTMLElement?s.outerHTML:s:void 0)]);wn(()=>{e==null||e(n??null)},[e,n]);let r=O.useContext(Kc);return O.useMemo(()=>[r.setFloating,t?r.styles:{}],[r.setFloating,t,r.styles])}let vP=4;function Eie({children:t,enabled:e=!0}){let[n,r]=O.useState(null),[i,s]=O.useState(0),o=O.useRef(null),[a,l]=O.useState(null);bie(a);let u=e&&n!==null&&a!==null,{to:f="bottom",gap:p=0,offset:y=0,padding:_=0,inner:E}=Tie(n,a),[S,I="center"]=f.split(" ");wn(()=>{u&&s(0)},[u]);let{refs:R,floatingStyles:w,context:v}=die({open:u,placement:S==="selection"?I==="center"?"bottom":`bottom-${I}`:I==="center"?`${S}`:`${S}-${I}`,strategy:"absolute",transform:!1,middleware:[DF({mainAxis:S==="selection"?0:p,crossAxis:y}),Yre({padding:_}),S!=="selection"&&Xre({padding:_}),S==="selection"&&E?pie({...E,padding:_,overflowRef:o,offset:i,minItemsVisible:vP,referenceOverflowThreshold:_,onFallbackChange(V){var j,M;if(!V)return;let le=v.elements.floating;if(!le)return;let me=parseFloat(getComputedStyle(le).scrollPaddingBottom)||0,pe=Math.min(vP,le.childElementCount),X=0,G=0;for(let Y of(M=(j=v.elements.floating)==null?void 0:j.childNodes)!=null?M:[])if(Y instanceof HTMLElement){let ce=Y.offsetTop,ee=ce+Y.clientHeight+me,$=le.scrollTop,K=$+le.clientHeight;if(ce>=$&&ee<=K)pe--;else{G=Math.max(0,Math.min(ee,K)-Math.max(ce,$)),X=Y.clientHeight;break}}pe>=1&&s(Y=>{let ce=X*pe-G+me;return Y>=ce?Y:ce})}}):null,Jre({padding:_,apply({availableWidth:V,availableHeight:j,elements:M}){Object.assign(M.floating.style,{overflow:"auto",maxWidth:`${V}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${j}px)`})}})].filter(Boolean),whileElementsMounted:zre}),[C=S,k=I]=v.placement.split("-");S==="selection"&&(C="selection");let B=O.useMemo(()=>({anchor:[C,k].filter(Boolean).join(" ")}),[C,k]),D=mie(v,{overflowRef:o,onChange:s}),{getReferenceProps:T,getFloatingProps:N}=hie([D]),L=xt(V=>{l(V),R.setFloating(V)});return O.createElement(eI.Provider,{value:r},O.createElement(Kc.Provider,{value:{setFloating:L,setReference:R.setReference,styles:w,getReferenceProps:T,getFloatingProps:N,slot:B}},t))}function bie(t){wn(()=>{if(!t)return;let e=new MutationObserver(()=>{let n=window.getComputedStyle(t).maxHeight,r=parseFloat(n);if(isNaN(r))return;let i=parseInt(n);isNaN(i)||r!==i&&(t.style.maxHeight=`${Math.ceil(r)}px`)});return e.observe(t,{attributes:!0,attributeFilter:["style"]}),()=>{e.disconnect()}},[t])}function Tie(t,e){var n,r,i;let s=K0((n=t==null?void 0:t.gap)!=null?n:"var(--anchor-gap, 0)",e),o=K0((r=t==null?void 0:t.offset)!=null?r:"var(--anchor-offset, 0)",e),a=K0((i=t==null?void 0:t.padding)!=null?i:"var(--anchor-padding, 0)",e);return{...t,gap:s,offset:o,padding:a}}function K0(t,e,n=void 0){let r=Gy(),i=xt((l,u)=>{if(l==null)return[n,null];if(typeof l=="number")return[l,null];if(typeof l=="string"){if(!u)return[n,null];let f=_P(l,u);return[f,p=>{let y=FF(l);{let _=y.map(E=>window.getComputedStyle(u).getPropertyValue(E));r.requestAnimationFrame(function E(){r.nextFrame(E);let S=!1;for(let[R,w]of y.entries()){let v=window.getComputedStyle(u).getPropertyValue(w);if(_[R]!==v){_[R]=v,S=!0;break}}if(!S)return;let I=_P(l,u);f!==I&&(p(I),f=I)})}return r.dispose}]}return[n,null]}),s=O.useMemo(()=>i(t,e)[0],[t,e]),[o=s,a]=O.useState();return wn(()=>{let[l,u]=i(t,e);if(a(l),!!u)return u(a)},[t,e]),o}function FF(t){let e=/var\((.*)\)/.exec(t);if(e){let n=e[1].indexOf(",");if(n===-1)return[e[1]];let r=e[1].slice(0,n).trim(),i=e[1].slice(n+1).trim();return i?[r,...FF(i)]:[r]}return[]}function _P(t,e){let n=document.createElement("div");e.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",t,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return e.removeChild(n),r}let Zy=O.createContext(null);Zy.displayName="OpenClosedContext";var vo=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(vo||{});function jF(){return O.useContext(Zy)}function VF({value:t,children:e}){return Pe.createElement(Zy.Provider,{value:t},e)}function Sie({children:t}){return Pe.createElement(Zy.Provider,{value:null},t)}function xie(t){throw new Error("Unexpected object: "+t)}var dr=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(dr||{});function G0(t,e){let n=e.resolveItems();if(n.length<=0)return null;let r=e.resolveActiveIndex(),i=r??-1;switch(t.focus){case 0:{for(let s=0;s<n.length;++s)if(!e.resolveDisabled(n[s],s,n))return s;return r}case 1:{i===-1&&(i=n.length);for(let s=i-1;s>=0;--s)if(!e.resolveDisabled(n[s],s,n))return s;return r}case 2:{for(let s=i+1;s<n.length;++s)if(!e.resolveDisabled(n[s],s,n))return s;return r}case 3:{for(let s=n.length-1;s>=0;--s)if(!e.resolveDisabled(n[s],s,n))return s;return r}case 4:{for(let s=0;s<n.length;++s)if(e.resolveId(n[s],s,n)===t.id)return s;return r}case 5:return null;default:xie(t)}}function Iie(t){let e=xt(t),n=O.useRef(!1);O.useEffect(()=>(n.current=!1,()=>{n.current=!0,sF(()=>{n.current&&e()})}),[e])}function Rie(){let t=typeof document>"u";return"useSyncExternalStore"in Em?(e=>e.useSyncExternalStore)(Em)(()=>()=>{},()=>!1,()=>!t):!1}function Cie(){let t=Rie(),[e,n]=O.useState(_l.isHandoffComplete);return e&&_l.isHandoffComplete===!1&&n(!1),O.useEffect(()=>{e!==!0&&n(!0)},[e]),O.useEffect(()=>_l.handoff(),[]),t?!1:e}let Aie=O.createContext(!1);function Pie(){return O.useContext(Aie)}function kie(t){let e=Pie(),n=O.useContext(BF),r=Yx(t),[i,s]=O.useState(()=>{var o;if(!e&&n!==null)return(o=n.current)!=null?o:null;if(_l.isServer)return null;let a=r==null?void 0:r.getElementById("headlessui-portal-root");if(a)return a;if(r===null)return null;let l=r.createElement("div");return l.setAttribute("id","headlessui-portal-root"),r.body.appendChild(l)});return O.useEffect(()=>{i!==null&&(r!=null&&r.body.contains(i)||r==null||r.body.appendChild(i))},[i,r]),O.useEffect(()=>{e||n!==null&&s(n.current)},[n,s,e]),i}let UF=O.Fragment,Oie=Pr(function(t,e){let n=t,r=O.useRef(null),i=xi(fF(f=>{r.current=f}),e),s=Yx(r),o=kie(r),[a]=O.useState(()=>{var f;return _l.isServer?null:(f=s==null?void 0:s.createElement("div"))!=null?f:null}),l=O.useContext(Mie),u=Cie();return wn(()=>{!o||!a||o.contains(a)||(a.setAttribute("data-headlessui-portal",""),o.appendChild(a))},[o,a]),wn(()=>{if(a&&l)return l.register(a)},[l,a]),Iie(()=>{var f;!o||!a||(a instanceof Node&&o.contains(a)&&o.removeChild(a),o.childNodes.length<=0&&((f=o.parentElement)==null||f.removeChild(o)))}),u?!o||!a?null:Br.createPortal(Ar({ourProps:{ref:i},theirProps:n,slot:{},defaultTag:UF,name:"Portal"}),a):null});function Nie(t,e){let n=xi(e),{enabled:r=!0,...i}=t;return r?Pe.createElement(Oie,{...i,ref:n}):Ar({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:UF,name:"Portal"})}let Die=O.Fragment,BF=O.createContext(null);function Lie(t,e){let{target:n,...r}=t,i={ref:xi(e)};return Pe.createElement(BF.Provider,{value:n},Ar({ourProps:i,theirProps:r,defaultTag:Die,name:"Popover.Group"}))}let Mie=O.createContext(null),Fie=Pr(Nie),jie=Pr(Lie),Vie=Object.assign(Fie,{Group:jie});var wP;let Uie=(wP=Pe.startTransition)!=null?wP:function(t){t()};var Bie=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Bie||{}),$ie=(t=>(t[t.ToggleDisclosure=0]="ToggleDisclosure",t[t.CloseDisclosure=1]="CloseDisclosure",t[t.SetButtonId=2]="SetButtonId",t[t.SetPanelId=3]="SetPanelId",t[t.SetButtonElement=4]="SetButtonElement",t[t.SetPanelElement=5]="SetPanelElement",t))($ie||{});let zie={0:t=>({...t,disclosureState:Da(t.disclosureState,{0:1,1:0})}),1:t=>t.disclosureState===1?t:{...t,disclosureState:1},2(t,e){return t.buttonId===e.buttonId?t:{...t,buttonId:e.buttonId}},3(t,e){return t.panelId===e.panelId?t:{...t,panelId:e.panelId}},4(t,e){return t.buttonElement===e.element?t:{...t,buttonElement:e.element}},5(t,e){return t.panelElement===e.element?t:{...t,panelElement:e.element}}},tI=O.createContext(null);tI.displayName="DisclosureContext";function nI(t){let e=O.useContext(tI);if(e===null){let n=new Error(`<${t} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,nI),n}return e}let rI=O.createContext(null);rI.displayName="DisclosureAPIContext";function $F(t){let e=O.useContext(rI);if(e===null){let n=new Error(`<${t} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,$F),n}return e}let iI=O.createContext(null);iI.displayName="DisclosurePanelContext";function Hie(){return O.useContext(iI)}function qie(t,e){return Da(e.type,zie,t,e)}let Wie=O.Fragment;function Kie(t,e){let{defaultOpen:n=!1,...r}=t,i=O.useRef(null),s=xi(e,fF(E=>{i.current=E},t.as===void 0||t.as===O.Fragment)),o=O.useReducer(qie,{disclosureState:n?0:1,buttonElement:null,panelElement:null,buttonId:null,panelId:null}),[{disclosureState:a,buttonId:l},u]=o,f=xt(E=>{u({type:1});let S=ql(i);if(!S||!l)return;let I=E?E instanceof HTMLElement?E:E.current instanceof HTMLElement?E.current:S.getElementById(l):S.getElementById(l);I==null||I.focus()}),p=O.useMemo(()=>({close:f}),[f]),y=O.useMemo(()=>({open:a===0,close:f}),[a,f]),_={ref:s};return Pe.createElement(tI.Provider,{value:o},Pe.createElement(rI.Provider,{value:p},Pe.createElement(Pne,{value:f},Pe.createElement(VF,{value:Da(a,{0:vo.Open,1:vo.Closed})},Ar({ourProps:_,theirProps:r,slot:y,defaultTag:Wie,name:"Disclosure"})))))}let Gie="button";function Qie(t,e){let n=O.useId(),{id:r=`headlessui-disclosure-button-${n}`,disabled:i=!1,autoFocus:s=!1,...o}=t,[a,l]=nI("Disclosure.Button"),u=Hie(),f=u===null?!1:u===a.panelId,p=O.useRef(null),y=xi(p,e,xt(L=>{if(!f)return l({type:4,element:L})})),_=Hx();O.useEffect(()=>{if(!f)return l({type:2,buttonId:r}),()=>{l({type:2,buttonId:null})}},[r,l,f]);let E=xt(L=>{var V;if(f){if(a.disclosureState===1)return;switch(L.key){case on.Space:case on.Enter:L.preventDefault(),L.stopPropagation(),l({type:0}),(V=a.buttonElement)==null||V.focus();break}}else switch(L.key){case on.Space:case on.Enter:L.preventDefault(),L.stopPropagation(),l({type:0});break}}),S=xt(L=>{switch(L.key){case on.Space:L.preventDefault();break}}),I=xt(L=>{var V;uF(L.currentTarget)||i||(f?(l({type:0}),(V=a.buttonElement)==null||V.focus()):l({type:0}))}),{isFocusVisible:R,focusProps:w}=iF({autoFocus:s}),{isHovered:v,hoverProps:C}=rF({isDisabled:i}),{pressed:k,pressProps:B}=oF({disabled:i}),D=O.useMemo(()=>({open:a.disclosureState===0,hover:v,active:k,disabled:i,focus:R,autofocus:s}),[a,v,k,R,i,s]),T=wF(t,a.buttonElement),N=Lg(f?{ref:y,type:T,disabled:i||void 0,autoFocus:s,onKeyDown:E,onClick:I}:{ref:y,id:r,type:T,"aria-expanded":a.disclosureState===0,"aria-controls":a.panelElement?a.panelId:void 0,disabled:i||void 0,autoFocus:s,onKeyDown:E,onKeyUp:S,onClick:I},w,C,B);return Ar({mergeRefs:_,ourProps:N,theirProps:o,slot:D,defaultTag:Gie,name:"Disclosure.Button"})}let Yie="div",Xie=Gd.RenderStrategy|Gd.Static;function Jie(t,e){let n=O.useId(),{id:r=`headlessui-disclosure-panel-${n}`,transition:i=!1,...s}=t,[o,a]=nI("Disclosure.Panel"),{close:l}=$F("Disclosure.Panel"),u=Hx(),[f,p]=O.useState(null),y=xi(e,xt(w=>{Uie(()=>a({type:5,element:w}))}),p);O.useEffect(()=>(a({type:3,panelId:r}),()=>{a({type:3,panelId:null})}),[r,a]);let _=jF(),[E,S]=bF(i,f,_!==null?(_&vo.Open)===vo.Open:o.disclosureState===0),I=O.useMemo(()=>({open:o.disclosureState===0,close:l}),[o.disclosureState,l]),R={ref:y,id:r,...EF(S)};return Pe.createElement(Sie,null,Pe.createElement(iI.Provider,{value:o.panelId},Ar({mergeRefs:u,ourProps:R,theirProps:s,slot:I,defaultTag:Yie,features:Xie,visible:E,name:"Disclosure.Panel"})))}let Zie=Pr(Kie),tT=Pr(Qie),zF=Pr(Jie),ese=Object.assign(Zie,{Button:tT,Panel:zF});function tse(t,e){let n=O.useRef({left:0,top:0});if(wn(()=>{if(!e)return;let i=e.getBoundingClientRect();i&&(n.current=i)},[t,e]),e==null||!t||e===document.activeElement)return!1;let r=e.getBoundingClientRect();return r.top!==n.current.top||r.left!==n.current.left}let EP=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function bP(t){var e,n;let r=(e=t.innerText)!=null?e:"",i=t.cloneNode(!0);if(!(i instanceof HTMLElement))return r;let s=!1;for(let a of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))a.remove(),s=!0;let o=s?(n=i.innerText)!=null?n:"":r;return EP.test(o)&&(o=o.replace(EP,"")),o}function nse(t){let e=t.getAttribute("aria-label");if(typeof e=="string")return e.trim();let n=t.getAttribute("aria-labelledby");if(n){let r=n.split(" ").map(i=>{let s=document.getElementById(i);if(s){let o=s.getAttribute("aria-label");return typeof o=="string"?o.trim():bP(s).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return bP(t).trim()}function rse(t){let e=O.useRef(""),n=O.useRef("");return xt(()=>{let r=t.current;if(!r)return"";let i=r.innerText;if(e.current===i)return n.current;let s=nse(r).trim().toLowerCase();return e.current=i,n.current=s,s})}var ise=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(ise||{}),sse=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(sse||{}),ose=(t=>(t[t.OpenMenu=0]="OpenMenu",t[t.CloseMenu=1]="CloseMenu",t[t.GoToItem=2]="GoToItem",t[t.Search=3]="Search",t[t.ClearSearch=4]="ClearSearch",t[t.RegisterItem=5]="RegisterItem",t[t.UnregisterItem=6]="UnregisterItem",t[t.SetButtonElement=7]="SetButtonElement",t[t.SetItemsElement=8]="SetItemsElement",t))(ose||{});function Q0(t,e=n=>n){let n=t.activeItemIndex!==null?t.items[t.activeItemIndex]:null,r=vF(e(t.items.slice()),s=>s.dataRef.current.domRef.current),i=n?r.indexOf(n):null;return i===-1&&(i=null),{items:r,activeItemIndex:i}}let ase={1(t){return t.menuState===1?t:{...t,activeItemIndex:null,menuState:1}},0(t){return t.menuState===0?t:{...t,__demoMode:!1,menuState:0}},2:(t,e)=>{var n,r,i,s,o;if(t.menuState===1)return t;let a={...t,searchQuery:"",activationTrigger:(n=e.trigger)!=null?n:1,__demoMode:!1};if(e.focus===dr.Nothing)return{...a,activeItemIndex:null};if(e.focus===dr.Specific)return{...a,activeItemIndex:t.items.findIndex(f=>f.id===e.id)};if(e.focus===dr.Previous){let f=t.activeItemIndex;if(f!==null){let p=t.items[f].dataRef.current.domRef,y=G0(e,{resolveItems:()=>t.items,resolveActiveIndex:()=>t.activeItemIndex,resolveId:_=>_.id,resolveDisabled:_=>_.dataRef.current.disabled});if(y!==null){let _=t.items[y].dataRef.current.domRef;if(((r=p.current)==null?void 0:r.previousElementSibling)===_.current||((i=_.current)==null?void 0:i.previousElementSibling)===null)return{...a,activeItemIndex:y}}}}else if(e.focus===dr.Next){let f=t.activeItemIndex;if(f!==null){let p=t.items[f].dataRef.current.domRef,y=G0(e,{resolveItems:()=>t.items,resolveActiveIndex:()=>t.activeItemIndex,resolveId:_=>_.id,resolveDisabled:_=>_.dataRef.current.disabled});if(y!==null){let _=t.items[y].dataRef.current.domRef;if(((s=p.current)==null?void 0:s.nextElementSibling)===_.current||((o=_.current)==null?void 0:o.nextElementSibling)===null)return{...a,activeItemIndex:y}}}}let l=Q0(t),u=G0(e,{resolveItems:()=>l.items,resolveActiveIndex:()=>l.activeItemIndex,resolveId:f=>f.id,resolveDisabled:f=>f.dataRef.current.disabled});return{...a,...l,activeItemIndex:u}},3:(t,e)=>{let n=t.searchQuery!==""?0:1,r=t.searchQuery+e.value.toLowerCase(),i=(t.activeItemIndex!==null?t.items.slice(t.activeItemIndex+n).concat(t.items.slice(0,t.activeItemIndex+n)):t.items).find(o=>{var a;return((a=o.dataRef.current.textValue)==null?void 0:a.startsWith(r))&&!o.dataRef.current.disabled}),s=i?t.items.indexOf(i):-1;return s===-1||s===t.activeItemIndex?{...t,searchQuery:r}:{...t,searchQuery:r,activeItemIndex:s,activationTrigger:1}},4(t){return t.searchQuery===""?t:{...t,searchQuery:"",searchActiveItemIndex:null}},5:(t,e)=>{let n=Q0(t,r=>[...r,{id:e.id,dataRef:e.dataRef}]);return{...t,...n}},6:(t,e)=>{let n=Q0(t,r=>{let i=r.findIndex(s=>s.id===e.id);return i!==-1&&r.splice(i,1),r});return{...t,...n,activationTrigger:1}},7:(t,e)=>t.buttonElement===e.element?t:{...t,buttonElement:e.element},8:(t,e)=>t.itemsElement===e.element?t:{...t,itemsElement:e.element}},sI=O.createContext(null);sI.displayName="MenuContext";function ev(t){let e=O.useContext(sI);if(e===null){let n=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ev),n}return e}function lse(t,e){return Da(e.type,ase,t,e)}let use=O.Fragment;function cse(t,e){let{__demoMode:n=!1,...r}=t,i=O.useReducer(lse,{__demoMode:n,menuState:n?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:s,itemsElement:o,buttonElement:a},l]=i,u=xi(e);Yne(s===0,[a,o],(_,E)=>{l({type:1}),Qx(E,Gx.Loose)||(_.preventDefault(),a==null||a.focus())});let f=xt(()=>{l({type:1})}),p=O.useMemo(()=>({open:s===0,close:f}),[s,f]),y={ref:u};return Pe.createElement(Eie,null,Pe.createElement(sI.Provider,{value:i},Pe.createElement(VF,{value:Da(s,{0:vo.Open,1:vo.Closed})},Ar({ourProps:y,theirProps:r,slot:p,defaultTag:use,name:"Menu"}))))}let fse="button";function dse(t,e){var n;let r=O.useId(),{id:i=`headlessui-menu-button-${r}`,disabled:s=!1,autoFocus:o=!1,...a}=t,[l,u]=ev("Menu.Button"),f=vie(),p=Hx(),y=xi(e,yie(),xt(T=>u({type:7,element:T}))),_=xt(T=>{switch(T.key){case on.Space:case on.Enter:case on.ArrowDown:T.preventDefault(),T.stopPropagation(),Br.flushSync(()=>u({type:0})),u({type:2,focus:dr.First});break;case on.ArrowUp:T.preventDefault(),T.stopPropagation(),Br.flushSync(()=>u({type:0})),u({type:2,focus:dr.Last});break}}),E=xt(T=>{switch(T.key){case on.Space:T.preventDefault();break}}),S=xt(T=>{var N;if(uF(T.currentTarget))return T.preventDefault();s||(l.menuState===0?(Br.flushSync(()=>u({type:1})),(N=l.buttonElement)==null||N.focus({preventScroll:!0})):(T.preventDefault(),u({type:0})))}),{isFocusVisible:I,focusProps:R}=iF({autoFocus:o}),{isHovered:w,hoverProps:v}=rF({isDisabled:s}),{pressed:C,pressProps:k}=oF({disabled:s}),B=O.useMemo(()=>({open:l.menuState===0,active:C||l.menuState===0,disabled:s,hover:w,focus:I,autofocus:o}),[l,w,I,C,s,o]),D=Lg(f(),{ref:y,id:i,type:wF(t,l.buttonElement),"aria-haspopup":"menu","aria-controls":(n=l.itemsElement)==null?void 0:n.id,"aria-expanded":l.menuState===0,disabled:s||void 0,autoFocus:o,onKeyDown:_,onKeyUp:E,onClick:S},R,v,k);return Ar({mergeRefs:p,ourProps:D,theirProps:a,slot:B,defaultTag:fse,name:"Menu.Button"})}let hse="div",pse=Gd.RenderStrategy|Gd.Static;function mse(t,e){var n,r;let i=O.useId(),{id:s=`headlessui-menu-items-${i}`,anchor:o,portal:a=!1,modal:l=!0,transition:u=!1,...f}=t,p=gie(o),[y,_]=ev("Menu.Items"),[E,S]=wie(p),I=_ie(),[R,w]=O.useState(null),v=xi(e,p?E:null,xt(X=>_({type:8,element:X})),w),C=Yx(y.itemsElement);p&&(a=!0);let k=jF(),[B,D]=bF(u,R,k!==null?(k&vo.Open)===vo.Open:y.menuState===0);Mne(B,y.buttonElement,()=>{_({type:1})});let T=y.__demoMode?!1:l&&y.menuState===0;nre(T,C);let N=y.__demoMode?!1:l&&y.menuState===0;Lne(N,{allowed:O.useCallback(()=>[y.buttonElement,y.itemsElement],[y.buttonElement,y.itemsElement])});let L=y.menuState!==0,V=tse(L,y.buttonElement)?!1:B;O.useEffect(()=>{let X=y.itemsElement;X&&y.menuState===0&&X!==(C==null?void 0:C.activeElement)&&X.focus({preventScroll:!0})},[y.menuState,y.itemsElement,C]),cre(y.menuState===0,{container:y.itemsElement,accept(X){return X.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:X.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(X){X.setAttribute("role","none")}});let j=Gy(),M=xt(X=>{var G,Y,ce;switch(j.dispose(),X.key){case on.Space:if(y.searchQuery!=="")return X.preventDefault(),X.stopPropagation(),_({type:3,value:X.key});case on.Enter:if(X.preventDefault(),X.stopPropagation(),_({type:1}),y.activeItemIndex!==null){let{dataRef:ee}=y.items[y.activeItemIndex];(Y=(G=ee.current)==null?void 0:G.domRef.current)==null||Y.click()}yF(y.buttonElement);break;case on.ArrowDown:return X.preventDefault(),X.stopPropagation(),_({type:2,focus:dr.Next});case on.ArrowUp:return X.preventDefault(),X.stopPropagation(),_({type:2,focus:dr.Previous});case on.Home:case on.PageUp:return X.preventDefault(),X.stopPropagation(),_({type:2,focus:dr.First});case on.End:case on.PageDown:return X.preventDefault(),X.stopPropagation(),_({type:2,focus:dr.Last});case on.Escape:X.preventDefault(),X.stopPropagation(),Br.flushSync(()=>_({type:1})),(ce=y.buttonElement)==null||ce.focus({preventScroll:!0});break;case on.Tab:X.preventDefault(),X.stopPropagation(),Br.flushSync(()=>_({type:1})),qne(y.buttonElement,X.shiftKey?Xb.Previous:Xb.Next);break;default:X.key.length===1&&(_({type:3,value:X.key}),j.setTimeout(()=>_({type:4}),350));break}}),le=xt(X=>{switch(X.key){case on.Space:X.preventDefault();break}}),me=O.useMemo(()=>({open:y.menuState===0}),[y.menuState]),pe=Lg(p?I():{},{"aria-activedescendant":y.activeItemIndex===null||(n=y.items[y.activeItemIndex])==null?void 0:n.id,"aria-labelledby":(r=y.buttonElement)==null?void 0:r.id,id:s,onKeyDown:M,onKeyUp:le,role:"menu",tabIndex:y.menuState===0?0:void 0,ref:v,style:{...f.style,...S,"--button-width":One(y.buttonElement,!0).width},...EF(D)});return Pe.createElement(Vie,{enabled:a?t.static||B:!1},Ar({ourProps:pe,theirProps:f,slot:me,defaultTag:hse,features:pse,visible:V,name:"Menu.Items"}))}let gse=O.Fragment;function yse(t,e){let n=O.useId(),{id:r=`headlessui-menu-item-${n}`,disabled:i=!1,...s}=t,[o,a]=ev("Menu.Item"),l=o.activeItemIndex!==null?o.items[o.activeItemIndex].id===r:!1,u=O.useRef(null),f=xi(e,u);wn(()=>{if(!o.__demoMode&&o.menuState===0&&l&&o.activationTrigger!==0)return Ps().requestAnimationFrame(()=>{var N,L;(L=(N=u.current)==null?void 0:N.scrollIntoView)==null||L.call(N,{block:"nearest"})})},[o.__demoMode,u,l,o.menuState,o.activationTrigger,o.activeItemIndex]);let p=rse(u),y=O.useRef({disabled:i,domRef:u,get textValue(){return p()}});wn(()=>{y.current.disabled=i},[y,i]),wn(()=>(a({type:5,id:r,dataRef:y}),()=>a({type:6,id:r})),[y,r]);let _=xt(()=>{a({type:1})}),E=xt(N=>{if(i)return N.preventDefault();a({type:1}),yF(o.buttonElement)}),S=xt(()=>{if(i)return a({type:2,focus:dr.Nothing});a({type:2,focus:dr.Specific,id:r})}),I=rre(),R=xt(N=>{I.update(N),!i&&(l||a({type:2,focus:dr.Specific,id:r,trigger:0}))}),w=xt(N=>{I.wasMoved(N)&&(i||l||a({type:2,focus:dr.Specific,id:r,trigger:0}))}),v=xt(N=>{I.wasMoved(N)&&(i||l&&a({type:2,focus:dr.Nothing}))}),[C,k]=hF(),[B,D]=Ene(),T=O.useMemo(()=>({active:l,focus:l,disabled:i,close:_}),[l,i,_]);return Pe.createElement(k,null,Pe.createElement(D,null,Ar({ourProps:{id:r,ref:f,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-labelledby":C,"aria-describedby":B,disabled:void 0,onClick:E,onFocus:S,onPointerEnter:R,onMouseEnter:R,onPointerMove:w,onMouseMove:w,onPointerLeave:v,onMouseLeave:v},theirProps:s,slot:T,defaultTag:gse,name:"Menu.Item"})))}let vse="div";function _se(t,e){let[n,r]=hF();return Pe.createElement(r,null,Ar({ourProps:{ref:e,"aria-labelledby":n,role:"group"},theirProps:t,slot:{},defaultTag:vse,name:"Menu.Section"}))}let wse="header";function Ese(t,e){let n=O.useId(),{id:r=`headlessui-menu-heading-${n}`,...i}=t,s=Wx();wn(()=>s.register(r),[r,s.register]);let o={id:r,ref:e,role:"presentation",...s.props};return Ar({ourProps:o,theirProps:i,slot:{},defaultTag:wse,name:"Menu.Heading"})}let bse="div";function Tse(t,e){return Ar({ourProps:{ref:e,role:"separator"},theirProps:t,slot:{},defaultTag:bse,name:"Menu.Separator"})}let Sse=Pr(cse),HF=Pr(dse),qF=Pr(mse),nT=Pr(yse),xse=Pr(_se),Ise=Pr(Ese),Rse=Pr(Tse),Cse=Object.assign(Sse,{Button:HF,Items:qF,Item:nT,Section:xse,Heading:Ise,Separator:Rse});function Ase({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Pse=O.forwardRef(Ase);function kse({title:t,titleId:e,...n},r){return O.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?O.createElement("title",{id:e},t):null,O.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Ose=O.forwardRef(kse);var WF={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},TP=Pe.createContext&&Pe.createContext(WF),Nse=["attr","size","title"];function Dse(t,e){if(t==null)return{};var n=Lse(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Lse(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ug(){return Ug=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ug.apply(this,arguments)}function SP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SP(Object(n),!0).forEach(function(r){Mse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mse(t,e,n){return e=Fse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fse(t){var e=jse(t,"string");return typeof e=="symbol"?e:e+""}function jse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KF(t){return t&&t.map((e,n)=>Pe.createElement(e.tag,Bg({key:n},e.attr),KF(e.child)))}function Gc(t){return e=>Pe.createElement(Vse,Ug({attr:Bg({},t.attr)},e),KF(t.child))}function Vse(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=Dse(t,Nse),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Pe.createElement("svg",Ug({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Bg(Bg({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Pe.createElement("title",null,s),t.children)};return TP!==void 0?Pe.createElement(TP.Consumer,null,n=>e(n)):e(WF)}function Use(t){return Gc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M221.09 64a157.09 157.09 0 1 0 157.09 157.09A157.1 157.1 0 0 0 221.09 64z"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"32",d:"M338.29 338.29 448 448"},child:[]}]})(t)}function xP(...t){return t.filter(Boolean).join(" ")}function kr(){var l,u;const t=Aa(),{logoutUzer:e,currentUser:n,setCurrentUser:r}=Jn(),{transformCloudinaryURL:i}=Cr(),s=[{name:"Home",href:"/r-social/",show:!!n},{name:"Register",href:"/r-social/register",show:!n},{name:"Sign in",href:"/r-social/login",show:!n},{name:"Profile",href:"/r-social/profile/me",show:!!n},{name:"Post",href:"/r-social/post",show:!!n},{name:"Posts",href:"/r-social/profile/posts",show:!!n}];function o(){e(),r(null),t("/r-social/login")}const a=()=>n&&n!=null&&n.profilePictureURL?i(n.profilePictureURL):"https://i.pinimg.com/736x/90/d1/ac/90d1ac48711f63c6a290238c8382632f.jpg";return O.useEffect(()=>{},[n]),x.jsxs(ese,{as:"nav",className:"bg-gray-800 top-0 right-0 left-0  ",children:[x.jsx("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8 ",children:x.jsxs("div",{className:"relative flex h-16 items-center justify-between",children:[x.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center sm:hidden",children:x.jsxs(tT,{className:"group relative inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",children:[x.jsx("span",{className:"absolute -inset-0.5"}),x.jsx("span",{className:"sr-only",children:"Open main menu"}),x.jsx(Pse,{"aria-hidden":"true",className:"block h-6 w-6 group-data-[open]:hidden"}),x.jsx(Ose,{"aria-hidden":"true",className:"hidden h-6 w-6 group-data-[open]:block"})]})}),x.jsxs("div",{className:"flex flex-1 items-center justify-center sm:items-stretch sm:justify-start",children:[x.jsx("div",{className:"flex flex-shrink-0 items-center font-mono text-white text-4xl",children:x.jsx(qn,{to:"/r-social/",children:"R-Social"})}),x.jsx("div",{className:"hidden sm:ml-6 sm:block",children:x.jsx("div",{className:"flex space-x-4",children:s.map(f=>x.jsx(qn,{to:f.href,"aria-current":f.current?"page":void 0,className:({isActive:p})=>xP("rounded-md px-3 py-2 text-sm font-medium",f.show?"":"hidden ",p?"bg-gray-900 text-cyan-500":"text-white hover:bg-gray-700 hover:text-white"),children:f.name},f.name))})})]}),x.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0",children:[x.jsx(qn,{to:"/r-social/search",children:x.jsxs("button",{type:"button",className:"relative rounded-full bg-gray-800 p-1 text-gray-400 hover:text-white focus:outline-none focus:ring-2 mx-1 focus:ring-white focus:ring-offset-1 focus:ring-offset-gray-800",children:[x.jsx("span",{className:"absolute -inset-1.5"}),x.jsx("span",{className:"sr-only",children:"Search"}),x.jsx(Use,{size:25})]})}),x.jsxs(Cse,{as:"div",className:"relative ml-3",children:[n&&x.jsx("div",{children:x.jsxs(HF,{className:"relative flex rounded-full bg-gray-800 text-sm focus:outline-none ring-2 ring-white focus:ring-offset-2 focus:ring-offset-gray-800",children:[x.jsx("span",{className:"absolute -inset-1.5"}),x.jsx("span",{className:"sr-only",children:"Open user menu"}),x.jsx("img",{src:a(),alt:"User Profile",className:"h-8 w-8 rounded-full"})]})}),x.jsxs(qF,{transition:!0,className:"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 transition focus:outline-none data-[closed]:scale-95 data-[closed]:transform data-[closed]:opacity-0 data-[enter]:duration-300 data-[leave]:duration-100 data-[enter]:ease-in-out data-[leave]:ease-in",children:[x.jsx("h1",{className:"text-blue-700 font-mono p-2 ml-2",children:n&&(((l=n==null?void 0:n.username)==null?void 0:l.toUpperCase())||((u=n==null?void 0:n.displayName)==null?void 0:u.toUpperCase()))}),x.jsx(nT,{children:x.jsx(qn,{to:"/r-social/profile/me",className:"block px-4 py-2 text-sm text-gray-700 data-[focus]:bg-gray-100",children:"Your Profile"})}),x.jsx(nT,{children:x.jsx(qn,{onClick:()=>{confirm("Do you wanna LOGOUT? ")&&o()},className:"block px-4 py-2 text-sm text-gray-700 data-[focus]:bg-gray-100",children:"Sign out"})})]})]})]})]})}),x.jsx(zF,{className:"sm:hidden",children:x.jsx("div",{className:"space-y-1 px-2 pb-3 pt-2",children:s.map(f=>x.jsx(qn,{as:"NavLink",to:f.href,"aria-current":f.current?"page":void 0,className:({isActive:p})=>xP("block rounded-md px-3 py-2 text-base font-medium hover:cursor-pointer",f.show?"":"hidden ",p?"bg-gray-900 text-cyan-300":"text-white hover:bg-gray-700 hover:text-white"),children:x.jsx(tT,{children:f.name})},f.name))})})]})}function Bse(t){return Gc({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7 0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 0 0-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 0 0 471 99.9c-52 0-98 35-111.8 85.1l-85.9 311h-.3v428h472.3c9.2 0 18.2-1.8 26.5-5.4 47.6-20.3 78.3-66.8 78.3-118.4 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7-.2-12.6-2-25.1-5.6-37.1zM112 528v364c0 17.7 14.3 32 32 32h65V496h-65c-17.7 0-32 14.3-32 32z"},child:[]}]})(t)}function IP(t){return Gc({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 0 0-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"},child:[]}]})(t)}function $se(t){return Gc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 0H64C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h96v84c0 7.1 5.8 12 12 12 2.4 0 4.9-.7 7.1-2.4L304 416h144c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64zm16 352c0 8.8-7.2 16-16 16H288l-12.8 9.6L208 428v-60H64c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16h384c8.8 0 16 7.2 16 16v288z"},child:[]}]})(t)}function zse(t){return Gc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M383.822 344.427c-16.045 0-31.024 5.326-41.721 15.979l-152.957-88.42c1.071-5.328 2.142-9.593 2.142-14.919 0-5.328-1.071-9.593-2.142-14.919l150.826-87.35c11.762 10.653 26.741 17.041 43.852 17.041 35.295 0 64.178-28.766 64.178-63.92C448 72.767 419.117 44 383.822 44c-35.297 0-64.179 28.767-64.179 63.92 0 5.327 1.065 9.593 2.142 14.919l-150.821 87.35c-11.767-10.654-26.741-17.041-43.856-17.041-35.296 0-63.108 28.766-63.108 63.92 0 35.153 28.877 63.92 64.178 63.92 17.115 0 32.089-6.389 43.856-17.042l151.891 88.421c-1.076 4.255-2.141 8.521-2.141 13.847 0 34.094 27.806 61.787 62.037 61.787 34.229 0 62.036-27.693 62.036-61.787.001-34.094-27.805-61.787-62.035-61.787z"},child:[]}]})(t)}const Hse=({comment:t,pid:e})=>{const{db:n,currentUser:r}=Jn(),i=async p=>{const y=await jn(Hn(St(n,"users"),br("username","==",p)));let _="";return y.forEach(E=>{_=E.data().profilePictureURL}),_};async function s(p,y){(await jn(St(n,"users"))).forEach(async E=>{const S=E.data(),I=S.posts.findIndex(R=>R.pid===p);if(I!==-1){const R=[...S.posts];R[I].comments.push({name:r==null?void 0:r.username,comment:y});const w=Vn(n,"users",E.id);await gs(w,{posts:R})}})}const{register:o,handleSubmit:a,formState:{errors:l},reset:u}=rh(),f=p=>{s(e,p.comment),u()};return x.jsx("section",{className:" dark:bg-gray-900 bg-slate-400 py-8 lg:py-16 antialiased",children:x.jsxs("div",{className:"max-w-2xl mx-auto px-4",children:[x.jsx("div",{className:"flex justify-between items-center mb-6",children:x.jsxs("h2",{className:"text-lg lg:text-2xl font-bold text-gray-900 dark:text-white",children:["Comments (",t.length,")"]})}),x.jsxs("form",{className:"mb-6",onSubmit:a(f),children:[x.jsxs("div",{className:"py-2 px-4 mb-4 bg-white rounded-lg rounded-t-lg border border-gray-200 dark:bg-gray-800 dark:border-gray-700",children:[x.jsx("label",{htmlFor:"comment",className:"sr-only",children:"Your comment"}),x.jsx("textarea",{id:"comment",rows:"6",className:`px-0 w-full text-sm text-gray-900 border-0 focus:ring-0 focus:outline-none dark:text-white dark:placeholder-gray-400 dark:bg-gray-800 ${l.comment?"border-red-500":""}`,placeholder:"Write a comment...",...o("comment",{required:"Comment is required",minLength:{value:1,message:"Comment must be at least 1 character long"}})}),l.comment&&x.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.comment.message})]}),x.jsx("button",{type:"submit",className:"inline-flex items-center py-2.5 px-4 text-xs font-medium text-center bg-blue-500 text-white bg-primary-700 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-800",children:"Post comment"})]}),t==null?void 0:t.map((p,y)=>x.jsx(qse,{value:p,getImageUrlByName:i},y))]})})},qse=({value:t,getImageUrlByName:e})=>{const[n,r]=O.useState("");return O.useEffect(()=>{(async()=>{const s=await e(t.name);r(s)})()},[t.name,e]),x.jsxs("article",{className:"p-6 text-base bg-white rounded-lg dark:bg-gray-900",children:[x.jsx(qn,{to:`/r-social/profile/${t.name}`,children:x.jsx("footer",{className:"flex justify-between items-center mb-2",children:x.jsxs("div",{className:"flex items-center",children:[x.jsx("img",{className:"mr-2 w-6 h-6 rounded-full",src:n||"default_profile_picture_url",alt:t.name}),x.jsx("p",{className:"inline-flex items-center mr-3 text-sm text-gray-900 dark:text-white font-semibold",children:t.name})]})})}),x.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t.comment})]})},Y0=t=>{let{handleLike:e}=Cr(),{currentUser:n,db:r}=Jn();const{username:i}=pS(),[s,o]=O.useState(!1),[a,l]=O.useState(!1),u=O.useRef(null);async function f(_){try{const E=await jn(Hn(St(r,"users"),br("uid","==",n==null?void 0:n.uid)));E.empty||E.forEach(async S=>{S.data().postsLiked.includes(_)?l(!0):l(!1)})}catch(E){console.error(E)}}const p=(_,E)=>_.length<=E?_:_.slice(0,E)+"...",y=_=>{navigator.clipboard.writeText(_).then(()=>{vs("Link copied to clipboard!","info","top-right",1e3)}).catch(E=>{console.error("Failed to copy: ",E)})};return O.useEffect(()=>{l(f(t.post.pid))},[n]),x.jsx(x.Fragment,{children:x.jsxs("div",{className:"max-w-md mx-auto  bg-white rounded-xl shadow-md overflow-hidden my-4 border-e-4 border border-blue-100",children:[x.jsx("div",{className:"",children:t.post.type==="image"?x.jsx("img",{src:t.post.mediaURL,alt:"post media",className:"w-full h-60 object-cover"}):x.jsxs("video",{controls:!0,id:"post-video",className:"w-full h-60 object-cover",preload:"metadata",ref:u,children:[x.jsx("source",{src:t.post.mediaURL,type:"video/mp4"}),"Your browser does not support the video tag."]})}),x.jsxs("div",{className:"p-4",children:[x.jsx("h3",{className:"text-lg font-bold text-gray-900",children:t.post.title}),x.jsx("p",{className:"text-gray-600 mt-2",children:p(t.post.desc,60)})]}),x.jsxs("div",{className:"border-t px-4 py-2 flex justify-between items-center",children:[x.jsxs("button",{className:"flex items-center space-x-1 text-slate-600 hover:text-blue-400",onClick:()=>{l(!a),e(t.post.uid,t.post.pid)},children:[x.jsx("i",{className:"fas fa-heart",children:x.jsx(Bse,{color:a?"blue":"",size:23})}),x.jsxs("span",{children:[t.post.likes.length," Likes"]})]}),x.jsxs("button",{className:"flex items-center space-x-1 text-gray-600 hover:text-blue-500 }",onClick:()=>{o(!s)},children:[x.jsx("i",{className:"fas fa-comment",children:x.jsx($se,{size:23})}),x.jsxs("span",{children:["Comments ",t.post.comments.length]})]}),x.jsxs("button",{onClick:()=>y(`https://r-social.github.io/r-social/profile/${i}/posts`),className:"flex items-center space-x-1 text-gray-600 hover:text-blue-500",children:[x.jsx("i",{className:"fas fa-share",children:x.jsx(zse,{size:23})}),x.jsx("span",{children:"Share"})]})]}),s&&x.jsx(Hse,{comment:t.post.comments,pid:t.post.pid})]})})};function wm(){return x.jsx(x.Fragment,{children:x.jsx("div",{className:"h-auto pt-6 mt-2",children:x.jsxs("div",{className:"max-w-sm mx-auto bg-gray-200 rounded-lg shadow-lg overflow-hidden animate-pulse",children:[x.jsxs("div",{className:"border-b px-4 pb-6",children:[x.jsx("div",{className:"text-center my-4",children:x.jsx("div",{className:"h-32 w-32 rounded-full bg-gray-300 mx-auto my-4 animate-pulse"})}),x.jsxs("div",{className:"py-2",children:[x.jsx("div",{className:"h-6 bg-gray-300 rounded-lg animate-pulse"}),x.jsx("div",{className:"h-4 bg-gray-300 rounded-lg mt-2 animate-pulse"})]})]}),x.jsxs("div",{className:"px-4 py-4",children:[x.jsxs("div",{className:"flex gap-2 items-center text-gray-300 mb-4 animate-pulse",children:[x.jsx("div",{className:"h-6 w-6 bg-gray-300 rounded-lg animate-pulse"}),x.jsx("span",{className:"h-4 bg-gray-300 rounded-lg animate-pulse"})]}),x.jsxs("div",{className:"flex items-center animate-pulse",children:[x.jsx("div",{className:"flex justify-end mr-2 h-10 w-10 bg-gray-300 rounded-lg"}),x.jsx("div",{className:"flex justify-end mr-2 h-10 w-10 bg-gray-300 rounded-lg"}),x.jsx("div",{className:"flex justify-end mr-2 h-10 w-10 bg-gray-300 rounded-lg"}),x.jsx("div",{className:"h-10 w-10 bg-gray-300 rounded-lg animate-pulse"})]})]})]})})})}const hd=t=>{let{currentUser:e}=Jn(),{handleLike:n,userArray:r}=Cr(),{username:i}=pS();return x.jsxs(x.Fragment,{children:[x.jsx("h1",{className:"text-center text-3xl font-mono text-blue-800 mt-1 ",children:" Posts"}),x.jsx("div",{className:"flex flex-col flex-wrap  justify-start gap-x-1.5 gap-y-1.5 m-0 p-0 duration-800",children:t.user==="all"?r&&r.map((s,o,a)=>{var l,u;return((l=s==null?void 0:s.posts)==null?void 0:l.length)===0?"":(u=s==null?void 0:s.posts)==null?void 0:u.map((f,p)=>x.jsx(O.Suspense,{fallback:x.jsx(wm,{}),children:x.jsx(Y0,{post:f},p)},p))}):t.user==="me"?r&&r.map((s,o,a)=>{var l,u;if(s.uid===(e==null?void 0:e.uid))return((l=s==null?void 0:s.posts)==null?void 0:l.length)===0?"":(u=s==null?void 0:s.posts)==null?void 0:u.map((f,p)=>x.jsx(O.Suspense,{fallback:x.jsx(wm,{}),children:x.jsx(Y0,{post:f},p)}))}):x.jsx(x.Fragment,{children:r&&r.map((s,o,a)=>{var l;if(s.username===i)return(l=s==null?void 0:s.posts)==null?void 0:l.map((u,f)=>x.jsx(O.Suspense,{fallback:x.jsx(wm,{}),children:x.jsx(Y0,{post:u},f)},f))})})})]})},Wse=O.lazy(()=>WU(()=>Promise.resolve().then(()=>Yae),void 0));function Kse(){const{userArray:t,setUserArray:e,getUsers:n,isFollowing:r,setIsFollowing:i,uzerFollowObj:s,setPostsLoaded:o,postsLoaded:a,transformCloudinaryURL:l}=Cr(),{currentUser:u}=Jn();return O.useEffect(()=>{u&&t&&t.map((f,p,y)=>{if(f.uid===(u==null?void 0:u.uid)){i(f.following);return}})},[u]),x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"flex flex-wrap flex-row justify-around gap-x-1.5 gap-y-1.5 m-0 p-0 duration-800 ",children:t&&(t==null?void 0:t.map((f,p,y)=>{var _,E;return x.jsx(x.Fragment,{children:(u==null?void 0:u.uid)!==f.uid&&x.jsx(O.Suspense,{fallback:x.jsx(wm,{}),children:f.username!==""&&x.jsx(Wse,{username:f.username,followers:(_=f.followers)==null?void 0:_.length,following:(E=f.following)==null?void 0:E.length,userBio:f.bio,userPic:l(f.profilePictureURL),userUID:f.uid,isFollowing:r},p)})})}))}),a&&x.jsxs(x.Fragment,{children:[x.jsx("hr",{className:"  my-8  h-0.5 bg-slate-400 w-3/4 mx-auto"}),x.jsx(hd,{user:"all"})]})]})}var GF={exports:{}},X0,RP;function QF(){if(RP)return X0;RP=1;var t=typeof $i=="object"&&$i&&$i.Object===Object&&$i;return X0=t,X0}var J0,CP;function ks(){if(CP)return J0;CP=1;var t=QF(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return J0=n,J0}var Z0,AP;function Nh(){if(AP)return Z0;AP=1;var t=ks(),e=t.Symbol;return Z0=e,Z0}var e_,PP;function Gse(){if(PP)return e_;PP=1;var t=Nh(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function s(o){var a=n.call(o,i),l=o[i];try{o[i]=void 0;var u=!0}catch{}var f=r.call(o);return u&&(a?o[i]=l:delete o[i]),f}return e_=s,e_}var t_,kP;function Qse(){if(kP)return t_;kP=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return t_=n,t_}var n_,OP;function Wl(){if(OP)return n_;OP=1;var t=Nh(),e=Gse(),n=Qse(),r="[object Null]",i="[object Undefined]",s=t?t.toStringTag:void 0;function o(a){return a==null?a===void 0?i:r:s&&s in Object(a)?e(a):n(a)}return n_=o,n_}var r_,NP;function So(){if(NP)return r_;NP=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return r_=t,r_}var i_,DP;function Dh(){if(DP)return i_;DP=1;var t=Wl(),e=So(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(a){if(!e(a))return!1;var l=t(a);return l==r||l==i||l==n||l==s}return i_=o,i_}var s_,LP;function Yse(){if(LP)return s_;LP=1;var t=ks(),e=t["__core-js_shared__"];return s_=e,s_}var o_,MP;function Xse(){if(MP)return o_;MP=1;var t=Yse(),e=function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!e&&e in r}return o_=n,o_}var a_,FP;function YF(){if(FP)return a_;FP=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return a_=n,a_}var l_,jP;function Jse(){if(jP)return l_;jP=1;var t=Dh(),e=Xse(),n=So(),r=YF(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,l=o.toString,u=a.hasOwnProperty,f=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(y){if(!n(y)||e(y))return!1;var _=t(y)?f:s;return _.test(r(y))}return l_=p,l_}var u_,VP;function Zse(){if(VP)return u_;VP=1;function t(e,n){return e==null?void 0:e[n]}return u_=t,u_}var c_,UP;function Kl(){if(UP)return c_;UP=1;var t=Jse(),e=Zse();function n(r,i){var s=e(r,i);return t(s)?s:void 0}return c_=n,c_}var f_,BP;function XF(){if(BP)return f_;BP=1;var t=Kl(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return f_=e,f_}var d_,$P;function oI(){if($P)return d_;$P=1;var t=XF();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return d_=e,d_}var h_,zP;function tv(){if(zP)return h_;zP=1;function t(e,n){return e===n||e!==e&&n!==n}return h_=t,h_}var p_,HP;function aI(){if(HP)return p_;HP=1;var t=oI(),e=tv(),n=Object.prototype,r=n.hasOwnProperty;function i(s,o,a){var l=s[o];(!(r.call(s,o)&&e(l,a))||a===void 0&&!(o in s))&&t(s,o,a)}return p_=i,p_}var m_,qP;function Qc(){if(qP)return m_;qP=1;var t=aI(),e=oI();function n(r,i,s,o){var a=!s;s||(s={});for(var l=-1,u=i.length;++l<u;){var f=i[l],p=o?o(s[f],r[f],f,s,r):void 0;p===void 0&&(p=r[f]),a?e(s,f,p):t(s,f,p)}return s}return m_=n,m_}var g_,WP;function lI(){if(WP)return g_;WP=1;function t(e){return e}return g_=t,g_}var y_,KP;function eoe(){if(KP)return y_;KP=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return y_=t,y_}var v_,GP;function toe(){if(GP)return v_;GP=1;var t=eoe(),e=Math.max;function n(r,i,s){return i=e(i===void 0?r.length-1:i,0),function(){for(var o=arguments,a=-1,l=e(o.length-i,0),u=Array(l);++a<l;)u[a]=o[i+a];a=-1;for(var f=Array(i+1);++a<i;)f[a]=o[a];return f[i]=s(u),t(r,this,f)}}return v_=n,v_}var __,QP;function noe(){if(QP)return __;QP=1;function t(e){return function(){return e}}return __=t,__}var w_,YP;function roe(){if(YP)return w_;YP=1;var t=noe(),e=XF(),n=lI(),r=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(s),writable:!0})}:n;return w_=r,w_}var E_,XP;function ioe(){if(XP)return E_;XP=1;var t=800,e=16,n=Date.now;function r(i){var s=0,o=0;return function(){var a=n(),l=e-(a-o);if(o=a,l>0){if(++s>=t)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return E_=r,E_}var b_,JP;function soe(){if(JP)return b_;JP=1;var t=roe(),e=ioe(),n=e(t);return b_=n,b_}var T_,ZP;function JF(){if(ZP)return T_;ZP=1;var t=lI(),e=toe(),n=soe();function r(i,s){return n(e(i,s,t),i+"")}return T_=r,T_}var S_,ek;function ZF(){if(ek)return S_;ek=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return S_=e,S_}var x_,tk;function Yc(){if(tk)return x_;tk=1;var t=Dh(),e=ZF();function n(r){return r!=null&&e(r.length)&&!t(r)}return x_=n,x_}var I_,nk;function ej(){if(nk)return I_;nk=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??t,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return I_=n,I_}var R_,rk;function ooe(){if(rk)return R_;rk=1;var t=tv(),e=Yc(),n=ej(),r=So();function i(s,o,a){if(!r(a))return!1;var l=typeof o;return(l=="number"?e(a)&&n(o,a.length):l=="string"&&o in a)?t(a[o],s):!1}return R_=i,R_}var C_,ik;function tj(){if(ik)return C_;ik=1;var t=JF(),e=ooe();function n(r){return t(function(i,s){var o=-1,a=s.length,l=a>1?s[a-1]:void 0,u=a>2?s[2]:void 0;for(l=r.length>3&&typeof l=="function"?(a--,l):void 0,u&&e(s[0],s[1],u)&&(l=a<3?void 0:l,a=1),i=Object(i);++o<a;){var f=s[o];f&&r(i,f,o,l)}return i})}return C_=n,C_}var A_,sk;function nv(){if(sk)return A_;sk=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return A_=e,A_}var P_,ok;function aoe(){if(ok)return P_;ok=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return P_=t,P_}var k_,ak;function Os(){if(ak)return k_;ak=1;function t(e){return e!=null&&typeof e=="object"}return k_=t,k_}var O_,lk;function loe(){if(lk)return O_;lk=1;var t=Wl(),e=Os(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return O_=r,O_}var N_,uk;function uI(){if(uk)return N_;uk=1;var t=loe(),e=Os(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=t(function(){return arguments}())?t:function(o){return e(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return N_=s,N_}var D_,ck;function La(){if(ck)return D_;ck=1;var t=Array.isArray;return D_=t,D_}var Bf={exports:{}},L_,fk;function uoe(){if(fk)return L_;fk=1;function t(){return!1}return L_=t,L_}Bf.exports;var dk;function cI(){return dk||(dk=1,function(t,e){var n=ks(),r=uoe(),i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||r;t.exports=u}(Bf,Bf.exports)),Bf.exports}var M_,hk;function coe(){if(hk)return M_;hk=1;var t=Wl(),e=ZF(),n=Os(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",a="[object Error]",l="[object Function]",u="[object Map]",f="[object Number]",p="[object Object]",y="[object RegExp]",_="[object Set]",E="[object String]",S="[object WeakMap]",I="[object ArrayBuffer]",R="[object DataView]",w="[object Float32Array]",v="[object Float64Array]",C="[object Int8Array]",k="[object Int16Array]",B="[object Int32Array]",D="[object Uint8Array]",T="[object Uint8ClampedArray]",N="[object Uint16Array]",L="[object Uint32Array]",V={};V[w]=V[v]=V[C]=V[k]=V[B]=V[D]=V[T]=V[N]=V[L]=!0,V[r]=V[i]=V[I]=V[s]=V[R]=V[o]=V[a]=V[l]=V[u]=V[f]=V[p]=V[y]=V[_]=V[E]=V[S]=!1;function j(M){return n(M)&&e(M.length)&&!!V[t(M)]}return M_=j,M_}var F_,pk;function rv(){if(pk)return F_;pk=1;function t(e){return function(n){return e(n)}}return F_=t,F_}var $f={exports:{}};$f.exports;var mk;function fI(){return mk||(mk=1,function(t,e){var n=QF(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s&&n.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a}($f,$f.exports)),$f.exports}var j_,gk;function nj(){if(gk)return j_;gk=1;var t=coe(),e=rv(),n=fI(),r=n&&n.isTypedArray,i=r?e(r):t;return j_=i,j_}var V_,yk;function rj(){if(yk)return V_;yk=1;var t=aoe(),e=uI(),n=La(),r=cI(),i=ej(),s=nj(),o=Object.prototype,a=o.hasOwnProperty;function l(u,f){var p=n(u),y=!p&&e(u),_=!p&&!y&&r(u),E=!p&&!y&&!_&&s(u),S=p||y||_||E,I=S?t(u.length,String):[],R=I.length;for(var w in u)(f||a.call(u,w))&&!(S&&(w=="length"||_&&(w=="offset"||w=="parent")||E&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||i(w,R)))&&I.push(w);return I}return V_=l,V_}var U_,vk;function ij(){if(vk)return U_;vk=1;function t(e,n){return function(r){return e(n(r))}}return U_=t,U_}var B_,_k;function foe(){if(_k)return B_;_k=1;var t=ij(),e=t(Object.keys,Object);return B_=e,B_}var $_,wk;function doe(){if(wk)return $_;wk=1;var t=nv(),e=foe(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!t(s))return e(s);var o=[];for(var a in Object(s))r.call(s,a)&&a!="constructor"&&o.push(a);return o}return $_=i,$_}var z_,Ek;function Xc(){if(Ek)return z_;Ek=1;var t=rj(),e=doe(),n=Yc();function r(i){return n(i)?t(i):e(i)}return z_=r,z_}var H_,bk;function hoe(){if(bk)return H_;bk=1;var t=aI(),e=Qc(),n=tj(),r=Yc(),i=nv(),s=Xc(),o=Object.prototype,a=o.hasOwnProperty,l=n(function(u,f){if(i(f)||r(f)){e(f,s(f),u);return}for(var p in f)a.call(f,p)&&t(u,p,f[p])});return H_=l,H_}var q_,Tk;function poe(){if(Tk)return q_;Tk=1;function t(){this.__data__=[],this.size=0}return q_=t,q_}var W_,Sk;function iv(){if(Sk)return W_;Sk=1;var t=tv();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return W_=e,W_}var K_,xk;function moe(){if(xk)return K_;xk=1;var t=iv(),e=Array.prototype,n=e.splice;function r(i){var s=this.__data__,o=t(s,i);if(o<0)return!1;var a=s.length-1;return o==a?s.pop():n.call(s,o,1),--this.size,!0}return K_=r,K_}var G_,Ik;function goe(){if(Ik)return G_;Ik=1;var t=iv();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return G_=e,G_}var Q_,Rk;function yoe(){if(Rk)return Q_;Rk=1;var t=iv();function e(n){return t(this.__data__,n)>-1}return Q_=e,Q_}var Y_,Ck;function voe(){if(Ck)return Y_;Ck=1;var t=iv();function e(n,r){var i=this.__data__,s=t(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return Y_=e,Y_}var X_,Ak;function sv(){if(Ak)return X_;Ak=1;var t=poe(),e=moe(),n=goe(),r=yoe(),i=voe();function s(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,X_=s,X_}var J_,Pk;function _oe(){if(Pk)return J_;Pk=1;var t=sv();function e(){this.__data__=new t,this.size=0}return J_=e,J_}var Z_,kk;function woe(){if(kk)return Z_;kk=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return Z_=t,Z_}var ew,Ok;function Eoe(){if(Ok)return ew;Ok=1;function t(e){return this.__data__.get(e)}return ew=t,ew}var tw,Nk;function boe(){if(Nk)return tw;Nk=1;function t(e){return this.__data__.has(e)}return tw=t,tw}var nw,Dk;function dI(){if(Dk)return nw;Dk=1;var t=Kl(),e=ks(),n=t(e,"Map");return nw=n,nw}var rw,Lk;function ov(){if(Lk)return rw;Lk=1;var t=Kl(),e=t(Object,"create");return rw=e,rw}var iw,Mk;function Toe(){if(Mk)return iw;Mk=1;var t=ov();function e(){this.__data__=t?t(null):{},this.size=0}return iw=e,iw}var sw,Fk;function Soe(){if(Fk)return sw;Fk=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return sw=t,sw}var ow,jk;function xoe(){if(jk)return ow;jk=1;var t=ov(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var o=this.__data__;if(t){var a=o[s];return a===e?void 0:a}return r.call(o,s)?o[s]:void 0}return ow=i,ow}var aw,Vk;function Ioe(){if(Vk)return aw;Vk=1;var t=ov(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var s=this.__data__;return t?s[i]!==void 0:n.call(s,i)}return aw=r,aw}var lw,Uk;function Roe(){if(Uk)return lw;Uk=1;var t=ov(),e="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=t&&i===void 0?e:i,this}return lw=n,lw}var uw,Bk;function Coe(){if(Bk)return uw;Bk=1;var t=Toe(),e=Soe(),n=xoe(),r=Ioe(),i=Roe();function s(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,uw=s,uw}var cw,$k;function Aoe(){if($k)return cw;$k=1;var t=Coe(),e=sv(),n=dI();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return cw=r,cw}var fw,zk;function Poe(){if(zk)return fw;zk=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return fw=t,fw}var dw,Hk;function av(){if(Hk)return dw;Hk=1;var t=Poe();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return dw=e,dw}var hw,qk;function koe(){if(qk)return hw;qk=1;var t=av();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return hw=e,hw}var pw,Wk;function Ooe(){if(Wk)return pw;Wk=1;var t=av();function e(n){return t(this,n).get(n)}return pw=e,pw}var mw,Kk;function Noe(){if(Kk)return mw;Kk=1;var t=av();function e(n){return t(this,n).has(n)}return mw=e,mw}var gw,Gk;function Doe(){if(Gk)return gw;Gk=1;var t=av();function e(n,r){var i=t(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return gw=e,gw}var yw,Qk;function sj(){if(Qk)return yw;Qk=1;var t=Aoe(),e=koe(),n=Ooe(),r=Noe(),i=Doe();function s(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,yw=s,yw}var vw,Yk;function Loe(){if(Yk)return vw;Yk=1;var t=sv(),e=dI(),n=sj(),r=200;function i(s,o){var a=this.__data__;if(a instanceof t){var l=a.__data__;if(!e||l.length<r-1)return l.push([s,o]),this.size=++a.size,this;a=this.__data__=new n(l)}return a.set(s,o),this.size=a.size,this}return vw=i,vw}var _w,Xk;function oj(){if(Xk)return _w;Xk=1;var t=sv(),e=_oe(),n=woe(),r=Eoe(),i=boe(),s=Loe();function o(a){var l=this.__data__=new t(a);this.size=l.size}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=i,o.prototype.set=s,_w=o,_w}var ww,Jk;function Moe(){if(Jk)return ww;Jk=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i&&n(e[r],r,e)!==!1;);return e}return ww=t,ww}var Ew,Zk;function Foe(){if(Zk)return Ew;Zk=1;var t=Qc(),e=Xc();function n(r,i){return r&&t(i,e(i),r)}return Ew=n,Ew}var bw,eO;function joe(){if(eO)return bw;eO=1;function t(e){var n=[];if(e!=null)for(var r in Object(e))n.push(r);return n}return bw=t,bw}var Tw,tO;function Voe(){if(tO)return Tw;tO=1;var t=So(),e=nv(),n=joe(),r=Object.prototype,i=r.hasOwnProperty;function s(o){if(!t(o))return n(o);var a=e(o),l=[];for(var u in o)u=="constructor"&&(a||!i.call(o,u))||l.push(u);return l}return Tw=s,Tw}var Sw,nO;function Lh(){if(nO)return Sw;nO=1;var t=rj(),e=Voe(),n=Yc();function r(i){return n(i)?t(i,!0):e(i)}return Sw=r,Sw}var xw,rO;function Uoe(){if(rO)return xw;rO=1;var t=Qc(),e=Lh();function n(r,i){return r&&t(i,e(i),r)}return xw=n,xw}var zf={exports:{}};zf.exports;var iO;function aj(){return iO||(iO=1,function(t,e){var n=ks(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s?n.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(u,f){if(f)return u.slice();var p=u.length,y=a?a(p):new u.constructor(p);return u.copy(y),y}t.exports=l}(zf,zf.exports)),zf.exports}var Iw,sO;function lj(){if(sO)return Iw;sO=1;function t(e,n){var r=-1,i=e.length;for(n||(n=Array(i));++r<i;)n[r]=e[r];return n}return Iw=t,Iw}var Rw,oO;function uj(){if(oO)return Rw;oO=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,s=0,o=[];++r<i;){var a=e[r];n(a,r,e)&&(o[s++]=a)}return o}return Rw=t,Rw}var Cw,aO;function cj(){if(aO)return Cw;aO=1;function t(){return[]}return Cw=t,Cw}var Aw,lO;function hI(){if(lO)return Aw;lO=1;var t=uj(),e=cj(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(a){return r.call(o,a)}))}:e;return Aw=s,Aw}var Pw,uO;function Boe(){if(uO)return Pw;uO=1;var t=Qc(),e=hI();function n(r,i){return t(r,e(r),i)}return Pw=n,Pw}var kw,cO;function pI(){if(cO)return kw;cO=1;function t(e,n){for(var r=-1,i=n.length,s=e.length;++r<i;)e[s+r]=n[r];return e}return kw=t,kw}var Ow,fO;function mI(){if(fO)return Ow;fO=1;var t=ij(),e=t(Object.getPrototypeOf,Object);return Ow=e,Ow}var Nw,dO;function fj(){if(dO)return Nw;dO=1;var t=pI(),e=mI(),n=hI(),r=cj(),i=Object.getOwnPropertySymbols,s=i?function(o){for(var a=[];o;)t(a,n(o)),o=e(o);return a}:r;return Nw=s,Nw}var Dw,hO;function $oe(){if(hO)return Dw;hO=1;var t=Qc(),e=fj();function n(r,i){return t(r,e(r),i)}return Dw=n,Dw}var Lw,pO;function dj(){if(pO)return Lw;pO=1;var t=pI(),e=La();function n(r,i,s){var o=i(r);return e(r)?o:t(o,s(r))}return Lw=n,Lw}var Mw,mO;function zoe(){if(mO)return Mw;mO=1;var t=dj(),e=hI(),n=Xc();function r(i){return t(i,n,e)}return Mw=r,Mw}var Fw,gO;function Hoe(){if(gO)return Fw;gO=1;var t=dj(),e=fj(),n=Lh();function r(i){return t(i,n,e)}return Fw=r,Fw}var jw,yO;function qoe(){if(yO)return jw;yO=1;var t=Kl(),e=ks(),n=t(e,"DataView");return jw=n,jw}var Vw,vO;function Woe(){if(vO)return Vw;vO=1;var t=Kl(),e=ks(),n=t(e,"Promise");return Vw=n,Vw}var Uw,_O;function Koe(){if(_O)return Uw;_O=1;var t=Kl(),e=ks(),n=t(e,"Set");return Uw=n,Uw}var Bw,wO;function Goe(){if(wO)return Bw;wO=1;var t=Kl(),e=ks(),n=t(e,"WeakMap");return Bw=n,Bw}var $w,EO;function gI(){if(EO)return $w;EO=1;var t=qoe(),e=dI(),n=Woe(),r=Koe(),i=Goe(),s=Wl(),o=YF(),a="[object Map]",l="[object Object]",u="[object Promise]",f="[object Set]",p="[object WeakMap]",y="[object DataView]",_=o(t),E=o(e),S=o(n),I=o(r),R=o(i),w=s;return(t&&w(new t(new ArrayBuffer(1)))!=y||e&&w(new e)!=a||n&&w(n.resolve())!=u||r&&w(new r)!=f||i&&w(new i)!=p)&&(w=function(v){var C=s(v),k=C==l?v.constructor:void 0,B=k?o(k):"";if(B)switch(B){case _:return y;case E:return a;case S:return u;case I:return f;case R:return p}return C}),$w=w,$w}var zw,bO;function Qoe(){if(bO)return zw;bO=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return zw=n,zw}var Hw,TO;function Yoe(){if(TO)return Hw;TO=1;var t=ks(),e=t.Uint8Array;return Hw=e,Hw}var qw,SO;function yI(){if(SO)return qw;SO=1;var t=Yoe();function e(n){var r=new n.constructor(n.byteLength);return new t(r).set(new t(n)),r}return qw=e,qw}var Ww,xO;function Xoe(){if(xO)return Ww;xO=1;var t=yI();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Ww=e,Ww}var Kw,IO;function Joe(){if(IO)return Kw;IO=1;var t=/\w*$/;function e(n){var r=new n.constructor(n.source,t.exec(n));return r.lastIndex=n.lastIndex,r}return Kw=e,Kw}var Gw,RO;function Zoe(){if(RO)return Gw;RO=1;var t=Nh(),e=t?t.prototype:void 0,n=e?e.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Gw=r,Gw}var Qw,CO;function hj(){if(CO)return Qw;CO=1;var t=yI();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return Qw=e,Qw}var Yw,AO;function eae(){if(AO)return Yw;AO=1;var t=yI(),e=Xoe(),n=Joe(),r=Zoe(),i=hj(),s="[object Boolean]",o="[object Date]",a="[object Map]",l="[object Number]",u="[object RegExp]",f="[object Set]",p="[object String]",y="[object Symbol]",_="[object ArrayBuffer]",E="[object DataView]",S="[object Float32Array]",I="[object Float64Array]",R="[object Int8Array]",w="[object Int16Array]",v="[object Int32Array]",C="[object Uint8Array]",k="[object Uint8ClampedArray]",B="[object Uint16Array]",D="[object Uint32Array]";function T(N,L,V){var j=N.constructor;switch(L){case _:return t(N);case s:case o:return new j(+N);case E:return e(N,V);case S:case I:case R:case w:case v:case C:case k:case B:case D:return i(N,V);case a:return new j;case l:case p:return new j(N);case u:return n(N);case f:return new j;case y:return r(N)}}return Yw=T,Yw}var Xw,PO;function tae(){if(PO)return Xw;PO=1;var t=So(),e=Object.create,n=function(){function r(){}return function(i){if(!t(i))return{};if(e)return e(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}}();return Xw=n,Xw}var Jw,kO;function pj(){if(kO)return Jw;kO=1;var t=tae(),e=mI(),n=nv();function r(i){return typeof i.constructor=="function"&&!n(i)?t(e(i)):{}}return Jw=r,Jw}var Zw,OO;function nae(){if(OO)return Zw;OO=1;var t=gI(),e=Os(),n="[object Map]";function r(i){return e(i)&&t(i)==n}return Zw=r,Zw}var e1,NO;function rae(){if(NO)return e1;NO=1;var t=nae(),e=rv(),n=fI(),r=n&&n.isMap,i=r?e(r):t;return e1=i,e1}var t1,DO;function iae(){if(DO)return t1;DO=1;var t=gI(),e=Os(),n="[object Set]";function r(i){return e(i)&&t(i)==n}return t1=r,t1}var n1,LO;function sae(){if(LO)return n1;LO=1;var t=iae(),e=rv(),n=fI(),r=n&&n.isSet,i=r?e(r):t;return n1=i,n1}var r1,MO;function oae(){if(MO)return r1;MO=1;var t=oj(),e=Moe(),n=aI(),r=Foe(),i=Uoe(),s=aj(),o=lj(),a=Boe(),l=$oe(),u=zoe(),f=Hoe(),p=gI(),y=Qoe(),_=eae(),E=pj(),S=La(),I=cI(),R=rae(),w=So(),v=sae(),C=Xc(),k=Lh(),B=1,D=2,T=4,N="[object Arguments]",L="[object Array]",V="[object Boolean]",j="[object Date]",M="[object Error]",le="[object Function]",me="[object GeneratorFunction]",pe="[object Map]",X="[object Number]",G="[object Object]",Y="[object RegExp]",ce="[object Set]",ee="[object String]",$="[object Symbol]",K="[object WeakMap]",te="[object ArrayBuffer]",Ee="[object DataView]",Te="[object Float32Array]",W="[object Float64Array]",ue="[object Int8Array]",Se="[object Int16Array]",be="[object Int32Array]",xe="[object Uint8Array]",Ke="[object Uint8ClampedArray]",Et="[object Uint16Array]",He="[object Uint32Array]",We={};We[N]=We[L]=We[te]=We[Ee]=We[V]=We[j]=We[Te]=We[W]=We[ue]=We[Se]=We[be]=We[pe]=We[X]=We[G]=We[Y]=We[ce]=We[ee]=We[$]=We[xe]=We[Ke]=We[Et]=We[He]=!0,We[M]=We[le]=We[K]=!1;function Qt(st,z,Z,ae,ge,_e){var fe,ke=z&B,Be=z&D,Qe=z&T;if(Z&&(fe=ge?Z(st,ae,ge,_e):Z(st)),fe!==void 0)return fe;if(!w(st))return st;var qe=S(st);if(qe){if(fe=y(st),!ke)return o(st,fe)}else{var Kt=p(st),Zn=Kt==le||Kt==me;if(I(st))return s(st,ke);if(Kt==G||Kt==N||Zn&&!ge){if(fe=Be||Zn?{}:E(st),!ke)return Be?l(st,i(fe,st)):a(st,r(fe,st))}else{if(!We[Kt])return ge?st:{};fe=_(st,Kt,ke)}}_e||(_e=new t);var pn=_e.get(st);if(pn)return pn;_e.set(st,fe),v(st)?st.forEach(function(rn){fe.add(Qt(rn,z,Z,rn,st,_e))}):R(st)&&st.forEach(function(rn,Tn){fe.set(Tn,Qt(rn,z,Z,Tn,st,_e))});var nt=Qe?Be?f:u:Be?k:C,yr=qe?void 0:nt(st);return e(yr||st,function(rn,Tn){yr&&(Tn=rn,rn=st[Tn]),n(fe,Tn,Qt(rn,z,Z,Tn,st,_e))}),fe}return r1=Qt,r1}var i1,FO;function aae(){if(FO)return i1;FO=1;var t=oae(),e=1,n=4;function r(i){return t(i,e|n)}return i1=r,i1}var s1,jO;function lae(){if(jO)return s1;jO=1;function t(e){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var o=e[n];o&&(s[i++]=o)}return s}return s1=t,s1}var o1,VO;function uae(){if(VO)return o1;VO=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return o1=e,o1}var a1,UO;function cae(){if(UO)return a1;UO=1;function t(e){return this.__data__.has(e)}return a1=t,a1}var l1,BO;function fae(){if(BO)return l1;BO=1;var t=sj(),e=uae(),n=cae();function r(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new t;++s<o;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,l1=r,l1}var u1,$O;function dae(){if($O)return u1;$O=1;function t(e,n,r,i){for(var s=e.length,o=r+(i?1:-1);i?o--:++o<s;)if(n(e[o],o,e))return o;return-1}return u1=t,u1}var c1,zO;function hae(){if(zO)return c1;zO=1;function t(e){return e!==e}return c1=t,c1}var f1,HO;function pae(){if(HO)return f1;HO=1;function t(e,n,r){for(var i=r-1,s=e.length;++i<s;)if(e[i]===n)return i;return-1}return f1=t,f1}var d1,qO;function lv(){if(qO)return d1;qO=1;var t=dae(),e=hae(),n=pae();function r(i,s,o){return s===s?n(i,s,o):t(i,e,o)}return d1=r,d1}var h1,WO;function mae(){if(WO)return h1;WO=1;var t=lv();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return h1=e,h1}var p1,KO;function gae(){if(KO)return p1;KO=1;function t(e,n,r){for(var i=-1,s=e==null?0:e.length;++i<s;)if(r(n,e[i]))return!0;return!1}return p1=t,p1}var m1,GO;function vI(){if(GO)return m1;GO=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,s=Array(i);++r<i;)s[r]=n(e[r],r,e);return s}return m1=t,m1}var g1,QO;function yae(){if(QO)return g1;QO=1;function t(e,n){return e.has(n)}return g1=t,g1}var y1,YO;function vae(){if(YO)return y1;YO=1;var t=fae(),e=mae(),n=gae(),r=vI(),i=rv(),s=yae(),o=200;function a(l,u,f,p){var y=-1,_=e,E=!0,S=l.length,I=[],R=u.length;if(!S)return I;f&&(u=r(u,i(f))),p?(_=n,E=!1):u.length>=o&&(_=s,E=!1,u=new t(u));e:for(;++y<S;){var w=l[y],v=f==null?w:f(w);if(w=p||w!==0?w:0,E&&v===v){for(var C=R;C--;)if(u[C]===v)continue e;I.push(w)}else _(u,v,p)||I.push(w)}return I}return y1=a,y1}var v1,XO;function _ae(){if(XO)return v1;XO=1;var t=Nh(),e=uI(),n=La(),r=t?t.isConcatSpreadable:void 0;function i(s){return n(s)||e(s)||!!(r&&s&&s[r])}return v1=i,v1}var _1,JO;function wae(){if(JO)return _1;JO=1;var t=pI(),e=_ae();function n(r,i,s,o,a){var l=-1,u=r.length;for(s||(s=e),a||(a=[]);++l<u;){var f=r[l];i>0&&s(f)?i>1?n(f,i-1,s,o,a):t(a,f):o||(a[a.length]=f)}return a}return _1=n,_1}var w1,ZO;function mj(){if(ZO)return w1;ZO=1;var t=Yc(),e=Os();function n(r){return e(r)&&t(r)}return w1=n,w1}var E1,eN;function Eae(){if(eN)return E1;eN=1;var t=vae(),e=wae(),n=JF(),r=mj(),i=n(function(s,o){return r(s)?t(s,e(o,1,r,!0)):[]});return E1=i,E1}var b1,tN;function bae(){if(tN)return b1;tN=1;var t=uj(),e=Dh();function n(r,i){return t(i,function(s){return e(r[s])})}return b1=n,b1}var T1,nN;function Tae(){if(nN)return T1;nN=1;var t=bae(),e=Xc();function n(r){return r==null?[]:t(r,e(r))}return T1=n,T1}var S1,rN;function gj(){if(rN)return S1;rN=1;var t=Wl(),e=La(),n=Os(),r="[object String]";function i(s){return typeof s=="string"||!e(s)&&n(s)&&t(s)==r}return S1=i,S1}var x1,iN;function Sae(){if(iN)return x1;iN=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return x1=e,x1}var I1,sN;function yj(){if(sN)return I1;sN=1;var t=Sae(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return I1=n,I1}var R1,oN;function vj(){if(oN)return R1;oN=1;var t=Wl(),e=Os(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return R1=r,R1}var C1,aN;function xae(){if(aN)return C1;aN=1;var t=yj(),e=So(),n=vj(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;function l(u){if(typeof u=="number")return u;if(n(u))return r;if(e(u)){var f=typeof u.valueOf=="function"?u.valueOf():u;u=e(f)?f+"":f}if(typeof u!="string")return u===0?u:+u;u=t(u);var p=s.test(u);return p||o.test(u)?a(u.slice(2),p?2:8):i.test(u)?r:+u}return C1=l,C1}var A1,lN;function Iae(){if(lN)return A1;lN=1;var t=xae(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var s=i<0?-1:1;return s*n}return i===i?i:0}return A1=r,A1}var P1,uN;function Rae(){if(uN)return P1;uN=1;var t=Iae();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return P1=e,P1}var k1,cN;function Cae(){if(cN)return k1;cN=1;var t=vI();function e(n,r){return t(r,function(i){return n[i]})}return k1=e,k1}var O1,fN;function Aae(){if(fN)return O1;fN=1;var t=Cae(),e=Xc();function n(r){return r==null?[]:t(r,e(r))}return O1=n,O1}var N1,dN;function Pae(){if(dN)return N1;dN=1;var t=lv(),e=Yc(),n=gj(),r=Rae(),i=Aae(),s=Math.max;function o(a,l,u,f){a=e(a)?a:i(a),u=u&&!f?r(u):0;var p=a.length;return u<0&&(u=s(p+u,0)),n(a)?u<=p&&a.indexOf(l,u)>-1:!!p&&t(a,l,u)>-1}return N1=o,N1}var D1,hN;function _I(){if(hN)return D1;hN=1;var t=Wl(),e=mI(),n=Os(),r="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,a=s.hasOwnProperty,l=o.call(Object);function u(f){if(!n(f)||t(f)!=r)return!1;var p=e(f);if(p===null)return!0;var y=a.call(p,"constructor")&&p.constructor;return typeof y=="function"&&y instanceof y&&o.call(y)==l}return D1=u,D1}var L1,pN;function kae(){if(pN)return L1;pN=1;var t=Os(),e=_I();function n(r){return t(r)&&r.nodeType===1&&!e(r)}return L1=n,L1}var M1,mN;function _j(){if(mN)return M1;mN=1;var t=oI(),e=tv();function n(r,i,s){(s!==void 0&&!e(r[i],s)||s===void 0&&!(i in r))&&t(r,i,s)}return M1=n,M1}var F1,gN;function Oae(){if(gN)return F1;gN=1;function t(e){return function(n,r,i){for(var s=-1,o=Object(n),a=i(n),l=a.length;l--;){var u=a[e?l:++s];if(r(o[u],u,o)===!1)break}return n}}return F1=t,F1}var j1,yN;function Nae(){if(yN)return j1;yN=1;var t=Oae(),e=t();return j1=e,j1}var V1,vN;function wj(){if(vN)return V1;vN=1;function t(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}return V1=t,V1}var U1,_N;function Dae(){if(_N)return U1;_N=1;var t=Qc(),e=Lh();function n(r){return t(r,e(r))}return U1=n,U1}var B1,wN;function Lae(){if(wN)return B1;wN=1;var t=_j(),e=aj(),n=hj(),r=lj(),i=pj(),s=uI(),o=La(),a=mj(),l=cI(),u=Dh(),f=So(),p=_I(),y=nj(),_=wj(),E=Dae();function S(I,R,w,v,C,k,B){var D=_(I,w),T=_(R,w),N=B.get(T);if(N){t(I,w,N);return}var L=k?k(D,T,w+"",I,R,B):void 0,V=L===void 0;if(V){var j=o(T),M=!j&&l(T),le=!j&&!M&&y(T);L=T,j||M||le?o(D)?L=D:a(D)?L=r(D):M?(V=!1,L=e(T,!0)):le?(V=!1,L=n(T,!0)):L=[]:p(T)||s(T)?(L=D,s(D)?L=E(D):(!f(D)||u(D))&&(L=i(T))):V=!1}V&&(B.set(T,L),C(L,T,v,k,B),B.delete(T)),t(I,w,L)}return B1=S,B1}var $1,EN;function Mae(){if(EN)return $1;EN=1;var t=oj(),e=_j(),n=Nae(),r=Lae(),i=So(),s=Lh(),o=wj();function a(l,u,f,p,y){l!==u&&n(u,function(_,E){if(y||(y=new t),i(_))r(l,u,E,f,a,p,y);else{var S=p?p(o(l,E),_,E+"",l,u,y):void 0;S===void 0&&(S=_),e(l,E,S)}},s)}return $1=a,$1}var z1,bN;function Fae(){if(bN)return z1;bN=1;var t=Mae(),e=tj(),n=e(function(r,i,s){t(r,i,s)});return z1=n,z1}var H1,TN;function Ej(){if(TN)return H1;TN=1;var t=Nh(),e=vI(),n=La(),r=vj(),i=1/0,s=t?t.prototype:void 0,o=s?s.toString:void 0;function a(l){if(typeof l=="string")return l;if(n(l))return e(l,a)+"";if(r(l))return o?o.call(l):"";var u=l+"";return u=="0"&&1/l==-i?"-0":u}return H1=a,H1}var q1,SN;function jae(){if(SN)return q1;SN=1;function t(e,n,r){var i=-1,s=e.length;n<0&&(n=-n>s?0:s+n),r=r>s?s:r,r<0&&(r+=s),s=n>r?0:r-n>>>0,n>>>=0;for(var o=Array(s);++i<s;)o[i]=e[i+n];return o}return q1=t,q1}var W1,xN;function Vae(){if(xN)return W1;xN=1;var t=jae();function e(n,r,i){var s=n.length;return i=i===void 0?s:i,!r&&i>=s?n:t(n,r,i)}return W1=e,W1}var K1,IN;function Uae(){if(IN)return K1;IN=1;var t=lv();function e(n,r){for(var i=n.length;i--&&t(r,n[i],0)>-1;);return i}return K1=e,K1}var G1,RN;function Bae(){if(RN)return G1;RN=1;var t=lv();function e(n,r){for(var i=-1,s=n.length;++i<s&&t(r,n[i],0)>-1;);return i}return G1=e,G1}var Q1,CN;function $ae(){if(CN)return Q1;CN=1;function t(e){return e.split("")}return Q1=t,Q1}var Y1,AN;function zae(){if(AN)return Y1;AN=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,s="\\ufe0e\\ufe0f",o="\\u200d",a=RegExp("["+o+t+i+s+"]");function l(u){return a.test(u)}return Y1=l,Y1}var X1,PN;function Hae(){if(PN)return X1;PN=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,s="\\ufe0e\\ufe0f",o="["+t+"]",a="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+a+"|"+l+")",f="[^"+t+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",_="\\u200d",E=u+"?",S="["+s+"]?",I="(?:"+_+"(?:"+[f,p,y].join("|")+")"+S+E+")*",R=S+E+I,w="(?:"+[f+a+"?",a,p,y,o].join("|")+")",v=RegExp(l+"(?="+l+")|"+w+R,"g");function C(k){return k.match(v)||[]}return X1=C,X1}var J1,kN;function qae(){if(kN)return J1;kN=1;var t=$ae(),e=zae(),n=Hae();function r(i){return e(i)?n(i):t(i)}return J1=r,J1}var Z1,ON;function Wae(){if(ON)return Z1;ON=1;var t=Ej();function e(n){return n==null?"":t(n)}return Z1=e,Z1}var eE,NN;function Kae(){if(NN)return eE;NN=1;var t=Ej(),e=yj(),n=Vae(),r=Uae(),i=Bae(),s=qae(),o=Wae();function a(l,u,f){if(l=o(l),l&&(f||u===void 0))return e(l);if(!l||!(u=t(u)))return l;var p=s(l),y=s(u),_=i(p,y),E=r(p,y)+1;return n(p,_,E).join("")}return eE=a,eE}(function(t,e){var n={};(function(i,s){t.exports=s(hoe(),aae(),lae(),Eae(),Tae(),lI(),Pae(),La(),kae(),Dh(),_I(),gj(),Fae(),Kae())})($i,function(r,i,s,o,a,l,u,f,p,y,_,E,S,I){return function(R){var w={};function v(C){if(w[C])return w[C].exports;var k=w[C]={i:C,l:!1,exports:{}};return R[C].call(k.exports,k,k.exports,v),k.l=!0,k.exports}return v.m=R,v.c=w,v.d=function(C,k,B){v.o(C,k)||Object.defineProperty(C,k,{enumerable:!0,get:B})},v.r=function(C){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})},v.t=function(C,k){if(k&1&&(C=v(C)),k&8||k&4&&typeof C=="object"&&C&&C.__esModule)return C;var B=Object.create(null);if(v.r(B),Object.defineProperty(B,"default",{enumerable:!0,value:C}),k&2&&typeof C!="string")for(var D in C)v.d(B,D,(function(T){return C[T]}).bind(null,D));return B},v.n=function(C){var k=C&&C.__esModule?function(){return C.default}:function(){return C};return v.d(k,"a",k),k},v.o=function(C,k){return Object.prototype.hasOwnProperty.call(C,k)},v.p="",v(v.s="./src/namespace/cloudinary-core.js")}({"./src/namespace/cloudinary-core.js":function(R,w,v){v.r(w),v.d(w,"ClientHintsMetaTag",function(){return UI}),v.d(w,"Cloudinary",function(){return GI}),v.d(w,"Condition",function(){return Nt}),v.d(w,"Configuration",function(){return Ka}),v.d(w,"crc32",function(){return T}),v.d(w,"Expression",function(){return ln}),v.d(w,"FetchLayer",function(){return np}),v.d(w,"HtmlTag",function(){return Oo}),v.d(w,"ImageTag",function(){return ap}),v.d(w,"Layer",function(){return us}),v.d(w,"PictureTag",function(){return Av}),v.d(w,"SubtitlesLayer",function(){return cs}),v.d(w,"TextLayer",function(){return d}),v.d(w,"Transformation",function(){return Oi}),v.d(w,"utf8_encode",function(){return B}),v.d(w,"Util",function(){return k}),v.d(w,"VideoTag",function(){return kv});var C={};v.r(C),v.d(C,"VERSION",function(){return xo}),v.d(C,"CF_SHARED_CDN",function(){return Ql}),v.d(C,"OLD_AKAMAI_SHARED_CDN",function(){return Io}),v.d(C,"AKAMAI_SHARED_CDN",function(){return qr}),v.d(C,"SHARED_CDN",function(){return Ns}),v.d(C,"DEFAULT_TIMEOUT_MS",function(){return Zi}),v.d(C,"DEFAULT_POSTER_OPTIONS",function(){return er}),v.d(C,"DEFAULT_VIDEO_SOURCE_TYPES",function(){return Ds}),v.d(C,"SEO_TYPES",function(){return es}),v.d(C,"DEFAULT_IMAGE_PARAMS",function(){return Ls}),v.d(C,"DEFAULT_VIDEO_PARAMS",function(){return ts}),v.d(C,"DEFAULT_VIDEO_SOURCES",function(){return Fa}),v.d(C,"DEFAULT_EXTERNAL_LIBRARIES",function(){return Yt}),v.d(C,"PLACEHOLDER_IMAGE_MODES",function(){return Ii}),v.d(C,"ACCESSIBILITY_MODES",function(){return ai}),v.d(C,"URL_KEYS",function(){return Ri});var k={};v.r(k),v.d(k,"getSDKAnalyticsSignature",function(){return K}),v.d(k,"getAnalyticsOptions",function(){return Ee}),v.d(k,"assign",function(){return W.a}),v.d(k,"cloneDeep",function(){return Se.a}),v.d(k,"compact",function(){return xe.a}),v.d(k,"difference",function(){return Et.a}),v.d(k,"functions",function(){return We.a}),v.d(k,"identity",function(){return st.a}),v.d(k,"includes",function(){return Z.a}),v.d(k,"isArray",function(){return ge.a}),v.d(k,"isPlainObject",function(){return fe.a}),v.d(k,"isString",function(){return Be.a}),v.d(k,"merge",function(){return qe.a}),v.d(k,"contains",function(){return Z.a}),v.d(k,"isIntersectionObserverSupported",function(){return Pn}),v.d(k,"isNativeLazyLoadSupported",function(){return Ma}),v.d(k,"detectIntersection",function(){return Gl}),v.d(k,"omit",function(){return H}),v.d(k,"allStrings",function(){return Q}),v.d(k,"without",function(){return re}),v.d(k,"isNumberLike",function(){return de}),v.d(k,"smartEscape",function(){return Ce}),v.d(k,"defaults",function(){return Oe}),v.d(k,"objectProto",function(){return ze}),v.d(k,"objToString",function(){return Ie}),v.d(k,"isObject",function(){return je}),v.d(k,"funcTag",function(){return Le}),v.d(k,"reWords",function(){return ot}),v.d(k,"camelCase",function(){return at}),v.d(k,"snakeCase",function(){return ct}),v.d(k,"convertKeys",function(){return it}),v.d(k,"withCamelCaseKeys",function(){return Xt}),v.d(k,"withSnakeCaseKeys",function(){return Ot}),v.d(k,"base64Encode",function(){return Ci}),v.d(k,"base64EncodeURL",function(){return tr}),v.d(k,"extractUrlParams",function(){return nr}),v.d(k,"patchFetchFormat",function(){return Sn}),v.d(k,"optionConsume",function(){return Ai}),v.d(k,"isEmpty",function(){return Je}),v.d(k,"isAndroid",function(){return ns}),v.d(k,"isEdge",function(){return Pi}),v.d(k,"isChrome",function(){return Ye}),v.d(k,"isSafari",function(){return Rt}),v.d(k,"isElement",function(){return Zn.a}),v.d(k,"isFunction",function(){return nt.a}),v.d(k,"trim",function(){return rn.a}),v.d(k,"getData",function(){return mt}),v.d(k,"setData",function(){return rr}),v.d(k,"getAttribute",function(){return Yl}),v.d(k,"setAttribute",function(){return rs}),v.d(k,"removeAttribute",function(){return ja}),v.d(k,"setAttributes",function(){return uv}),v.d(k,"hasClass",function(){return is}),v.d(k,"addClass",function(){return ui}),v.d(k,"getStyles",function(){return Co}),v.d(k,"cssExpand",function(){return Xl}),v.d(k,"domStyle",function(){return Jc}),v.d(k,"curCSS",function(){return Ct}),v.d(k,"cssValue",function(){return ci}),v.d(k,"augmentWidthOrHeight",function(){return Ao}),v.d(k,"getWidthOrHeight",function(){return Zc}),v.d(k,"width",function(){return Fh});var B=function(c){var m,g,P,F,q,se,ne,we;if(c===null||typeof c>"u")return"";for(se=c+"",we="",q=void 0,P=void 0,ne=0,q=P=0,ne=se.length,F=0;F<ne;)m=se.charCodeAt(F),g=null,m<128?P++:m>127&&m<2048?g=String.fromCharCode(m>>6|192,m&63|128):g=String.fromCharCode(m>>12|224,m>>6&63|128,m&63|128),g!==null&&(P>q&&(we+=se.slice(q,P)),we+=g,q=P=F+1),F++;return P>q&&(we+=se.slice(q,ne)),we};function D(h){var c,m,g,P,F,q;for(h=B(h),P="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D",c=0,F=0,q=0,c=c^-1,m=0,g=h.length;m<g;)q=(c^h.charCodeAt(m))&255,F="0x"+P.substr(q*9,8),c=c>>>8^F,m++;return c=c^-1,c<0&&(c+=4294967296),c}var T=D;function N(h,c,m){return c=c>>0,m=String(typeof m<"u"?m:" "),h.length>c?String(h):(c=c-h.length,c>m.length&&(m+=L(m,c/m.length)),m.slice(0,c)+String(h))}function L(h,c){for(var m="";c>0;)m+=h,c--;return m}function V(h){return me(h)||le(h)||M(h)||j()}function j(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M(h,c){return pe(h,c)}function le(h){if(typeof Symbol<"u"&&h[Symbol.iterator]!=null||h["@@iterator"]!=null)return Array.from(h)}function me(h){if(Array.isArray(h))return pe(h)}function pe(h,c){(c==null||c>h.length)&&(c=h.length);for(var m=0,g=new Array(c);m<c;m++)g[m]=h[m];return g}var X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",G=0,Y={};V(X).forEach(function(h){var c=G.toString(2);c=N(c,6,"0"),Y[c]=h,G++});var ce=Y;function ee(h){if(h.split(".").length<2)throw new Error("invalid semVer, must have at least two segments");return h.split(".").reverse().map(function(c){return N(c,2,"0")}).join(".")}function $(h){var c="",m=h.split(".").length,g=m*6,P=ee(h),F=parseInt(P.split(".").join("")),q=F.toString(2);if(q=N(q,g,"0"),q.length%6!==0)throw"Version must be smaller than 43.21.26)";return q.match(/.{1,6}/g).forEach(function(se){c+=ce[se]}),c}function K(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};try{var c=te(h.techVersion),m=$(h.sdkSemver),g=$(c),P=h.feature,F=h.sdkCode,q="A";return"".concat(q).concat(F).concat(m).concat(g).concat(P)}catch{return"E"}}function te(h){var c=h.split(".");return"".concat(c[0],".").concat(c[1])}function Ee(h){var c={sdkSemver:h.sdkSemver,techVersion:h.techVersion,sdkCode:h.sdkCode,feature:"0"};return h.urlAnalytics?(h.accessibility&&(c.feature="D"),h.loading==="lazy"&&(c.feature="C"),h.responsive&&(c.feature="A"),h.placeholder&&(c.feature="B"),c):{}}var Te=v("lodash/assign"),W=v.n(Te),ue=v("lodash/cloneDeep"),Se=v.n(ue),be=v("lodash/compact"),xe=v.n(be),Ke=v("lodash/difference"),Et=v.n(Ke),He=v("lodash/functions"),We=v.n(He),Qt=v("lodash/identity"),st=v.n(Qt),z=v("lodash/includes"),Z=v.n(z),ae=v("lodash/isArray"),ge=v.n(ae),_e=v("lodash/isPlainObject"),fe=v.n(_e),ke=v("lodash/isString"),Be=v.n(ke),Qe=v("lodash/merge"),qe=v.n(Qe),Kt=v("lodash/isElement"),Zn=v.n(Kt),pn=v("lodash/isFunction"),nt=v.n(pn),yr=v("lodash/trim"),rn=v.n(yr);function Tn(h){"@babel/helpers - typeof";return Tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},Tn(h)}function Pn(){return(typeof window>"u"?"undefined":Tn(window))==="object"&&window.IntersectionObserver}function Ma(){return(typeof HTMLImageElement>"u"?"undefined":Tn(HTMLImageElement))==="object"&&HTMLImageElement.prototype.loading}function Gl(h,c){try{if(Ma()||!Pn()){c();return}var m=new IntersectionObserver(function(g){g.forEach(function(P){P.isIntersecting&&(c(),m.unobserve(P.target))})},{threshold:[0,.01]});m.observe(h)}catch{c()}}var xo="2.5.0",Ql="d3jpl91pxevbkh.cloudfront.net",Io="cloudinary-a.akamaihd.net",qr="res.cloudinary.com",Ns=qr,Zi=1e4,er={format:"jpg",resource_type:"video"},Ds=["webm","mp4","ogv"],es={"image/upload":"images","image/private":"private_images","image/authenticated":"authenticated_images","raw/upload":"files","video/upload":"videos"},Ls={resource_type:"image",transformation:[],type:"upload"},ts={fallback_content:"",resource_type:"video",source_transformation:{},source_types:Ds,transformation:[],type:"upload"},Fa=[{type:"mp4",codecs:"hev1",transformations:{video_codec:"h265"}},{type:"webm",codecs:"vp9",transformations:{video_codec:"vp9"}},{type:"mp4",transformations:{video_codec:"auto"}},{type:"webm",transformations:{video_codec:"auto"}}],Yt={seeThru:"https://unpkg.com/seethru@4/dist/seeThru.min.js"},Ii={blur:[{effect:"blur:2000",quality:1,fetch_format:"auto"}],pixelate:[{effect:"pixelate",quality:1,fetch_format:"auto"}],"predominant-color-pixel":[{width:"iw_div_2",aspect_ratio:1,crop:"pad",background:"auto"},{crop:"crop",width:1,height:1,gravity:"north_east"},{fetch_format:"auto",quality:"auto"}],"predominant-color":[{variables:[["$currWidth","w"],["$currHeight","h"]]},{width:"iw_div_2",aspect_ratio:1,crop:"pad",background:"auto"},{crop:"crop",width:10,height:10,gravity:"north_east"},{width:"$currWidth",height:"$currHeight",crop:"fill"},{fetch_format:"auto",quality:"auto"}],vectorize:[{effect:"vectorize:3:0.1",fetch_format:"svg"}]},ai={darkmode:"tint:75:black",brightmode:"tint:50:white",monochrome:"grayscale",colorblind:"assist_colorblind"},Ri=["accessibility","api_secret","auth_token","cdn_subdomain","cloud_name","cname","format","placeholder","private_cdn","resource_type","secure","secure_cdn_subdomain","secure_distribution","shorten","sign_url","signature","ssl_detected","type","url_suffix","use_root_path","version"];function Ro(h){"@babel/helpers - typeof";return Ro=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},Ro(h)}function H(h,c){h=h||{};var m=Object.keys(h).filter(function(P){return!Z()(c,P)}),g={};return m.forEach(function(P){return g[P]=h[P]}),g}var Q=function(c){return c.length&&c.every(Be.a)},re=function(c,m){return c.filter(function(g){return g!==m})},de=function(c){return c!=null&&!isNaN(parseFloat(c))},Ce=function(c){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:/([^a-zA-Z0-9_.\-\/:]+)/g;return c.replace(m,function(g){return g.split("").map(function(P){return"%"+P.charCodeAt(0).toString(16).toUpperCase()}).join("")})},Oe=function(c){for(var m=arguments.length,g=new Array(m>1?m-1:0),P=1;P<m;P++)g[P-1]=arguments[P];return g.reduce(function(F,q){var se,ne;for(se in q)ne=q[se],F[se]===void 0&&(F[se]=ne);return F},c)},ze=Object.prototype,Ie=ze.toString,je=function(c){var m;return m=Ro(c),!!c&&(m==="object"||m==="function")},Le="[object Function]",Me=function(c){return je(c)&&Ie.call(c)===Le},ot=function(){var h,c;return c="[A-Z]",h="[a-z]+",RegExp(c+"+(?="+c+h+")|"+c+"?"+h+"|"+c+"+|[0-9]+","g")}(),at=function(c){var m=c.match(ot);return m=m.map(function(g){return g.charAt(0).toLocaleUpperCase()+g.slice(1).toLocaleLowerCase()}),m[0]=m[0].toLocaleLowerCase(),m.join("")},ct=function(c){var m=c.match(ot);return m=m.map(function(g){return g.toLocaleLowerCase()}),m.join("_")},it=function(c,m){var g,P;g={};for(var F in c)P=c[F],m&&(F=m(F)),Je(F)||(g[F]=P);return g},Xt=function(c){return it(c,at)},Ot=function(c){return it(c,ct)},Ci=typeof btoa<"u"&&Me(btoa)?btoa:typeof Buffer<"u"&&Me(Buffer)?function(h){return h instanceof Buffer||(h=new Buffer.from(String(h),"binary")),h.toString("base64")}:function(h){throw new Error("No base64 encoding function found")},tr=function(c){try{c=decodeURI(c)}finally{c=encodeURI(c)}return Ci(c)};function nr(h){return Ri.reduce(function(c,m){return h[m]!=null&&(c[m]=h[m]),c},{})}function Sn(h){h==null&&(h={}),h.type==="fetch"&&h.fetch_format==null&&(h.fetch_format=Ai(h,"format"))}function Ai(h,c,m){var g=h[c];return delete h[c],g??m}function Je(h){if(h==null)return!0;if(typeof h.length=="number")return h.length===0;if(typeof h.size=="number")return h.size===0;if(Ro(h)=="object"){for(var c in h)if(h.hasOwnProperty(c))return!1;return!0}return!0}function li(){return navigator&&navigator.userAgent||""}function ns(){var h=li();return/Android/i.test(h)}function Pi(){var h=li();return/Edg/i.test(h)}function Ye(){var h=li();return!Pi()&&(/Chrome/i.test(h)||/CriOS/i.test(h))}function Rt(){var h=li();return/Safari/i.test(h)&&!Ye()&&!ns()&&!Pi()}var xn,mt=function(c,m){switch(!1){case c!=null:return;case!nt()(c.getAttribute):return c.getAttribute("data-".concat(m));case!nt()(c.getAttr):return c.getAttr("data-".concat(m));case!nt()(c.data):return c.data(m);case!(nt()(typeof jQuery<"u"&&jQuery.fn&&jQuery.fn.data)&&Zn()(c)):return jQuery(c).data(m)}},rr=function(c,m,g){switch(!1){case c!=null:return;case!nt()(c.setAttribute):return c.setAttribute("data-".concat(m),g);case!nt()(c.setAttr):return c.setAttr("data-".concat(m),g);case!nt()(c.data):return c.data(m,g);case!(nt()(typeof jQuery<"u"&&jQuery.fn&&jQuery.fn.data)&&Zn()(c)):return jQuery(c).data(m,g)}},Yl=function(c,m){switch(!1){case c!=null:return;case!nt()(c.getAttribute):return c.getAttribute(m);case!nt()(c.attr):return c.attr(m);case!nt()(c.getAttr):return c.getAttr(m)}},rs=function(c,m,g){switch(!1){case c!=null:return;case!nt()(c.setAttribute):return c.setAttribute(m,g);case!nt()(c.attr):return c.attr(m,g);case!nt()(c.setAttr):return c.setAttr(m,g)}},ja=function(c,m){switch(!1){case c!=null:return;case!nt()(c.removeAttribute):return c.removeAttribute(m);default:return rs(c,void 0)}},uv=function(c,m){var g,P,F;P=[];for(g in m)F=m[g],F!=null?P.push(rs(c,g,F)):P.push(ja(c,g));return P},is=function(c,m){if(Zn()(c))return c.className.match(new RegExp("\\b".concat(m,"\\b")))},ui=function(c,m){if(!c.className.match(new RegExp("\\b".concat(m,"\\b"))))return c.className=rn()("".concat(c.className," ").concat(m))},Co=function(c){return c.ownerDocument.defaultView.opener?c.ownerDocument.defaultView.getComputedStyle(c,null):window.getComputedStyle(c,null)},Xl=["Top","Right","Bottom","Left"];xn=function(c,m){var g,P;return g=c.nodeType===9?c.documentElement:c,P=m&&m.parentNode,c===P||!!(P&&P.nodeType===1&&g.contains(P))};var Jc=function(c,m){if(!(!c||c.nodeType===3||c.nodeType===8||!c.style))return c.style[m]},Ct=function(c,m,g){var P,F,q,se,ne,we;return se=/^margin/,we=void 0,F=void 0,P=void 0,q=void 0,ne=c.style,g=g||Co(c),g&&(q=g.getPropertyValue(m)||g[m]),g&&(q===""&&!xn(c.ownerDocument,c)&&(q=Jc(c,m)),Mh.test(q)&&se.test(m)&&(we=ne.width,F=ne.minWidth,P=ne.maxWidth,ne.minWidth=ne.maxWidth=ne.width=q,q=g.width,ne.width=we,ne.minWidth=F,ne.maxWidth=P)),q!==void 0?q+"":q},ci=function(c,m,g,P){var F;return F=Ct(c,m,P),g?parseFloat(F):F},Ao=function(c,m,g,P,F){var q,se,ne,we,Ue;if(g===(P?"border":"content"))return 0;for(we=m==="width"?["Right","Left"]:["Top","Bottom"],Ue=0,q=0,se=we.length;q<se;q++)ne=we[q],g==="margin"&&(Ue+=ci(c,g+ne,!0,F)),P?(g==="content"&&(Ue-=ci(c,"padding".concat(ne),!0,F)),g!=="margin"&&(Ue-=ci(c,"border".concat(ne,"Width"),!0,F))):(Ue+=ci(c,"padding".concat(ne),!0,F),g!=="padding"&&(Ue+=ci(c,"border".concat(ne,"Width"),!0,F)));return Ue},Va=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Mh=new RegExp("^("+Va+")(?!px)[a-z%]+$","i"),Zc=function(c,m,g){var P,F,q,se;if(se=!0,q=m==="width"?c.offsetWidth:c.offsetHeight,F=Co(c),P=ci(c,"boxSizing",!1,F)==="border-box",q<=0||q==null){if(q=Ct(c,m,F),(q<0||q==null)&&(q=c.style[m]),Mh.test(q))return q;se=P&&q===c.style[m],q=parseFloat(q)||0}return q+Ao(c,m,g||(P?"border":"content"),se,F)},Fh=function(c){return Zc(c,"width","content")};function Ua(h){"@babel/helpers - typeof";return Ua=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},Ua(h)}function cv(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}function jh(h,c){for(var m=0;m<c.length;m++){var g=c[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,ss(g.key),g)}}function Ba(h,c,m){return c&&jh(h.prototype,c),m&&jh(h,m),Object.defineProperty(h,"prototype",{writable:!1}),h}function ss(h){var c=Vh(h,"string");return Ua(c)=="symbol"?c:c+""}function Vh(h,c){if(Ua(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var g=m.call(h,c);if(Ua(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}var $a=function(){function h(c){cv(this,h),this.expressions=[],c!=null&&this.expressions.push(h.normalize(c))}return Ba(h,[{key:"serialize",value:function(){return h.normalize(this.expressions.join("_"))}},{key:"toString",value:function(){return this.serialize()}},{key:"getParent",value:function(){return this.parent}},{key:"setParent",value:function(m){return this.parent=m,this}},{key:"predicate",value:function(m,g,P){return h.OPERATORS[g]!=null&&(g=h.OPERATORS[g]),this.expressions.push("".concat(m,"_").concat(g,"_").concat(P)),this}},{key:"and",value:function(){return this.expressions.push("and"),this}},{key:"or",value:function(){return this.expressions.push("or"),this}},{key:"then",value:function(){return this.getParent().if(this.toString())}},{key:"height",value:function(m,g){return this.predicate("h",m,g)}},{key:"width",value:function(m,g){return this.predicate("w",m,g)}},{key:"aspectRatio",value:function(m,g){return this.predicate("ar",m,g)}},{key:"pageCount",value:function(m,g){return this.predicate("pc",m,g)}},{key:"faceCount",value:function(m,g){return this.predicate("fc",m,g)}},{key:"value",value:function(m){return this.expressions.push(m),this}}],[{key:"new",value:function(m){return new this(m)}},{key:"normalize",value:function(m){if(m==null)return m;m=String(m);var g="\\|\\||>=|<=|&&|!=|>|=|<|/|-|\\+|\\*|\\^",P="(("+g+")(?=[ _]))",F=new RegExp(P,"g");m=m.replace(F,function(we){return h.OPERATORS[we]});var q="("+Object.keys(h.PREDEFINED_VARS).map(function(we){return":".concat(we,"|").concat(we)}).join("|")+")",se="(\\$_*[^_ ]+)",ne=new RegExp("".concat(se,"|").concat(q),"g");return m=m.replace(ne,function(we){return h.PREDEFINED_VARS[we]||we}),m.replace(/[ _]+/g,"_")}},{key:"variable",value:function(m,g){return new this(m).value(g)}},{key:"width",value:function(){return new this("width")}},{key:"height",value:function(){return new this("height")}},{key:"initialWidth",value:function(){return new this("initialWidth")}},{key:"initialHeight",value:function(){return new this("initialHeight")}},{key:"aspectRatio",value:function(){return new this("aspectRatio")}},{key:"initialAspectRatio",value:function(){return new this("initialAspectRatio")}},{key:"pageCount",value:function(){return new this("pageCount")}},{key:"faceCount",value:function(){return new this("faceCount")}},{key:"currentPage",value:function(){return new this("currentPage")}},{key:"tags",value:function(){return new this("tags")}},{key:"pageX",value:function(){return new this("pageX")}},{key:"pageY",value:function(){return new this("pageY")}}])}();$a.OPERATORS={"=":"eq","!=":"ne","<":"lt",">":"gt","<=":"lte",">=":"gte","&&":"and","||":"or","*":"mul","/":"div","+":"add","-":"sub","^":"pow"},$a.PREDEFINED_VARS={aspect_ratio:"ar",aspectRatio:"ar",current_page:"cp",currentPage:"cp",duration:"du",face_count:"fc",faceCount:"fc",height:"h",initial_aspect_ratio:"iar",initial_duration:"idu",initial_height:"ih",initial_width:"iw",initialAspectRatio:"iar",initialDuration:"idu",initialHeight:"ih",initialWidth:"iw",page_count:"pc",page_x:"px",page_y:"py",pageCount:"pc",pageX:"px",pageY:"py",tags:"tags",width:"w"},$a.BOUNDRY="[ _]+";var ln=$a;function Wr(h){"@babel/helpers - typeof";return Wr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},Wr(h)}function fv(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}function dv(h,c){for(var m=0;m<c.length;m++){var g=c[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,os(g.key),g)}}function hv(h,c,m){return c&&dv(h.prototype,c),Object.defineProperty(h,"prototype",{writable:!1}),h}function os(h){var c=pv(h,"string");return Wr(c)=="symbol"?c:c+""}function pv(h,c){if(Wr(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var g=m.call(h,c);if(Wr(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}function mv(h,c,m){return c=as(c),za(h,ef()?Reflect.construct(c,m||[],as(h).constructor):c.apply(h,m))}function za(h,c){if(c&&(Wr(c)==="object"||typeof c=="function"))return c;if(c!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jl(h)}function Jl(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function ef(){try{var h=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ef=function(){return!!h})()}function as(h){return as=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},as(h)}function Ha(h,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(c&&c.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),c&&Zl(h,c)}function Zl(h,c){return Zl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,P){return g.__proto__=P,g},Zl(h,c)}var tf=function(h){function c(m){return fv(this,c),mv(this,c,[m])}return Ha(c,h),hv(c,[{key:"height",value:function(g,P){return this.predicate("h",g,P)}},{key:"width",value:function(g,P){return this.predicate("w",g,P)}},{key:"aspectRatio",value:function(g,P){return this.predicate("ar",g,P)}},{key:"pageCount",value:function(g,P){return this.predicate("pc",g,P)}},{key:"faceCount",value:function(g,P){return this.predicate("fc",g,P)}},{key:"duration",value:function(g,P){return this.predicate("du",g,P)}},{key:"initialDuration",value:function(g,P){return this.predicate("idu",g,P)}}])}(ln),Nt=tf;function qa(h){"@babel/helpers - typeof";return qa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},qa(h)}function gv(h,c){return $h(h)||eu(h,c)||Bh(h,c)||Uh()}function Uh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bh(h,c){if(h){if(typeof h=="string")return nf(h,c);var m=Object.prototype.toString.call(h).slice(8,-1);if(m==="Object"&&h.constructor&&(m=h.constructor.name),m==="Map"||m==="Set")return Array.from(h);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return nf(h,c)}}function nf(h,c){(c==null||c>h.length)&&(c=h.length);for(var m=0,g=new Array(c);m<c;m++)g[m]=h[m];return g}function eu(h,c){var m=h==null?null:typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(m!=null){var g,P,F,q,se=[],ne=!0,we=!1;try{if(F=(m=m.call(h)).next,c!==0)for(;!(ne=(g=F.call(m)).done)&&(se.push(g.value),se.length!==c);ne=!0);}catch(Ue){we=!0,P=Ue}finally{try{if(!ne&&m.return!=null&&(q=m.return(),Object(q)!==q))return}finally{if(we)throw P}}return se}}function $h(h){if(Array.isArray(h))return h}function ki(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}function zh(h,c){for(var m=0;m<c.length;m++){var g=c[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,Wa(g.key),g)}}function yv(h,c,m){return c&&zh(h.prototype,c),Object.defineProperty(h,"prototype",{writable:!1}),h}function Wa(h){var c=Hh(h,"string");return qa(c)=="symbol"?c:c+""}function Hh(h,c){if(qa(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var g=m.call(h,c);if(qa(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}var tu=function(){function h(c){ki(this,h),this.configuration=c==null?{}:Se()(c),Oe(this.configuration,nu)}return yv(h,[{key:"init",value:function(){return this.fromEnvironment(),this.fromDocument(),this}},{key:"set",value:function(m,g){return this.configuration[m]=g,this}},{key:"get",value:function(m){return this.configuration[m]}},{key:"merge",value:function(m){return W()(this.configuration,Se()(m)),this}},{key:"fromDocument",value:function(){var m,g,P,F;if(F=typeof document<"u"&&document!==null?document.querySelectorAll('meta[name^="cloudinary_"]'):void 0,F)for(g=0,P=F.length;g<P;g++)m=F[g],this.configuration[m.getAttribute("name").replace("cloudinary_","")]=m.getAttribute("content");return this}},{key:"fromEnvironment",value:function(){var m=this,g,P,F,q;return typeof process<"u"&&process!==null&&n&&n.CLOUDINARY_URL&&(g=n.CLOUDINARY_URL,q=/cloudinary:\/\/(?:(\w+)(?:\:([\w-]+))?@)?([\w\.-]+)(?:\/([^?]*))?(?:\?(.+))?/,F=q.exec(g),F&&(F[3]!=null&&(this.configuration.cloud_name=F[3]),F[1]!=null&&(this.configuration.api_key=F[1]),F[2]!=null&&(this.configuration.api_secret=F[2]),F[4]!=null&&(this.configuration.private_cdn=F[4]!=null),F[4]!=null&&(this.configuration.secure_distribution=F[4]),P=F[5],P!=null&&P.split("&").forEach(function(se){var ne=se.split("="),we=gv(ne,2),Ue=we[0],Ze=we[1];Ze==null&&(Ze=!0),m.configuration[Ue]=Ze}))),this}},{key:"config",value:function(m,g){switch(!1){case g===void 0:return this.set(m,g),this.configuration;case!Be()(m):return this.get(m);case!fe()(m):return this.merge(m),this.configuration;default:return this.configuration}}},{key:"toOptions",value:function(){return Se()(this.configuration)}}])}(),nu={responsive_class:"cld-responsive",responsive_use_breakpoints:!0,round_dpr:!0,secure:(typeof window<"u"&&window!==null&&window.location?window.location.protocol:void 0)==="https:"};tu.CONFIG_PARAMS=["api_key","api_secret","callback","cdn_subdomain","cloud_name","cname","private_cdn","protocol","resource_type","responsive","responsive_class","responsive_use_breakpoints","responsive_width","round_dpr","secure","secure_cdn_subdomain","secure_distribution","shorten","type","upload_preset","url_suffix","use_root_path","version","externalLibraries","max_timeout_ms"];var Ka=tu;function ls(h){"@babel/helpers - typeof";return ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},ls(h)}function vv(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}function qh(h,c){for(var m=0;m<c.length;m++){var g=c[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,Wh(g.key),g)}}function Ga(h,c,m){return c&&qh(h.prototype,c),Object.defineProperty(h,"prototype",{writable:!1}),h}function Wh(h){var c=Kh(h,"string");return ls(c)=="symbol"?c:c+""}function Kh(h,c){if(ls(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var g=m.call(h,c);if(ls(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}var rf=function(){function h(c){var m=this;vv(this,h),this.options={},c!=null&&["resourceType","type","publicId","format"].forEach(function(g){var P;return m.options[g]=(P=c[g])!=null?P:c[ct(g)]})}return Ga(h,[{key:"resourceType",value:function(m){return this.options.resourceType=m,this}},{key:"type",value:function(m){return this.options.type=m,this}},{key:"publicId",value:function(m){return this.options.publicId=m,this}},{key:"getPublicId",value:function(){var m;return(m=this.options.publicId)!=null?m.replace(/\//g,":"):void 0}},{key:"getFullPublicId",value:function(){return this.options.format!=null?this.getPublicId()+"."+this.options.format:this.getPublicId()}},{key:"format",value:function(m){return this.options.format=m,this}},{key:"toString",value:function(){var m;if(m=[],this.options.publicId==null)throw"Must supply publicId";return this.options.resourceType!=="image"&&m.push(this.options.resourceType),this.options.type!=="upload"&&m.push(this.options.type),m.push(this.getFullPublicId()),xe()(m).join(":")}},{key:"clone",value:function(){return new this.constructor(this.options)}}])}(),us=rf;function Ms(h){"@babel/helpers - typeof";return Ms=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},Ms(h)}function ru(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}function Gh(h,c){for(var m=0;m<c.length;m++){var g=c[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,Fs(g.key),g)}}function Qh(h,c,m){return c&&Gh(h.prototype,c),Object.defineProperty(h,"prototype",{writable:!1}),h}function Fs(h){var c=Yh(h,"string");return Ms(c)=="symbol"?c:c+""}function Yh(h,c){if(Ms(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var g=m.call(h,c);if(Ms(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}function Xh(h,c,m){return c=kn(c),Jh(h,Qa()?Reflect.construct(c,m||[],kn(h).constructor):c.apply(h,m))}function Jh(h,c){if(c&&(Ms(c)==="object"||typeof c=="function"))return c;if(c!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zh(h)}function Zh(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function Qa(){try{var h=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qa=function(){return!!h})()}function kn(h){return kn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},kn(h)}function ep(h,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(c&&c.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),c&&iu(h,c)}function iu(h,c){return iu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,P){return g.__proto__=P,g},iu(h,c)}var Po=function(h){function c(m){var g;ru(this,c);var P;return g=Xh(this,c,[m]),P=["resourceType","resourceType","fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","stroke","letterSpacing","lineSpacing","fontHinting","fontAntialiasing","text","textStyle"],m!=null&&P.forEach(function(F){var q;return g.options[F]=(q=m[F])!=null?q:m[ct(F)]}),g.options.resourceType="text",g}return ep(c,h),Qh(c,[{key:"resourceType",value:function(g){throw"Cannot modify resourceType for text layers"}},{key:"type",value:function(g){throw"Cannot modify type for text layers"}},{key:"format",value:function(g){throw"Cannot modify format for text layers"}},{key:"fontFamily",value:function(g){return this.options.fontFamily=g,this}},{key:"fontSize",value:function(g){return this.options.fontSize=g,this}},{key:"fontWeight",value:function(g){return this.options.fontWeight=g,this}},{key:"fontStyle",value:function(g){return this.options.fontStyle=g,this}},{key:"textDecoration",value:function(g){return this.options.textDecoration=g,this}},{key:"textAlign",value:function(g){return this.options.textAlign=g,this}},{key:"stroke",value:function(g){return this.options.stroke=g,this}},{key:"letterSpacing",value:function(g){return this.options.letterSpacing=g,this}},{key:"lineSpacing",value:function(g){return this.options.lineSpacing=g,this}},{key:"fontHinting",value:function(g){return this.options.fontHinting=g,this}},{key:"fontAntialiasing",value:function(g){return this.options.fontAntialiasing=g,this}},{key:"text",value:function(g){return this.options.text=g,this}},{key:"textStyle",value:function(g){return this.options.textStyle=g,this}},{key:"toString",value:function(){var g,P,F,q,se,ne,we,Ue,Ze,ft;if(Ue=this.textStyleIdentifier(),this.options.publicId!=null&&(q=this.getFullPublicId()),this.options.text!=null){if(P=!Je(q),F=!Je(Ue),P&&F||!P&&!F)throw"Must supply either style parameters or a public_id when providing text parameter in a text overlay/underlay, but not both!";for(se=/\$\([a-zA-Z]\w*\)/g,we=0,ft=Ce(this.options.text,/[,\/]/g),Ze="";ne=se.exec(ft);)Ze+=Ce(ft.slice(we,ne.index)),Ze+=ne[0],we=ne.index+ne[0].length;Ze+=Ce(ft.slice(we))}return g=[this.options.resourceType,Ue,q,Ze],xe()(g).join(":")}},{key:"textStyleIdentifier",value:function(){if(!Je(this.options.textStyle))return this.options.textStyle;var g;if(g=[],this.options.fontWeight!=="normal"&&g.push(this.options.fontWeight),this.options.fontStyle!=="normal"&&g.push(this.options.fontStyle),this.options.textDecoration!=="none"&&g.push(this.options.textDecoration),g.push(this.options.textAlign),this.options.stroke!=="none"&&g.push(this.options.stroke),Je(this.options.letterSpacing)&&!de(this.options.letterSpacing)||g.push("letter_spacing_"+this.options.letterSpacing),Je(this.options.lineSpacing)&&!de(this.options.lineSpacing)||g.push("line_spacing_"+this.options.lineSpacing),Je(this.options.fontAntialiasing)||g.push("antialias_"+this.options.fontAntialiasing),Je(this.options.fontHinting)||g.push("hinting_"+this.options.fontHinting),!Je(xe()(g))){if(Je(this.options.fontFamily))throw"Must supply fontFamily. ".concat(g);if(Je(this.options.fontSize)&&!de(this.options.fontSize))throw"Must supply fontSize."}return g.unshift(this.options.fontFamily,this.options.fontSize),g=xe()(g).join("_"),g}}])}(us),d=Po;function b(h){"@babel/helpers - typeof";return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},b(h)}function A(h,c,m){return Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}function J(h,c,m){return c=sn(c),ie(h,Tt()?Reflect.construct(c,m||[],sn(h).constructor):c.apply(h,m))}function ie(h,c){if(c&&(b(c)==="object"||typeof c=="function"))return c;if(c!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Re(h)}function Re(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function Tt(){try{var h=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tt=function(){return!!h})()}function sn(h){return sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},sn(h)}function gt(h,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(c&&c.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),c&&mn(h,c)}function mn(h,c){return mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,P){return g.__proto__=P,g},mn(h,c)}var On=function(h){function c(m){var g;return U(this,c),g=J(this,c,[m]),g.options.resourceType="subtitles",g}return gt(c,h),A(c)}(d),cs=On;function Nn(h){"@babel/helpers - typeof";return Nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},Nn(h)}function su(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}function sf(h,c){for(var m=0;m<c.length;m++){var g=c[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,Rj(g.key),g)}}function Ij(h,c,m){return c&&sf(h.prototype,c),Object.defineProperty(h,"prototype",{writable:!1}),h}function Rj(h){var c=Cj(h,"string");return Nn(c)=="symbol"?c:c+""}function Cj(h,c){if(Nn(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var g=m.call(h,c);if(Nn(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}function Aj(h,c,m){return c=tp(c),Pj(h,wI()?Reflect.construct(c,m||[],tp(h).constructor):c.apply(h,m))}function Pj(h,c){if(c&&(Nn(c)==="object"||typeof c=="function"))return c;if(c!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kj(h)}function kj(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function wI(){try{var h=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wI=function(){return!!h})()}function tp(h){return tp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},tp(h)}function Oj(h,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(c&&c.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),c&&_v(h,c)}function _v(h,c){return _v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,P){return g.__proto__=P,g},_v(h,c)}var Nj=function(h){function c(m){var g;return su(this,c),g=Aj(this,c,[m]),Be()(m)?g.options.url=m:m!=null&&m.url&&(g.options.url=m.url),g}return Oj(c,h),Ij(c,[{key:"url",value:function(g){return this.options.url=g,this}},{key:"toString",value:function(){return"fetch:".concat(tr(this.options.url))}}])}(us),np=Nj;function of(h,c,m){return c=js(c),Dj(h,EI()?Reflect.construct(c,m||[],js(h).constructor):c.apply(h,m))}function Dj(h,c){if(c&&(ou(c)==="object"||typeof c=="function"))return c;if(c!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lj(h)}function Lj(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function EI(){try{var h=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EI=function(){return!!h})()}function Ya(){return typeof Reflect<"u"&&Reflect.get?Ya=Reflect.get.bind():Ya=function(c,m,g){var P=Mj(c,m);if(P){var F=Object.getOwnPropertyDescriptor(P,m);return F.get?F.get.call(arguments.length<3?c:g):F.value}},Ya.apply(this,arguments)}function Mj(h,c){for(;!Object.prototype.hasOwnProperty.call(h,c)&&(h=js(h),h!==null););return h}function js(h){return js=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},js(h)}function af(h,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(c&&c.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),c&&wv(h,c)}function wv(h,c){return wv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,P){return g.__proto__=P,g},wv(h,c)}function ou(h){"@babel/helpers - typeof";return ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},ou(h)}function au(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}function bI(h,c){for(var m=0;m<c.length;m++){var g=c[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,Fj(g.key),g)}}function lu(h,c,m){return c&&bI(h.prototype,c),m&&bI(h,m),Object.defineProperty(h,"prototype",{writable:!1}),h}function Fj(h){var c=jj(h,"string");return ou(c)=="symbol"?c:c+""}function jj(h,c){if(ou(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var g=m.call(h,c);if(ou(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}var fs=function(){function h(c,m){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:st.a;au(this,h),this.name=c,this.shortName=m,this.process=g}return lu(h,[{key:"set",value:function(m){return this.origValue=m,this}},{key:"serialize",value:function(){var m,g;return m=this.value(),g=ge()(m)||fe()(m)||Be()(m)?!Je(m):m!=null,this.shortName!=null&&g?"".concat(this.shortName,"_").concat(m):""}},{key:"value",value:function(){return this.process(this.origValue)}}],[{key:"norm_color",value:function(m){return m!=null?m.replace(/^#/,"rgb:"):void 0}},{key:"build_array",value:function(m){return m==null?[]:ge()(m)?m:[m]}},{key:"process_video_params",value:function(m){var g;switch(m.constructor){case Object:return g="","codec"in m&&(g=m.codec,"profile"in m&&(g+=":"+m.profile,"level"in m&&(g+=":"+m.level,"b_frames"in m&&m.b_frames===!1&&(g+=":bframes_no")))),g;case String:return m;default:return null}}}])}(),Vj=function(h){function c(m,g){var P,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".",q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;return au(this,c),P=of(this,c,[m,g,q]),P.sep=F,P}return af(c,h),lu(c,[{key:"serialize",value:function(){if(this.shortName!=null){var g=this.value();if(Je(g))return"";if(Be()(g))return"".concat(this.shortName,"_").concat(g);var P=g.map(function(F){return nt()(F.serialize)?F.serialize():F}).join(this.sep);return"".concat(this.shortName,"_").concat(P)}else return""}},{key:"value",value:function(){var g=this;return ge()(this.origValue)?this.origValue.map(function(P){return g.process(P)}):this.process(this.origValue)}},{key:"set",value:function(g){return g==null||ge()(g)?Ya(js(c.prototype),"set",this).call(this,g):Ya(js(c.prototype),"set",this).call(this,[g])}}])}(fs),Uj=function(h){function c(m){var g,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"t",F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".",q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;return au(this,c),g=of(this,c,[m,P,q]),g.sep=F,g}return af(c,h),lu(c,[{key:"serialize",value:function(){var g=this,P="",F=this.value();if(Je(F))return P;if(Q(F)){var q=F.join(this.sep);Je(q)||(P="".concat(this.shortName,"_").concat(q))}else P=F.map(function(se){if(Be()(se)&&!Je(se))return"".concat(g.shortName,"_").concat(se);if(nt()(se.serialize))return se.serialize();if(fe()(se)&&!Je(se))return new Oi(se).serialize()}).filter(function(se){return se});return P}},{key:"set",value:function(g){return this.origValue=g,ge()(this.origValue)?Ya(js(c.prototype),"set",this).call(this,this.origValue):Ya(js(c.prototype),"set",this).call(this,[this.origValue])}}])}(fs),Bj="([0-9]*)\\.([0-9]+)|([0-9]+)",$j="("+Bj+")([%pP])?",zj=function(h){function c(m,g){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c.norm_range_value;return au(this,c),of(this,c,[m,g,P])}return af(c,h),lu(c,null,[{key:"norm_range_value",value:function(g){var P=String(g).match(new RegExp("^"+$j+"$"));if(P){var F=P[5]!=null?"p":"";g=(P[1]||P[4])+F}return ln.normalize(g)}}])}(fs),Hj=function(h){function c(m,g){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:st.a;return au(this,c),of(this,c,[m,g,P])}return af(c,h),lu(c,[{key:"serialize",value:function(){return this.value()}}])}(fs),qj=function(h){function c(){return au(this,c),of(this,c,arguments)}return af(c,h),lu(c,[{key:"value",value:function(){if(this.origValue==null)return"";var g;if(this.origValue instanceof us)g=this.origValue;else if(fe()(this.origValue)){var P=Xt(this.origValue);P.resourceType==="text"||P.text!=null?g=new d(P):P.resourceType==="subtitles"?g=new cs(P):P.resourceType==="fetch"||P.url!=null?g=new np(P):g=new us(P)}else Be()(this.origValue)?/^fetch:.+/.test(this.origValue)?g=new np(this.origValue.substr(6)):g=this.origValue:g="";return g.toString()}}],[{key:"textStyle",value:function(g){return new d(g).textStyleIdentifier()}}])}(fs);function Wj(h,c,m){return c=rp(c),Kj(h,TI()?Reflect.construct(c,m||[],rp(h).constructor):c.apply(h,m))}function Kj(h,c){if(c&&(uu(c)==="object"||typeof c=="function"))return c;if(c!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gj(h)}function Gj(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function TI(){try{var h=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TI=function(){return!!h})()}function rp(h){return rp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},rp(h)}function Qj(h,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(c&&c.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),c&&Ev(h,c)}function Ev(h,c){return Ev=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,P){return g.__proto__=P,g},Ev(h,c)}function bv(h,c){return Zj(h)||Jj(h,c)||Xj(h,c)||Yj()}function Yj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xj(h,c){if(h){if(typeof h=="string")return SI(h,c);var m=Object.prototype.toString.call(h).slice(8,-1);if(m==="Object"&&h.constructor&&(m=h.constructor.name),m==="Map"||m==="Set")return Array.from(h);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return SI(h,c)}}function SI(h,c){(c==null||c>h.length)&&(c=h.length);for(var m=0,g=new Array(c);m<c;m++)g[m]=h[m];return g}function Jj(h,c){var m=h==null?null:typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(m!=null){var g,P,F,q,se=[],ne=!0,we=!1;try{if(F=(m=m.call(h)).next,c!==0)for(;!(ne=(g=F.call(m)).done)&&(se.push(g.value),se.length!==c);ne=!0);}catch(Ue){we=!0,P=Ue}finally{try{if(!ne&&m.return!=null&&(q=m.return(),Object(q)!==q))return}finally{if(we)throw P}}return se}}function Zj(h){if(Array.isArray(h))return h}function uu(h){"@babel/helpers - typeof";return uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},uu(h)}function xI(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}function II(h,c){for(var m=0;m<c.length;m++){var g=c[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,e8(g.key),g)}}function RI(h,c,m){return c&&II(h.prototype,c),m&&II(h,m),Object.defineProperty(h,"prototype",{writable:!1}),h}function e8(h){var c=t8(h,"string");return uu(c)=="symbol"?c:c+""}function t8(h,c){if(uu(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var g=m.call(h,c);if(uu(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}function CI(h){for(var c=arguments.length,m=new Array(c>1?c-1:0),g=1;g<c;g++)m[g-1]=arguments[g];return m.forEach(function(P){Object.keys(P).forEach(function(F){P[F]!=null&&(h[F]=P[F])})}),h}var Tv=function(){function h(c){xI(this,h);var m,g;m=void 0,g={},this.toOptions=function(P){var F={};if(P==null&&(P=!0),Object.keys(g).forEach(function(se){return F[se]=g[se].origValue}),CI(F,this.otherOptions),P&&!Je(this.chained)){var q=this.chained.map(function(se){return se.toOptions()});q.push(F),F={},CI(F,this.otherOptions),F.transformation=q}return F},this.setParent=function(P){return m=P,P!=null&&this.fromOptions(typeof P.toOptions=="function"?P.toOptions():void 0),this},this.getParent=function(){return m},this.param=function(P,F,q,se,ne){return ne==null&&(nt()(se)?ne=se:ne=st.a),g[F]=new fs(F,q,ne).set(P),this},this.rawParam=function(P,F,q,se,ne){return ne=ip(arguments),g[F]=new Hj(F,q,ne).set(P),this},this.rangeParam=function(P,F,q,se,ne){return ne=ip(arguments),g[F]=new zj(F,q,ne).set(P),this},this.arrayParam=function(P,F,q){var se=arguments.length>3&&arguments[3]!==void 0?arguments[3]:":",ne=arguments.length>5&&arguments[5]!==void 0?arguments[5]:void 0;return ne=ip(arguments),g[F]=new Vj(F,q,se,ne).set(P),this},this.transformationParam=function(P,F,q){var se=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",ne=arguments.length>5&&arguments[5]!==void 0?arguments[5]:void 0;return ne=ip(arguments),g[F]=new Uj(F,q,se,ne).set(P),this},this.layerParam=function(P,F,q){return g[F]=new qj(F,q).set(P),this},this.getValue=function(P){var F=g[P]&&g[P].value();return F??this.otherOptions[P]},this.get=function(P){return g[P]},this.remove=function(P){var F;switch(!1){case g[P]==null:return F=g[P],delete g[P],F.origValue;case this.otherOptions[P]==null:return F=this.otherOptions[P],delete this.otherOptions[P],F;default:return null}},this.keys=function(){var P;return function(){var F;F=[];for(P in g)P!=null&&F.push(P.match(Sv)?P:ct(P));return F}().sort()},this.toPlainObject=function(){var P,F,q;P={};for(F in g)P[F]=g[F].value(),fe()(P[F])&&(P[F]=Se()(P[F]));return Je(this.chained)||(q=this.chained.map(function(se){return se.toPlainObject()}),q.push(P),P={transformation:q}),P},this.chain=function(){var P,F;return P=Object.getOwnPropertyNames(g),P.length!==0&&(F=new this.constructor(this.toOptions(!1)),this.resetTransformations(),this.chained.push(F)),this},this.resetTransformations=function(){return g={},this},this.otherOptions={},this.chained=[],this.fromOptions(c)}return RI(h,[{key:"fromOptions",value:function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(m instanceof h)this.fromTransformation(m);else{(Be()(m)||ge()(m))&&(m={transformation:m}),m=Se()(m,function(F){if(F instanceof h||F instanceof Layer)return new F.clone}),m.if&&(this.set("if",m.if),delete m.if);for(var g in m){var P=m[g];P!=null&&(g.match(Sv)?g!=="$attr"&&this.set("variable",g,P):this.set(g,P))}}return this}},{key:"fromTransformation",value:function(m){var g=this;return m instanceof h&&m.keys().forEach(function(P){return g.set(P,m.get(P).origValue)}),this}},{key:"set",value:function(m){var g;g=at(m);for(var P=arguments.length,F=new Array(P>1?P-1:0),q=1;q<P;q++)F[q-1]=arguments[q];return Z()(ko.methods,g)?this[g].apply(this,F):this.otherOptions[m]=F[0],this}},{key:"hasLayer",value:function(){return this.getValue("overlay")||this.getValue("underlay")}},{key:"serialize",value:function(){var m,g,P,F,q,se,ne,we,Ue,Ze,ft,jt,Us,No,ds,_u,wu;for(Ze=this.chained.map(function(Bs){return Bs.serialize()}),F=this.keys(),No=(q=this.get("transformation"))!=null?q.serialize():void 0,m=(se=this.get("if"))!=null?se.serialize():void 0,_u=n8((ne=this.get("variables"))!=null?ne.value():void 0),F=Et()(F,["transformation","if","variables"]),wu=[],jt=[],g=0,P=F.length;g<P;g++)ft=F[g],ft.match(Sv)?wu.push(ft+"_"+ln.normalize((we=this.get(ft))!=null?we.value():void 0)):jt.push((Ue=this.get(ft))!=null?Ue.serialize():void 0);switch(!1){case!Be()(No):jt.push(No);break;case!ge()(No):Ze=Ze.concat(No)}return jt=function(){var Bs,Eu,Lv;for(Lv=[],Bs=0,Eu=jt.length;Bs<Eu;Bs++)ds=jt[Bs],(ge()(ds)&&!Je(ds)||!ge()(ds)&&ds)&&Lv.push(ds);return Lv}(),jt=wu.sort().concat(_u).concat(jt.sort()),m==="if_end"?jt.push(m):Je(m)||jt.unshift(m),Us=xe()(jt).join(this.param_separator),Je(Us)||Ze.push(Us),xe()(Ze).join(this.trans_separator)}},{key:"toHtmlAttributes",value:function(){var m=this,g,P,F,q,se,ne,we;F={};var Ue;return Object.keys(this.otherOptions).forEach(function(Ze){ne=m.otherOptions[Ze],Ue=ct(Ze),!Z()(ko.PARAM_NAMES,Ue)&&!Z()(Ri,Ue)&&(g=/^html_/.test(Ze)?Ze.slice(5):Ze,F[g]=ne)}),this.keys().forEach(function(Ze){/^html_/.test(Ze)&&(F[at(Ze.slice(5))]=m.getValue(Ze))}),this.hasLayer()||this.getValue("angle")||Z()(["fit","limit","lfill"],this.getValue("crop"))||(we=(q=this.get("width"))!=null?q.origValue:void 0,P=(se=this.get("height"))!=null?se.origValue:void 0,parseFloat(we)>=1&&F.width==null&&(F.width=we),parseFloat(P)>=1&&F.height==null&&(F.height=P)),F}},{key:"toHtml",value:function(){var m;return(m=this.getParent())!=null&&typeof m.toHtml=="function"?m.toHtml():void 0}},{key:"toString",value:function(){return this.serialize()}},{key:"clone",value:function(){return new this.constructor(this.toOptions(!0))}}],[{key:"listNames",value:function(){return ko.methods}},{key:"isValidParamName",value:function(m){return ko.methods.indexOf(at(m))>=0}}])}(),Sv=/^\$[a-zA-Z0-9]+$/;Tv.prototype.trans_separator="/",Tv.prototype.param_separator=",";function ip(h){var c;if(c=h!=null?h[h.length-1]:void 0,nt()(c))return c}function n8(h){var c,m,g,P,F;if(ge()(h)){for(P=[],c=0,m=h.length;c<m;c++){var q=bv(h[c],2);g=q[0],F=q[1],P.push("".concat(g,"_").concat(ln.normalize(F)))}return P}else return h}function AI(h){var c=h.function_type,m=h.source;if(c==="remote")return[c,btoa(m)].join(":");if(c==="wasm")return[c,m].join(":")}var ko=function(h){function c(m){return xI(this,c),Wj(this,c,[m])}return Qj(c,h),RI(c,[{key:"angle",value:function(g){return this.arrayParam(g,"angle","a",".",ln.normalize)}},{key:"audioCodec",value:function(g){return this.param(g,"audio_codec","ac")}},{key:"audioFrequency",value:function(g){return this.param(g,"audio_frequency","af")}},{key:"aspectRatio",value:function(g){return this.param(g,"aspect_ratio","ar",ln.normalize)}},{key:"background",value:function(g){return this.param(g,"background","b",fs.norm_color)}},{key:"bitRate",value:function(g){return this.param(g,"bit_rate","br")}},{key:"border",value:function(g){return this.param(g,"border","bo",function(P){return fe()(P)?(P=W()({},{color:"black",width:2},P),"".concat(P.width,"px_solid_").concat(fs.norm_color(P.color))):P})}},{key:"color",value:function(g){return this.param(g,"color","co",fs.norm_color)}},{key:"colorSpace",value:function(g){return this.param(g,"color_space","cs")}},{key:"crop",value:function(g){return this.param(g,"crop","c")}},{key:"customFunction",value:function(g){return this.param(g,"custom_function","fn",function(){return AI(g)})}},{key:"customPreFunction",value:function(g){if(!this.get("custom_function"))return this.rawParam(g,"custom_function","",function(){return g=AI(g),g&&"fn_pre:".concat(g)})}},{key:"defaultImage",value:function(g){return this.param(g,"default_image","d")}},{key:"delay",value:function(g){return this.param(g,"delay","dl")}},{key:"density",value:function(g){return this.param(g,"density","dn")}},{key:"duration",value:function(g){return this.rangeParam(g,"duration","du")}},{key:"dpr",value:function(g){return this.param(g,"dpr","dpr",function(P){return P=P.toString(),P!=null&&P.match(/^\d+$/)?P+".0":ln.normalize(P)})}},{key:"effect",value:function(g){return this.arrayParam(g,"effect","e",":",ln.normalize)}},{key:"else",value:function(){return this.if("else")}},{key:"endIf",value:function(){return this.if("end")}},{key:"endOffset",value:function(g){return this.rangeParam(g,"end_offset","eo")}},{key:"fallbackContent",value:function(g){return this.param(g,"fallback_content")}},{key:"fetchFormat",value:function(g){return this.param(g,"fetch_format","f")}},{key:"format",value:function(g){return this.param(g,"format")}},{key:"flags",value:function(g){return this.arrayParam(g,"flags","fl",".")}},{key:"gravity",value:function(g){return this.param(g,"gravity","g")}},{key:"fps",value:function(g){return this.param(g,"fps","fps",function(P){return Be()(P)?P:ge()(P)?P.join("-"):P})}},{key:"height",value:function(g){var P=this;return this.param(g,"height","h",function(){return P.getValue("crop")||P.getValue("overlay")||P.getValue("underlay")?ln.normalize(g):null})}},{key:"htmlHeight",value:function(g){return this.param(g,"html_height")}},{key:"htmlWidth",value:function(g){return this.param(g,"html_width")}},{key:"if",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",P,F,q,se,ne;switch(g){case"else":return this.chain(),this.param(g,"if","if");case"end":for(this.chain(),P=q=this.chained.length-1;q>=0&&(F=this.chained[P].getValue("if"),F!=="end");P=q+=-1)if(F!=null&&(se=c.new().if(F),this.chained[P].remove("if"),ne=this.chained[P],this.chained[P]=c.new().transformation([se,ne]),F!=="else"))break;return this.param(g,"if","if");case"":return Nt.new().setParent(this);default:return this.param(g,"if","if",function(we){return Nt.new(we).toString()})}}},{key:"keyframeInterval",value:function(g){return this.param(g,"keyframe_interval","ki")}},{key:"ocr",value:function(g){return this.param(g,"ocr","ocr")}},{key:"offset",value:function(g){var P,F,q=nt()(g!=null?g.split:void 0)?g.split(".."):ge()(g)?g:[null,null],se=bv(q,2);if(F=se[0],P=se[1],F!=null&&this.startOffset(F),P!=null)return this.endOffset(P)}},{key:"opacity",value:function(g){return this.param(g,"opacity","o",ln.normalize)}},{key:"overlay",value:function(g){return this.layerParam(g,"overlay","l")}},{key:"page",value:function(g){return this.param(g,"page","pg")}},{key:"poster",value:function(g){return this.param(g,"poster")}},{key:"prefix",value:function(g){return this.param(g,"prefix","p")}},{key:"quality",value:function(g){return this.param(g,"quality","q",ln.normalize)}},{key:"radius",value:function(g){return this.arrayParam(g,"radius","r",":",ln.normalize)}},{key:"rawTransformation",value:function(g){return this.rawParam(g,"raw_transformation")}},{key:"size",value:function(g){var P,F;if(nt()(g!=null?g.split:void 0)){var q=g.split("x"),se=bv(q,2);return F=se[0],P=se[1],this.width(F),this.height(P)}}},{key:"sourceTypes",value:function(g){return this.param(g,"source_types")}},{key:"sourceTransformation",value:function(g){return this.param(g,"source_transformation")}},{key:"startOffset",value:function(g){return this.rangeParam(g,"start_offset","so")}},{key:"streamingProfile",value:function(g){return this.param(g,"streaming_profile","sp")}},{key:"transformation",value:function(g){return this.transformationParam(g,"transformation","t")}},{key:"underlay",value:function(g){return this.layerParam(g,"underlay","u")}},{key:"variable",value:function(g,P){return this.param(P,g,g)}},{key:"variables",value:function(g){return this.arrayParam(g,"variables")}},{key:"videoCodec",value:function(g){return this.param(g,"video_codec","vc",fs.process_video_params)}},{key:"videoSampling",value:function(g){return this.param(g,"video_sampling","vs")}},{key:"width",value:function(g){var P=this;return this.param(g,"width","w",function(){return P.getValue("crop")||P.getValue("overlay")||P.getValue("underlay")?ln.normalize(g):null})}},{key:"x",value:function(g){return this.param(g,"x","x",ln.normalize)}},{key:"y",value:function(g){return this.param(g,"y","y",ln.normalize)}},{key:"zoom",value:function(g){return this.param(g,"zoom","z",ln.normalize)}}],[{key:"new",value:function(g){return new c(g)}}])}(Tv);ko.methods=["angle","audioCodec","audioFrequency","aspectRatio","background","bitRate","border","color","colorSpace","crop","customFunction","customPreFunction","defaultImage","delay","density","duration","dpr","effect","else","endIf","endOffset","fallbackContent","fetchFormat","format","flags","gravity","fps","height","htmlHeight","htmlWidth","if","keyframeInterval","ocr","offset","opacity","overlay","page","poster","prefix","quality","radius","rawTransformation","size","sourceTypes","sourceTransformation","startOffset","streamingProfile","transformation","underlay","variable","variables","videoCodec","videoSampling","width","x","y","zoom"],ko.PARAM_NAMES=ko.methods.map(ct).concat(Ka.CONFIG_PARAMS);var Oi=ko;function lf(h){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},lf(h)}function r8(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}function PI(h,c){for(var m=0;m<c.length;m++){var g=c[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,s8(g.key),g)}}function i8(h,c,m){return c&&PI(h.prototype,c),m&&PI(h,m),Object.defineProperty(h,"prototype",{writable:!1}),h}function s8(h){var c=o8(h,"string");return lf(c)=="symbol"?c:c+""}function o8(h,c){if(lf(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var g=m.call(h,c);if(lf(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}var a8=function(){function h(c,m,g){r8(this,h);var P;this.name=c,this.publicId=m,g==null&&(fe()(m)?(g=m,this.publicId=void 0):g={}),P=new Oi(g),P.setParent(this),this.transformation=function(){return P}}return i8(h,[{key:"htmlAttrs",value:function(m){var g,P;return function(){var F;F=[];for(g in m)P=u8(m[g]),P&&F.push(l8(g,P));return F}().sort().join(" ")}},{key:"getOptions",value:function(){return this.transformation().toOptions()}},{key:"getOption",value:function(m){return this.transformation().getValue(m)}},{key:"attributes",value:function(){var m=this.transformation().toHtmlAttributes();return Object.keys(m).forEach(function(g){fe()(m[g])&&delete m[g]}),m.attributes&&(qe()(m,m.attributes),delete m.attributes),m}},{key:"setAttr",value:function(m,g){return this.transformation().set("html_".concat(m),g),this}},{key:"getAttr",value:function(m){return this.attributes()["html_".concat(m)]||this.attributes()[m]}},{key:"removeAttr",value:function(m){var g;return(g=this.transformation().remove("html_".concat(m)))!=null?g:this.transformation().remove(m)}},{key:"content",value:function(){return""}},{key:"openTag",value:function(){var m="<"+this.name,g=this.htmlAttrs(this.attributes());return g&&g.length>0&&(m+=" "+g),m+">"}},{key:"closeTag",value:function(){return"</".concat(this.name,">")}},{key:"toHtml",value:function(){return this.openTag()+this.content()+this.closeTag()}},{key:"toDOM",value:function(){var m,g,P,F;if(!nt()(typeof document<"u"&&document!==null?document.createElement:void 0))throw"Can't create DOM if document is not present!";m=document.createElement(this.name),P=this.attributes();for(g in P)F=P[g],m.setAttribute(g,F);return m}}],[{key:"new",value:function(m,g,P){return new this(m,g,P)}},{key:"isResponsive",value:function(m,g){var P;return P=mt(m,"src-cache")||mt(m,"src"),is(m,g)&&/\bw_auto\b/.exec(P)}}])}();function l8(h,c){if(c)return c===!0?h:"".concat(h,'="').concat(c,'"')}function u8(h){return Be()(h)?h.replace('"',"&#34;").replace("'","&#39;"):h}var Oo=a8,c8=["placeholder","accessibility"];function f8(h,c){if(h==null)return{};var m=d8(h,c),g,P;if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(h);for(P=0;P<F.length;P++)g=F[P],!(c.indexOf(g)>=0)&&Object.prototype.propertyIsEnumerable.call(h,g)&&(m[g]=h[g])}return m}function d8(h,c){if(h==null)return{};var m={},g=Object.keys(h),P,F;for(F=0;F<g.length;F++)P=g[F],!(c.indexOf(P)>=0)&&(m[P]=h[P]);return m}function h8(h){var c=document.location.protocol+"//"+document.location.host;return h[0]==="?"?c+=document.location.pathname:h[0]!=="/"&&(c+=document.location.pathname.replace(/\/[^\/]*$/,"/")),c+h}function sp(h){return h?!!h.match(/^https?:\//):!1}function p8(h){return T(h)%5+1}function m8(h){var c=h.signature,m=!c||c.indexOf("s--")===0&&c.substr(-2)==="--";return delete h.signature,m?c:"s--".concat(c,"--")}function g8(h,c){if(c.cloud_name&&c.cloud_name[0]==="/")return"/res"+c.cloud_name;var m="http://",g="",P="res",F=".cloudinary.com",q="/"+c.cloud_name;return c.protocol&&(m=c.protocol+"//"),c.private_cdn&&(g=c.cloud_name+"-",q=""),c.cdn_subdomain&&(P="res-"+p8(h)),c.secure?(m="https://",c.secure_cdn_subdomain===!1&&(P="res"),c.secure_distribution!=null&&c.secure_distribution!==Io&&c.secure_distribution!==Ns&&(g="",P="",F=c.secure_distribution)):c.cname&&(m="http://",g="",P=c.cdn_subdomain?"a"+(T(h)%5+1)+".":"",F=c.cname),[m,g,P,F,q].join("")}function y8(h){var c=h.resource_type,m=c===void 0?"image":c,g=h.type,P=g===void 0?"upload":g,F=h.url_suffix,q=h.use_root_path,se=h.shorten,ne,we=m;if(fe()(we)&&(ne=we,we=ne.resource_type,P=ne.type,se=ne.shorten),P==null&&(P="upload"),F!=null&&(we=es["".concat(we,"/").concat(P)],P=null,we==null))throw new Error("URL Suffix only supported for ".concat(Object.keys(es).join(", ")));if(q)if(we==="image"&&P==="upload"||we==="images")we=null,P=null;else throw new Error("Root path only supported for image/upload");return se&&we==="image"&&P==="upload"&&(we="iu",P=null),[we,P].join("/")}function kI(h){return encodeURIComponent(h).replace(/%3A/g,":").replace(/%2F/g,"/")}function v8(h,c){if(sp(h))h=kI(h);else{try{h=decodeURIComponent(h)}catch{}h=kI(h),c.url_suffix&&(h=h+"/"+c.url_suffix),c.format&&(c.trust_public_id||(h=h.replace(/\.(jpg|png|gif|webp)$/,"")),h=h+"."+c.format)}return h}function _8(h){var c=h.cloud_name,m=h.url_suffix;if(!c)return"Unknown cloud_name";if(m&&m.match(/[\.\/]/))return"url_suffix should not include . or /"}function w8(h,c){var m=c.force_version||typeof c.force_version>"u",g=h.indexOf("/")<0||h.match(/^v[0-9]+/)||sp(h)||c.version;return m&&!g&&(c.version=1),c.version?"v".concat(c.version):""}function E8(h){var c=h||{},m=c.placeholder,g=c.accessibility,P=f8(c,c8),F=new Oi(P);if(g&&ai[g]&&F.chain().effect(ai[g]),m){m==="predominant-color"&&F.getValue("width")&&F.getValue("height")&&(m+="-pixel");var q=Ii[m]||Ii.blur;q.forEach(function(se){return F.chain().transformation(se)})}return F.serialize()}function b8(h,c){var m=c.type;return!sp(h)&&m==="fetch"?h8(h):h}function T8(h,c){if(sp(h)&&(c.type==="upload"||c.type==="asset"))return h;var m=w8(h,c),g=E8(c),P=g8(h,c),F=m8(c),q=y8(c);return h=v8(h,c),xe()([P,q,F,g,m,h]).join("/").replace(/([^:])\/+/g,"$1/").replace(" ","%20")}function S8(h,c){return h instanceof Oi&&(h=h.toOptions()),h=Oe({},h,c,Ls),h.type==="fetch"&&(h.fetch_format=h.fetch_format||h.format),h}function Vs(h){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!h)return h;c=S8(c,m),h=b8(h,c);var g=_8(c);if(g)throw g;var P=T8(h,c);if(c.urlAnalytics){var F=Ee(c),q=K(F),se="?";P.indexOf("?")>=0&&(se="&"),P="".concat(P).concat(se,"_a=").concat(q)}if(c.auth_token){var ne=P.indexOf("?")>=0?"&":"?";P="".concat(P).concat(ne,"__cld_token__=").concat(c.auth_token)}return P}function x8(h,c){return A8(h)||C8(h,c)||R8(h,c)||I8()}function I8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R8(h,c){if(h){if(typeof h=="string")return OI(h,c);var m=Object.prototype.toString.call(h).slice(8,-1);if(m==="Object"&&h.constructor&&(m=h.constructor.name),m==="Map"||m==="Set")return Array.from(h);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return OI(h,c)}}function OI(h,c){(c==null||c>h.length)&&(c=h.length);for(var m=0,g=new Array(c);m<c;m++)g[m]=h[m];return g}function C8(h,c){var m=h==null?null:typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(m!=null){var g,P,F,q,se=[],ne=!0,we=!1;try{if(F=(m=m.call(h)).next,c!==0)for(;!(ne=(g=F.call(m)).done)&&(se.push(g.value),se.length!==c);ne=!0);}catch(Ue){we=!0,P=Ue}finally{try{if(!ne&&m.return!=null&&(q=m.return(),Object(q)!==q))return}finally{if(we)throw P}}return se}}function A8(h){if(Array.isArray(h))return h}function P8(h){var c=h.breakpoints||[];if(c.length)return c;var m=[h.min_width,h.max_width,h.max_images].map(Number),g=x8(m,3),P=g[0],F=g[1],q=g[2];if([P,F,q].some(isNaN))throw"Either (min_width, max_width, max_images) or breakpoints must be provided to the image srcset attribute";if(P>F)throw"min_width must be less than max_width";if(q<=0)throw"max_images must be a positive integer";q===1&&(P=F);for(var se=Math.ceil((F-P)/Math.max(q-1,1)),ne=P;ne<F;ne+=se)c.push(ne);return c.push(F),c}var xv=Je;function k8(h,c,m){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},P=nr(g);return m=m||g,P.raw_transformation=new Oi([qe.a({},m),{crop:"scale",width:c}]).toString(),Vs(h,P)}function O8(h){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return P8(c)}function N8(h,c,m,g){return g=Se.a(g),Sn(g),c.map(function(P){return"".concat(k8(h,P,m,g)," ").concat(P,"w")}).join(", ")}function D8(h){return h==null?"":h.map(function(c){return"(max-width: ".concat(c,"px) ").concat(c,"px")}).join(", ")}function NI(h){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},P={};if(xv(m))return P;var F=!c.sizes&&m.sizes===!0,q=!c.srcset;if(q||F){var se=O8(h,m,g);if(q){var ne=m.transformation,we=N8(h,se,ne,g);xv(we)||(P.srcset=we)}if(F){var Ue=D8(se);xv(Ue)||(P.sizes=Ue)}}return P}function L8(h){var c=[];return h!=null&&(h.min_width!=null&&c.push("(min-width: ".concat(h.min_width,"px)")),h.max_width!=null&&c.push("(max-width: ".concat(h.max_width,"px)"))),c.join(" and ")}function cu(h){"@babel/helpers - typeof";return cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},cu(h)}function M8(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}function F8(h,c){for(var m=0;m<c.length;m++){var g=c[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,V8(g.key),g)}}function j8(h,c,m){return c&&F8(h.prototype,c),Object.defineProperty(h,"prototype",{writable:!1}),h}function V8(h){var c=U8(h,"string");return cu(c)=="symbol"?c:c+""}function U8(h,c){if(cu(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var g=m.call(h,c);if(cu(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}function B8(h,c,m){return c=fu(c),$8(h,DI()?Reflect.construct(c,m||[],fu(h).constructor):c.apply(h,m))}function $8(h,c){if(c&&(cu(c)==="object"||typeof c=="function"))return c;if(c!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z8(h)}function z8(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function DI(){try{var h=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DI=function(){return!!h})()}function op(){return typeof Reflect<"u"&&Reflect.get?op=Reflect.get.bind():op=function(c,m,g){var P=H8(c,m);if(P){var F=Object.getOwnPropertyDescriptor(P,m);return F.get?F.get.call(arguments.length<3?c:g):F.value}},op.apply(this,arguments)}function H8(h,c){for(;!Object.prototype.hasOwnProperty.call(h,c)&&(h=fu(h),h!==null););return h}function fu(h){return fu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},fu(h)}function q8(h,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(c&&c.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),c&&Iv(h,c)}function Iv(h,c){return Iv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,P){return g.__proto__=P,g},Iv(h,c)}var W8=function(h){function c(m){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return M8(this,c),B8(this,c,["img",m,g])}return q8(c,h),j8(c,[{key:"closeTag",value:function(){return""}},{key:"attributes",value:function(){var g,P,F;g=op(fu(c.prototype),"attributes",this).call(this)||{},P=this.getOptions();var q=this.getOption("attributes")||{},se=this.getOption("srcset")||q.srcset,ne={};return Be()(se)?ne.srcset=se:ne=NI(this.publicId,q,se,P),Je(ne)||(delete g.width,delete g.height),qe()(g,ne),F=P.responsive&&!P.client_hints?"data-src":"src",g[F]==null&&(g[F]=Vs(this.publicId,this.getOptions())),g}}])}(Oo),ap=W8;function du(h){"@babel/helpers - typeof";return du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},du(h)}function K8(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}function G8(h,c){for(var m=0;m<c.length;m++){var g=c[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,Y8(g.key),g)}}function Q8(h,c,m){return c&&G8(h.prototype,c),Object.defineProperty(h,"prototype",{writable:!1}),h}function Y8(h){var c=X8(h,"string");return du(c)=="symbol"?c:c+""}function X8(h,c){if(du(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var g=m.call(h,c);if(du(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}function J8(h,c,m){return c=hu(c),Z8(h,LI()?Reflect.construct(c,m||[],hu(h).constructor):c.apply(h,m))}function Z8(h,c){if(c&&(du(c)==="object"||typeof c=="function"))return c;if(c!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e9(h)}function e9(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function LI(){try{var h=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LI=function(){return!!h})()}function lp(){return typeof Reflect<"u"&&Reflect.get?lp=Reflect.get.bind():lp=function(c,m,g){var P=t9(c,m);if(P){var F=Object.getOwnPropertyDescriptor(P,m);return F.get?F.get.call(arguments.length<3?c:g):F.value}},lp.apply(this,arguments)}function t9(h,c){for(;!Object.prototype.hasOwnProperty.call(h,c)&&(h=hu(h),h!==null););return h}function hu(h){return hu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},hu(h)}function n9(h,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(c&&c.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),c&&Rv(h,c)}function Rv(h,c){return Rv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,P){return g.__proto__=P,g},Rv(h,c)}var r9=function(h){function c(m){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return K8(this,c),J8(this,c,["source",m,g])}return n9(c,h),Q8(c,[{key:"closeTag",value:function(){return""}},{key:"attributes",value:function(){var g=this.getOption("srcset"),P=lp(hu(c.prototype),"attributes",this).call(this)||{},F=this.getOptions();return qe()(P,NI(this.publicId,P,g,F)),P.srcset||(P.srcset=Vs(this.publicId,F)),!P.media&&F.media&&(P.media=L8(F.media)),P}}])}(Oo),MI=r9;function pu(h){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},pu(h)}function i9(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}function s9(h,c){for(var m=0;m<c.length;m++){var g=c[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,a9(g.key),g)}}function o9(h,c,m){return c&&s9(h.prototype,c),Object.defineProperty(h,"prototype",{writable:!1}),h}function a9(h){var c=l9(h,"string");return pu(c)=="symbol"?c:c+""}function l9(h,c){if(pu(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var g=m.call(h,c);if(pu(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}function u9(h,c,m){return c=mu(c),c9(h,FI()?Reflect.construct(c,m||[],mu(h).constructor):c.apply(h,m))}function c9(h,c){if(c&&(pu(c)==="object"||typeof c=="function"))return c;if(c!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f9(h)}function f9(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function FI(){try{var h=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FI=function(){return!!h})()}function up(){return typeof Reflect<"u"&&Reflect.get?up=Reflect.get.bind():up=function(c,m,g){var P=d9(c,m);if(P){var F=Object.getOwnPropertyDescriptor(P,m);return F.get?F.get.call(arguments.length<3?c:g):F.value}},up.apply(this,arguments)}function d9(h,c){for(;!Object.prototype.hasOwnProperty.call(h,c)&&(h=mu(h),h!==null););return h}function mu(h){return mu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},mu(h)}function h9(h,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(c&&c.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),c&&Cv(h,c)}function Cv(h,c){return Cv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,P){return g.__proto__=P,g},Cv(h,c)}var p9=function(h){function c(m){var g,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return i9(this,c),g=u9(this,c,["picture",m,P]),g.widthList=F,g}return h9(c,h),o9(c,[{key:"content",value:function(){var g=this;return this.widthList.map(function(P){var F=P.min_width,q=P.max_width,se=P.transformation,ne=g.getOptions(),we=new Oi(ne);return we.chain().fromOptions(typeof se=="string"?{raw_transformation:se}:se),ne=nr(ne),ne.media={min_width:F,max_width:q},ne.transformation=we,new MI(g.publicId,ne).toHtml()}).join("")+new ap(this.publicId,this.getOptions()).toHtml()}},{key:"attributes",value:function(){var g=up(mu(c.prototype),"attributes",this).call(this);return delete g.width,delete g.height,g}},{key:"closeTag",value:function(){return"</"+this.name+">"}}])}(Oo),Av=p9;function gu(h){"@babel/helpers - typeof";return gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},gu(h)}function m9(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}function g9(h,c){for(var m=0;m<c.length;m++){var g=c[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,v9(g.key),g)}}function y9(h,c,m){return c&&g9(h.prototype,c),Object.defineProperty(h,"prototype",{writable:!1}),h}function v9(h){var c=_9(h,"string");return gu(c)=="symbol"?c:c+""}function _9(h,c){if(gu(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var g=m.call(h,c);if(gu(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}function w9(h,c,m){return c=yu(c),E9(h,jI()?Reflect.construct(c,m||[],yu(h).constructor):c.apply(h,m))}function E9(h,c){if(c&&(gu(c)==="object"||typeof c=="function"))return c;if(c!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b9(h)}function b9(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function jI(){try{var h=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jI=function(){return!!h})()}function cp(){return typeof Reflect<"u"&&Reflect.get?cp=Reflect.get.bind():cp=function(c,m,g){var P=T9(c,m);if(P){var F=Object.getOwnPropertyDescriptor(P,m);return F.get?F.get.call(arguments.length<3?c:g):F.value}},cp.apply(this,arguments)}function T9(h,c){for(;!Object.prototype.hasOwnProperty.call(h,c)&&(h=yu(h),h!==null););return h}function yu(h){return yu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},yu(h)}function S9(h,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(c&&c.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),c&&Pv(h,c)}function Pv(h,c){return Pv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,P){return g.__proto__=P,g},Pv(h,c)}var x9=["source_types","source_transformation","fallback_content","poster","sources"],I9=["webm","mp4","ogv"],R9={format:"jpg",resource_type:"video"},C9=function(h){function c(m){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return m9(this,c),g=Oe({},g,ts),w9(this,c,["video",m.replace(/\.(mp4|ogv|webm)$/,""),g])}return S9(c,h),y9(c,[{key:"setSourceTransformation",value:function(g){return this.transformation().sourceTransformation(g),this}},{key:"setSourceTypes",value:function(g){return this.transformation().sourceTypes(g),this}},{key:"setPoster",value:function(g){return this.transformation().poster(g),this}},{key:"setFallbackContent",value:function(g){return this.transformation().fallbackContent(g),this}},{key:"content",value:function(){var g=this,P=this.transformation().getValue("source_types"),F=this.transformation().getValue("source_transformation"),q=this.transformation().getValue("fallback_content"),se=this.getOption("sources"),ne=[];return ge()(se)&&!Je(se)?ne=se.map(function(we){var Ue=Vs(g.publicId,Oe({},we.transformations||{},{resource_type:"video",format:we.type}),g.getOptions());return g.createSourceTag(Ue,we.type,we.codecs)}):(Je(P)&&(P=I9),ge()(P)&&(ne=P.map(function(we){var Ue=Vs(g.publicId,Oe({},F[we]||{},{resource_type:"video",format:we}),g.getOptions());return g.createSourceTag(Ue,we)}))),ne.join("")+q}},{key:"attributes",value:function(){var g=this.getOption("source_types"),P=this.getOption("poster");if(P===void 0&&(P={}),fe()(P)){var F=P.public_id!=null?Ls:R9;P=Vs(P.public_id||this.publicId,Oe({},P,F,this.getOptions()))}var q=cp(yu(c.prototype),"attributes",this).call(this)||{};q=H(q,x9);var se=this.getOption("sources"),ne=!Je(se)||Je(g)||ge()(g);return ne||(q.src=Vs(this.publicId,this.getOptions(),{resource_type:"video",format:g})),P!=null&&(q.poster=P),q}},{key:"createSourceTag",value:function(g,P){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,q=null;if(!Je(P)){var se=P==="ogv"?"ogg":P;if(q="video/"+se,!Je(F)){var ne=ge()(F)?F.join(", "):F;q+="; codecs="+ne}}return"<source "+this.htmlAttrs({src:g,type:q})+">"}}])}(Oo),kv=C9;function vu(h){"@babel/helpers - typeof";return vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},vu(h)}function A9(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}function P9(h,c){for(var m=0;m<c.length;m++){var g=c[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,O9(g.key),g)}}function k9(h,c,m){return c&&P9(h.prototype,c),Object.defineProperty(h,"prototype",{writable:!1}),h}function O9(h){var c=N9(h,"string");return vu(c)=="symbol"?c:c+""}function N9(h,c){if(vu(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var g=m.call(h,c);if(vu(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}function D9(h,c,m){return c=fp(c),L9(h,VI()?Reflect.construct(c,m||[],fp(h).constructor):c.apply(h,m))}function L9(h,c){if(c&&(vu(c)==="object"||typeof c=="function"))return c;if(c!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M9(h)}function M9(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function VI(){try{var h=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VI=function(){return!!h})()}function fp(h){return fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},fp(h)}function F9(h,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(c&&c.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),c&&Ov(h,c)}function Ov(h,c){return Ov=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,P){return g.__proto__=P,g},Ov(h,c)}var j9=function(h){function c(m){return A9(this,c),D9(this,c,["meta",void 0,W()({"http-equiv":"Accept-CH",content:"DPR, Viewport-Width, Width"},m)])}return F9(c,h),k9(c,[{key:"closeTag",value:function(){return""}}])}(Oo),UI=j9;function V9(h){return z9(h)||$9(h)||B9(h)||U9()}function U9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B9(h,c){if(h){if(typeof h=="string")return Nv(h,c);var m=Object.prototype.toString.call(h).slice(8,-1);if(m==="Object"&&h.constructor&&(m=h.constructor.name),m==="Map"||m==="Set")return Array.from(h);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return Nv(h,c)}}function $9(h){if(typeof Symbol<"u"&&h[Symbol.iterator]!=null||h["@@iterator"]!=null)return Array.from(h)}function z9(h){if(Array.isArray(h))return Nv(h)}function Nv(h,c){(c==null||c>h.length)&&(c=h.length);for(var m=0,g=new Array(c);m<c;m++)g[m]=h[m];return g}function H9(h){return ge()(h)?h:h.constructor.name==="NodeList"?V9(h):Be()(h)?Array.prototype.slice.call(document.querySelectorAll(h),0):[h]}function q9(h,c,m,g){return new Promise(function(P,F){h.innerHTML=c.videoTag(m,g).toHtml();var q=h.querySelector(".cld-transparent-video");q.style.width="100%",P(h)})}var W9=q9;function K9(h,c){h.transformation?h.transformation.push({flags:[c]}):(h.flags||(h.flags=[]),typeof h.flags=="string"&&(h.flags=[h.flags]),h.flags.push(c))}var G9=K9;function Q9(h){h.autoplay=!0,h.muted=!0,h.controls=!1,h.max_timeout_ms=h.max_timeout_ms||Zi,h.class=h.class||"",h.class+=" cld-transparent-video",h.externalLibraries=h.externalLibraries||{},h.externalLibraries.seeThru||(h.externalLibraries.seeThru=Yt.seeThru),G9(h,"alpha")}var Y9=Q9;function X9(h,c,m){return new Promise(function(g,P){if(m)g();else{var F=document.createElement("script");F.src=h;var q=setTimeout(function(){P({status:"error",message:"Timeout loading script ".concat(h)})},c);F.onerror=function(){clearTimeout(q),P({status:"error",message:"Error loading ".concat(h)})},F.onload=function(){clearTimeout(q),g()},document.head.appendChild(F)}})}var J9=X9;function Z9(h,c){return setTimeout(function(){c({status:"error",message:"Timeout loading Blob URL"})},h)}function eV(h,c){return new Promise(function(m,g){var P=Z9(c,g),F=typeof fetch<"u"&&fetch?tV:nV;F(h).then(function(q){m({status:"success",payload:{blobURL:URL.createObjectURL(q)}})}).catch(function(){g({status:"error",message:"Error loading Blob URL"})}).finally(function(){clearTimeout(P)})})}function tV(h){return new Promise(function(c,m){fetch(h).then(function(g){g.blob().then(function(P){c(P)})}).catch(function(){m("error")})})}function nV(h){return new Promise(function(c,m){var g=new XMLHttpRequest;g.responseType="blob",g.onload=function(P){c(g.response)},g.onerror=function(){m("error")},g.open("GET",h,!0),g.send()})}var rV=eV;function iV(h){var c=h.autoplay,m=h.playsinline,g=h.loop,P=h.muted,F=h.poster,q=h.blobURL,se=h.videoURL,ne=document.createElement("video");return ne.style.visibility="hidden",ne.position="absolute",ne.x=0,ne.y=0,ne.src=q,ne.setAttribute("data-video-url",se),c&&ne.setAttribute("autoplay",c),m&&ne.setAttribute("playsinline",m),g&&ne.setAttribute("loop",g),P&&ne.setAttribute("muted",P),P&&(ne.muted=P),F&&ne.setAttribute("poster",F),ne.onload=function(){URL.revokeObjectURL(q)},ne}var sV=iV;function oV(h,c,m,g){var P=window,F=P.seeThru,q=P.setTimeout,se=P.clearTimeout;return new Promise(function(ne,we){var Ue=q(function(){we({status:"error",message:"Timeout instantiating seeThru instance"})},c);if(F)var Ze=F.create(h).ready(function(){se(Ue);var ft=Ze.getCanvas();ft.style.width="100%",ft.className+=" "+m,g&&Ze.play(),ne(Ze)});else we({status:"error",message:"Error instantiating seeThru instance"})})}var aV=oV;function lV(h,c,m){var g=m.poster,P=m.autoplay,F=m.playsinline,q=m.loop,se=m.muted;return c=c+".mp4",new Promise(function(ne,we){J9(m.externalLibraries.seeThru,m.max_timeout_ms,window.seeThru).then(function(){rV(c,m.max_timeout_ms).then(function(Ue){var Ze=Ue.payload,ft=sV({blobURL:Ze.blobURL,videoURL:c,poster:g,autoplay:P,playsinline:F,loop:q,muted:se});h.appendChild(ft),aV(ft,m.max_timeout_ms,m.class,m.autoplay).then(function(){ne(h)}).catch(function(jt){we(jt)})}).catch(function(Ue){var Ze=Ue.status,ft=Ue.message;we({status:Ze,message:ft})})}).catch(function(Ue){var Ze=Ue.status,ft=Ue.message;we({status:Ze,message:ft})})})}var uV=lV;function cV(){return new Promise(function(h,c){Rt()&&h(!1);var m=document.createElement("video"),g=m.canPlayType&&m.canPlayType('video/webm; codecs="vp9"');h(g==="maybe"||g==="probably")})}var fV=cV;function uf(h){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},uf(h)}function dV(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}function BI(h,c){for(var m=0;m<c.length;m++){var g=c[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,pV(g.key),g)}}function hV(h,c,m){return c&&BI(h.prototype,c),m&&BI(h,m),Object.defineProperty(h,"prototype",{writable:!1}),h}function pV(h){var c=mV(h,"string");return uf(c)=="symbol"?c:c+""}function mV(h,c){if(uf(h)!="object"||!h)return h;var m=h[Symbol.toPrimitive];if(m!==void 0){var g=m.call(h,c);if(uf(g)!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}var $I,zI,HI,qI,Dv,WI;HI=function(c){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;return m*Math.ceil(c/m)},zI=function(c,m){var g;for(g=c.length-2;g>=0&&c[g]>=m;)g--;return c[g+1]},$I=function(c,m,g,P){var F,q,se,ne;return ne=(F=(q=(se=P.responsive_use_breakpoints)!=null?se:P.responsive_use_stoppoints)!=null?q:this.config("responsive_use_breakpoints"))!=null?F:this.config("responsive_use_stoppoints"),!ne||ne==="resize"&&!P.resizing?m:this.calc_breakpoint(c,m,g)},qI=function(c){var m,g;for(m=0;(c=c!=null?c.parentNode:void 0)instanceof Element&&!m;)g=window.getComputedStyle(c),/^inline/.test(g.display)||(m=Fh(c));return m},WI=function(c,m){return c.replace(/\bdpr_(1\.0|auto)\b/g,"dpr_"+this.device_pixel_ratio(m))},Dv=function(c,m){var g;return g=mt(m,"width")||0,c>g&&(g=c,rr(m,"width",c)),g};var KI=function(){function h(c){dV(this,h);var m;this.devicePixelRatioCache={},this.responsiveConfig={},this.responsiveResizeInitialized=!1,m=new Ka(c),this.config=function(g,P){return m.config(g,P)},this.fromDocument=function(){return m.fromDocument(),this},this.fromEnvironment=function(){return m.fromEnvironment(),this},this.init=function(){return m.init(),this}}return hV(h,[{key:"url",value:function(m){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Vs(m,g,this.config())}},{key:"video_url",value:function(m,g){return g=W()({resource_type:"video"},g),this.url(m,g)}},{key:"video_thumbnail_url",value:function(m,g){return g=W()({},er,g),this.url(m,g)}},{key:"transformation_string",value:function(m){return new Oi(m).serialize()}},{key:"image",value:function(m){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},P,F,q;return F=this.imageTag(m,g),P=(q=g.client_hints!=null?g.client_hints:this.config("client_hints"))!=null?q:!1,g.src==null&&!P&&F.setAttr("src",""),F=F.toDOM(),P||(rr(F,"src-cache",this.url(m,g)),this.cloudinary_update(F,g)),F}},{key:"imageTag",value:function(m,g){var P;return P=new ap(m,this.config()),P.transformation().fromOptions(g),P}},{key:"pictureTag",value:function(m,g,P){var F;return F=new Av(m,this.config(),P),F.transformation().fromOptions(g),F}},{key:"sourceTag",value:function(m,g){var P;return P=new MI(m,this.config()),P.transformation().fromOptions(g),P}},{key:"video_thumbnail",value:function(m,g){return this.image(m,qe()({},er,g))}},{key:"facebook_profile_image",value:function(m,g){return this.image(m,W()({type:"facebook"},g))}},{key:"twitter_profile_image",value:function(m,g){return this.image(m,W()({type:"twitter"},g))}},{key:"twitter_name_profile_image",value:function(m,g){return this.image(m,W()({type:"twitter_name"},g))}},{key:"gravatar_image",value:function(m,g){return this.image(m,W()({type:"gravatar"},g))}},{key:"fetch_image",value:function(m,g){return this.image(m,W()({type:"fetch"},g))}},{key:"video",value:function(m){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.videoTag(m,g).toHtml()}},{key:"videoTag",value:function(m,g){return g=Oe({},g,this.config()),new kv(m,g)}},{key:"sprite_css",value:function(m,g){return g=W()({type:"sprite"},g),m.match(/.css$/)||(g.format="css"),this.url(m,g)}},{key:"responsive",value:function(m){var g=this,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,F,q,se,ne,we,Ue;if(this.responsiveConfig=qe()(this.responsiveConfig||{},m),ne=(F=this.responsiveConfig.responsive_class)!=null?F:this.config("responsive_class"),P&&this.cloudinary_update("img.".concat(ne,", img.cld-hidpi"),this.responsiveConfig),we=(q=(se=this.responsiveConfig.responsive_resize)!=null?se:this.config("responsive_resize"))!=null?q:!0,we&&!this.responsiveResizeInitialized){this.responsiveConfig.resizing=this.responsiveResizeInitialized=!0,Ue=null;var Ze=function(){var jt,Us,No,ds,_u,wu,Bs;return jt=(Us=(No=g.responsiveConfig.responsive_debounce)!=null?No:g.config("responsive_debounce"))!=null?Us:100,ds=function(){Ue&&(clearTimeout(Ue),Ue=null)},_u=function(){return g.cloudinary_update("img.".concat(ne),g.responsiveConfig)},Bs=function(){return ds(),_u()},wu=function(){ds(),Ue=setTimeout(Bs,jt)},jt?wu():_u()};return window.addEventListener("resize",Ze),function(){return window.removeEventListener("resize",Ze)}}}},{key:"calc_breakpoint",value:function(m,g,P){var F=mt(m,"breakpoints")||mt(m,"stoppoints")||this.config("breakpoints")||this.config("stoppoints")||HI;return nt()(F)?F(g,P):(Be()(F)&&(F=F.split(",").map(function(q){return parseInt(q)}).sort(function(q,se){return q-se})),zI(F,g))}},{key:"calc_stoppoint",value:function(m,g,P){return this.calc_breakpoint(m,g,P)}},{key:"device_pixel_ratio",value:function(m){m=m??!0;var g=(typeof window<"u"&&window!==null?window.devicePixelRatio:void 0)||1;m&&(g=Math.ceil(g)),(g<=0||g===NaN)&&(g=1);var P=g.toString();return P.match(/^\d+$/)&&(P+=".0"),P}},{key:"processImageTags",value:function(m,g){if(Je(m))return this;g=Oe({},g||{},this.config());var P=m.filter(function(F){return/^img$/i.test(F.tagName)}).map(function(F){var q=W()({width:F.getAttribute("width"),height:F.getAttribute("height"),src:F.getAttribute("src")},g),se=q.source||q.src;delete q.source,delete q.src;var ne=new Oi(q).toHtmlAttributes();return rr(F,"src-cache",Vs(se,q)),F.setAttribute("width",ne.width),F.setAttribute("height",ne.height),F});return this.cloudinary_update(P,g),this}},{key:"cloudinary_update",value:function(m,g){var P=this,F,q,se,ne;if(m===null)return this;g==null&&(g={});var we=g.responsive!=null?g.responsive:this.config("responsive");m=H9(m);var Ue;this.responsiveConfig&&this.responsiveConfig.responsive_class!=null?Ue=this.responsiveConfig.responsive_class:g.responsive_class!=null?Ue=g.responsive_class:Ue=this.config("responsive_class");var Ze=g.round_dpr!=null?g.round_dpr:this.config("round_dpr");return m.forEach(function(ft){if(/img/i.test(ft.tagName)){var jt=!0;if(we&&ui(ft,Ue),q=mt(ft,"src-cache")||mt(ft,"src"),!Je(q)){q=WI.call(P,q,Ze),Oo.isResponsive(ft,Ue)&&(F=qI(ft),F!==0?(/w_auto:breakpoints/.test(q)?(ne=Dv(F,ft),ne?q=q.replace(/w_auto:breakpoints([_0-9]*)(:[0-9]+)?/,"w_auto:breakpoints$1:".concat(ne)):jt=!1):(se=/w_auto(:(\d+))?/.exec(q),se&&(ne=$I.call(P,ft,F,se[2],g),ne=Dv(ne,ft),ne?q=q.replace(/w_auto[^,\/]*/g,"w_".concat(ne)):jt=!1)),ja(ft,"width"),g.responsive_preserve_height||ja(ft,"height")):jt=!1);var Us=g.loading==="lazy"&&!P.isNativeLazyLoadSupported()&&P.isLazyLoadSupported()&&!m[0].getAttribute("src");(jt||Us)&&P.setAttributeIfExists(m[0],"width","data-width"),jt&&!Us&&rs(ft,"src",q)}}}),this}},{key:"setAttributeIfExists",value:function(m,g,P){var F=m.getAttribute(P);F!=null&&rs(m,g,F)}},{key:"isLazyLoadSupported",value:function(){return window&&"IntersectionObserver"in window}},{key:"isNativeLazyLoadSupported",value:function(){return"loading"in HTMLImageElement.prototype}},{key:"transformation",value:function(m){return Oi.new(this.config()).fromOptions(m).setParent(this)}},{key:"injectTransparentVideoElement",value:function(m,g){var P=this,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(q,se){m||se({status:"error",message:"Expecting htmlElContainer to be HTMLElement"}),Y9(F);var ne=P.video_url(g,F);fV().then(function(we){var Ue;we?(Ue=W9(m,P,g,F),q(m)):Ue=uV(m,ne,F),Ue.then(function(){q(m)}).catch(function(Ze){var ft=Ze.status,jt=Ze.message;se({status:ft,message:jt})})}).catch(function(we){var Ue=we.status,Ze=we.message;se({status:Ue,message:Ze})})})}}],[{key:"new",value:function(m){return new this(m)}}])}();W()(KI,C);var GI=KI;w.default={ClientHintsMetaTag:UI,Cloudinary:GI,Condition:Nt,Configuration:Ka,crc32:T,Expression:ln,FetchLayer:np,HtmlTag:Oo,ImageTag:ap,Layer:us,PictureTag:Av,SubtitlesLayer:cs,TextLayer:d,Transformation:Oi,utf8_encode:B,Util:k,VideoTag:kv}},"lodash/assign":function(R,w){R.exports=r},"lodash/cloneDeep":function(R,w){R.exports=i},"lodash/compact":function(R,w){R.exports=s},"lodash/difference":function(R,w){R.exports=o},"lodash/functions":function(R,w){R.exports=a},"lodash/identity":function(R,w){R.exports=l},"lodash/includes":function(R,w){R.exports=u},"lodash/isArray":function(R,w){R.exports=f},"lodash/isElement":function(R,w){R.exports=p},"lodash/isFunction":function(R,w){R.exports=y},"lodash/isPlainObject":function(R,w){R.exports=_},"lodash/isString":function(R,w){R.exports=E},"lodash/merge":function(R,w){R.exports=S},"lodash/trim":function(R,w){R.exports=I}})})})(GF);var bj=GF.exports;const Tj=(t,e=500)=>{const[n,r]=O.useState(t),[i,s]=O.useState(!1);return O.useEffect(()=>{const o=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(o)}},[t,e]),[n,i,s]};function Sj(){const t=Aa(),{register:e,handleSubmit:n,formState:{errors:r,isSubmitting:i,isSubmitted:s}}=rh(),[o,a]=O.useState(null),[l,u]=O.useState(""),[f,p]=O.useState(""),[y,_]=O.useState(!1);new bj.Cloudinary({cloud_name:"dnpesnh4i"});const[E,S]=O.useState(""),[I]=Tj(E),[R,w]=O.useState(!1),[v,C]=O.useState(!1),{currentUser:k,registerUzer:B,loginWithProvider:D,setCurrentUser:T,db:N,isFirstLogin:L}=Jn(),{setIsFirstLogin:V,transformCloudinaryURL:j}=Cr(),M=async X=>{const G="https://api.cloudinary.com/v1_1/dnpesnh4i/image/upload",Y=new FormData;Y.append("file",X),Y.append("upload_preset","userProfile");try{return(await hn.post(G,Y,{headers:{"Content-Type":"multipart/form-data"}})).data.secure_url}catch(ce){throw console.error("Cloudinary Upload Error:",ce),ce}},le=async(X,G,Y,ce)=>{try{const ee=St(N,"users"),$=Hn(ee,br("uid","==",X)),K=await jn($);K.empty||K.forEach(async te=>{const Ee=Vn(N,"users",te.id);await gs(Ee,G).then(()=>{const Te={...k,username:Y.username,bio:Y.bio,profilePictureURL:ce};localStorage.setItem("user",JSON.stringify(Te))}).catch(Te=>{console.error(Te)}),t("/r-social/profile/me")})}catch(ee){console.error("Error updating user: ",ee)}},me=async X=>{if(u("Updating..."),o)try{u("Updating...");const G=await M(f);u("Updated successfully!");const Y=k.uid,ce={username:X.username,bio:X.bio,profilePictureURL:G};le(Y,ce,X,G);const ee={...k,username:X.username,bio:X.bio,profilePictureURL:G};V(!1)}catch(G){u("Update failed"),console.error("Error uploading the image:",G)}else alert("Please select an image to upload")},pe=X=>{const G=X.target.files[0];if(G){const Y=G.size/1024/1024,ce=G.type,ee=["image/jpeg","image/png","image/jpg"];if(Y>3){alert("File size exceeds 3MB"),X.target.value=null;return}if(!ee.includes(ce)){alert("File format not allowed. Please upload a JPG, JPEG, or PNG file."),X.target.value=null;return}const $=URL.createObjectURL(G);p(G),a($)}};return O.useEffect(()=>{(async()=>{if(!E)return;_(!0);const G=St(N,"users"),Y=Hn(G,br("username","==",E));try{const ce=await jn(Y);C(!ce.empty)}catch(ce){console.error("Error checking username: ",ce),C(!1)}finally{_(!1)}})()},[I,N]),x.jsxs("div",{className:"max-w-md mx-auto bg-white shadow-lg rounded-lg p-6 mt-10 border-2",children:[x.jsx("h2",{className:"text-2xl font-semibold text-center text-gray-800 mb-4",children:"Profile"}),x.jsxs("form",{onSubmit:n(me),className:"space-y-6",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Username"}),x.jsx("input",{required:!0,value:E,onInput:X=>{S(X.target.value.trim()),X.target.value===""&&w(!1)},type:"text",...e("username",{required:!0,minLength:{value:3,message:"Username must have atleast 3 characters"},maxLength:{value:18,message:"Username must be atmost 18 characters"}}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Your username"}),r.username&&x.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.username.message}),y&&x.jsx("p",{children:"Checking Username..."}),v?I!==""?x.jsxs("p",{className:"text-red-500 text-sm mt-1",children:['Username "',I,'" already exists']}):"":I!==""?x.jsx("p",{className:"text-green-500 text-sm mt-1",children:"Username available"}):""]}),x.jsx("br",{}),x.jsxs("div",{className:"relative w-32 h-32 mx-auto",children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center mb-2",children:"Profile Picture"}),x.jsxs("div",{className:"relative w-32 h-32 rounded-full overflow-hidden shadow-lg mx-auto",children:[x.jsxs("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center text-gray-400",children:[o?x.jsx("img",{src:o,alt:"Profile Preview",className:"w-full h-full object-cover rounded-full"}):x.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center text-gray-400",children:x.jsx(IP,{size:40})}),x.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity cursor-pointer",children:[x.jsx(IP,{size:40,className:"text-white"}),x.jsx("input",{type:"file",accept:"image/jpeg, image/png, image/jpg",...e("profilePic",{required:!0}),className:"absolute inset-0 opacity-0 cursor-pointer",onChange:pe})]})]}),r.profilePic&&x.jsx("p",{className:"text-red-500 text-sm mt-1",children:"Profile picture is required"})]})]}),x.jsx("br",{}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bio"}),x.jsx("textarea",{...e("bio",{required:!0,maxLength:200}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:k!=null&&k.bio?k.bio:"Tell us about yourself (Max 200 characters)",rows:"3"}),r.bio&&x.jsx("p",{className:"text-red-500 text-sm mt-1",children:"Bio is required (Max 200 characters)"})]}),x.jsx("button",{type:"submit",disabled:i||v,className:"w-full bg-indigo-600 text-white font-medium py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 font-mono disabled:bg-slate-500 ",children:"Update"}),x.jsx("span",{children:i&&x.jsx(Ky,{type:"spin",color:"blue",height:"20%",width:"20%"})})]}),l&&x.jsx("p",{className:"text-center text-3xl text-green-400",children:l})]})}const un=new RTCPeerConnection({iceServers:[{urls:"stun:stun.relay.metered.ca:80"},{urls:"turn:asia.relay.metered.ca:80",username:"c20d0dff569efd5a90eac573",credential:"swfhQU7SNnjQeQ"},{urls:"turn:asia.relay.metered.ca:80?transport=tcp",username:"c20d0dff569efd5a90eac573",credential:"swfhQU7SNnjQeQ"},{urls:"turn:asia.relay.metered.ca:443",username:"c20d0dff569efd5a90eac573",credential:"swfhQU7SNnjQeQ"},{urls:"turns:asia.relay.metered.ca:443?transport=tcp",username:"c20d0dff569efd5a90eac573",credential:"swfhQU7SNnjQeQ"}]});function Gae(){var j,M,le,me,pe,X;const{currentUser:t}=Jn(),e=O.useRef(null);let{username:n}=pS();const r=Aa(),[i,s]=O.useState({}),[o,a]=O.useState(!1),[l,u]=O.useState(),f=O.useRef(null),{isFirstLogin:p,setIsFirstLogin:y,getUserDetailsById:_,getUsers:E,userArray:S,isFollowing:I,getValueByKey:R,setDisplayUser:w,displayUser:v,setIsFollowing:C,transformCloudinaryURL:k}=Cr(),B=()=>{var G;n==="me"?(u("me"),a(Y=>!Y)):(u("specific"),a(Y=>!Y)),(G=f.current)==null||G.scrollIntoView({block:"center",behavior:"smooth"})},D=()=>{un.close(),e.current&&e.current()},T=async()=>{const G=i==null?void 0:i.roomID,Y=i==null?void 0:i.viewerDocId,ce=Vn(Bi,"rooms",G);St(ce,`${t.uid.trim()}`),Vn(Bi,"rooms",G,t.uid,i.viewerDocId);const ee=Vn(Bi,"rooms",G,t==null?void 0:t.uid,Y);try{const Ee=await kb(ce),Te=(Ee==null?void 0:Ee.data().viewers)||[];console.log(Te),Te.includes(t==null?void 0:t.uid)?console.log("Already a viewer"):(await bg(ce,{viewers:[...Te,t==null?void 0:t.uid]}),console.log("User not in []"))}catch(Ee){console.log("error: ",Ee)}console.log("room id from viewer (verify) ⚠️ ",i==null?void 0:i.roomID),console.log("#### viewerDocId (verify) ⚠️###  ",i==null?void 0:i.viewerDocId);const $=St(ee,"answerIceCandidates");un.onicecandidate=Ee=>{Ee.candidate&&(console.log("===viewer Ice Candidates coming==="),console.log(Ee.candidate.toJSON()),Tg($,Ee.candidate.toJSON()))};const K=document.getElementById("remoteVideo"),te=document.createElement("video");console.log(K),K.autoPlay=!0,K.muted=!0,un.ontrack=async Ee=>{Ee.streams[0]?(te.srcObject=Ee.streams[0],console.log("Remote stream received:",Ee.streams[0]),K.srcObject=Ee.streams[0]):console.warn("No stream found in ontrack event.")},ic(ce,async Ee=>{if(un.connectionState!=="connected"&&Ee.exists()){const Te=Ee.data();if(Te!=null&&Te.offer)try{console.log("Offer: ",Te.offer);const W=new RTCSessionDescription(Te.offer);un.setRemoteDescription(W).then(()=>{const Se=St(ee,"offerIceCandidates");e.current=ic(Se,be=>{be.docChanges().forEach(async xe=>{if(console.log("change in offerIceCandidates"),xe.type==="added"){console.log("broadcaster added");const Ke=new RTCIceCandidate(xe.doc.data());un.addIceCandidate(Ke)}})})}).catch(Se=>console.error(Se)),console.log("remoteDesc was set at viewer END");const ue=await un.createAnswer();await un.setLocalDescription(ue),await bg(ee,{answer:{type:ue.type,sdp:ue.sdp}})}catch(W){console.error(W)}else console.log("no OFFER 😢")}}),un.addEventListener("icegatheringstatechange",()=>{console.log(`ICE gathering state changed: ${un.iceGatheringState}`)}),un.addEventListener("connectionstatechange",()=>{console.log(`Connection state change: ${un.connectionState}`)}),un.addEventListener("signalingstatechange",()=>{console.log(`Signaling state change: ${un.signalingState}`)}),un.addEventListener("iceconnectionstatechange ",()=>{console.log(`ICE connection state change: ${un.iceConnectionState}`)}),un.addEventListener("track",Ee=>{console.log(`ICE connection state change: ${un.iceConnectionState}`),console.log(Ee)}),console.log(un.connectionState," AND ",un.iceConnectionState)};O.useEffect(()=>{S==null||S.forEach(G=>{const Y=S==null?void 0:S.find(ce=>ce.username===n);Y&&s(Y)})},[S,n]);const N=()=>t&&t.profilePictureURL?k(t.profilePictureURL):"https://i.pinimg.com/736x/90/d1/ac/90d1ac48711f63c6a290238c8382632f.jpg";function L(){r("/r-social/firstLogin")}async function V(){if(confirm("Do you want to DELETE your account? 🥺")){const G=tl.currentUser;if(G)try{(await jn(Hn(St(Bi,"users"),br("uid","==",G.uid)))).forEach(async ce=>{const ee=ce.id;await dM(Vn(Bi,"users",ee))}),await G.delete(),alert(`User ${G.email} deleted successfully`),r("/r-social/register",{replace:!0})}catch(Y){alert("Error deleting user account: ",Y),r("/r-social/profile",{replace:!0})}else alert("No user is currently signed in.")}else alert("Welcome back Champ! 🥳🍾")}return O.useEffect(()=>{R(S,t==null?void 0:t.uid)},[]),x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"h-full overflow-hidden  flex    bg-slate-500",children:p&&n==="me"?x.jsx(Sj,{}):x.jsxs("div",{className:"max-w-2xl border-2 border-cyan-100  mx-4 sm:max-w-sm md:max-w-sm lg:max-w-sm xl:max-w-sm sm:mx-auto md:mx-auto lg:mx-auto xl:mx-auto mt-16 bg-white shadow-xl rounded-lg text-gray-900 mb-10",children:[x.jsx("div",{className:"rounded-t-lg h-32 overflow-hidden",children:x.jsx("img",{className:"object-cover object-top w-full",src:"https://images.unsplash.com/photo-1549880338-65ddcdfd017b?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=400&fit=max&ixid=eyJhcHBfaWQiOjE0NTg5fQ",alt:"Mountain"})}),x.jsx("div",{className:"mx-auto w-32 h-32 relative -mt-16 border-4 border-white rounded-full overflow-hidden",children:x.jsx("img",{className:"object-cover object-center h-32",src:n==="me"?N():S&&i.profilePictureURL,alt:"Baingan Pic"})}),x.jsxs("div",{className:"text-center mt-2",children:[x.jsx("h2",{className:"font-semibold",children:n==="me"?t&&t.username:i.username}),x.jsx("p",{className:"text-gray-500",children:n==="me"?t&&t.bio:i.bio})]}),x.jsxs("ul",{className:"py-4 mt-2 text-gray-700 flex items-center justify-around",children:[x.jsxs("li",{className:"flex flex-col items-center justify-around",children:[x.jsx(qn,{to:`/r-social/profile/${n}/following`,children:x.jsx("svg",{className:"w-4 fill-current text-blue-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:x.jsx("path",{d:"M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"})})}),x.jsxs("div",{children:[n==="me"?t&&((j=t.following)==null?void 0:j.length):S&&((M=i==null?void 0:i.following)==null?void 0:M.length),x.jsx("span",{children:" Following"})]})]}),x.jsxs("li",{className:"flex flex-col items-center justify-between",children:[x.jsx(qn,{to:`/r-social/profile/${n}/followers`,children:x.jsx("svg",{className:"w-4 fill-current text-blue-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:x.jsx("path",{d:"M7 8a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm0 1c2.15 0 4.2.4 6.1 1.09L12 16h-1.25L10 20H4l-.75-4H2L.9 10.09A17.93 17.93 0 0 1 7 9zm8.31.17c1.32.18 2.59.48 3.8.92L18 16h-1.25L16 20h-3.96l.37-2h1.25l1.65-8.83zM13 0a4 4 0 1 1-1.33 7.76 5.96 5.96 0 0 0 0-7.52C12.1.1 12.53 0 13 0z"})})}),x.jsxs("div",{children:[n==="me"?t&&((le=t.followers)==null?void 0:le.length):S&&((me=i==null?void 0:i.followers)==null?void 0:me.length),x.jsx("span",{children:" Followers"})]})]}),x.jsxs("li",{className:"flex flex-col items-center justify-around",children:[x.jsx("button",{onClick:B,children:x.jsx("svg",{className:"w-4 fill-current text-blue-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:x.jsx("path",{d:"M9 12H1v6a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-6h-8v2H9v-2zm0-1H0V5c0-1.1.9-2 2-2h4V2a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1h4a2 2 0 0 1 2 2v6h-9V9H9v2zm3-8V2H8v1h4z"})})}),x.jsxs("div",{children:[n==="me"?(pe=t==null?void 0:t.posts)==null?void 0:pe.length:S&&((X=i==null?void 0:i.posts)==null?void 0:X.length),x.jsx("span",{children:" Posts"})]})]})]}),n==="me"&&x.jsxs("div",{className:"p-4 border-t mx-8 mt-2",children:[x.jsx("div",{className:"p-4  rounded-lg flex items-center justify-center",children:x.jsxs("button",{onClick:L,className:"  mx-auto rounded-full bg-blue-700 hover:shadow-lg font-semibold text-white px-6 py-2 flex items-center",children:["Edit Profile",x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 fill-current ml-2",x:"0px",y:"0px",width:"100",height:"100",viewBox:"0 0 50 50",children:x.jsx("path",{d:"M 43.125 2 C 41.878906 2 40.636719 2.488281 39.6875 3.4375 L 38.875 4.25 L 45.75 11.125 C 45.746094 11.128906 46.5625 10.3125 46.5625 10.3125 C 48.464844 8.410156 48.460938 5.335938 46.5625 3.4375 C 45.609375 2.488281 44.371094 2 43.125 2 Z M 37.34375 6.03125 C 37.117188 6.0625 36.90625 6.175781 36.75 6.34375 L 4.3125 38.8125 C 4.183594 38.929688 4.085938 39.082031 4.03125 39.25 L 2.03125 46.75 C 1.941406 47.09375 2.042969 47.457031 2.292969 47.707031 C 2.542969 47.957031 2.90625 48.058594 3.25 47.96875 L 10.75 45.96875 C 10.917969 45.914063 11.070313 45.816406 11.1875 45.6875 L 43.65625 13.25 C 44.054688 12.863281 44.058594 12.226563 43.671875 11.828125 C 43.285156 11.429688 42.648438 11.425781 42.25 11.8125 L 9.96875 44.09375 L 5.90625 40.03125 L 38.1875 7.75 C 38.488281 7.460938 38.578125 7.011719 38.410156 6.628906 C 38.242188 6.246094 37.855469 6.007813 37.4375 6.03125 C 37.40625 6.03125 37.375 6.03125 37.34375 6.03125 Z"})})]})}),x.jsx("div",{className:"p-1   rounded-lg flex items-center justify-center",children:x.jsxs("button",{onClick:V,className:"  mx-auto rounded-full bg-red-600 hover:shadow-lg font-semibold text-white px-4 py-2 flex items-center",children:["Delete Profile",x.jsx("svg",{fill:"#000000",className:"h-6 w-6 fill-current ml-2",x:"0px",y:"0px",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"100",height:"100",viewBox:"0 0 50 50",xmlSpace:"preserve",children:x.jsx("g",{children:x.jsx("path",{d:`M36.335,5.668h-8.167V1.5c0-0.828-0.672-1.5-1.5-1.5h-12c-0.828,0-1.5,0.672-1.5,1.5v4.168H5.001c-1.104,0-2,0.896-2,2
		s0.896,2,2,2h2.001v29.168c0,1.381,1.119,2.5,2.5,2.5h22.332c1.381,0,2.5-1.119,2.5-2.5V9.668h2.001c1.104,0,2-0.896,2-2
		S37.438,5.668,36.335,5.668z M14.168,35.67c0,0.828-0.672,1.5-1.5,1.5s-1.5-0.672-1.5-1.5v-21c0-0.828,0.672-1.5,1.5-1.5
		s1.5,0.672,1.5,1.5V35.67z M22.168,35.67c0,0.828-0.672,1.5-1.5,1.5s-1.5-0.672-1.5-1.5v-21c0-0.828,0.672-1.5,1.5-1.5
		s1.5,0.672,1.5,1.5V35.67z M25.168,5.668h-9V3h9V5.668z M30.168,35.67c0,0.828-0.672,1.5-1.5,1.5s-1.5-0.672-1.5-1.5v-21
		c0-0.828,0.672-1.5,1.5-1.5s1.5,0.672,1.5,1.5V35.67z`})})})]})}),x.jsx("br",{}),x.jsx(qn,{to:"/r-social/profile/me/goLive",children:x.jsxs("div",{className:"p-1  mx-auto rounded-full bg-red-600 hover:shadow-lg font-semibold text-white px-4 py-2 flex items-center  justify-center",children:["Go LIVE   ",x.jsx("svg",{width:"25px",height:"25px",viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:x.jsx("g",{id:"🔍-Product-Icons",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:x.jsx("g",{id:"ic_fluent_live_24_filled",fill:"#FFFFFF",fillRule:"nonzero",children:x.jsx("path",{d:"M6.34277267,4.93867691 C6.73329697,5.3292012 6.73329697,5.96236618 6.34277267,6.35289047 C3.21757171,9.47809143 3.21757171,14.5450433 6.34277267,17.6702443 C6.73329697,18.0607686 6.73329697,18.6939336 6.34277267,19.0844579 C5.95224838,19.4749821 5.3190834,19.4749821 4.92855911,19.0844579 C1.02230957,15.1782083 1.02230957,8.84492646 4.92855911,4.93867691 C5.3190834,4.54815262 5.95224838,4.54815262 6.34277267,4.93867691 Z M19.0743401,4.93867691 C22.9805896,8.84492646 22.9805896,15.1782083 19.0743401,19.0844579 C18.6838158,19.4749821 18.0506508,19.4749821 17.6601265,19.0844579 C17.2696022,18.6939336 17.2696022,18.0607686 17.6601265,17.6702443 C20.7853275,14.5450433 20.7853275,9.47809143 17.6601265,6.35289047 C17.2696022,5.96236618 17.2696022,5.3292012 17.6601265,4.93867691 C18.0506508,4.54815262 18.6838158,4.54815262 19.0743401,4.93867691 Z M9.3094225,7.81205295 C9.69994679,8.20257725 9.69994679,8.83574222 9.3094225,9.22626652 C7.77845993,10.7572291 7.77845993,13.2394099 9.3094225,14.7703724 C9.69994679,15.1608967 9.69994679,15.7940617 9.3094225,16.184586 C8.91889821,16.5751103 8.28573323,16.5751103 7.89520894,16.184586 C5.58319778,13.8725748 5.58319778,10.1240641 7.89520894,7.81205295 C8.28573323,7.42152866 8.91889821,7.42152866 9.3094225,7.81205295 Z M16.267742,7.81205295 C18.5797531,10.1240641 18.5797531,13.8725748 16.267742,16.184586 C15.8772177,16.5751103 15.2440527,16.5751103 14.8535284,16.184586 C14.4630041,15.7940617 14.4630041,15.1608967 14.8535284,14.7703724 C16.384491,13.2394099 16.384491,10.7572291 14.8535284,9.22626652 C14.4630041,8.83574222 14.4630041,8.20257725 14.8535284,7.81205295 C15.2440527,7.42152866 15.8772177,7.42152866 16.267742,7.81205295 Z M12.0814755,10.5814755 C12.9099026,10.5814755 13.5814755,11.2530483 13.5814755,12.0814755 C13.5814755,12.9099026 12.9099026,13.5814755 12.0814755,13.5814755 C11.2530483,13.5814755 10.5814755,12.9099026 10.5814755,12.0814755 C10.5814755,11.2530483 11.2530483,10.5814755 12.0814755,10.5814755 Z",id:"🎨-Color"})})})})]})})]}),n!=="me"&&S&&(i==null?void 0:i.roomID)!==""?x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:T,className:"text-2xl rounded-lg  bg-green-400 p-4 m-4",children:"Join Live "}),x.jsx("button",{onClick:D,className:"text-2xl rounded-lg  bg-red-400 p-4 m-4",children:"Exit Live "}),x.jsx("hr",{})]}):"",x.jsx("video",{width:1280,height:720,className:"mx-auto border-cyan-500 rounded-2xl border-4",id:"remoteVideo",autoPlay:!0,playsInline:!0})]})}),x.jsx("div",{ref:f,id:"posts",children:o&&x.jsx(hd,{user:l})})]})}const Qae=()=>x.jsx(x.Fragment,{children:x.jsxs("div",{className:"w-full h-screen flex flex-col lg:flex-row items-center justify-center space-y-16 lg:space-y-0 space-x-8 2xl:space-x-0",children:[x.jsxs("div",{className:"w-full lg:w-1/2 flex flex-col items-center justify-center lg:px-2 xl:px-0 text-center",children:[x.jsx("p",{className:"text-7xl md:text-8xl lg:text-9xl font-bold tracking-wider text-gray-300",children:"404"}),x.jsx("p",{className:"text-4xl md:text-5xl lg:text-6xl font-bold tracking-wider text-gray-300 mt-2",children:"Page Not Found"}),x.jsx("p",{className:"text-lg md:text-xl lg:text-2xl text-gray-500 my-12",children:"Sorry, the page you are looking for could not be found."}),x.jsxs(HL,{to:"/r-social/",className:"flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 text-gray-100 px-4 py-2 rounded transition duration-150",title:"Return Home",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:x.jsx("path",{"fill-rule":"evenodd",d:"M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z","clip-rule":"evenodd"})}),x.jsx("span",{children:"Return Home"})]})]}),x.jsx("div",{className:"w-1/2 lg:h-full flex lg:items-end justify-center p-4",children:x.jsxs("svg",{className:"w-full text-blue-600",xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 1120.59226 777.91584",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[x.jsx("title",{children:"not found"}),x.jsx("circle",{cx:"212.59226",cy:"103",r:"64",fill:"#ff6584"}),x.jsx("path",{d:"M563.68016,404.16381c0,151.01141-89.77389,203.73895-200.51559,203.73895S162.649,555.17522,162.649,404.16381,363.16457,61.04208,363.16457,61.04208,563.68016,253.1524,563.68016,404.16381Z",transform:"translate(-39.70387 -61.04208)",fill:"#cbd5e1"}),x.jsx("polygon",{points:"316.156 523.761 318.21 397.378 403.674 241.024 318.532 377.552 319.455 320.725 378.357 207.605 319.699 305.687 319.699 305.687 321.359 203.481 384.433 113.423 321.621 187.409 322.658 0 316.138 248.096 316.674 237.861 252.547 139.704 315.646 257.508 309.671 371.654 309.493 368.625 235.565 265.329 309.269 379.328 308.522 393.603 308.388 393.818 308.449 394.99 293.29 684.589 313.544 684.589 315.974 535.005 389.496 421.285 316.156 523.761",fill:"#3f3d56"}),x.jsx("path",{d:"M1160.29613,466.01367c0,123.61-73.4842,166.77-164.13156,166.77s-164.13156-43.16-164.13156-166.77S996.16457,185.15218,996.16457,185.15218,1160.29613,342.40364,1160.29613,466.01367Z",transform:"translate(-39.70387 -61.04208)",fill:"#cbd5e1"}),x.jsx("polygon",{points:"950.482 552.833 952.162 449.383 1022.119 321.4 952.426 433.154 953.182 386.639 1001.396 294.044 953.382 374.329 953.382 374.329 954.741 290.669 1006.369 216.952 954.954 277.514 955.804 124.11 950.467 327.188 950.906 318.811 898.414 238.464 950.064 334.893 945.173 428.327 945.027 425.847 884.514 341.294 944.844 434.608 944.232 446.293 944.123 446.469 944.173 447.428 931.764 684.478 948.343 684.478 950.332 562.037 1010.514 468.952 950.482 552.833",fill:"#3f3d56"}),x.jsx("ellipse",{cx:"554.59226",cy:"680.47903",rx:"554.59226",ry:"28.03433",fill:"#3f3d56"}),x.jsx("ellipse",{cx:"892.44491",cy:"726.79663",rx:"94.98858",ry:"4.80162",fill:"#3f3d56"}),x.jsx("ellipse",{cx:"548.71959",cy:"773.11422",rx:"94.98858",ry:"4.80162",fill:"#3f3d56"}),x.jsx("ellipse",{cx:"287.94432",cy:"734.27887",rx:"217.01436",ry:"10.96996",fill:"#3f3d56"}),x.jsx("circle",{cx:"97.08375",cy:"566.26982",r:"79",fill:"#2f2e41"}),x.jsx("rect",{x:"99.80546",y:"689.02332",width:"24",height:"43",transform:"translate(-31.32451 -62.31008) rotate(0.67509)",fill:"#2f2e41"}),x.jsx("rect",{x:"147.80213",y:"689.58887",width:"24",height:"43",transform:"translate(-31.31452 -62.87555) rotate(0.67509)",fill:"#2f2e41"}),x.jsx("ellipse",{cx:"119.54569",cy:"732.61606",rx:"7.5",ry:"20",transform:"translate(-654.1319 782.47948) rotate(-89.32491)",fill:"#2f2e41"}),x.jsx("ellipse",{cx:"167.55414",cy:"732.18168",rx:"7.5",ry:"20",transform:"translate(-606.25475 830.05533) rotate(-89.32491)",fill:"#2f2e41"}),x.jsx("circle",{cx:"99.31925",cy:"546.29477",r:"27",fill:"#fff"}),x.jsx("circle",{cx:"99.31925",cy:"546.29477",r:"9",fill:"#3f3d56"}),x.jsx("path",{d:"M61.02588,552.94636c-6.04185-28.64075,14.68758-57.26483,46.30049-63.93367s62.13813,11.14292,68.18,39.78367-14.97834,38.93-46.59124,45.59886S67.06774,581.58712,61.02588,552.94636Z",transform:"translate(-39.70387 -61.04208)",fill:"currentColor"}),x.jsx("path",{d:"M257.29613,671.38411c0,55.07585-32.73985,74.3063-73.13,74.3063q-1.40351,0-2.80255-.0312c-1.87139-.04011-3.72494-.1292-5.55619-.254-36.45135-2.57979-64.77127-22.79937-64.77127-74.02113,0-53.00843,67.73872-119.89612,72.827-124.84633l.00892-.00889c.19608-.19159.29409-.28516.29409-.28516S257.29613,616.30827,257.29613,671.38411Z",transform:"translate(-39.70387 -61.04208)",fill:"currentColor"}),x.jsx("path",{d:"M181.50168,737.26482l26.747-37.37367-26.81386,41.4773-.07125,4.29076c-1.87139-.04011-3.72494-.1292-5.55619-.254l2.88282-55.10258-.0223-.42775.049-.0802.27179-5.20415-26.88076-41.5798,26.96539,37.67668.06244,1.105,2.17874-41.63324-23.0132-42.96551,23.29391,35.6583,2.26789-86.31419.00892-.294v.28516l-.37871,68.064,22.91079-26.98321-23.00435,32.84678-.60595,37.27566L204.18523,621.958l-21.4805,41.259-.33863,20.723,31.05561-49.79149-31.17146,57.023Z",transform:"translate(-39.70387 -61.04208)",fill:"#3f3d56"}),x.jsx("circle",{cx:"712.48505",cy:"565.41532",r:"79",fill:"#2f2e41"}),x.jsx("rect",{x:"741.77716",y:"691.82355",width:"24",height:"43",transform:"translate(-215.99457 191.86399) rotate(-17.08345)",fill:"#2f2e41"}),x.jsx("rect",{x:"787.6593",y:"677.72286",width:"24",height:"43",transform:"matrix(0.95588, -0.29376, 0.29376, 0.95588, -209.82788, 204.72037)",fill:"#2f2e41"}),x.jsx("ellipse",{cx:"767.887",cy:"732.00275",rx:"20",ry:"7.5",transform:"translate(-220.8593 196.83312) rotate(-17.08345)",fill:"#2f2e41"}),x.jsx("ellipse",{cx:"813.47537",cy:"716.94619",rx:"20",ry:"7.5",transform:"translate(-214.42477 209.56103) rotate(-17.08345)",fill:"#2f2e41"}),x.jsx("circle",{cx:"708.52153",cy:"545.71023",r:"27",fill:"#fff"}),x.jsx("circle",{cx:"708.52153",cy:"545.71023",r:"9",fill:"#3f3d56"}),x.jsx("path",{d:"M657.35526,578.74316c-14.48957-25.43323-3.47841-59.016,24.59412-75.0092s62.57592-8.34055,77.06549,17.09268-2.39072,41.6435-30.46325,57.63671S671.84483,604.17639,657.35526,578.74316Z",transform:"translate(-39.70387 -61.04208)",fill:"currentColor"}),x.jsx("path",{d:"M611.29613,661.29875c0,50.55711-30.05368,68.20979-67.13,68.20979q-1.28835,0-2.57261-.02864c-1.71785-.03682-3.41933-.1186-5.10033-.23313-33.46068-2.36813-59.45707-20.92878-59.45707-67.948,0-48.65932,62.18106-110.05916,66.85186-114.60322l.00819-.00817c.18-.17587.27-.26177.27-.26177S611.29613,610.74164,611.29613,661.29875Z",transform:"translate(-39.70387 -61.04208)",fill:"currentColor"}),x.jsx("path",{d:"M541.72029,721.77424l24.55253-34.30732-24.6139,38.07426-.0654,3.93872c-1.71785-.03682-3.41933-.1186-5.10033-.23313l2.6463-50.58165-.02047-.39266.045-.07361.24949-4.77718-24.67531-38.16836,24.753,34.58547.05731,1.01433,2-38.21741-21.12507-39.44039L541.80616,625.928l2.08182-79.23247.00819-.26994v.26177l-.34764,62.47962,21.031-24.76934-21.11693,30.15184-.55624,34.21735,19.63634-32.839-19.71812,37.87389-.31085,19.0228,28.50763-45.70631-28.614,52.34448Z",transform:"translate(-39.70387 -61.04208)",fill:"#3f3d56"}),x.jsx("path",{d:"M875.29613,682.38411c0,55.07585-32.73985,74.3063-73.13,74.3063q-1.4035,0-2.80255-.0312c-1.87139-.04011-3.72494-.1292-5.55619-.254-36.45135-2.57979-64.77127-22.79937-64.77127-74.02113,0-53.00843,67.73872-119.89612,72.827-124.84633l.00892-.00889c.19608-.19159.29409-.28516.29409-.28516S875.29613,627.30827,875.29613,682.38411Z",transform:"translate(-39.70387 -61.04208)",fill:"currentColor"}),x.jsx("path",{d:"M799.50168,748.26482l26.747-37.37367-26.81386,41.4773-.07125,4.29076c-1.87139-.04011-3.72494-.1292-5.55619-.254l2.88282-55.10258-.0223-.42775.049-.0802.27179-5.20415L770.108,654.01076l26.96539,37.67668.06244,1.105,2.17874-41.63324-23.0132-42.96551,23.29391,35.6583,2.26789-86.31419.00892-.294v.28516l-.37871,68.064,22.91079-26.98321-23.00435,32.84678-.606,37.27566L822.18523,632.958l-21.4805,41.259-.33863,20.723,31.05561-49.79149-31.17146,57.023Z",transform:"translate(-39.70387 -61.04208)",fill:"#3f3d56"}),x.jsx("ellipse",{cx:"721.51694",cy:"656.82212",rx:"12.40027",ry:"39.5",transform:"translate(-220.83517 966.22323) rotate(-64.62574)",fill:"#2f2e41"}),x.jsx("ellipse",{cx:"112.51694",cy:"651.82212",rx:"12.40027",ry:"39.5",transform:"translate(-574.07936 452.71367) rotate(-68.15829)",fill:"#2f2e41"})]})})]})});function fi({children:t}){const{currentUser:e}=Jn(),n=Aa(),r=Ca(),{isFirstLogin:i}=Cr();return O.useEffect(()=>{e===null&&n("/r-social/login",{replace:!0})},[e]),O.useEffect(()=>{i&&n("/r-social/firstLogin",{replace:!0})},[r]),t}const Yd=({userBio:t,username:e,followers:n,following:r,userPic:i,userUID:s,isFollowing:o,setFlag:a,flag:l})=>{const{setIsFollowing:u,handleFollow:f,uzerFollowArray:p,uzerFollowObj:y}=Cr();O.useState(n);const{currentUser:_}=Jn(),E=(S,I)=>(S==null?void 0:S.length)<=I?S:(S==null?void 0:S.slice(0,I))+"...";return x.jsx(x.Fragment,{children:x.jsx("div",{className:"h-auto pt-6 mt-2  items-stretch ",children:x.jsxs("div",{className:"max-w-sm  mx-auto bg-white dark:bg-gray-900 rounded-lg overflow-hidden shadow-lg hover:shadow-2 hover:shadow-blue-300",children:[x.jsxs("div",{className:"border-b px-4 pb-6",children:[x.jsxs("div",{className:"text-center my-4",children:[x.jsx(qn,{to:`/r-social/profile/${e}`,children:x.jsx("img",{className:"h-32 w-32 rounded-full border-4 border-white dark:border-gray-800 mx-auto my-4",src:i||"https://i.pinimg.com/736x/90/d1/ac/90d1ac48711f63c6a290238c8382632f.jpg",alt:"Profile Pic"})}),x.jsxs("div",{className:"py-2",children:[x.jsx("h3",{className:"font-bold text-2xl text-gray-800 dark:text-white mb-1",children:E(e,20)}),x.jsxs("div",{className:"inline-flex text-gray-700 dark:text-gray-300 items-center",children:[x.jsx("svg",{className:"h-5 w-5 text-gray-400 dark:text-gray-600 mr-1",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:x.jsx("path",{className:"",d:"M5.64 16.36a9 9 0 1 1 12.72 0l-5.65 5.66a1 1 0 0 1-1.42 0l-5.65-5.66zm11.31-1.41a7 7 0 1 0-9.9 0L12 19.9l4.95-4.95zM12 14a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm0-2a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"})}),E(t,28)]})]})]}),x.jsx("div",{className:"flex gap-2 px-2",children:x.jsx("button",{onClick:S=>{f(S.target.value)},value:s,className:`flex-1 rounded-full bg-blue-600 dark:bg-blue-800 text-white dark:text-white antialiased font-bold hover:bg-blue-800 dark:hover:bg-blue-900 px-4 py-2 ${_.username===e?" invisible ":""}`,children:o!=null&&o.includes(s)?"Following":"Follow"})})]}),x.jsx("div",{className:"px-4 py-4",children:x.jsxs("div",{className:"flex gap-2 items-center text-gray-800 dark:text-gray-300 mb-4",children:[x.jsx(qn,{to:`/r-social/profile/${e}/followers`,children:x.jsx("svg",{className:"h-6 w-6 text-gray-600 dark:text-gray-400",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:x.jsx("path",{className:"",d:"M12 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10zm0-2a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm9 11a1 1 0 0 1-2 0v-2a3 3 0 0 0-3-3H8a3 3 0 0 0-3 3v2a1 1 0 0 1-2 0v-2a5 5 0 0 1 5-5h8a5 5 0 0 1 5 5v2z"})})}),x.jsxs("span",{children:[x.jsx("strong",{className:"text-black dark:text-white",children:n})," Followers "]}),x.jsx(qn,{to:`/r-social/profile/${e}/following`,children:x.jsx("svg",{className:"h-6 w-6 text-gray-600 dark:text-gray-400",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",children:x.jsx("path",{className:"",d:"M12 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10zm0-2a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm9 11a1 1 0 0 1-2 0v-2a3 3 0 0 0-3-3H8a3 3 0 0 0-3 3v2a1 1 0 0 1-2 0v-2a5 5 0 0 1 5-5h8a5 5 0 0 1 5 5v2z"})})}),x.jsxs("span",{children:[x.jsx("strong",{className:"text-black dark:text-white",children:r})," Following "]})]})})]})})})},Yae=Object.freeze(Object.defineProperty({__proto__:null,default:Yd},Symbol.toStringTag,{value:"Module"})),DN=()=>{let{isFollowing:t,userArray:e,setUsersIsFollowing:n,isUsersFollowing:r,userFollow:i,transformCloudinaryURL:s}=Cr(),{currentUser:o}=Jn();const u=Ca().pathname.match(/\/profile\/(.*)\/following$/),f=u?u[1]:null;return x.jsxs(x.Fragment,{children:[x.jsx("h1",{className:"text-center text-3xl font-mono text-blue-800 mt-2 ",children:"Following"}),x.jsx("br",{}),x.jsx("div",{className:"flex flex-wrap flex-row justify-around gap-x-1.5 gap-y-1.5 m-0 p-0 duration-800 ",children:f==="me"?x.jsx(x.Fragment,{children:e&&e.map((p,y)=>p.followers.includes(o==null?void 0:o.uid)?x.jsx(Yd,{username:p.username,followers:p.followers.length,following:p.following.length,userBio:p.bio,userPic:s(p.profilePictureURL),userUID:p.uid,isFollowing:t},y):null)}):x.jsx(x.Fragment,{children:e&&e.map((p,y)=>{const _=e.find(E=>E.username===f.replace("%20"," "));return _&&p.followers.includes(_.uid)?x.jsx(Yd,{username:p.username,followers:p.followers.length,following:p.following.length,userBio:p.bio,userPic:s(p.profilePictureURL),userUID:p.uid,isFollowing:t},y):null})})})]})},Xae=()=>{let{isFollowing:t,userArray:e,setUsersIsFollowing:n,isUsersFollowing:r,userFollow:i,transformCloudinaryURL:s}=Cr(),{currentUser:o}=Jn();const u=Ca().pathname.match(/\/profile\/(.*)\/followers$/),f=u?u[1]:null;return x.jsxs(x.Fragment,{children:[x.jsx("h1",{className:"text-center text-3xl font-mono text-blue-800 mt-2 ",children:"Followers"}),x.jsx("br",{}),x.jsx("div",{className:"flex flex-wrap flex-row justify-around gap-x-1.5 gap-y-1.5 m-0 p-0 duration-800 ",children:f==="me"?x.jsx(x.Fragment,{children:e&&e.map((p,y)=>p.following.includes(o==null?void 0:o.uid)?x.jsx(Yd,{username:p.username,followers:p.followers.length,following:p.following.length,userBio:p.bio,userPic:s(p.profilePictureURL),userUID:p.uid,isFollowing:t},y):null)}):x.jsx(x.Fragment,{children:e&&e.map((p,y)=>{const _=e.find(E=>E.username===f.replace("%20"," "));return _&&p.following.includes(_.uid)?x.jsx(Yd,{username:p.username,followers:p.followers.length,following:p.following.length,userBio:p.bio,userPic:s(p.profilePictureURL),userUID:p.uid,isFollowing:t},y):null})})})]})};function LN(t){return Gc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(t)}var $n=[];for(var tE=0;tE<256;++tE)$n.push((tE+256).toString(16).slice(1));function Jae(t,e=0){return($n[t[e+0]]+$n[t[e+1]]+$n[t[e+2]]+$n[t[e+3]]+"-"+$n[t[e+4]]+$n[t[e+5]]+"-"+$n[t[e+6]]+$n[t[e+7]]+"-"+$n[t[e+8]]+$n[t[e+9]]+"-"+$n[t[e+10]]+$n[t[e+11]]+$n[t[e+12]]+$n[t[e+13]]+$n[t[e+14]]+$n[t[e+15]]).toLowerCase()}var Hp,Zae=new Uint8Array(16);function ele(){if(!Hp&&(Hp=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Hp))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Hp(Zae)}var tle=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const MN={randomUUID:tle};function xj(t,e,n){if(MN.randomUUID&&!e&&!t)return MN.randomUUID();t=t||{};var r=t.random||(t.rng||ele)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Jae(r)}function nle(){const t=Aa(),{register:e,handleSubmit:n,formState:{errors:r,isSubmitting:i,isSubmitted:s}}=rh(),[o,a]=O.useState("0"),[l,u]=O.useState(null),[f,p]=O.useState(""),[y,_]=O.useState(""),[E,S]=O.useState(null),[I,R]=O.useState(null),w=O.useRef(null);new bj.Cloudinary({cloud_name:"dnpesnh4i"});const{currentUser:v,registerUzer:C,loginWithProvider:k,setCurrentUser:B,db:D,isFirstLogin:T}=Jn(),{setIsFirstLogin:N,transformCloudinaryURL:L}=Cr(),V=async pe=>{const X="https://api.cloudinary.com/v1_1/dnpesnh4i/image/upload",G=new FormData;G.append("file",pe),G.append("upload_preset","userProfile");try{return(await hn.post(X,G,{headers:{"Content-Type":"multipart/form-data"}})).data.secure_url}catch(Y){throw console.error("Cloudinary Upload Error:",Y),Y}},j=async(pe,X,G)=>{const Y=Ate(Lte,`posts/${v.uid}/${X}`),ce=Rte(Y,pe);ce.on("state_changed",ee=>{const $=ee.bytesTransferred/ee.totalBytes*100;a(Math.ceil($))},ee=>{console.error("Error  uploading video:",ee)},()=>{Cte(ce.snapshot.ref).then(ee=>{const $={posts:[...v.posts,{pid:X,title:G.title,desc:G.desc,mediaURL:ee,type:E,comments:[],postURL:`https://rohitskoujalagi.github.io/r-social/${v.username}/posts/`,likes:[],uid:v.uid}]};M(v.uid,$)})})},M=async(pe,X,G,Y)=>{try{const ce=St(D,"users"),ee=Hn(ce,br("uid","==",pe)),$=await jn(ee);$.empty||$.forEach(async K=>{const te=Vn(D,"users",K.id);await gs(te,X).then(()=>{const Ee={...v,posts:X.posts}}).catch(Ee=>{console.error(Ee)}),t("/r-social/profile/me")})}catch(ce){console.error("Error updating user: ",ce)}},le=async pe=>{if(p("Uploading..."),l)try{p("Uploading...");let X=xj();if(E==="image"){const G=await V(y);p("Upload successful!");const Y={posts:[...v.posts,{pid:X,title:pe.title,desc:pe.desc,mediaURL:L(G),type:E,comments:[],postURL:`http://localhost:5173/${v.username}/posts/${pe.title}`,likes:[],uid:v.uid}]};M(v.uid,Y,pe,G)}else j(I,X,pe)}catch(X){p("Upload failed"),console.error("Error uploading the image:",X)}else alert("Please select an image to upload")},me=pe=>{const X=pe.target.files[0];if(X){const G=X.size/1024/1024,Y=X.type,ce=["image/jpeg","image/png","image/jpg","video/mp4"];if(S(Y==="image/jpg"||Y==="image/jpeg"||Y==="image/png"?"image":Y==="video/mp4"?"video":null),G>10){alert("File size exceeds 10MB"),pe.target.value=null;return}if(!ce.includes(Y)){alert("File format not allowed. Please upload a JPG, JPEG, PNG, or MP4 file."),pe.target.value=null;return}const ee=URL.createObjectURL(X);_(X),R(X),u(ee)}};return O.useEffect(()=>{if(E==="video"){const pe=setTimeout(()=>{w.current.play()},2e3);return()=>clearTimeout(pe)}},[I]),x.jsxs("div",{className:"max-w-md mx-auto bg-orange-100 border-blue-700 shadow-lg rounded-lg p-6 mt-10 border-2",children:[x.jsx("h2",{className:"text-3xl font-semibold text-center text-gray-800 mb-4",children:"Post"}),x.jsxs("form",{onSubmit:n(le),className:"space-y-6",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),x.jsx("input",{type:"text",...e("title",{required:!0,minLength:{value:2,message:"Title must have atleast 2 characters"},maxLength:{value:120,message:"Password must have maximum 120 characters"}}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Title"}),r.title&&x.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.title.message})]}),x.jsx("br",{}),x.jsxs("div",{className:"relative w-32 h-32 mx-auto",children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center mb-2",children:"Image/Video"}),x.jsx("div",{className:"relative w-32 h-32 rounded-full overflow-hidden shadow-lg mx-auto",children:x.jsxs("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center text-gray-400",children:[l?E==="image"?x.jsx("img",{src:l,alt:"Post Preview",className:"w-full h-full object-cover rounded-full"}):"":x.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center text-gray-400",children:x.jsx(LN,{size:40,color:"blue"})}),x.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity cursor-pointer",children:[x.jsx(LN,{color:"white",size:40}),x.jsx("input",{type:"file",accept:"image/jpeg, image/png, image/jpg, video/mp4",...e("postMedia",{required:!1}),className:"absolute inset-0 opacity-0 cursor-pointer",onChange:me})]})]})})]}),x.jsx("div",{className:"text-center p-4   shadow-blue",children:I&&E==="video"&&l?x.jsxs(x.Fragment,{children:[x.jsx("p",{className:"",children:"Video Preview"}),x.jsx("video",{ref:w,className:"rounded-md shadow-2xl shadow-slate-500",controls:!0,preload:"true",loop:!0,src:l,children:" "})]}):""}),x.jsx("br",{}),x.jsx("br",{}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),x.jsx("textarea",{...e("desc",{required:!1,maxLength:200}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Tell us about the post (Max 200 characters)",rows:"3"})]}),x.jsxs("button",{type:"submit",disabled:i,className:"w-full bg-indigo-600 text-white font-medium py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 font-mono",children:["Post ",x.jsx("span",{children:i&&x.jsx(Ky,{type:"spin",color:"white",height:"20%",width:"20%"})})]})]}),f&&x.jsx("p",{className:"text-center text-3xl text-green-400",children:f}),f&&o&&x.jsxs("p",{className:"text-center text-3xl text-green-700",children:[o,"%"]})]})}const rle=()=>x.jsxs("div",{className:"rounded-lg w-48 h-32 flex flex-col justify-center items-center px-3 py-2 bg-gray-100 animate-pulse",children:[x.jsx("div",{className:"h-4 w-24 bg-gray-300 rounded mb-2"}),x.jsx("div",{className:"h-14 w-14 bg-gray-300 rounded-full"})]}),ile=()=>{const{db:t}=Jn(),[e,n]=O.useState(""),[r,i]=O.useState([]),[s,o]=O.useState([]),[a,l]=O.useState(!1),[u,f]=O.useState({user:!1,post:!1}),{transformCloudinaryURL:p}=Cr(),[y]=Tj(e),_=(E,S)=>S?E.split(new RegExp(`(${S})`,"gi")).map((R,w)=>R.toLowerCase()===S.toLowerCase()?x.jsx("span",{className:"text-blue-500",children:R},w):R):E;return O.useEffect(()=>{(async()=>{if((e===""||y==="")&&(i([]),o([])),!y)return;l(!0);const S=Hn(St(t,"users"),CX("username"),AX(50)),R=(await jn(S)).docs.map(C=>C.data()),w=R.filter(C=>C.username.toLowerCase().includes(y.toLowerCase())),v=R.flatMap(C=>C.posts).filter(C=>C.title.toLowerCase().includes(y.toLowerCase()));i(w),o(v),l(!1)})()},[y,t]),x.jsx(x.Fragment,{children:x.jsxs("div",{className:"max-w-md mx-auto bg-white shadow-lg rounded-lg p-6 mt-2 border-2",children:[x.jsx("h2",{className:"text-2xl font-semibold text-center text-gray-800 mb-4",children:"Search"}),x.jsxs("div",{className:"flex flex-col space-y-2",children:[x.jsx("div",{className:"relative",children:x.jsx("input",{type:"text",value:e,onChange:E=>{n(E.target.value),E.target.value===""&&f({user:!1,post:!1})},className:"w-full rounded-lg px-3 py-2 bg-gray-100 text-gray-800 outline-none focus:ring-2 ring-2 ring-blue-900 focus:ring-blue-500 focus:ring-opacity-50 shadow-sm",placeholder:"Search Users & Posts...🔍"})}),a?x.jsx(rle,{}):x.jsxs(x.Fragment,{children:[x.jsx("br",{}),"Users  ",x.jsx("div",{className:"flex flex-wrap gap-3 justify-start text-center",children:r.length>0?r.map(E=>x.jsx(qn,{to:`/r-social/profile/${E.username}`,children:x.jsxs("div",{className:"rounded-lg w-40 h-30 flex flex-col justify-center items-center px-3 py-2 bg-gray-100 hover:bg-gray-200 shadow-sm",children:[x.jsx("div",{className:"text-center mb-2",children:_(E.username,y)}),x.jsx("span",{className:"relative h-14 w-14 rounded-full overflow-hidden",children:x.jsx("img",{src:p(E.profilePictureURL),alt:"",className:"h-full w-full object-cover rounded-full"})})]})},E.uid)):y===""&&u.user&&x.jsxs("div",{className:"text-gray-500 w-full text-center",children:['No users found matching "',y,'".']})}),x.jsx("br",{}),"Posts",x.jsx("div",{className:"flex flex-wrap gap-3 justify-start text-center",children:s.length>0?s.map(E=>x.jsxs("div",{className:"rounded-lg w-60 h-auto flex flex-col justify-start items-start px-3 py-2 bg-gray-100 hover:bg-gray-200 shadow-sm",children:[x.jsx("div",{className:"font-medium text-blue-500 mb-1"}),x.jsx("div",{className:"text-gray-600 text-sm w-full ",children:_(E.title,y)})]},E.id)):y===""&&u.post&&x.jsxs("div",{className:"text-gray-500 w-full text-center",children:['No posts found matching "',y,'".']})})]})]})]})})};function sle(){const{currentUser:t}=Jn(),e=O.useRef(null),n=O.useRef(null),r=O.useRef(null);O.useRef(null);const i=async()=>{document.getElementById("localVideo").srcObject.getTracks().forEach(f=>f.stop()),un.close(),e.current&&e.current(),n.current&&n.current(),r.current&&r.current()},s=async()=>{const a=xj(),l={audio:!0,video:{width:600,height:500}};try{let u=await navigator.mediaDevices.getUserMedia(l);const f=document.getElementById("localVideo");f.srcObject=u,f.play();const p=St(Bi,"rooms"),y=Vn(p);async function _(S){var k;console.log(`++++ createOffer was called ++++ 
`,S,`
`);const I=new RTCPeerConnection({iceServers:[{urls:"stun:stun.relay.metered.ca:80"},{urls:"turn:asia.relay.metered.ca:80",username:"c20d0dff569efd5a90eac573",credential:"swfhQU7SNnjQeQ"},{urls:"turn:asia.relay.metered.ca:80?transport=tcp",username:"c20d0dff569efd5a90eac573",credential:"swfhQU7SNnjQeQ"},{urls:"turn:asia.relay.metered.ca:443",username:"c20d0dff569efd5a90eac573",credential:"swfhQU7SNnjQeQ"},{urls:"turns:asia.relay.metered.ca:443?transport=tcp",username:"c20d0dff569efd5a90eac573",credential:"swfhQU7SNnjQeQ"}]});u.getTracks().forEach(B=>{console.log("== Adding track: ==",B),I.addTrack(B,u)}),console.log(I);const R=St(y,`${S}`),w=Vn(R,a),v=await kb(y);console.log(v.id);try{if(v!=null&&v.exists()&&!((k=v==null?void 0:v.data())!=null&&k.offer)){const B=await I.createOffer();await I.setLocalDescription(B);const D={offer:{type:B.type,sdp:B.sdp}};bg(y,D).then(()=>{console.log("Nice")}).catch(T=>console.error(T)),console.log("Offer created and saved to Firestore")}}catch(B){console.error(B)}const C=St(w,"offerIceCandidates");I.onicecandidate=async B=>{B.candidate&&(console.log("===offerCandidates==="),console.log(B.candidate.toJSON()),await Tg(C,B.candidate.toJSON()))},e.current=ic(w,async B=>{if(B.exists()){const D=B.data();if(D!=null&&D.answer&&!I.currentRemoteDescription){const T=new RTCSessionDescription(D.answer);console.log("Answer was recieved and setRemoteDecsription"),I.setRemoteDescription(T).then(()=>{const N=St(w,"answerIceCandidates");n.current=ic(N,L=>{L.docChanges().forEach(async V=>{if(console.log("change in answerCandidates"),V.type==="added"){console.log("%%%% answerCandidates added %%%%");const j=new RTCIceCandidate(V.doc.data());console.log("Ice candidate of viewer ",j),await I.addIceCandidate(j)}})})}).catch(N=>console.log(N))}}else console.log("Viewer document not found:",w.id)}),I.addEventListener("icegatheringstatechange",()=>{console.log(`ICE gathering state changed: ${I.iceGatheringState}`)}),I.addEventListener("connectionstatechange",B=>{if(console.log(`Connection state change: ${I.connectionState}`),console.log(I.connectionState),I.connectionState==="connected"){e.current&&e.current(),n.current&&n.current(),console.log("connected 🥳");const D=St(Bi,"rooms"),T=St(y,`${S}`),N=Vn(T,a);console.log(N),kb(N).then(L=>{L.exists()?(console.log("doc exists"),dM(N).then(()=>{console.log("viewer deleted")}).catch(V=>{console.log("viewer not deleted"),console.error(V)})):console.log("doc empty")}).catch(L=>{console.error(L)})}}),I.addEventListener("signalingstatechange",()=>{console.log(`Signaling state change: ${I.signalingState}`)}),I.addEventListener("iceconnectionstatechange ",()=>{console.log(`ICE connection state change: ${I.iceConnectionState}`)}),I.addEventListener("track",B=>{console.log(`ICE connection state change: ${I.iceConnectionState}`),console.log(B)}),I.oniceconnectionstatechange=()=>{console.log(`ICE connection state change: ${I.iceConnectionState}`),I.iceConnectionState==="failed"?(console.error("ICE connection failed. Restarting ICE..."),I.restartIce()):I.iceConnectionState==="disconnected"&&console.warn("ICE connection is disconnected.")}}const E=St(Bi,"users");try{const S=Hn(E,br("uid","==",t==null?void 0:t.uid)),I=await jn(S);if(I.empty){console.log("No user found with the provided UID.");return}I.forEach(async R=>{const w=Vn(Bi,"users",R.id);await gs(w,{roomID:y.id,viewerDocId:a}),console.log("User ID updated successfully for:",R.id)})}catch(S){console.error("Error updating user ID:",S)}await bg(y,{broadcasterId:t==null?void 0:t.uid}),console.log(t==null?void 0:t.uid),r.current=ic(y,S=>{if(S.exists()){console.log("change in viewer list ");const I=S==null?void 0:S.data();let R=I==null?void 0:I.viewers;R!==void 0&&(console.log("Current viewers:",R),console.log("recently added viewer 🕶️👓",R.slice(-1)),_(R==null?void 0:R.slice(-1)))}},S=>{console.error("Error getting document:",S)})}catch(u){console.log(u)}},o=()=>{};return x.jsxs(x.Fragment,{children:[x.jsx("button",{className:"text-2xl mx-8 rounded-md p-3 my-3 bg-red-500",onClick:i,children:"Stop"}),x.jsx("video",{id:"localVideo",width:1280,height:720,className:"mx-auto border-cyan-500 rounded-2xl border-4",autoPlay:!0,playsInline:!0,muted:!0}),x.jsx("button",{className:"text-2xl mx-8 rounded-md p-3 my-3 bg-green-300",onClick:s,children:"Go Live 🔴"}),x.jsx("button",{className:"text-2xl mx-8 rounded-md p-3 my-3 bg-green-300",onClick:o,children:"End Live"})]})}function ole(){const{userArray:t,setUserArray:e}=Cr();return x.jsxs(x.Fragment,{children:[x.jsx("h1",{className:"text-3xl text-center text-blue-600",children:"Live sessions going on"}),t&&t.map((n,r,i)=>{if(n.roomID!=="")return x.jsx(qn,{children:n.roomID})})]})}const ale=lH([{path:"/r-social/",element:x.jsx(x.Fragment,{children:x.jsxs(fi,{children:[x.jsx(kr,{}),x.jsx(Kse,{})]})})},{path:"/r-social/firstLogin",element:x.jsx(Sj,{})},{path:"/r-social/setting",element:x.jsx(x.Fragment,{children:x.jsx(fi,{children:"Not yet made"})})},{path:"/r-social/profile",children:[{path:":username",element:x.jsx(x.Fragment,{children:x.jsxs(fi,{children:[x.jsx(kr,{}),x.jsx(Gae,{})]})})}]},{path:"/r-social/profile/me/following",element:x.jsx(x.Fragment,{children:x.jsxs(fi,{children:[x.jsx(kr,{}),x.jsx(DN,{})]})})},{path:"/r-social/profile/posts",element:x.jsx(x.Fragment,{children:x.jsxs(fi,{children:[x.jsx(kr,{}),x.jsx(hd,{user:"all"})]})})},{path:"/r-social/profile/me/posts",element:x.jsx(x.Fragment,{children:x.jsxs(fi,{children:[x.jsx(kr,{}),x.jsx(hd,{user:"me"})]})})},{path:"/r-social/profile/:username/following",element:x.jsx(x.Fragment,{children:x.jsxs(fi,{children:[x.jsx(kr,{}),x.jsx(DN,{})]})})},{path:"/r-social/profile/:username/posts",element:x.jsx(x.Fragment,{children:x.jsxs(fi,{children:[x.jsx(kr,{}),x.jsx(hd,{user:"specific"})]})})},{path:"/r-social/profile/:username/followers",element:x.jsx(x.Fragment,{children:x.jsxs(fi,{children:[x.jsx(kr,{}),x.jsx(Xae,{})]})})},{path:"/r-social/profile/:username/goLive",element:x.jsx(x.Fragment,{children:x.jsxs(fi,{children:[x.jsx(kr,{}),x.jsx(sle,{})]})})},{path:"/r-social/live",element:x.jsxs(x.Fragment,{children:[x.jsx(kr,{}),x.jsx(ole,{})]})},{path:"/r-social/search",element:x.jsx(x.Fragment,{children:x.jsxs(fi,{children:[x.jsx(kr,{}),x.jsx(ile,{})]})})},{path:"/r-social/register",element:x.jsxs(x.Fragment,{children:[x.jsx(kr,{}),x.jsx(Kte,{})]})},{path:"/r-social/post",element:x.jsx(x.Fragment,{children:x.jsxs(fi,{children:[x.jsx(kr,{}),x.jsx(nle,{})]})})},{path:"/r-social/login",element:x.jsxs(x.Fragment,{children:[x.jsx(kr,{}),x.jsx(Wte,{})]})},{path:"*",element:x.jsx(x.Fragment,{children:x.jsx(Qae,{})})}]);YD(document.getElementById("root")).render(x.jsx(x.Fragment,{children:x.jsx(Mte,{children:x.jsxs(qte,{children:[x.jsx(gH,{router:ale}),x.jsx(AG,{})]})})}));
